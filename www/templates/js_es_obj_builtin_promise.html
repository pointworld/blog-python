{% extends 'c-word.html' %}

{% block title %} Web - JS | ES | obj | builtin | xxx {% endblock title %}

{% block point1 %}
<article contenteditable="true">
    <div id="maincontent">
      <div><p style="font-family: &quot;Proxima Nova&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC Regular&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, å¾®è½¯é›…é»‘, Arial, sans-serif;"><span style="font-weight: 700; background-color: yellow;">计算机 | 全栈 | 前端 | JS | ES | Obj | Built-in | Promise</span></p></div><div><div style=""><h1 style="margin-bottom: 24px; padding: 0px; border: 0px;" id="blogTitle0"><span style="border-style: initial; border-color: initial; border-image: initial;">promise</span></h1><h2 id="blogTitle1"><b>简介</b></h2><p style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">Any promise 对象 is in one of three mutually exclusive states:&nbsp;<em>fulfilled</em>,&nbsp;<em>rejected</em>, and&nbsp;<em>pending</em>:</p><ul style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;"><li>A promise&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">p</code>&nbsp;is fulfilled if&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">p.then(f, r)</code>&nbsp;will immediately enqueue a Job to call the function&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">f</code>.</li><li>A promise&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">p</code>&nbsp;is rejected if&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">p.then(f, r)</code>&nbsp;will immediately enqueue a Job to call the function&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">r</code>.</li><li>A promise is pending if it is neither fulfilled nor rejected.</li></ul><p style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">A promise is said to be&nbsp;<em>settled</em>&nbsp;if it is not pending, i.e. if it is either fulfilled or rejected.</p><p style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">A promise is&nbsp;<em>resolved</em>&nbsp;if it is settled or if it has been “locked in” to match the state of another promise. Attempting to resolve or reject a resolved promise has no effect. A promise is&nbsp;<em>unresolved</em>&nbsp;if it is not resolved. An unresolved promise is always in the pending state. A resolved promise may be pending, fulfilled or rejected.</p><p id="概述" style="font-weight: inherit; color: rgb(102, 102, 102); margin-bottom: 24px; padding: 0px; border: 0px;"><span style="border-style: initial; border-color: initial; border-image: initial;">Promise&nbsp;</span>对象用于异步计算。一个 Promise 表示一个<span style="border-style: initial; border-color: initial; border-image: initial;">现在</span>或<span style="border-style: initial; border-color: initial; border-image: initial;">将来</span>可用<span style="border-style: initial; border-color: initial; border-image: initial;">，</span>亦或<span style="border-style: initial; border-color: initial; border-image: initial;">永远不</span>可用的值。</p><p id="概述" style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;"><span style="border-style: initial; border-color: initial; border-image: initial;">Promise&nbsp;</span>对象用于一个异步操作的最终完成（或失败）及其结果值的表示。(简单点说就是处理异步请求。我们经常会做些承诺，如果我赢了你就嫁给我，如果输了我就嫁给你之类的诺言。这就是 promise 的中文含义：诺言，一个成功，一个失败。)</p><div style=""><span style="border-style: initial; border-color: initial; border-image: initial;"><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">Promise 是异步编程的一种解决方案，比传统的解决方案——回调函数和事件——更合理和更强大。它由社区最早提出和实现，ES6 将其写进了语言标准，统一了用法，原生提供了<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">所谓<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>，简单说就是一个容器，里面保存着某个未来才会结束的事件（通常是一个异步操作）的结果。从语法上说，Promise 是一个对象，从它可以获取异步操作的消息。Promise 提供统一的 API，各种异步操作都可以用同样的方法进行处理。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象有以下两个特点。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">（1）对象的状态不受外界影响。<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象代表一个异步操作，有三种状态：<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">pending</code>（进行中）、<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">fulfilled</code>（已成功）和<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">rejected</code>（已失败）。只有异步操作的结果，可以决定当前是哪一种状态，任何其他操作都无法改变这个状态。这也是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>这个名字的由来，它的英语意思就是“承诺”，表示其他手段无法改变。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">（2）一旦状态改变，就不会再变，任何时候都可以得到这个结果。<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象的状态改变，只有两种可能：从<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">pending</code>变为<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">fulfilled</code>和从<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">pending</code>变为<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">rejected</code>。只要这两种情况发生，状态就凝固了，不会再变了，会一直保持这个结果，这时就称为 resolved（已定型）。如果改变已经发生了，你再对<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象添加回调函数，也会立即得到这个结果。这与事件（Event）完全不同，事件的特点是，如果你错过了它，再去监听，是得不到结果的。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，为了行文方便，本章后面的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolved</code>统一只指<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">fulfilled</code>状态，不包含<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">rejected</code>状态。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">有了<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象，就可以将异步操作以同步操作的流程表达出来，避免了层层嵌套的回调函数。此外，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象提供统一的接口，使得控制异步操作更加容易。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>也有一些缺点。首先，无法取消<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>，一旦新建它就会立即执行，无法中途取消。其次，如果不设置回调函数，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>内部抛出的错误，不会反应到外部。第三，当处于<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">pending</code>状态时，无法得知目前进展到哪一个阶段（刚刚开始还是即将完成）。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">如果某些事件不断地反复发生，一般来说，使用&nbsp;<a href="https://nodejs.org/api/stream.html" style="background-position: initial; color: rgb(70, 130, 190);">Stream</a>&nbsp;模式是比部署<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>更好的选择。</p><h2 id="blogTitle2" class="基本用法" style="margin-top: 50px; margin-bottom: 0px; padding-top: 20px; padding-bottom: 0px; border-top: 2px solid rgb(102, 102, 102); counter-increment: section 1;"><b>基本用法</b></h2><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">ES6 规定，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象是一个构造函数，用来生成<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>实例。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面代码创造了一个<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>实例。</p><pre class=" language-javascript" style="color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const promise <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Promise</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> reject<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
 <span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // ... some code
</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">/* 异步操作成功 */</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token function">resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>value<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span> <span class="token keyword" style="color: rgb(102, 217, 239);">else</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token function">reject<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>error<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>构造函数接受一个函数作为参数，该函数的两个参数分别是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolve</code>和<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">reject</code>。它们是两个函数，由 JavaScript 引擎提供，不用自己部署。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolve</code>函数的作用是，将<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象的状态从“未完成”变为“成功”（即从 pending 变为 resolved），在异步操作成功时调用，并将异步操作的结果，作为参数传递出去；<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">reject</code>函数的作用是，将<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象的状态从“未完成”变为“失败”（即从 pending 变为 rejected），在异步操作失败时调用，并将异步操作报出的错误，作为参数传递出去。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>实例生成以后，可以用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">then</code>方法分别指定<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolved</code>状态和<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">rejected</code>状态的回调函数。</p><pre class=" language-javascript" style="color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">promise<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">then<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>value<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
 <span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // success
</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>error<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
 <span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // failure
</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">then</code>方法可以接受两个回调函数作为参数。第一个回调函数是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象的状态变为<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolved</code>时调用，第二个回调函数是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象的状态变为<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">rejected</code>时调用。其中，第二个函数是可选的，不一定要提供。这两个函数都接受<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象传出的值作为参数。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是一个<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象的简单例子。</p><pre class=" language-javascript" style="color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token function">timeout<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>ms<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Promise</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> reject<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token function">setTimeout<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> ms<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'done'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>

<span class="token function">timeout<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token number" style="color: rgb(174, 129, 255);">100</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">then<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>value<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>value<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">timeout</code>方法返回一个<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>实例，表示一段时间以后才会发生的结果。过了指定的时间（<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">ms</code>参数）以后，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>实例的状态变为<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolved</code>，就会触发<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">then</code>方法绑定的回调函数。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">Promise 新建后就会立即执行。</p><pre class=" language-javascript" style="color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> promise <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Promise</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> reject<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">'Promise'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token function">resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

promise<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">then<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">'resolved.'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">'Hi!'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// Promise
</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">// Hi!
</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">// resolved
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<span style="background-color: yellow;">Promise 新建后立即执行，所以首先输出的是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>。然后，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px; padding-left: 3px; padding-right: 3px;">then</code>方法指定的回调函数，将在当前脚本所有同步任务执行完才会执行，所以<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolved</code>最后输出。</span></p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是异步加载图片的例子。</p><pre class=" language-javascript" style="color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token function">loadImageAsync<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>url<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Promise</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> reject<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    const image <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Image</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

    image<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>onload <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      <span class="token function">resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>image<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

    image<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>onerror <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      <span class="token function">reject<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Error</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string">'Could not load image at '</span> <span class="token operator" style="color: rgb(249, 38, 114);">+</span> url<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

    image<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>src <span class="token operator" style="color: rgb(249, 38, 114);">=</span> url<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，使用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>包装了一个图片加载的异步操作。如果加载成功，就调用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolve</code>方法，否则就调用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">reject</code>方法。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是一个用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象实现的 Ajax 操作的例子。</p><pre class=" language-javascript" style="color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const getJSON <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>url<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  const promise <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Promise</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> reject<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    const handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">this</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>readyState <span class="token operator" style="color: rgb(249, 38, 114);">!</span><span class="token operator" style="color: rgb(249, 38, 114);">==</span> <span class="token number" style="color: rgb(174, 129, 255);">4</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
        <span class="token keyword" style="color: rgb(102, 217, 239);">return</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
      <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">this</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>status <span class="token operator" style="color: rgb(249, 38, 114);">===</span> <span class="token number" style="color: rgb(174, 129, 255);">200</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
        <span class="token function">resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token keyword" style="color: rgb(102, 217, 239);">this</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>response<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
      <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span> <span class="token keyword" style="color: rgb(102, 217, 239);">else</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
        <span class="token function">reject<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Error</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">this</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>statusText<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
      <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    const client <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    client<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">open<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">"GET"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> url<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    client<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>onreadystatechange <span class="token operator" style="color: rgb(249, 38, 114);">=</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    client<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>responseType <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token string">"json"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    client<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">setRequestHeader<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">"Accept"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">"application/json"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    client<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">send<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

  <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> promise<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token function">getJSON<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">"/posts.json"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">then<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>json<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">'Contents: '</span> <span class="token operator" style="color: rgb(249, 38, 114);">+</span> json<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>error<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">error<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">'出错了'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> error<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">getJSON</code>是对 XMLHttpRequest 对象的封装，用于发出一个针对 JSON 数据的 HTTP 请求，并且返回一个<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise</code>对象。需要注意的是，在<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">getJSON</code>内部，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolve</code>函数和<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">reject</code>函数调用时，都带有参数。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">如果调用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolve</code>函数和<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">reject</code>函数时带有参数，那么它们的参数会被传递给回调函数。<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">reject</code>函数的参数通常是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Error</code>对象的实例，表示抛出的错误；<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolve</code>函数的参数除了正常的值以外，还可能是另一个 Promise 实例，比如像下面这样。</p><pre class=" language-javascript" style="color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const p1 <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Promise</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> reject<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
 <span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // ...
</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

const p2 <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Promise</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> reject<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
 <span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // ...
</span>  <span class="token function">resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>p1<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span>
</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p1</code>和<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p2</code>都是 Promise 的实例，但是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p2</code>的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolve</code>方法将<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p1</code>作为参数，即一个异步操作的结果是返回另一个异步操作。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，这时<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p1</code>的状态就会传递给<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p2</code>，也就是说，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p1</code>的状态决定了<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p2</code>的状态。如果<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p1</code>的状态是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">pending</code>，那么<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p2</code>的回调函数就会等待<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p1</code>的状态改变；如果<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p1</code>的状态已经是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolved</code>或者<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">rejected</code>，那么<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p2</code>的回调函数将会立刻执行。</p><pre class=" language-javascript" style="color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const p1 <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Promise</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> reject<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token function">setTimeout<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> <span class="token function">reject<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Error</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string">'fail'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token number" style="color: rgb(174, 129, 255);">3000</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span>

const p2 <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Promise</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> reject<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token function">setTimeout<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> <span class="token function">resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>p1<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token number" style="color: rgb(174, 129, 255);">1000</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span>

p2
  <span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">then<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>result <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>result<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token keyword" style="color: rgb(102, 217, 239);">catch</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>error <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>error<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// Error: fail
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p1</code>是一个 Promise，3 秒之后变为<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">rejected</code>。<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p2</code>的状态在 1 秒之后改变，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolve</code>方法返回的是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p1</code>。由于<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p2</code>返回的是另一个 Promise，导致<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p2</code>自己的状态无效了，由<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p1</code>的状态决定<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p2</code>的状态。所以，后面的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">then</code>语句都变成针对后者（<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p1</code>）。又过了 2 秒，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p1</code>变为<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">rejected</code>，导致触发<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">catch</code>方法指定的回调函数。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，调用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolve</code>或<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">reject</code>并不会终结 Promise 的参数函数的执行。</p><pre class=" language-javascript" style="color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Promise</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> reject<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token function">resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token number" style="color: rgb(174, 129, 255);">2</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">then<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>r <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>r<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// 2
</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">// 1
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，调用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolve(1)</code>以后，后面的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">console.log(2)</code>还是会执行，并且会首先打印出来。这是因为立即 resolved 的 Promise 是在本轮事件循环的末尾执行，总是晚于本轮循环的同步任务。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">一般来说，调用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolve</code>或<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">reject</code>以后，Promise 的使命就完成了，后继操作应该放到<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">then</code>方法里面，而不应该直接写在<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">resolve</code>或<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">reject</code>的后面。所以，最好在它们前面加上<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">return</code>语句，这样就不会有意外。</p><pre class=" language-javascript" style="color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Promise</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> reject<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token function">resolve<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
 <span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 后面的语句不会执行
</span>  console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token number" style="color: rgb(174, 129, 255);">2</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span></code></pre></span></div><h2 style="margin-bottom: 24px; padding: 0px; border: 0px;" id="blogTitle3"><span style="border-style: initial; border-color: initial; border-image: initial;">Promise 构造器</span></h2><div><span style="border-style: initial; border-color: initial; border-image: initial;">Promise ( executor )<br></span></div><div><span style="border-style: initial; border-color: initial; border-image: initial;"><p style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">The Promise&nbsp;<emu-xref href="#构造器" id="_ref_8111"><a href="file:///D:/point-w/ecma262-cn/src/abc%20-%20%E5%89%AF%E6%9C%AC%20(14)%20-%20%E5%89%AF%E6%9C%AC.html#%E6%9E%84%E9%80%A0%E5%99%A8" style="text-decoration-line: none; color: rgb(32, 108, 167);">构造器</a></emu-xref>&nbsp;is the&nbsp;<dfn>%Promise%</dfn>&nbsp;内部对象 and the 初始值 of the&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">Promise</code>&nbsp;property of the&nbsp;<emu-xref href="#global-object" id="_ref_8112"><a href="file:///D:/point-w/ecma262-cn/src/abc%20-%20%E5%89%AF%E6%9C%AC%20(14)%20-%20%E5%89%AF%E6%9C%AC.html#global-object" style="text-decoration-line: none; color: rgb(32, 108, 167);">全局对象</a></emu-xref>. When called as a&nbsp;<emu-xref href="#构造器" id="_ref_8113"><a href="file:///D:/point-w/ecma262-cn/src/abc%20-%20%E5%89%AF%E6%9C%AC%20(14)%20-%20%E5%89%AF%E6%9C%AC.html#%E6%9E%84%E9%80%A0%E5%99%A8" style="text-decoration-line: none; color: rgb(32, 108, 167);">构造器</a></emu-xref>&nbsp;它会创建和初始化一个新的 promise 对象.&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">Promise</code>&nbsp;is not intended to be called as a function and will 抛出一个异常 when called in that manner.</p><p style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">The&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">Promise</code>&nbsp;<emu-xref href="#构造器" id="_ref_8114"><a href="file:///D:/point-w/ecma262-cn/src/abc%20-%20%E5%89%AF%E6%9C%AC%20(14)%20-%20%E5%89%AF%E6%9C%AC.html#%E6%9E%84%E9%80%A0%E5%99%A8" style="text-decoration-line: none; color: rgb(32, 108, 167);">构造器</a></emu-xref>&nbsp;被设计成可被子类化的. 它可以用作 the value in an&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">extends</code>&nbsp;clause of a class definition. 子类构造器 that 旨在继承特定的&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">Promise</code>&nbsp;behaviour must include a&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">super</code>&nbsp;call to the&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">Promise</code>&nbsp;<emu-xref href="#构造器" id="_ref_8115"><a href="file:///D:/point-w/ecma262-cn/src/abc%20-%20%E5%89%AF%E6%9C%AC%20(14)%20-%20%E5%89%AF%E6%9C%AC.html#%E6%9E%84%E9%80%A0%E5%99%A8" style="text-decoration-line: none; color: rgb(32, 108, 167);">构造器</a></emu-xref>&nbsp;以便创建和初始化子类实例 with the 内部状态 necessary to support the&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">Promise</code>&nbsp;and&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">Promise.prototype</code>&nbsp;内置方法.</p></span></div><pre class="syntaxbox" style="color: rgb(59, 60, 64); font-weight: inherit; margin-top: 0px; margin-bottom: 20px; padding: 15px; background-color: rgb(221, 228, 233); font-size: 15px; line-height: 19px; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; border-width: 0px 0px 0px 5px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: rgb(85, 138, 187); direction: ltr; hyphens: none; white-space: pre-wrap;">new Promise(
&nbsp;   /* executor */
    function(resolve, reject) {...}
);</pre><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px;"><dt style="color: rgb(102, 102, 102); font-weight: inherit; cursor: pointer; margin: 0px; padding: 0px; border: 0px;">executor</dt><dd style="color: rgb(102, 102, 102); font-weight: inherit; margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"></dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">executor 是一个带有&nbsp;<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">resolve</span></font>&nbsp;和&nbsp;<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">reject</span></font>&nbsp;两个参数的函数&nbsp;。<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">executor</span></font>&nbsp;函数在 Promise 构造函数执行时同步执行（executor 函数在 Promise 构造函数返回新建对象前被调用）。<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">resolve</span></font>&nbsp;和&nbsp;<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">reject</span></font>&nbsp;函数被调用时，分别将 promise 的状态改为&nbsp;<span style="margin: 0px; padding: 0px; border: 0px;">fulfilled（</span>完成）或 rejected（失败）。executor 内部通常会执行一些异步操作，一旦完成，可以调用 resolve 函数来将 promise 状态改成&nbsp;<span style="margin: 0px; padding: 0px; border: 0px;">fulfilled</span>，或者在发生错误时将它的状态改为 rejected。</dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">如果在 executor 函数中抛出一个错误，那么该promise 状态为 rejected。executor 函数的返回值被忽略。</dd></dl><p style="margin-top: 0px; margin-bottom: 12px; line-height: 1; overflow-wrap: break-word; padding: 0px; border: 0px;"><b>描述</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;"><span style="border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Promise</span>&nbsp;对象是一个代理对象（代理一个值），被代理的值在 Promise 对象创建时可能是未知的。它允许你为异步操作的成功和失败分别绑定相应的处理方法（handlers）。 这让异步方法可以像同步方法那样返回值，但并不是立即返回最终执行结果，而是一个能代表未来出现的结果的 promise 对象</p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;">一个&nbsp;<font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">Promise</span></font>有以下几种状态:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem;"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><span style="margin: 0px; padding: 0px; border: 0px;">pending</span>: 初始状态，不是成功或失败状态。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><span style="margin: 0px; padding: 0px; border: 0px;">fulfilled</span>: 意味着操作成功完成。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><span style="margin: 0px; padding: 0px; border: 0px;">rejected</span>: 意味着操作失败。</li></ul><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;">pending 状态的 Promise 对象可能触发 fulfilled 状态并传递一个值给相应的状态处理方法，也可能触发失败状态（rejected）并传递失败信息。当其中任一种情况出现时，Promise 对象的&nbsp;<font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">then</span></font>&nbsp;方法绑定的处理方法<span style="margin: 0px; padding: 0px; border: 0px; line-height: 1.5;">（</span>handlers&nbsp;<span style="margin: 0px; padding: 0px; border: 0px; line-height: 1.5;">）就会被调用（then 方法包含两个参数：onfulfilled 和 onrejected，它们都是 Function 类型。当 Promise 状态为&nbsp;</span><span style="margin: 0px; padding: 0px; border: 0px;">fulfilled&nbsp;</span><span style="margin: 0px; padding: 0px; border: 0px; line-height: 1.5;">时，调用 then 的 onfulfilled 方法，当Promise状态为&nbsp;</span><span style="margin: 0px; padding: 0px; border: 0px;">rejected&nbsp;</span><span style="margin: 0px; padding: 0px; border: 0px; line-height: 1.5;">时，调用 then 的 onrejected 方法， 所以在异步操作的完成和绑定处理方法之间不存在竞争）。</span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;">因为&nbsp;<span style="margin: 0px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/then" title="then() 方法返回一个&nbsp;&nbsp;Promise 。它最多需要有两个参数：Promise 的成功和失败情况的回调函数。" style="margin: 0px; padding: 0px; border: 0px; border-radius: 2px; overflow-wrap: break-word;"><font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">Promise.prototype.then</span></font></a><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">&nbsp;</span></span>和&nbsp;&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch" title="catch()&nbsp;方法返回一个Promise，只处理拒绝的情况。它的行为与调用Promise.prototype.then(undefined, onRejected) 相同。" style="margin: 0px; padding: 0px; border: 0px; border-radius: 2px; overflow-wrap: break-word;"><font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">Promise.prototype.catch</span></font></a><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">&nbsp;方法返回 promise 对象，所以它们可以被链式调用。</span></p><p style="color: rgb(102, 102, 102); font-weight: inherit; margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"><img src="data:image/png;base64,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"><br></p><h3 style="" id="blogTitle4"><span style="font-weight: 700;">静态属性</span></h3><p><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">[[Prototype]] 内部属性的值 of the&nbsp;</span><code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre; color: rgb(17, 17, 17); font-size: 18px;">Promise</code><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">&nbsp;</span><emu-xref href="#构造器" id="_ref_8127" style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;"><a href="file:///D:/point-w/ecma262-cn/src/abc%20-%20%E5%89%AF%E6%9C%AC%20(14)%20-%20%E5%89%AF%E6%9C%AC.html#%E6%9E%84%E9%80%A0%E5%99%A8" style="text-decoration-line: none; color: rgb(32, 108, 167);">构造器</a></emu-xref><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">&nbsp;is the 内部对象&nbsp;</span><emu-xref href="#sec-properties-of-the-function-prototype-object" id="_ref_8128" style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;"><a href="file:///D:/point-w/ecma262-cn/src/abc%20-%20%E5%89%AF%E6%9C%AC%20(14)%20-%20%E5%89%AF%E6%9C%AC.html#sec-properties-of-the-function-prototype-object" style="text-decoration-line: none; color: rgb(32, 108, 167);">%FunctionPrototype%</a></emu-xref><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">.</span></p><h4 id="blogTitle5"><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">length</span></h4><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px;"><dt style="color: rgb(102, 102, 102); font-weight: inherit; cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Promise.length</span></font></dt><dd style="color: rgb(102, 102, 102); font-weight: inherit; margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">长度属性，其值为&nbsp;1 (构造器参数的数目).</dd><h4 style="" id="blogTitle6">prototype</h4><dt style="color: rgb(102, 102, 102); font-weight: inherit; cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace" style="margin: 0px; padding: 0px; border: 0px;"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/prototype" title="Promise.prototype&nbsp;属性表示 Promise 构造器的原型." style="margin: 0px; padding: 0px; border: 0px;">Promise.prototype</a></span></font></dt><dd style="color: rgb(102, 102, 102); font-weight: inherit; margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">表示&nbsp;<font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Promise</span></font>&nbsp;构造器的原型.</dd></dl><h3 style="" id="blogTitle7"><span style="font-weight: 700;">静态方法</span></h3><h4 id="blogTitle8"><span style="font-weight: 700;">all</span></h4><p><b>Promise.all ( iterable )</b></p><p><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">The&nbsp;</span><code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre; color: rgb(17, 17, 17); font-size: 18px;">all</code><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">&nbsp;function returns a new promise which is fulfilled with an array of fulfillment values for the passed promises, or rejects with the reason of the first passed promise that rejects. It resolves all elements of the passed iterable to promises.</span></p><p><font color="#111111" face="Cambria, Palatino Linotype, Palatino, Liberation Serif, serif"><span style="font-size: 18px;">这个方法返回一个新的 promise 对象实例，该 promise 对象在 iterable 参数对象里所有的 promise 对象都成功的时候才会触发成功，一旦有任何一个 iterable 里面的 promise 对象失败则立即触发该 promise 对象的失败。这个新的 promise 对象在触发成功状态以后，会把一个包含 iterable 里所有 promise 返回值的数组作为成功回调的返回值，顺序跟 iterable 的顺序保持一致；如果这个新的 promise 对象触发了失败状态，它会把 iterable 里第一个触发失败的 promise 对象的错误信息作为它的失败错误信息。Promise.all 方法常被用于处理多个 promise 对象的状态集合。</span></font></p><div><dl style="margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;"><dd style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255); margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"></dd><dt style="margin: 0px; padding: 0px; border: 0px;">iterable</dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">一个可迭代对象，例如一个&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Array" title="entries() 方法返回一个新的Array Iterator对象，该对象包含数组中每个索引的键/值对。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Array</span></a>&nbsp;或&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/String" title="此页面仍未被本地化, 期待您的翻译!" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">String</span></a>。</dd><div><b>返回值</b></div><ul style="list-style-position: initial; list-style-image: initial; margin: 0px 0px 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem;"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果传入的参数是一个空的可迭代对象，则返回一个<span style="border-style: initial; border-color: initial; border-image: initial;">已完成（already resolved）</span><font color="#333333" face="Arial, x-locale-body, sans-serif">状态的&nbsp;</font><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" title="Promise&nbsp;对象用于表示一个异步操作的最终状态（完成或失败），以及其返回的值。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">Promise</span></font></a>。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果传入的参数不包含任何&nbsp;<font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">promise</span></font>，则返回一个<span style="border-style: initial; border-color: initial; border-image: initial;">异步完成（asynchronously resolved）</span>&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" title="Promise&nbsp;对象用于表示一个异步操作的最终状态（完成或失败），以及其返回的值。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">Promise</span></font></a>。注意：Google Chrome 58 在这种情况下返回一个<span style="border-style: initial; border-color: initial; border-image: initial;">已完成（already resolved）</span>状态的&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" title="Promise&nbsp;对象用于表示一个异步操作的最终状态（完成或失败），以及其返回的值。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">Promise</span></font></a>。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">其它情况下返回一个<span style="border-style: initial; border-color: initial; border-image: initial;">处理中（pending）</span><font color="#333333" face="Arial, x-locale-body, sans-serif">的&nbsp;</font><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" title="Promise&nbsp;对象用于表示一个异步操作的最终状态（完成或失败），以及其返回的值。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">Promise</span></font></a>。这个返回的&nbsp;<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">promise</span></font>&nbsp;之后会在所有的&nbsp;<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">promise</span></font>&nbsp;都完成或有一个&nbsp;<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">promise</span></font>&nbsp;失败时<span style="border-style: initial; border-color: initial; border-image: initial;">异步</span><font color="#333333" face="Arial, x-locale-body, sans-serif">地变为完成或失败。&nbsp;见下方关于“Promise.all 的异步或同步”示例。返回值将会按照参数内的&nbsp;</font><font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">promise</span></font>&nbsp;顺序排列，而不是由调用&nbsp;<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">promise</span></font>&nbsp;的完成顺序决定。</li></ul><p><b>示例</b></p><p>Promise.all 等待所有都完成（或第一个失败）。<br></p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p1 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">3</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p2 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1337</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p3 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">100</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'foo'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 

Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">all</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span>p1<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p3<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>values <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>values<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// [3, 1337, "foo"] </span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></code></pre><p>如果参数中包含非 promise 值，这些值将被忽略，但仍然会被放在返回数组中（如果 promise 完成的话）：</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// this will be counted as if the iterable passed is empty, so it gets fulfilled</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">all</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">2</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">3</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// this will be counted as if the iterable passed contains only the resolved promise with value "444", so it gets fulfilled</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p2 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">all</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">2</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">3</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">444</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// this will be counted as if the iterable passed contains only the rejected promise with value "555", so it gets rejected</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p3 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">all</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">2</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">3</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">reject</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">555</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// using setTimeout we can execute code after the stack is empty</span>
<span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p3<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// logs</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Promise { &lt;state&gt;: "fulfilled", &lt;value&gt;: Array[3] }</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Promise { &lt;state&gt;: "fulfilled", &lt;value&gt;: Array[4] }</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Promise { &lt;state&gt;: "rejected", &lt;reason&gt;: 555 }</span></code></pre><p><b>Promise.all 的异步和同步</b><br></p><p>下面的例子中演示了 Promise.all 的异步性（如果传入的可迭代对象是空的，就是同步）：<br></p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// we are passing as argument an array of promises that are already resolved,</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// to trigger Promise.all as soon as possible</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> resolvedPromisesArray <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span>Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">33</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">44</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">all</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolvedPromisesArray<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// immediately logging the value of p</span>
console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// using setTimeout we can execute code after the stack is empty</span>
<span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'the stack is now empty'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// logs, in order:</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Promise { &lt;state&gt;: "pending" } </span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// the stack is now empty</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Promise { &lt;state&gt;: "fulfilled", &lt;value&gt;: Array[2] }</span></code></pre><p>如果 Promise.all 失败，也是一样的：<br></p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> mixedPromisesArray <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span>Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">33</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">reject</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">44</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">all</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>mixedPromisesArray<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'the stack is now empty'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// logs</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Promise { &lt;state&gt;: "pending" } </span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// the stack is now empty</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Promise { &lt;state&gt;: "rejected", &lt;reason&gt;: 44 }</span></code></pre><p>但是，Promise.all 当且仅当传入的可迭代对象为空时为同步：<br></p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">all</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// will be immediately resolved</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p2 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">all</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1337</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"hi"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// non-promise values will be ignored, but the evaluation will be done asynchronously</span>
console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
<span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'the stack is now empty'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// logs</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Promise { &lt;state&gt;: "fulfilled", &lt;value&gt;: Array[0] }</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Promise { &lt;state&gt;: "pending" }</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// the stack is now empty</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Promise { &lt;state&gt;: "fulfilled", &lt;value&gt;: Array[2] }</span></code></pre><p>Promise.all 的快速返回失败行为<br></p><p>Promise.all 在任意一个传入的 promise 失败时返回失败。例如，如果你传入的 promise中，有四个 promise 在一定的时间之后调用成功函数，有一个立即调用失败函数，那么 Promise.all 将立即变为失败。<br></p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p1 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1000</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'one'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p2 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">2000</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'two'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p3 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">3000</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'three'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p4 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">4000</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'four'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p5 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">reject</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'reject'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">all</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span>p1<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p3<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p4<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p5<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>values <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>values<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reason <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>reason<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">//From console:</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">//"reject"</span>

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">//You can also use .catch</span>
Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">all</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span>p1<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p3<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p4<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p5<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>values <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>values<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">catch</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>reason <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>reason<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">//From console: </span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">//"reject"</span></code></pre><h4 id="blogTitle9">race</h4><p>Promise.race ( iterable )<br></p><p>返回一个 promise，一旦迭代器中的某个 promise 解决或拒绝，返回的 promise 就会解决或拒绝。<br></p><p><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">The&nbsp;</span><code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre; color: rgb(17, 17, 17); font-size: 18px;">race</code><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">&nbsp;function returns a new promise which is settled in the same way as the first passed promise to settle. It resolves all elements of the passed&nbsp;</span><var style="color: rgb(42, 161, 152); transition: background-color 0.25s ease 0s; cursor: pointer; font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">iterable</var><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">&nbsp;to promises.</span><br></p><dt style="margin: 0px; padding: 0px; border: 0px;">iterable</dt><dd style="margin: 0px 0px 24px; padding: 0px 0px 0px 20px; border: 0px;">可迭代对象，类似<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Array" title="entries() 方法返回一个新的Array Iterator对象，该对象包含数组中每个索引的键/值对。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">Array</span></font></a>。</dd><p><b>返回值</b></p><p>一个待定的 Promise 只要给定的迭代中的一个 promise 解决或拒绝，就采用第一个 promise 的值作为它的值，从而异步地解析或拒绝（一旦堆栈为空）。<br></p><p><b>描述</b></p><p>race 函数返回一个 Promise，它将与第一个传递的 promise 相同的完成方式被完成。它可以是完成（ resolves），也可以是失败（rejects），这要取决于第一个完成的方式是两个中的哪个。</p><p>如果传的迭代是空的，则返回的 promise 将永远等待。</p><p>如果迭代包含一个或多个非承诺值和/或已解决/拒绝的承诺，则 Promise.race 将解析为迭代中找到的第一个值。</p><p><b>示例</b></p><p>Promise.race 的异步性<br></p><pre style="margin-top: 0px; margin-bottom: 20px; padding: 15px; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word;">// we are passing as argument an array of promises that are already resolved,
// to trigger Promise.race as soon as possible
var resolvedPromisesArray = [Promise.resolve(33), Promise.resolve(44)];

var p = Promise.race(resolvedPromisesArray);
// immediately logging the value of p
console.log(p);

// using setTimeout we can execute code after the stack is empty
setTimeout(function(){
    console.log('the stack is now empty');
    console.log(p);
});

// logs, in order:
// Promise { &lt;state&gt;: "pending" }
// the stack is now empty
// Promise { &lt;state&gt;: "fulfilled", &lt;value&gt;: 33 }</code></pre><p>使用 Promise.race –&nbsp; setTimeout 的示例<br></p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p1 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">500</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"one"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p2 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">100</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"two"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">race</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span>p1<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "two"</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 两个都完成，但 p2 更快</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p3 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">100</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"three"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p4 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">500</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"four"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">race</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span>p3<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p4<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "three"</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// p3 更快，所以它完成了              </span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>reason<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 未被调用</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p5 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">500</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"five"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p6 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">100</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"six"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">race</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span>p5<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> p6<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 未被调用             </span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>reason<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>reason<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "six"</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// p6 更快，所以它失败了</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></code></pre><h4 id="blogTitle10">reject</h4><p>Promise.reject(reason)</p><p>方法返回一个带有拒绝原因 reason 参数的 Promise 对象。<br></p><dt style="margin: 0px; padding: 0px; border: 0px;">reason</dt><dd style="margin: 0px 0px 24px; padding: 0px 0px 0px 20px; border: 0px;">表示<span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Promise</span>被拒绝的原因。</dd><p><b>返回值</b></p><p>一个给定原因了的被拒绝的 Promise。<br></p><p><b>描述</b></p><p>静态函数 Promise.reject 返回一个被拒绝的 Promise 对象。通过使用 Error 的实例获取错误原因 reason 对调试和选择性错误捕捉很有帮助。<br></p><p><b>示例</b></p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">reject</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"Testing static reject"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>reason<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 未被调用</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>reason<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>reason<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "Testing static reject"</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">reject</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Error</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"fail"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>result<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 未被调用</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>error<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>error<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// stacktrace</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></code></pre><h4 id="blogTitle11">resolve</h4><p>Promise.resolve(value)</p><p>Promise.resolve(promise)</p><p>Promise.resolve(thenable)</p><p>返回一个以给定值解析后的 Promise 对象。但如果这个值是个 thenable（即带有 then 方法），返回的 promise 会“跟随”这个 thenable 的对象，采用它的最终状态（指resolved/rejected/pending/settled）；如果传入的 value 本身就是 promise 对象，则该对象作为 Promise.resolve 方法的返回值返回；否则以该值为成功状态返回 promise 对象。<br></p><dt style="margin: 0px; padding: 0px; border: 0px;">value</dt><dd style="margin: 0px 0px 24px; padding: 0px 0px 0px 20px; border: 0px;"><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;">将被&nbsp;<span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Promise&nbsp;</span>对象解析的参数。也可以是一个&nbsp;<span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Promise&nbsp;</span>对象，或者是一个 thenable。</p></dd><p><b>返回值</b><br></p><p>返回一个解析过带着给定值的 Promise 对象，如果返回值是一个 promise 对象，则直接返回这个 Promise 对象。<br></p><p><b>示例</b></p><p>使用静态方法 Promise.resolve<br></p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class="  language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"Success"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "Success"</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 不会被调用</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></code></pre><p><b>对一个数组进行 resolve</b><br></p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class="  language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">2</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">3</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>v<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>v<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">0</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 1</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></code></pre><p><b>Resolve 另一个 promise 对象</b><br></p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class="  language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> original <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'我在第二行'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> cast <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>original<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
cast<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'value: '</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'original === cast ? '</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>original <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">===</span> cast<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">/*
*  打印顺序如下，这里有一个同步异步先后执行的区别
*  original === cast ? true
*  value: 我在第二行
*/</span></code></pre><p><b>resolve thenable 的对象们并抛出错误</b><br></p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class="  language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Resolve一个thenable对象</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p1 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
  then<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>onFulfill<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> onReject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">onFulfill</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"fulfilled!"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p1 <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">instanceof</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// true, 这是一个Promise对象</span>

p1<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>v<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>v<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 输出"fulfilled!"</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>e<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 不会被调用</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Thenable在callback之前抛出异常</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Promise rejects</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> thenable <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> then<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">throw</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">TypeError</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"Throwing"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"Resolving"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p2 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>thenable<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>v<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 不会被调用</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>e<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>e<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// TypeError: Throwing</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Thenable在callback之后抛出异常</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Promise resolves</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> thenable <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> then<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"Resolving"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">throw</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">TypeError</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"Throwing"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p3 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>thenable<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
p3<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>v<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>v<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 输出"Resolving"</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>e<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 不会被调用</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></code></pre><h2 id="blogTitle12">Promise 原型对象</h2><h3 id="blogTitle13">属性</h3><h4 id="blogTitle14">constructor</h4><p>返回被创建的实例函数.&nbsp; 默认为 Promise 函数.<br></p><p><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">The initial value of&nbsp;</span><code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre; color: rgb(17, 17, 17); font-size: 18px;">Promise.prototype.constructor</code><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">&nbsp;is the intrinsic object&nbsp;</span><emu-xref href="#sec-promise-constructor" id="_ref_8187" style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;"><a href="https://tc39.github.io/ecma262/#sec-promise-constructor" style="text-decoration-line: none; color: rgb(32, 108, 167);">%Promise%</a></emu-xref><span style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;">.</span><br></p><h3 id="blogTitle15">方法</h3><h4 id="blogTitle16">catch</h4><p>Promise.prototype.catch(onRejected)</p><pre class="syntaxbox" style="margin-top: 0px; margin-bottom: 20px; padding: 15px; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 14px; background-color: rgb(228, 240, 245); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; white-space: pre-wrap; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><var style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit;">p.catch(onRejected)</var>;

p.catch(function(reason) {
   // 拒绝
});</pre><p><b>参数</b></p><dt style="margin: 0px; padding: 0px; border: 0px;"><span style="border-style: initial; border-color: initial; border-image: initial;">onRejected</span></dt><dd style="margin: 0px 0px 24px; padding: 0px 0px 0px 20px; border: 0px;">当 Promise 被 rejected 时，被调用的一个<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Function" title="此页面仍未被本地化, 期待您的翻译!" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">Function</span></font></a>。&nbsp;该函数拥有一个参数：</dd><dd style="margin: 0px 0px 24px; padding: 0px 0px 0px 20px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">reason</span></font>&nbsp; &nbsp; rejection&nbsp;的原因。</dd><dd style="margin: 0px 0px 24px; padding: 0px 0px 0px 20px; border: 0px;"><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;">&nbsp;如果&nbsp;<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">onRejected</span></font>&nbsp;抛出一个错误或返回一个本身失败的 Promise ，通过&nbsp;<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">catch()</span></font>&nbsp;返回的 Promise 被 rejected；否则，它将显示为成功（resolved）。</p></dd><p><b>返回值</b></p><p>一个 Promise.<br></p><p><b>描述</b></p><p>catch() 方法返回一个 Promise，并且处理拒绝的情况。它的行为与调用Promise.prototype.then(undefined, onRejected) 相同。 (事实上, calling obj.catch(onRejected) 内部 calls obj.then(undefined, onRejected))<br></p><p><b>规范算法</b></p><ol style="color: rgb(17, 17, 17); font-family: Cambria, &quot;Palatino Linotype&quot;, Palatino, &quot;Liberation Serif&quot;, serif; font-size: 18px;"><li>Let&nbsp;<var style="color: rgb(42, 161, 152); transition: background-color 0.25s ease 0s; cursor: pointer;">promise</var>&nbsp;be the&nbsp;<emu-val style="font-weight: bold;">this</emu-val>&nbsp;value.</li><li>Return ?&nbsp;<emu-xref aoid="Invoke" id="_ref_8186"><a href="https://tc39.github.io/ecma262/#sec-invoke" style="text-decoration-line: none; color: rgb(32, 108, 167);">Invoke</a></emu-xref>(<var style="color: rgb(42, 161, 152); transition: background-color 0.25s ease 0s; cursor: pointer;">promise</var>,&nbsp;<code style="font-weight: bold; font-family: Consolas, Monaco, monospace; white-space: pre;">"then"</code>, «&nbsp;<emu-val style="font-weight: bold;">undefined</emu-val>,&nbsp;<var style="color: rgb(42, 161, 152); transition: background-color 0.25s ease 0s; cursor: pointer;">onRejected</var>&nbsp;»).</li></ol><p><b>示例</b></p><p><b>使用链式语句的 catch 方法</b><br></p><pre class="brush: js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word;">var p1 = new Promise(function(resolve, reject) {
  resolve('Success');
});</code>

p1.then(function(value) {
  console.log(value); // "Success!"
  throw 'oh, no!';
}).catch(function(e) {
  console.log(e); // "oh, no!"
}).then(function(){
  console.log('after a catch the chain is restored');
}, function () {
  console.log('Not fired due to the catch');
});

// 以下行为与上述相同
p1.then(function(value) {
  console.log(value); // "Success!"
  return Promise.reject('oh, no!');
}).catch(function(e) {
  console.log(e); // "oh, no!"
}).then(function(){
  console.log('after a catch the chain is restored');
}, function () {
  console.log('Not fired due to the catch');
});</pre><p><b>捕获抛出的错误</b><br></p><pre class="brush: js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word;">// 抛出一个错误，大多数时候将调用catch方法
var p1 = new Promise(function(resolve, reject) {
  throw 'Uh-oh!';
});

p1.catch(function(e) {
  console.log(e); // "Uh-oh!"
});

// 在异步函数中抛出的错误不会被catch捕获到
var p2 = new Promise(function(resolve, reject) {
  setTimeout(function() {
    throw 'Uncaught Exception!';
  }, 1000);
});

p2.catch(function(e) {
  console.log(e); // 不会执行
});

// 在resolve()后面抛出的错误会被忽略
var p3 = new Promise(function(resolve, reject) {
  resolve();
  throw 'Silenced Exception!';
});

p3.catch(function(e) {
   console.log(e); // 不会执行
});</code></pre><p><b>如果已决议</b><br></p><pre style="margin-top: 0px; margin-bottom: 20px; padding: 15px; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word;">// 创建一个新的 Promise，且已决议
var p1 = Promise.resolve("calling next");

var p2 = p1.catch(function (reason) {
    // 这个方法永远不会调用
    console.log("catch p1!");
    console.log(reason);
});

p2.then(function (value) {
    console.log("next promise's onFulfilled"); /* next promise's onFulfilled */
    console.log(value); /* calling next */
}, function (reason) {
    console.log("next promise's onRejected");
    console.log(reason);
});</code></pre><p><b><br></b></p><h4 id="blogTitle17">finally</h4><p>Promise.prototype.finally ( onFinally )</p><pre class="syntaxbox" style="margin-top: 0px; margin-bottom: 20px; padding: 15px; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(228, 240, 245); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; white-space: pre-wrap; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><var style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit;">p.finally(onFinally)</var>;

p.finally(function() {
   // 返回状态为(resolved 或 rejected)
});参数</pre><dt style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">onFinally</span></dt><dd style="margin: 0px 0px 24px; padding: 0px 0px 0px 20px; border: 0px;"><font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">Promise</span></font>&nbsp;状态改变后的回调函数。</dd><p>finally() 方法返回一个 Promise，在执行 then() 和 catch() 后，都会执行 finally 指定的回调函数。避免同样的语句需要在 then() 和 catch() 中各写一次的情况。<br></p><p><b>返回值</b></p><p>返回一个设置了 finally 回调函数的 Promise 对象。&nbsp;<br></p><p><b>描述</b></p><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">finally()</span>&nbsp;虽然与&nbsp;<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">.then(onFinally, onFinally)</span></font>&nbsp;类似，它们不同的是：</p><ul style="list-style-position: initial; list-style-image: initial; margin: 0px 0px 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem;"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">调用内联函数时，不需要多次声明该函数或为该函数创建一个变量保存它。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">由于无法知道<font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">promise</span></font>的最终状态，所以<font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">finally</span></font>的回调函数中不接收任何参数，它仅用于无论最终结果如何都要执行的情况。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">与<font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">Promise.resolve(2).then(() =&gt; {}, () =&gt; {})</span></font>&nbsp;（resolved的结果为<font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">undefined</span></font>）不同，<font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">Promise.resolve(2).finally(() =&gt; {})</span></font>&nbsp;resolved的结果为&nbsp;<font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">2</span></font>。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">同样，<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">Promise.reject(3).then(() =&gt; {}, () =&gt; {})</span></font>&nbsp;(resolved 的结果为<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">undefined</span></font>),&nbsp;<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">Promise.reject(3).finally(() =&gt; {})</span></font>&nbsp;rejected&nbsp;的结果为&nbsp;<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">3</span></font>。</li></ul><div class="note" style="margin: 0px 0px 20px; padding: 10px 10px 10px 25px; border-width: 0px 0px 0px 5px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-left-style: solid; border-color: rgb(246, 183, 60); border-image: initial; box-sizing: border-box; max-width: 42rem; overflow: hidden; clear: none; background: rgb(255, 243, 212); font-family: x-locale-heading-primary, zillaslab, Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; font-size: 16px; color: rgb(51, 51, 51); letter-spacing: -0.04448px;"><p style="margin: 0px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;"><span style="margin: 0px; padding: 0px; border: 0px; font-weight: 700;">注意:</span>&nbsp;在finally回调中抛出（或返回被拒绝的promise）将拒绝新的promise，并在调用throw()时指定拒绝原因.</p></div><p><b>示例</b></p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">let</span> isLoading <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">fetch</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>myRequest<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>response<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> contentType <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> response<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>headers<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">get</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"content-type"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">if</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>contentType <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&amp;&amp;</span> contentType<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">includes</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"application/json"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
      <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> response<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">json</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">throw</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">TypeError</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"Oops, we haven't got JSON!"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>json<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">/* process your JSON further */</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">catch</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>error<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>error<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">finally</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> isLoading <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">false</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></code></pre><p><br></p><h4 id="blogTitle18">then</h4><p>then() 方法返回一个&nbsp; Promise 。它最多需要有两个参数：Promise 的成功和失败情况的回调函数。</p><pre class="syntaxbox" style="margin-top: 0px; margin-bottom: 20px; padding: 15px; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(228, 240, 245); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; white-space: pre-wrap; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><var style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit;">p.then(onFulfilled, onRejected)</var>;

p.then(function(value) {
   // fulfillment
  }, function(reason) {
  // rejection
});</pre><blockquote><span style="color: rgb(51, 51, 51); font-family: x-locale-heading-primary, zillaslab, Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 243, 212);">注意：如果忽略针对某个状态的回调函数参数，或者提供非函数 (nonfunction) 参数，那么&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); letter-spacing: -0.04448px;">then</code><span style="color: rgb(51, 51, 51); font-family: x-locale-heading-primary, zillaslab, Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 243, 212);">&nbsp;方法将会丢失关于该状态的回调函数信息，但是并不会产生错误。如果调用&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); letter-spacing: -0.04448px;">then</code><span style="color: rgb(51, 51, 51); font-family: x-locale-heading-primary, zillaslab, Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 243, 212);">&nbsp;的&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); letter-spacing: -0.04448px;">Promise</code><span style="color: rgb(51, 51, 51); font-family: x-locale-heading-primary, zillaslab, Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 243, 212);">&nbsp;的状态（fulfillment 或 rejection）发生改变，但是&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); letter-spacing: -0.04448px;">then</code><span style="color: rgb(51, 51, 51); font-family: x-locale-heading-primary, zillaslab, Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 243, 212);">&nbsp;中并没有关于这种状态的回调函数，那么&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); letter-spacing: -0.04448px;">then</code><span style="color: rgb(51, 51, 51); font-family: x-locale-heading-primary, zillaslab, Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 243, 212);">&nbsp;将创建一个没有经过回调函数处理的新&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); letter-spacing: -0.04448px;">Promise</code><span style="color: rgb(51, 51, 51); font-family: x-locale-heading-primary, zillaslab, Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 243, 212);">对象，这个新&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); letter-spacing: -0.04448px;">Promise</code><span style="color: rgb(51, 51, 51); font-family: x-locale-heading-primary, zillaslab, Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 243, 212);">&nbsp;只是简单地接受调用这个&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); letter-spacing: -0.04448px;">then</code><span style="color: rgb(51, 51, 51); font-family: x-locale-heading-primary, zillaslab, Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 243, 212);">&nbsp;的原&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); letter-spacing: -0.04448px;">Promise</code><span style="color: rgb(51, 51, 51); font-family: x-locale-heading-primary, zillaslab, Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 243, 212);">&nbsp;的终态作为它的终态。</span></blockquote><dt style="margin: 0px; padding: 0px; border: 0px;">onFulfilled</dt><dd style="margin: 0px 0px 24px; padding: 0px 0px 0px 20px; border: 0px;">当Promise变成接受状态（fulfillment）时，该参数作为回调函数被调用（参考：&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Function" title="此页面仍未被本地化, 期待您的翻译!" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">Function</span></font></a>）。该函数有一个参数，即接受的最终结果（the&nbsp;fulfillment &nbsp;value）。如果传入的&nbsp;<font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">onFulfilled</span></font>&nbsp;参数类型不是函数，则会在内部被替换为<font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">(x) =&gt; x</span></font>&nbsp;，即原样返回 promise 最终结果的函数</dd><dt style="margin: 0px; padding: 0px; border: 0px;">onRejected</dt><dd style="margin: 0px 0px 24px; padding: 0px 0px 0px 20px; border: 0px;">当Promise变成拒绝状态（rejection&nbsp;）时，该参数作为回调函数被调用（参考：&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Function" title="此页面仍未被本地化, 期待您的翻译!" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px;">Function</span></font></a>）。该函数有一个参数,，即拒绝的<font color="#333333" face="consolas, Liberation Mono, courier, monospace"><span style="letter-spacing: -0.04448px; background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">原因（the rejection reason）</span></font>。</dd><p><b>返回值</b></p><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; font-weight: 700; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">then方法返回一个<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" title="Promise&nbsp;对象用于表示一个异步操作的最终状态（完成或失败），以及其返回的值。" style="text-decoration-line: none; color: rgb(61, 126, 154); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word;">Promise</code></a>，而它的行为与then中的回调函数的返回值有关：</p><ul style="list-style-position: initial; list-style-image: initial; margin: 0px 0px 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; font-weight: 700; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果then中的回调函数返回一个值，那么then返回的Promise将会成为接受状态，并且将返回的值作为接受状态的回调函数的参数值。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果then中的回调函数抛出一个错误，那么then返回的Promise将会成为拒绝状态，并且将抛出的错误作为拒绝状态的回调函数的参数值。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果then中的回调函数返回一个已经是接受状态的Promise，那么then返回的Promise也会成为接受状态，并且将那个Promise的接受状态的回调函数的参数值作为该被返回的Promise的接受状态回调函数的参数值。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果then中的回调函数返回一个已经是拒绝状态的Promise，那么then返回的Promise也会成为拒绝状态，并且将那个Promise的拒绝状态的回调函数的参数值作为该被返回的Promise的拒绝状态回调函数的参数值。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果then中的回调函数返回一个未定状态（pending）的Promise，那么then返回Promise的状态也是未定的，并且它的终态与那个Promise的终态相同；同时，它变为终态时调用的回调函数参数与那个Promise变为终态时的回调函数的参数是相同的。</li></ul><p><b>描述</b></p><p><span style="color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">由于&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word; color: rgb(51, 51, 51); font-size: 16px; letter-spacing: -0.04448px;">then</code><span style="color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">&nbsp;和&nbsp;</span><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch" title="catch()&nbsp;方法返回一个Promise，并且处理拒绝的情况。它的行为与调用Promise.prototype.then(undefined, onRejected) 相同。&nbsp;(事实上, calling&nbsp;obj.catch(onRejected)&nbsp;内部calls&nbsp;obj.then(undefined, onRejected))." style="text-decoration-line: none; color: rgb(61, 126, 154); margin: 0px; padding: 0px; border: 0px; font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word;">Promise.prototype.catch()</code></a><span style="color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">&nbsp;方法都会返回 promise，它们可以被链式调用&nbsp;— 一种称为</span><strong style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">复合</strong><span style="color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">（&nbsp;</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">composition）&nbsp;</span><span style="color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">的操作.</span><b><br></b></p><p><b>示例</b></p><pre class="line-numbers  language-html" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-html" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">var p = new Promise((resolve, reject) =&gt; {
    resolve('foo')
})

// 'bar' 不是函数，会在内部被替换为 (x) =&gt; x
p.then('bar').then((value) =&gt; {
    console.log(value) // 'foo'
})</code></pre><p><b>链式调用</b><br></p><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;">then 方法返回一个Promise&nbsp;对象，其允许方法链。</p><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;">你可以传递一个 lambda 给 then 并且如果它返回一个 promise，一个等价的 Promise 将暴露给后续的方法链。下面的代码片段使用 setTimout 函数来模拟异步代码操作。</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"foo"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 1. 接收 "foo" 并与 "bar" 拼接，并将其结果做为下一个resolve返回。</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>string<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
      <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
        string <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'bar'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
        <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>string<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
      <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 2. 接收 "foobar", 放入一个异步函数中处理该字符串</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 并将其打印到控制台中, 但是不将处理后的字符串返回到下一个。</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>string<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
      string <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'baz'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
      console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>string<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> string<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 3. 打印本节中代码将如何运行的帮助消息，</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 字符串实际上是由上一个回调函数之前的那块异步代码处理的。</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>string<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"Last Then:  oops... didn't bother to instantiate and return "</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span>
                <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"a promise in the prior then so the sequence may be a bit "</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span>
                <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"surprising"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

    <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 注意 `string` 这时不会存在 'baz'。</span>
    <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 因为这是发生在我们通过setTimeout模拟的异步函数中。</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>string<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></code></pre><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">当一个值只是从一个 lambda 内部返回时，它将有效地返回 Promise.resolve（&lt;由被调用的处理程序返回的值&gt;）。</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p2 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 1</span>
  <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> value <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"- This synchronous usage is virtually pointless"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 2- This synchronous usage is virtually pointless</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 1</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" aria-hidden="true" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">如果函数抛出错误或返回一个拒绝的Promise，则调用将返回一个拒绝的Promise。</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 使 .then() 返回一个 rejected promise</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">throw</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'Oh no!'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'Not called.'</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reason <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">error</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'onRejected function called: '</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reason <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" aria-hidden="true" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">在其他情况下，一个 resolving Promise 会被返回。在下面的例子里，第一个 then() 会返回一个用 resolving Promise 包装的 42，即使之前的 Promise 是 rejected 的。</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">reject</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">99</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">42</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// onRejected returns 42 which is wrapped in a resolving Promise</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span> solution <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'Resolved with '</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> solution <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Resolved with 42</span><span class="line-numbers-rows" aria-hidden="true" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">实际上，捕获 rejected promise 的需求经常大于使用 then 的两种情况语法，比如下面这样的：</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 使 .then() 返回一个 rejected promise</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">throw</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'Oh no!'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">catch</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span> reason <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">error</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'onRejected function called: '</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reason <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"I am always called even if the prior then's promise rejects"</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" aria-hidden="true" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">你也可以在另一个顶层函数上使用链式去实现带有 Promise-based API 的函数。</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span> <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">fetch_current_data</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// fetch() API 返回了一个 Promise.</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 这个函数提供了类似的API，</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 这个函数除了实现 Promise，它还能够完成更多的工作。</span>
  <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">fetch</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'current-data.json'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>response<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span><span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">&gt;</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">if</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>response<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>headers<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">get</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'content-type'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">!=</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'application/json'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
      <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">throw</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">TypeError</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> j <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> response<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">json</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// maybe do something with j</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> j<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// fulfillment value given to user of</span>
              <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// fetch_current_data().then()</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="line-numbers-rows" aria-hidden="true" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; letter-spacing: -0.04448px; background-color: rgb(255, 255, 255);">如果&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word;">onFulfilled</code>&nbsp;返回了一个 promise，<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; overflow-wrap: break-word;">then</code>&nbsp;的返回值就会被 Promise resolved或者rejected。</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(61, 126, 154); border-bottom: 0px solid rgb(61, 126, 154); border-right-style: solid; border-left-style: solid; border-right-color: rgb(61, 126, 154); border-left-color: rgb(61, 126, 154); border-image: initial; font-size: 16px; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); position: relative; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; tab-size: 4; box-sizing: border-box; width: 651px; max-width: 100%; text-shadow: none; overflow-wrap: normal; counter-reset: linenumber 0; letter-spacing: -0.04448px; border-right-width: 0px !important; border-left-width: 5px !important; direction: ltr !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span> <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolveLater</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">10</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1000</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span> <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">rejectLater</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolve<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> reject<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">reject</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">20</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1000</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p1 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Promise<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">resolve</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'foo'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p2 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> p1<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Return promise here, that will be resolved to 10 after 1 second</span>
  <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>resolveLater<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>v<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'resolved'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> v<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "resolved", 10</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>e<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// not called</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'rejected'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> e<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p3 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> p1<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// Return promise here, that will be rejected with 20 after 1 second</span>
  <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Promise</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>rejectLater<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
p3<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">then</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>v<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// not called</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'resolved'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> v<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>e<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'rejected'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> e<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "rejected", 20</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></code></pre><p><br></p></dl></div><div><br></div></div></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div>
    </div>      
  </article>
{% endblock point1 %}