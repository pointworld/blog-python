{% extends 'c-word.html' %}

{% block title %} Web - JS | ES | obj | built-in | proxy {% endblock title %}

{% block point1 %}
<div class="tm-main uk-width-medium-3-4" contenteditable="true">
<article class="uk-article">
    <div id="maincontent">
      <div><h3 id="blogTitle0" style="font-family: &quot;Proxima Nova&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC Regular&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, å¾®è½¯é›…é»‘, Arial, sans-serif;"><span style="font-weight: 700; background-color: yellow;">计算机 | 全栈 | 前端 | JS | ES | Obj | Built-in | Proxy</span></h3></div><div><div style=""><h1 style="color: rgb(102, 102, 102); margin-bottom: 24px; padding: 0px; border: 0px;" id="blogTitle1"><b>proxy</b></h1><div style="color: rgb(102, 102, 102);"><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">Proxy 用于修改某些操作的默认行为，等同于在语言层面做出修改，所以属于一种“元编程”（meta programming），即对编程语言进行编程。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">Proxy 可以理解成，在目标对象之前架设一层“拦截”，外界对该对象的访问，都必须先通过这层拦截，因此提供了一种机制，可以对外界的访问进行过滤和改写。Proxy 这个词的原意是代理，用在这里表示由它来“代理”某些操作，可以译为“代理器”。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">var obj = new Proxy({}, {
  get: function (target, key, receiver) {
    console.log(`getting ${key}!`);
    return Reflect.get(target, key, receiver);
  },
  set: function (target, key, value, receiver) {
    console.log(`setting ${key}!`);
    return Reflect.set(target, key, value, receiver);
  }
});</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码对一个空对象架设了一层拦截，重定义了属性的读取（<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>）和设置（<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">set</code>）行为。这里暂时先不解释具体的语法，只看运行结果。对设置了拦截行为的对象<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">obj</code>，去读写它的属性，就会得到下面的结果。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">obj.count = 1
//  setting count!
++obj.count
//  getting count!
//  setting count!
//  2</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码说明，Proxy 实际上重载（overload）了点运算符，即用自己的定义覆盖了语言的原始定义。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">ES6 原生提供 Proxy 构造函数，用来生成 Proxy 实例。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">var proxy = new Proxy(target, handler);</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">Proxy 对象的所有用法，都是上面这种形式，不同的只是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">handler</code>参数的写法。其中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">new Proxy()</code>表示生成一个<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Proxy</code>实例，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">target</code>参数表示所要拦截的目标对象，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">handler</code>参数也是一个对象，用来定制拦截行为。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是另一个拦截读取属性行为的例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">var proxy = new Proxy({}, {
  get: function(target, property) {
    return 35;
  }
});

proxy.time // 35
proxy.name // 35
proxy.title // 35</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，作为构造函数，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Proxy</code>接受两个参数。第一个参数是所要代理的目标对象（上例是一个空对象），即如果没有<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Proxy</code>的介入，操作原来要访问的就是这个对象；第二个参数是一个配置对象，对于每一个被代理的操作，需要提供一个对应的处理函数，该函数将拦截对应的操作。比如，上面代码中，配置对象有一个<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>方法，用来拦截对目标对象属性的访问请求。<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>方法的两个参数分别是目标对象和所要访问的属性。可以看到，由于拦截函数总是返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">35</code>，所以访问任何属性都得到<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">35</code>。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，要使得<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Proxy</code>起作用，必须针对<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Proxy</code>实例（上例是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy</code>对象）进行操作，而不是针对目标对象（上例是空对象）进行操作。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">如果<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">handler</code>没有设置任何拦截，那就等同于直接通向原对象。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">var target = {};
var handler = {};
var proxy = new Proxy(target, handler);
proxy.a = 'b';
target.a // "b"</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">handler</code>是一个空对象，没有任何拦截效果，访问<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy</code>就等同于访问<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">target</code>。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">一个技巧是将 Proxy 对象，设置到<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">object.proxy</code>属性，从而可以在<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">object</code>对象上调用。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">var object = { proxy: new Proxy(target, handler) };</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">Proxy 实例也可以作为其他对象的原型对象。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">var proxy = new Proxy({}, {
  get: function(target, property) {
    return 35;
  }
});

let obj = Object.create(proxy);
obj.time // 35</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy</code>对象是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">obj</code>对象的原型，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">obj</code>对象本身并没有<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">time</code>属性，所以根据原型链，会在<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy</code>对象上读取该属性，导致被拦截。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">同一个拦截器函数，可以设置拦截多个操作。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">var handler = {
  get: function(target, name) {
    if (name === 'prototype') {
      return Object.prototype;
    }
    return 'Hello, ' + name;
  },

  apply: function(target, thisBinding, args) {
    return args[0];
  },

  construct: function(target, args) {
    return {value: args[1]};
  }
};

var fproxy = new Proxy(function(x, y) {
  return x + y;
}, handler);

fproxy(1, 2) // 1
new fproxy(1, 2) // {value: 2}
fproxy.prototype === Object.prototype // true
fproxy.foo === "Hello, foo" // true</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">对于可以设置、但没有设置拦截的操作，则直接落在目标对象上，按照原先的方式产生结果。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是 Proxy 支持的拦截操作一览，一共 13 种。</p><ul style="list-style-type: none; padding-top: 0.5rem; padding-bottom: 0.5rem; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><li style="text-indent: -5px; font-size: 0.8rem;"><strong>get(target, propKey, receiver)</strong>：拦截对象属性的读取，比如<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy.foo</code>和<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy['foo']</code>。</li><li style="text-indent: -5px; font-size: 0.8rem;"><strong>set(target, propKey, value, receiver)</strong>：拦截对象属性的设置，比如<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy.foo = v</code>或<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy['foo'] = v</code>，返回一个布尔值。</li><li style="text-indent: -5px; font-size: 0.8rem;"><strong>has(target, propKey)</strong>：拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">propKey in proxy</code>的操作，返回一个布尔值。</li><li style="text-indent: -5px; font-size: 0.8rem;"><strong>deleteProperty(target, propKey)</strong>：拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">delete proxy[propKey]</code>的操作，返回一个布尔值。</li><li style="text-indent: -5px; font-size: 0.8rem;"><strong>ownKeys(target)</strong>：拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertyNames(proxy)</code>、<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertySymbols(proxy)</code>、<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.keys(proxy)</code>，返回一个数组。该方法返回目标对象所有自身的属性的属性名，而<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.keys()</code>的返回结果仅包括目标对象自身的可遍历属性。</li><li style="text-indent: -5px; font-size: 0.8rem;"><strong>getOwnPropertyDescriptor(target, propKey)</strong>：拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertyDescriptor(proxy, propKey)</code>，返回属性的描述对象。</li><li style="text-indent: -5px; font-size: 0.8rem;"><strong>defineProperty(target, propKey, propDesc)</strong>：拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.defineProperty(proxy, propKey, propDesc）</code>、<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.defineProperties(proxy, propDescs)</code>，返回一个布尔值。</li><li style="text-indent: -5px; font-size: 0.8rem;"><strong>preventExtensions(target)</strong>：拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.preventExtensions(proxy)</code>，返回一个布尔值。</li><li style="text-indent: -5px; font-size: 0.8rem;"><strong>getPrototypeOf(target)</strong>：拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getPrototypeOf(proxy)</code>，返回一个对象。</li><li style="text-indent: -5px; font-size: 0.8rem;"><strong>isExtensible(target)</strong>：拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.isExtensible(proxy)</code>，返回一个布尔值。</li><li style="text-indent: -5px; font-size: 0.8rem;"><strong>setPrototypeOf(target, proto)</strong>：拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.setPrototypeOf(proxy, proto)</code>，返回一个布尔值。如果目标对象是函数，那么还有两种额外操作可以拦截。</li><li style="text-indent: -5px; font-size: 0.8rem;"><strong>apply(target, object, args)</strong>：拦截 Proxy 实例作为函数调用的操作，比如<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy(...args)</code>、<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy.call(object, ...args)</code>、<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy.apply(...)</code>。</li><li style="text-indent: -5px; font-size: 0.8rem;"><strong>construct(target, args)</strong>：拦截 Proxy 实例作为构造函数调用的操作，比如<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">new proxy(...args)</code>。</li></ul></div><h1 style="color: rgb(102, 102, 102); margin-bottom: 24px; padding: 0px; border: 0px;" id="blogTitle2"><b>Proxy 对象</b></h1><p style="color: rgb(102, 102, 102); font-weight: inherit; margin-bottom: 24px; padding: 0px; border: 0px;"><span style="border-style: initial; border-color: initial; border-image: initial;">Proxy</span>&nbsp;对象用于定义基本操作的自定义行为 (例如, 属性查找，赋值，枚举，函数调用,等)。</p><h2 style="color: rgb(102, 102, 102); font-weight: inherit; margin-top: 0px; margin-bottom: 12px; font-family: &quot;Proxima Nova&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC Regular&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, å¾®è½¯é›…é»‘, Arial, sans-serif; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;" id="blogTitle3"><span style="font-weight: 700;">术语</span></h2><dl style="color: rgb(102, 102, 102); font-weight: inherit; margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px;"><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler" style="margin: 0px; padding: 0px; border: 0px;">handler</a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">包含traps(陷阱)的占位符对象。</dd><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;">traps</dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">提供属性访问的方法。这类似于操作系统中traps(陷阱)的概念。</dd><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;">target</dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">代理虚拟化的对象。它通常用作代理的存储后端。</dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">根据目标验证关于对象不可扩展性或不可配置属性的不变量（保持不变的语义）。</dd></dl><h2 style="color: rgb(102, 102, 102); font-weight: inherit; margin-top: 0px; margin-bottom: 12px; font-family: &quot;Proxima Nova&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC Regular&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, å¾®è½¯é›…é»‘, Arial, sans-serif; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;" id="blogTitle4"><span style="font-weight: 700;">语法</span></h2><div style="color: rgb(102, 102, 102);"><pre class="syntaxbox" style="margin-bottom: 20px; padding: 15px; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(228, 240, 245); color: rgb(51, 51, 51); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; white-space: pre-wrap; border-right-width: 0px !important; border-left-width: 5px !important;">let p = new Proxy(target, handler);</pre></div><h5 style="color: rgb(102, 102, 102); font-weight: inherit; margin-top: 0px; margin-bottom: 12px; font-family: &quot;Proxima Nova&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC Regular&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, å¾®è½¯é›…é»‘, Arial, sans-serif; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;"><span style="font-weight: 700;">参数</span></h5><div style="color: rgb(102, 102, 102);"><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">用<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Proxy</code>包装的目标对象（可以是任何类型的对象，包括原生数组，函数，甚至另一个代理）。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">一个对象，其属性是当执行一个操作时定义代理的行为的函数。</dd></div><h2 style="color: rgb(102, 102, 102); font-weight: inherit; margin-top: 0px; margin-bottom: 12px; font-family: &quot;Proxima Nova&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC Regular&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, å¾®è½¯é›…é»‘, Arial, sans-serif; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;" id="blogTitle5"><span style="font-weight: 700;">静态方法</span></h2><dl style="color: rgb(102, 102, 102); font-weight: inherit; margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px;"><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><a title="Proxy.revocable() 方法可以用来创建一个可撤销的代理对象。" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/revocable" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Proxy.revocable()</span></font></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">创建一个可撤销的代理对象。</dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Proxy.revocable</code>方法返回一个可取消的 Proxy 实例。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> revoke<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span> <span class="token operator" style="color: rgb(249, 38, 114);">=</span> Proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">revocable<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>foo <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token number" style="color: rgb(174, 129, 255);">123</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>foo<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 123
</span>
<span class="token function">revoke<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>foo<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // TypeError: Revoked
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Proxy.revocable</code>方法返回一个对象，该对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy</code>属性是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Proxy</code>实例，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">revoke</code>属性是一个函数，可以取消<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Proxy</code>实例。上面代码中，当执行<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">revoke</code>函数之后，再访问<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Proxy</code>实例，就会抛出一个错误。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Proxy.revocable</code>的一个使用场景是，目标对象不允许直接访问，必须通过代理访问，一旦访问结束，就收回代理权，不允许再次访问。</p></dd></dl><h2 style="color: rgb(102, 102, 102); font-weight: inherit; margin-top: 0px; margin-bottom: 12px; font-family: &quot;Proxima Nova&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC Regular&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, å¾®è½¯é›…é»‘, Arial, sans-serif; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;" id="blogTitle6"><span style="font-weight: 700;">handler 对象</span></h2><p style="color: rgb(102, 102, 102); font-weight: inherit; margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">handler 对象是一个占位符对象，它包含</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;"><font face="consolas, Liberation Mono, courier, monospace"><span style="margin: 0px; padding: 0px; border: 0px; background-color: rgb(238, 238, 238);">Proxy</span></font></code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">的陷阱。</span><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">处理器对象用来自定义</span><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" title="Editorial review completed." style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">代理对象</a><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">的各种可代理操作。</span><br></p><h3 style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;" id="blogTitle7"><b>方法</b></h3><div><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">一共有 13&nbsp;种可代理操作，每种操作的代号（属性名/方法名）和触发这种操作的方式列举如下。注意，如果没有定义某种操作，那么这种操作会被转发到目标对象身上。</span><b><br></b></div><div style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; color: rgb(102, 102, 102);"><p style="margin-bottom: 24px; padding: 0px; border: 0px;">All traps are optional. If a trap has not been defined, the default behavior is to forward the operation to the target.</p><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getPrototypeOf" title="handler.getPrototypeOf() 是一个代理方法，当读取代理对象的原型时，该方法就会被调用。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.getPrototypeOf()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在读取代理对象的原型时触发该操作，比如在执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOf" title="Object.getPrototypeOf() 方法返回指定对象的原型（内部[[Prototype]]属性的值）。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.getPrototypeOf</code></a>(proxy)</code>&nbsp;时。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/setPrototypeOf" title="此页面仍未被本地化, 期待您的翻译!" class="new" rel="nofollow" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 0);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.setPrototypeOf()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在设置代理对象的原型时触发该操作，比如在执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf" title="如果对象的[[Prototype]]被修改成不可扩展(通过&nbsp;Object.isExtensible()查看)，就会抛出&nbsp;TypeError异常。如果prototype参数不是一个对象或者null(例如，数字，字符串，boolean，或者&nbsp;undefined)，则什么都不做。否则，该方法将obj的[[Prototype]]修改为新的值。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.setPrototypeOf</code></a>(proxy, null)</code>&nbsp;时。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/isExtensible" title="此页面仍未被本地化, 期待您的翻译!" class="new" rel="nofollow" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 0);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.isExtensible()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在判断一个代理对象是否是可扩展时触发该操作，比如在执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/isExtensible" title="Object.isExtensible() 方法判断一个对象是否是可扩展的（是否可以在它上面添加新的属性）。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.isExtensible</code></a>(proxy)</code>&nbsp;时。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/preventExtensions" title="此页面仍未被本地化, 期待您的翻译!" class="new" rel="nofollow" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 0);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.preventExtensions()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在让一个代理对象不可扩展时触发该操作，比如在执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions" title="Object.preventExtensions()方法让一个对象变的不可扩展，也就是永远不能再添加新的属性。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.preventExtensions</code></a>(proxy)</code>&nbsp;时。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getOwnPropertyDescriptor" title="handler.getOwnPropertyDescriptor()&nbsp;方法是 Object.getOwnPropertyDescriptor() &nbsp;的陷阱。" style="margin: 0px; padding: 0px; border: 0px; color: rgb(63, 135, 166);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.getOwnPropertyDescriptor()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在获取代理对象某个属性的属性描述时触发该操作，比如在执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor" title="Object.getOwnPropertyDescriptor()&nbsp;方法返回指定对象上一个自有属性对应的属性描述符。（自有属性指的是直接赋予该对象的属性，不需要从原型链上进行查找的属性）" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.getOwnPropertyDescriptor</code></a>(proxy, "foo")</code>&nbsp;时。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/defineProperty" title="handler.defineProperty() 用于拦截对对象的 Object.defineProperty() 操作。" style="margin: 0px; padding: 0px; border: 0px; color: rgb(63, 135, 166);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.defineProperty()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在定义代理对象某个属性时的属性描述时触发该操作，比如在执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" title="Object.defineProperty() 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.defineProperty</code></a>(proxy, "foo", {})</code>&nbsp;时。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/has" title="handler.has()&nbsp;方法可以看作是针对&nbsp;in 操作的钩子." style="margin: 0px; padding: 0px; border: 0px; color: rgb(63, 135, 166);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.has()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在判断代理对象是否拥有某个属性时触发该操作，比如在执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">"foo"&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/in" title="如果指定的属性在指定的对象或其原型链中，则in&nbsp;运算符返回true。" style="margin: 0px; padding: 0px; border: 0px; color: rgb(63, 135, 166);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">in</code></a>&nbsp;proxy</code>&nbsp;时。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/get" title="handler.get()&nbsp;方法用于拦截对象的读取属性操作。" style="margin: 0px; padding: 0px; border: 0px; color: rgb(63, 135, 166);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.get()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在读取代理对象的某个属性时触发该操作，比如在执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">proxy.foo</code>&nbsp;时。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/set" title="handler.set()&nbsp;方法用于拦截设置属性值的操作" style="margin: 0px; padding: 0px; border: 0px; color: rgb(63, 135, 166);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.set()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在给代理对象的某个属性赋值时触发该操作，比如在执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">proxy.foo = 1</code>&nbsp;时。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/deleteProperty" title="handler.deleteProperty() 方法用于拦截对对象属性的 delete 操作。" style="margin: 0px; padding: 0px; border: 0px; color: rgb(63, 135, 166);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.deleteProperty()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在删除代理对象的某个属性时触发该操作，比如在执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">delete proxy.foo</code>&nbsp;时。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/ownKeys" title="handler.ownKeys() 方法用于拦截 Reflect.ownKeys()." style="margin: 0px; padding: 0px; border: 0px; color: rgb(63, 135, 166);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.ownKeys()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在获取代理对象的所有属性键时触发该操作，比如在执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames" title="Object.getOwnPropertyNames()方法返回一个由指定对象的所有自身属性的属性名（包括不可枚举属性但不包括Symbol值作为名称的属性）组成的数组。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.getOwnPropertyNames</code></a>(proxy)</code>&nbsp;时。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/apply" title="handler.apply()&nbsp;方法用于拦截函数的调用。" style="margin: 0px; padding: 0px; border: 0px; color: rgb(63, 135, 166);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.apply()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在调用一个目标对象为函数的代理对象时触发该操作，比如在执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">proxy()</code>&nbsp;时。</dd><dt style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/construct" title="handler.construct()&nbsp;方法用于拦截new 操作. 为了使新的操作在生成的Proxy对象上有效，用于初始化代理的目标本身必须具有[[Construct]]内部方法（即 new target 必须是有效的）。" style="margin: 0px; padding: 0px; border: 0px; color: rgb(63, 135, 166);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.construct()</code></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在给一个目标对象为构造函数的代理对象构造实例时触发该操作，比如在执行<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">new proxy()</code>&nbsp;时。</dd><table><caption>table 1.1 heading</caption><tbody><tr><th>title</th><th>title</th></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getPrototypeOf" title="handler.getPrototypeOf() 是一个代理方法，当读取代理对象的原型时，该方法就会被调用。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">getPrototypeOf()</span></a><br></td><td><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">handler.getPrototypeOf()</span>&nbsp;是一个代理方法，当读取代理对象的原型时，该方法就会被调用。<br><br><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">当&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">getPrototypeOf</code>&nbsp;方法被调用时，<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">this</code>&nbsp;指向的是它所属的处理器对象。</p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">被代理的目标对象。</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">getPrototypeOf</span>&nbsp;方法必须返回一个对象值或者返回&nbsp;<span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">null，不能返回其它类型的原始值</span>。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">getPrototypeOf</code>方法主要用来拦截获取对象原型。具体来说，拦截下面这些操作。</p><ul style="list-style-type: none; padding-top: 0.5rem; padding-bottom: 0.5rem; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.prototype.__proto__</code></li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.prototype.isPrototypeOf()</code></li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getPrototypeOf()</code></li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Reflect.getPrototypeOf()</code></li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">instanceof</code></li></ul><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是一个例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> proto <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token function">getPrototypeOf<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> proto<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">getPrototypeOf<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>p<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token operator" style="color: rgb(249, 38, 114);">===</span> proto<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // true
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">getPrototypeOf</code>方法拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getPrototypeOf()</code>，返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proto</code>对象。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">getPrototypeOf</code>方法的返回值必须是对象或者<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">null</code>，否则报错。另外，如果目标对象不可扩展（extensible），&nbsp;<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">getPrototypeOf</code>方法必须返回目标对象的原型对象。</p><b>描述</b><br><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在 JavaScript 中，有下面这五种操作（方法/属性/运算符）可以触发 JS 引擎读取一个对象的原型，也就是可以触发&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">getPrototypeOf()</code>&nbsp;代理方法的运行：</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOf" title="Object.getPrototypeOf() 方法返回指定对象的原型（内部[[Prototype]]属性的值）。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.getPrototypeOf()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/getPrototypeOf" title="静态方法&nbsp;Reflect.getPrototypeOf() 与 Object.getPrototypeOf() 方法是一样的。都是返回指定对象的原型（即，内部的&nbsp;[[Prototype]] 属性的值）。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.getPrototypeOf()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/proto" title="Object.prototype&nbsp;的 __proto__&nbsp; 属性是一个访问器属性（一个getter函数和一个setter函数）, 暴露了通过它访问的对象的内部[[Prototype]]&nbsp;(一个对象或&nbsp;null)。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">__proto__</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/isPrototypeOf" title="isPrototypeOf() 方法用于测试一个对象是否存在于另一个对象的原型链上。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.prototype.isPrototypeOf()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof" title="instanceof 运算符用来测试一个对象在其原型链中是否存在一个构造函数的&nbsp;prototype&nbsp;属性。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">instanceof</code></a></li></ul><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果遇到了下面两种情况，JS 引擎会抛出&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>&nbsp;异常：</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">getPrototypeOf()</code>&nbsp;方法返回的不是对象也不是&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">null。</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">目标对象是不可扩展的，且&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">getPrototypeOf()</code>&nbsp;方法返回的原型不是目标对象本身的原型。</li></ul><b>示例</b><br><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>例子：基本用法</b></span></p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> obj <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> proto <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> handler <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
        console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">===</span> obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>   <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// true</span>
        console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">this</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">===</span> handler<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// true</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> proto<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> handler<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">===</span> proto<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>    <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// true</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>例子：5 种触发 getPrototypeOf 代理方法的方式</b></span></p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> obj <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> Array<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>prototype<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>
    Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">===</span> Array<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>prototype<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span>  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// true</span>
    Reflect<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">===</span> Array<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>prototype<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// true</span>
    p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>__proto__ <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">===</span> Array<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>prototype<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span>               <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// true</span>
    Array<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>prototype<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">isPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span>              <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// true</span>
    p <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">instanceof</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Array</span>                             <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// true</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>例子：两种情况下的异常</b></span></p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> obj <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"foo"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// TypeError: "foo" is not an object or null</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> obj <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">preventExtensions</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// TypeError: expected same prototype value</span></code></pre><br></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/setPrototypeOf" title="此页面仍未被本地化, 期待您的翻译!" class="new" rel="nofollow" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">setPrototypeOf()</span></a><br></td><td><strong style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.setPrototypeOf()</code></strong><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;方法主要用来拦截&nbsp;</span><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf" title="如果对象的[[Prototype]]被修改成不可扩展(通过&nbsp;Object.isExtensible()查看)，就会抛出&nbsp;TypeError异常。如果prototype参数不是一个对象或者null(例如，数字，字符串，boolean，或者&nbsp;undefined)，则什么都不做。否则，该方法将obj的[[Prototype]]修改为新的值。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.setPrototypeOf()</code></a><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">.</span><br><br><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  setPrototypeOf<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prototype<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下参数传递给&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">setPrototypeOf</code>&nbsp;方法.&nbsp;</p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">被拦截目标对象.</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">prototype</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">对象新原型或为<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">null</code>.</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果成功修改了<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">[[Prototype]]</code>,&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">setPrototypeOf</code>&nbsp;方法返回&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">true</code>,否则返回&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">false</code>.</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">setPrototypeOf</code>方法主要用来拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.setPrototypeOf</code>方法。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是一个例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  setPrototypeOf <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> proto<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">throw</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Error</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string">'Changing the prototype is forbidden'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> proto <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">setPrototypeOf<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> proto<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// Error: Changing the prototype is forbidden
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，只要修改<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">target</code>的原型对象，就会报错。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，该方法只能返回布尔值，否则会被自动转为布尔值。另外，如果目标对象不可扩展（extensible），<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">setPrototypeOf</code>方法不得改变目标对象的原型。</p><b>描述</b><br><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">这个&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><strong style="margin: 0px; padding: 0px; border: 0px;">handler.setPrototypeOf</strong></code>&nbsp;方法用于拦截&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf" title="如果对象的[[Prototype]]被修改成不可扩展(通过&nbsp;Object.isExtensible()查看)，就会抛出&nbsp;TypeError异常。如果prototype参数不是一个对象或者null(例如，数字，字符串，boolean，或者&nbsp;undefined)，则什么都不做。否则，该方法将obj的[[Prototype]]修改为新的值。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.setPrototypeOf()</code></a>.</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>拦截</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">这个方法可以拦截以下操作:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf" title="如果对象的[[Prototype]]被修改成不可扩展(通过&nbsp;Object.isExtensible()查看)，就会抛出&nbsp;TypeError异常。如果prototype参数不是一个对象或者null(例如，数字，字符串，boolean，或者&nbsp;undefined)，则什么都不做。否则，该方法将obj的[[Prototype]]修改为新的值。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.setPrototypeOf()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/setPrototypeOf" title="静态方法 Reflect.setPrototypeOf() 与 Object.setPrototypeOf() 方法是一致的。它将指定对象的原型 （即，内部的[[Prototype]]&nbsp;属性）设置为另一个对象或为&nbsp;null。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.setPrototypeOf()</code></a></li></ul><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>Invariants</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果违反了下列规则，则proxy将抛出一个<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem;"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><span style="margin: 0px; padding: 0px; border: 0px; border-radius: 2px; word-wrap: break-word;">如果&nbsp;</span><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">target</span>&nbsp;不可扩展, 原型参数必须与<span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Object.getPrototypeOf(target)</span>&nbsp;的值相同.<br></li></ul><b>示例</b><br><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果你不想为你的对象设置一个新的原型，你的handler's的<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">setPrototypeOf</code>方法可以返回false，也可以抛出异常。</p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;">The former approach means that any operation that performs such mutation, that throws an exception on failure to mutate, will have to create the exception itself.&nbsp; For example,&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf" title="如果对象的[[Prototype]]被修改成不可扩展(通过&nbsp;Object.isExtensible()查看)，就会抛出&nbsp;TypeError异常。如果prototype参数不是一个对象或者null(例如，数字，字符串，boolean，或者&nbsp;undefined)，则什么都不做。否则，该方法将obj的[[Prototype]]修改为新的值。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Object.setPrototypeOf()</span></a>&nbsp;will create and throw a&nbsp;<span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">TypeError</span>&nbsp;itself.&nbsp; If the mutation is performed by an operation that&nbsp;<span style="margin: 0px; padding: 0px; border: 0px;">doesn't</span>&nbsp;ordinarily throw in case of failure, such as&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/setPrototypeOf" title="静态方法 Reflect.setPrototypeOf() 与 Object.setPrototypeOf() 方法是一致的。它将指定对象的原型 （即，内部的[[Prototype]]&nbsp;属性）设置为另一个对象或为&nbsp;null。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Reflect.setPrototypeOf()</span></a>, no exception will be thrown.</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> handlerReturnsFalse <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> newProto<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">false</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> newProto <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> target <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p1 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> handlerReturnsFalse<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p1<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> newProto<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// throws a TypeError</span>
Reflect<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p1<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> newProto<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// returns false</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;">The latter approach will cause&nbsp;<span style="margin: 0px; padding: 0px; border: 0px;">any</span>&nbsp;operation that attempts to mutate, to throw.&nbsp; This approach is required if you want even non-throwing operations to throw on failure, or you want to throw a custom exception value.</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> handlerThrows <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> newProto<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
        <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">throw</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Error</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'custom error'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> newProto <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> target <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p2 <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> handlerThrows<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> newProto<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// throws new Error("custom error")</span>
Reflect<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setPrototypeOf</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p2<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> newProto<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// throws new Error("custom error")</span></code></pre><br></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/isExtensible" title="此页面仍未被本地化, 期待您的翻译!" class="new" rel="nofollow" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">isExtensible()</span></a><br></td><td>handler.isExtensible() 用于拦截对象的 Object.isExtensible()。<br><br><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  isExtensible<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下列参数将会被传递给&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">isExtensible</code>方法。 this 绑定在 handler 对象上。</p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">目标对象。</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">isExtensible</code>方法必须返回一个 Boolean值或可转换成Boolean的值。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">isExtensible</code>方法拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.isExtensible</code>操作。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  isExtensible<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">"called"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token boolean" style="color: rgb(174, 129, 255);">true</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">isExtensible<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>p<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// "called"
</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">// true
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码设置了<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">isExtensible</code>方法，在调用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.isExtensible</code>时会输出<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">called</code>。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，该方法只能返回布尔值，否则返回值会被自动转为布尔值。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">这个方法有一个强限制，它的返回值必须与目标对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">isExtensible</code>属性保持一致，否则就会抛出错误。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">isExtensible<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token operator" style="color: rgb(249, 38, 114);">===</span> Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">isExtensible<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span>
</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是一个例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  isExtensible<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token boolean" style="color: rgb(174, 129, 255);">false</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">isExtensible<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>p<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 报错</span></code></pre><b>描述</b><br><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">handler.isExtensible()用于拦截对对象的Object.isExtensible()。</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>拦截</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">该方法会拦截目标对象的以下操作:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/isExtensible" title="Object.isExtensible() 方法判断一个对象是否是可扩展的（是否可以在它上面添加新的属性）。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.isExtensible()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/isExtensible" title="静态方法&nbsp;Reflect.isExtensible() 决定一个对象是否可扩展 （即是否能够添加新的属性）。与它 Object.isExtensible() 方法相似，但有一些不同，详情可见 differences。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.isExtensible()</code></a></li></ul><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>约束</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果违背了以下的约束，proxy会抛出 TypeError:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem;"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Object.isExtensible(proxy)</span>&nbsp;必须同<span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Object.isExtensible(target)</span>返回相同值。也就是必须返回true或者为true的值,返回false和为false的值都会报错。</li></ul><b>示例</b><br><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下代码演示<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/isExtensible" title="Object.isExtensible() 方法判断一个对象是否是可扩展的（是否可以在它上面添加新的属性）。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.isExtensible()</code></a>.</p><pre class="brush: js line-numbers  language-js"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  isExtensible<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'called'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">//也可以return 1;等表示为true的值</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">isExtensible</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "called"</span>
                                     <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// true</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下代码演示违反约束的情况。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  isExtensible<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">false</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">//return 0;return NaN等都会报错</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">isExtensible</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// TypeError is thrown</span></code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/preventExtensions" title="此页面仍未被本地化, 期待您的翻译!" class="new" rel="nofollow" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">preventExtensions()</span></a><br></td><td>在让一个代理对象不可扩展时触发该操作，比如在执行&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions" title="Object.preventExtensions()方法让一个对象变的不可扩展，也就是永远不能再添加新的属性。" style="margin: 0px; padding: 0px; border: 0px; border-radius: 2px; word-wrap: break-word;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Object.preventExtensions</span></a><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">(proxy)</span>&nbsp;时。<br><br><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  preventExtensions<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下参数传递给&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">preventExtensions</code>&nbsp;方法. 它会绑定到这个handler.</p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">所要拦截的目标对象.</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">preventExtensions</code>&nbsp;方法返回一个布尔值.</p><p style=""><span style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px; padding-left: 3px; padding-right: 3px;">preventExtensions</span>方法拦截<span style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.preventExtensions()</span>。该方法必须返回一个布尔值，否则会被自动转为布尔值。</p><p style="">这个方法有一个限制，只有目标对象不可扩展时（即<span style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.isExtensible(proxy)</span>为<span style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px; padding-left: 3px; padding-right: 3px;">false</span>），<span style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy.preventExtensions</span>才能返回<span style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px; padding-left: 3px; padding-right: 3px;">true</span>，否则会报错。</p><pre class=" language-javascript" style="text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; line-height: 1.2; background-color: rgb(17, 17, 17); font-size: 14.336px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; color: rgb(255, 255, 255);"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  preventExtensions<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token boolean" style="color: rgb(174, 129, 255);">true</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">preventExtensions<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>p<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 报错
</span></code></pre><p style="font-size: 14.336px; font-family: Verdana, Arial; color: rgb(51, 51, 51);">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy.preventExtensions</code>方法返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">true</code>，但这时<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.isExtensible(proxy)</code>会返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">true</code>，因此报错。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">为了防止出现这个问题，通常要在<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy.preventExtensions</code>方法里面，调用一次<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.preventExtensions</code>。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  preventExtensions<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">'called'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">preventExtensions<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token boolean" style="color: rgb(174, 129, 255);">true</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">preventExtensions<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>p<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// "called"
</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">// true</span></code></pre><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>描述</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><strong style="margin: 0px; padding: 0px; border: 0px;">handler.preventExtensions()</strong></code>&nbsp;拦截&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions" title="Object.preventExtensions()方法让一个对象变的不可扩展，也就是永远不能再添加新的属性。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.preventExtensions()</code></a>返回一个布尔值.</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>Interceptions</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">这个trap可以拦截这些操作:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions" title="Object.preventExtensions()方法让一个对象变的不可扩展，也就是永远不能再添加新的属性。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.preventExtensions()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/preventExtensions" title="静态方法 Reflect.preventExtensions() 方法阻止新属性添加到对象 例如：防止将来对对象的扩展被添加到对象中)。该方法与&nbsp;Object.preventExtensions()相似，但有一些不同点。详情可见 differences。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.preventExtensions()</code></a></li></ul><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>Invariants</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果违反了下列规则, proxy则会抛出一个&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.preventExtensions(proxy)</code>&nbsp;只能返回&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">true</code>&nbsp;如果&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.isExtensible(proxy)</code>&nbsp;是&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">false</code>.</li></ul><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>示例</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">The following code traps&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions" title="Object.preventExtensions()方法让一个对象变的不可扩展，也就是永远不能再添加新的属性。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.preventExtensions()</code></a>.</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  preventExtensions<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'called'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">preventExtensions</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">preventExtensions</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "called"</span>
                                          <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// false</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下代码违反了 invariant.</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  preventExtensions<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">preventExtensions</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 抛出类型错误</span></code></pre><br><br></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getOwnPropertyDescriptor" title="handler.getOwnPropertyDescriptor()&nbsp;方法是 Object.getOwnPropertyDescriptor() &nbsp;的陷阱。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">getOwnPropertyDescriptor()</span></a><br></td><td><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">handler.getOwnPropertyDescriptor()</span>&nbsp;方法是&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor" title="Object.getOwnPropertyDescriptor()&nbsp;方法返回指定对象上一个自有属性对应的属性描述符。（自有属性指的是直接赋予该对象的属性，不需要从原型链上进行查找的属性）" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Object.getOwnPropertyDescriptor()</span></a>&nbsp;&nbsp;的陷阱。<br><br><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  getOwnPropertyDescriptor<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">下列参数会被传入 getOwnPropertyDescriptor</code>&nbsp;方法中。这是绑定到处理程序。&nbsp;</p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">目标对象。</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">prop</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">返回属性名称的描述。</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">getOwnPropertyDescriptor</code>&nbsp;方法必须返回一个&nbsp;object 或 u<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">ndefined。</code></p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">getOwnPropertyDescriptor</code>方法拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertyDescriptor()</code>，返回一个属性描述对象或者<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">undefined</code>。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  getOwnPropertyDescriptor <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> key<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>key<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span> <span class="token operator" style="color: rgb(249, 38, 114);">===</span> <span class="token string">'_'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">return</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">getOwnPropertyDescriptor<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> key<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span> _foo<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">'bar'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> baz<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">'tar'</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">getOwnPropertyDescriptor<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'wat'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// undefined
</span>Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">getOwnPropertyDescriptor<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'_foo'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// undefined
</span>Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">getOwnPropertyDescriptor<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'baz'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// { value: 'tar', writable: true, enumerable: true, configurable: true }
</span></code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"></code></p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">handler.getOwnPropertyDescriptor</code>方法对于第一个字符为下划线的属性名会返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">undefined</code>。</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>描述</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;"><span style="border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">handler.getOwnPropertyDescriptor()</span>&nbsp;方法是&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor" title="Object.getOwnPropertyDescriptor()&nbsp;方法返回指定对象上一个自有属性对应的属性描述符。（自有属性指的是直接赋予该对象的属性，不需要从原型链上进行查找的属性）" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Object.getOwnPropertyDescriptor()</span></a>&nbsp;的陷阱。</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>拦截</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">这个陷阱可以拦截这些操作：</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor" title="Object.getOwnPropertyDescriptor()&nbsp;方法返回指定对象上一个自有属性对应的属性描述符。（自有属性指的是直接赋予该对象的属性，不需要从原型链上进行查找的属性）" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.getOwnPropertyDescriptor()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/getOwnPropertyDescriptor" title="静态方法&nbsp;Reflect.getOwnPropertyDescriptor() 与 Object.getOwnPropertyDescriptor() 方法相似。如果在对象中存在，则返回给定的属性的属性描述符。否则返回 undefined。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.getOwnPropertyDescriptor()</code></a></li></ul><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>不变量</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果下列不变量被违反，代理将抛出一个&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>：</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">getOwnPropertyDescriptor</code>&nbsp;必须返回一个&nbsp;object 或 u<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">ndefined。</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果属性作为目标对象的不可配置的属性存在，则该属性无法报告为不存在。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果属性作为目标对象的属性存在，并且目标对象不可扩展，则该属性无法报告为不存在。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果属性不存在作为目标对象的属性，并且目标对象不可扩展，则不能将其报告为存在。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">属性不能被报告为不可配置，如果它不作为目标对象的自身属性存在，或者作为目标对象的可配置的属性存在。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">Object.getOwnPropertyDescriptor（target）的结果可以使用 Object.defineProperty 应用于目标对象，也不会抛出异常。</li></ul><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>示例</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下是&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor" title="Object.getOwnPropertyDescriptor()&nbsp;方法返回指定对象上一个自有属性对应的属性描述符。（自有属性指的是直接赋予该对象的属性，不需要从原型链上进行查找的属性）" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.getOwnPropertyDescriptor()</code></a>&nbsp;的代码陷阱：</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> a<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">20</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  getOwnPropertyDescriptor<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'called: '</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> configurable<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> enumerable<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">10</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getOwnPropertyDescriptor</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'a'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "called: a"</span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 10</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下代码则违反了不变量。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> obj <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> a<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">10</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">preventExtensions</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  getOwnPropertyDescriptor<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> undefined<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getOwnPropertyDescriptor</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'a'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// TypeError is thrown</span></code></pre><br><br></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/defineProperty" title="handler.defineProperty() 用于拦截对对象的 Object.defineProperty() 操作。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">defineProperty()</span></a><br></td><td><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.defineProperty()</code></strong>&nbsp;用于拦截对对象的&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" title="Object.defineProperty() 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.defineProperty()</code></a>&nbsp;操作。</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>语法</b></p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  defineProperty<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> property<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> descriptor<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下列参数将会被传递给&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">defineProperty</code>&nbsp;方法。<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">&nbsp;this</code>&nbsp;绑定在 handler 对象上。</p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">目标对象。</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">property</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">待检索其描述的属性名。</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">descriptor</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">待定义或修改的属性的描述符。</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">defineProperty</code>&nbsp;方法必须以一个&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Boolean" title="此页面仍未被本地化, 期待您的翻译!" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Boolean</code></a>&nbsp;返回，表示定义该属性的操作成功与否。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">defineProperty</code>方法拦截了<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.defineProperty</code>操作。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  defineProperty <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> key<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> descriptor<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token boolean" style="color: rgb(174, 129, 255);">false</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>foo <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token string">'bar'</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// TypeError: proxy defineProperty handler returned false for property '"foo"'
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">defineProperty</code>方法返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">false</code>，导致添加新属性会抛出错误。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，如果目标对象不可扩展（extensible），则<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">defineProperty</code>不能增加目标对象上不存在的属性，否则会报错。另外，如果目标对象的某个属性不可写（writable）或不可配置（configurable），则<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">defineProperty</code>方法不得改变这两个设置。</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>描述</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><strong style="margin: 0px; padding: 0px; border: 0px;">handler.defineProperty()</strong></code>&nbsp;用于拦截对对象的&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" title="Object.defineProperty() 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.defineProperty()</code></a>&nbsp;操作。</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>拦截</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">该方法会拦截目标对象的以下操作 :</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" title="Object.defineProperty() 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.defineProperty()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/defineProperty" title="静态方法 Reflect.defineProperty()&nbsp;基本等同于 Object.defineProperty() 方法，唯一不同是返回&nbsp;Boolean 值。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.defineProperty()</code></a></li></ul><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>不变量</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果违背了以下的不变量，proxy会抛出&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果目标对象不可扩展， 将不能添加属性。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">不能添加或者修改一个属性为不可配置的，如果它不作为一个目标对象的不可配置的属性存在的话。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果目标对象存在一个对应的可配置属性，这个属性可能不会是不可配置的。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果一个属性在目标对象中存在对应的属性，那么&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.defineProperty(target, prop, descriptor)</code>&nbsp;将不会抛出异常。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">在严格模式下，&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">false</code>&nbsp;作为<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">&nbsp;handler.defineProperty</code>&nbsp;方法的返回值的话将会抛出&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>&nbsp;异常.</li></ul><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>示例</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下代码演示如何拦截对目标对象的&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" title="Object.defineProperty() 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.defineProperty()</code></a>&nbsp;操作。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  defineProperty<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> descriptor<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'called: '</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> desc <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> configurable<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> enumerable<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">10</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">defineProperty</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'a'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> desc<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "called: a"</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; background-color: rgb(255, 255, 255); font-size: medium; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; color: rgb(51, 51, 51);">当调用&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" title="Object.defineProperty() 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.defineProperty()</code></a>&nbsp;或者&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/defineProperty" title="静态方法 Reflect.defineProperty()&nbsp;基本等同于 Object.defineProperty() 方法，唯一不同是返回&nbsp;Boolean 值。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.defineProperty()</code></a>，传递给&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">defineProperty</code>&nbsp;的&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">descriptor</code>&nbsp;&nbsp; 有一个限制 - 只有以下属性才有用，非标准的属性将会被无视 :</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; background-color: rgb(255, 255, 255); font-size: medium; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; color: rgb(51, 51, 51);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">enumerable</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">configurable</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">writable</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">value</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">get</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">set</code></li></ul><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">defineProperty</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> descriptor<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>descriptor<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> Reflect<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">defineProperty</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> descriptor<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">defineProperty</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'name'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'proxy'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span>
  type<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'custom'</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// { value: 'proxy' }</span></code></pre><br><br></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/has" title="handler.has()&nbsp;方法可以看作是针对&nbsp;in 操作的钩子." style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">has()</span></a><br></td><td><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.has()</code></strong>&nbsp;方法可以看作是针对&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/in" title="如果指定的属性在指定的对象或其原型链中，则in&nbsp;运算符返回true。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">in</code></a>&nbsp;操作的钩子.</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>Syntax</b></p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  has<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>Parameters</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">下面是传递给 has</code>&nbsp;方法的参数.&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">this</code>&nbsp;is bound to the handler.</p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">目标对象.</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">prop</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">需要检查是否存在的属性.</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>Return value</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">has</code>&nbsp;方法返回一个 boolean 属性的值.</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">has</code>方法用来拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">HasProperty</code>操作，即判断对象是否具有某个属性时，这个方法会生效。典型的操作就是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">in</code>运算符。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面的例子使用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">has</code>方法隐藏某些属性，不被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">in</code>运算符发现。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  has <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> key<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>key<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span> <span class="token operator" style="color: rgb(249, 38, 114);">===</span> <span class="token string">'_'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token boolean" style="color: rgb(174, 129, 255);">false</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> key <span class="token keyword" style="color: rgb(102, 217, 239);">in</span> target<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span> _prop<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">'foo'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> prop<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">'foo'</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token string">'_prop'</span> <span class="token keyword" style="color: rgb(102, 217, 239);">in</span> proxy<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // false
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，如果原对象的属性名的第一个字符是下划线，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy.has</code>就会返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">false</code>，从而不会被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">in</code>运算符发现。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">如果原对象不可配置或者禁止扩展，这时<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">has</code>拦截会报错。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> obj <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span> a<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token number" style="color: rgb(174, 129, 255);">10</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">preventExtensions<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>obj<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>obj<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  has<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> prop<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token boolean" style="color: rgb(174, 129, 255);">false</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token string">'a'</span> <span class="token keyword" style="color: rgb(102, 217, 239);">in</span> p<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // TypeError is thrown
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">obj</code>对象禁止扩展，结果使用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">has</code>拦截就会报错。也就是说，如果某个属性不可配置（或者目标对象不可扩展），则<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">has</code>方法就不得“隐藏”（即返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">false</code>）目标对象的该属性。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">值得注意的是，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">has</code>方法拦截的是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">HasProperty</code>操作，而不是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">HasOwnProperty</code>操作，即<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">has</code>方法不判断一个属性是对象自身的属性，还是继承的属性。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">另外，虽然<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">for...in</code>循环也用到了<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">in</code>运算符，但是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">has</code>拦截对<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">for...in</code>循环不生效。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> stu1 <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>name<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">'张三'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> score<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token number" style="color: rgb(174, 129, 255);">59</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> stu2 <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>name<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">'李四'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> score<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token number" style="color: rgb(174, 129, 255);">99</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token function">has<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> prop<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>prop <span class="token operator" style="color: rgb(249, 38, 114);">===</span> <span class="token string">'score'</span> <span class="token operator" style="color: rgb(249, 38, 114);">&amp;&amp;</span> target<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>prop<span class="token punctuation" style="color: rgb(248, 248, 242);">]</span> <span class="token operator" style="color: rgb(249, 38, 114);">&lt;</span> <span class="token number" style="color: rgb(174, 129, 255);">60</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>`$<span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>name<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span> 不及格`<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token boolean" style="color: rgb(174, 129, 255);">false</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> prop <span class="token keyword" style="color: rgb(102, 217, 239);">in</span> target<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> oproxy1 <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>stu1<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> oproxy2 <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>stu2<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token string">'score'</span> <span class="token keyword" style="color: rgb(102, 217, 239);">in</span> oproxy1<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// 张三 不及格
</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">// false
</span>
<span class="token string">'score'</span> <span class="token keyword" style="color: rgb(102, 217, 239);">in</span> oproxy2<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// true
</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">for</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> a <span class="token keyword" style="color: rgb(102, 217, 239);">in</span> oproxy1<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>oproxy1<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>a<span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// 张三
</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">// 59
</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">for</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> b <span class="token keyword" style="color: rgb(102, 217, 239);">in</span> oproxy2<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>oproxy2<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>b<span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// 李四
</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">// 99
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">has</code>拦截只对<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">in</code>循环生效，对<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">for...in</code>循环不生效，导致不符合要求的属性没有被排除在<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">for...in</code>循环之外。</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>Description</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><strong style="margin: 0px; padding: 0px; border: 0px;">handler.has</strong></code>&nbsp;方法可以看作是针对&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/in" title="如果指定的属性在指定的对象或其原型链中，则in&nbsp;运算符返回true。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">in</code></a>&nbsp;操作的钩子.</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>Interceptions</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">这个钩子可以拦截下面这些操作:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">属性查询:&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">foo in proxy</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">继承属性查询:&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">foo in Object.create(proxy)</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">with</code>&nbsp;检查<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">: with(proxy) { (foo); }</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/has" title="静态方法&nbsp;Reflect.has() 作用与&nbsp;in 操作符&nbsp;相同。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.has()</code></a></li></ul><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>Invariants</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果违反了下面这些规则, &nbsp;proxy 将会抛出&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果目标对象的某一属性本身不可被配置，则该属性不能够被代理隐藏.</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果目标对象为不可扩展对象，则该对象的属性不能够被代理隐藏</li></ul><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>Examples</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下面的代码 hook 了&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/in" title="如果指定的属性在指定的对象或其原型链中，则in&nbsp;运算符返回true。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">in</code></a>&nbsp;操作.</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  has<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'called: '</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'a'</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">in</span> p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "called: a"</span>
                       <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// true</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下面的代码违反了规则.</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> obj <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> a<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">10</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">preventExtensions</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  has<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">false</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'a'</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">in</span> p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// TypeError is thrown</span></code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/get" title="handler.get()&nbsp;方法用于拦截对象的读取属性操作。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">get()</span></a><br></td><td><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.get()</code></strong>&nbsp;方法用于拦截对象的读取属性操作。</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>语法</b></p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">get</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> property<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> receiver<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下是传递给get方法的参数，<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">this上下文绑定在</code>handler对象上.</p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">目标对象。</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">prop</code>erty</dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">被获取的属性名。</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">receiver</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">Proxy或者继承Proxy的对象</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">get方法可以返回任何值。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>方法用于拦截某个属性的读取操作，可以接受三个参数，依次为目标对象、属性名和 proxy 实例本身（即<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">this</code>关键字指向的那个对象），其中最后一个参数可选。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>方法的用法，上文已经有一个例子，下面是另一个拦截读取操作的例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> person <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  name<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">"张三"</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>person<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">get</span><span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> property<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>property <span class="token keyword" style="color: rgb(102, 217, 239);">in</span> target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> target<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>property<span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span> <span class="token keyword" style="color: rgb(102, 217, 239);">else</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">throw</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">ReferenceError</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string">"Property \""</span> <span class="token operator" style="color: rgb(249, 38, 114);">+</span> property <span class="token operator" style="color: rgb(249, 38, 114);">+</span> <span class="token string">"\" does not exist."</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>name<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // "张三"
</span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>age<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 抛出一个错误
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码表示，如果访问目标对象不存在的属性，会抛出一个错误。如果没有这个拦截函数，访问不存在的属性，只会返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">undefined</code>。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>方法可以继承。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> proto <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">get</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> propertyKey<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> receiver<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">'GET '</span> <span class="token operator" style="color: rgb(249, 38, 114);">+</span> propertyKey<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> target<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>propertyKey<span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> obj <span class="token operator" style="color: rgb(249, 38, 114);">=</span> Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">create<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>proto<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
obj<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>foo<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // "GET foo"
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，拦截操作定义在<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Prototype</code>对象上面，所以如果读取<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">obj</code>对象继承的属性时，拦截会生效。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面的例子使用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>拦截，实现数组读取负数的索引。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token function">createArray<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>elements<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">let</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">get</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> propKey<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> receiver<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">let</span> index <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token function">Number<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>propKey<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>index <span class="token operator" style="color: rgb(249, 38, 114);">&lt;</span> <span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
        propKey <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token function">String<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>length <span class="token operator" style="color: rgb(249, 38, 114);">+</span> index<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
      <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> Reflect<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token keyword" style="color: rgb(102, 217, 239);">get</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> propKey<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> receiver<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

  <span class="token keyword" style="color: rgb(102, 217, 239);">let</span> target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  target<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">push<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>elements<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> arr <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token function">createArray<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">'a'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'b'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'c'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
arr<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token operator" style="color: rgb(249, 38, 114);">-</span><span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // c
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，数组的位置参数是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">-1</code>，就会输出数组的倒数最后一个成员。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">利用 Proxy，可以将读取属性的操作（<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>），转变为执行某个函数，从而实现属性的链式操作。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> pipe <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>value<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">var</span> funcStack <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">var</span> oproxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">get</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>pipeObject<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> fnName<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
        <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>fnName <span class="token operator" style="color: rgb(249, 38, 114);">===</span> <span class="token string">'get'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
          <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> funcStack<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">reduce<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>val<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> fn<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
            <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token function">fn<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>val<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
          <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>value<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
        <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
        funcStack<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">push<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>window<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>fnName<span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
        <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> oproxy<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
      <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> oproxy<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> double <span class="token operator" style="color: rgb(249, 38, 114);">=</span> n <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> n <span class="token operator" style="color: rgb(249, 38, 114);">*</span> <span class="token number" style="color: rgb(174, 129, 255);">2</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> pow    <span class="token operator" style="color: rgb(249, 38, 114);">=</span> n <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> n <span class="token operator" style="color: rgb(249, 38, 114);">*</span> n<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> reverseInt <span class="token operator" style="color: rgb(249, 38, 114);">=</span> n <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> n<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">toString<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">split<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">""</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">reverse<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">join<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">""</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token operator" style="color: rgb(249, 38, 114);">|</span> <span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token function">pipe<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token number" style="color: rgb(174, 129, 255);">3</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>double<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>pow<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>reverseInt<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token keyword" style="color: rgb(102, 217, 239);">get</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 63
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码设置 Proxy 以后，达到了将函数名链式使用的效果。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面的例子则是利用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>拦截，实现一个生成各种 DOM 节点的通用函数<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">dom</code>。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const dom <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">get</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> property<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>attrs <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>children<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      const el <span class="token operator" style="color: rgb(249, 38, 114);">=</span> document<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">createElement<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>property<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">for</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> prop of Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">keys<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>attrs<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
        el<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">setAttribute<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>prop<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> attrs<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>prop<span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
      <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">for</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> child of children<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
        <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">typeof</span> child <span class="token operator" style="color: rgb(249, 38, 114);">===</span> <span class="token string">'string'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
          child <span class="token operator" style="color: rgb(249, 38, 114);">=</span> document<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">createTextNode<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>child<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
        <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
        el<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">appendChild<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>child<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
      <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> el<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

const el <span class="token operator" style="color: rgb(249, 38, 114);">=</span> dom<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">div<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  <span class="token string">'Hello, my name is '</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  dom<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">a<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>href<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">'//example.com'}, 'Mark'),
</span>  <span class="token string">'. I like:'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  dom<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">ul<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
    dom<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">li<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'The web'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
    dom<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">li<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'Food'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
    dom<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">li<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'…actually that\'s it'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">)</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

document<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>body<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">appendChild<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>el<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是一个<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>方法的第三个参数的例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">get</span><span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> property<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> receiver<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> receiver<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>getReceiver <span class="token operator" style="color: rgb(249, 38, 114);">===</span> proxy<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // true
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>方法的第三个参数<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">receiver</code>，总是为当前的 Proxy 实例。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">如果一个属性不可配置（configurable）和不可写（writable），则该属性不能被代理，通过 Proxy 对象访问该属性会报错。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">defineProperties<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  foo<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    value<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token number" style="color: rgb(174, 129, 255);">123</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
    writable<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token boolean" style="color: rgb(174, 129, 255);">false</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
    configurable<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token boolean" style="color: rgb(174, 129, 255);">false</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

const handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">get</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> propKey<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token string">'abc'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

const proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>foo<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// TypeError: Invariant check failed</span></code></pre><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>描述</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.get</code></strong>&nbsp;方法用于拦截对象的读取属性操作。</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>拦截</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">该方法会拦截目标对象的以下操作:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">访问属性:&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">proxy[foo]和</code>&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">proxy.bar</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">访问原型链上的属性:&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.create(proxy)[foo]</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/get" title="Reflect.get()&nbsp;方法的工作方式，就像从&nbsp;object (target[propertyKey]) 中获取属性，但它是作为一个函数执行的。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.get()</code></a></li></ul><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>约束</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果违背了以下的约束，proxy会抛出&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果要访问的目标属性是不可写以及不可配置的，则返回的值必须与该目标属性的值相同。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果要访问的目标属性没有配置访问方法，即get方法是undefined的，则返回值必须为undefined。</li></ul><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>示例</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下代码演示如何拦截属性值的读取操作。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">get</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> receiver<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"called: "</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">10</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>a<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "called: a"</span>
                  <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 10</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下代码演示违反约束的情况。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> obj <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">defineProperty</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"a"</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
  configurable<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">false</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> 
  enumerable<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">false</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> 
  value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">10</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> 
  writable<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">false</span> 
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">get</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">20</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>a<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">//会抛出TypeError</span></code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/set" title="handler.set()&nbsp;方法用于拦截设置属性值的操作" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">set()</span></a><br></td><td><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><strong style="margin: 0px; padding: 0px; border: 0px;">handler.set()</strong></code>&nbsp;方法用于拦截设置属性值的操作</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>语法</b></p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">set</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> property<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> receiver<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下是传递给set方法的参数，<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">this上下文绑定在</code>handler对象上.</p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; background-color: rgb(255, 255, 255); font-size: medium; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; color: rgb(51, 51, 51);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">目标对象。</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">property</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">被设置的属性名。</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">value</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">被设置的新值。</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">receiver</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">最初被调用的对象。通常是proxy本身，但handler的set方法也有可能在原型链上或以其他方式被间接地调用（因此不一定是proxy本身）。</dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">比如，假设有一段代码执行&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">obj.name = "jen"，obj不是一<br>个proxy且自身不含name属性，但它的原型链上有一个proxy，那么那个proxy<br>的set拦截函数会被调用，此时obj会作为receiver参数<br>传进来。</code></dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">set方法应该返回一个布尔值，返回true代表此次设置属性成功了，如果返回false且设置属性操作发生在严格模式下，那么会抛出一个<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code>。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">set</code>方法用来拦截某个属性的赋值操作，可以接受四个参数，依次为目标对象、属性名、属性值和 Proxy 实例本身，其中最后一个参数可选。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">假定<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Person</code>对象有一个<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">age</code>属性，该属性应该是一个不大于 200 的整数，那么可以使用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Proxy</code>保证<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">age</code>的属性值符合要求。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> validator <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">set</span><span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>obj<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> prop<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> value<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>prop <span class="token operator" style="color: rgb(249, 38, 114);">===</span> <span class="token string">'age'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token operator" style="color: rgb(249, 38, 114);">!</span>Number<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">isInteger<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>value<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
        <span class="token keyword" style="color: rgb(102, 217, 239);">throw</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">TypeError</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string">'The age is not an integer'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
      <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>value <span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> <span class="token number" style="color: rgb(174, 129, 255);">200</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
        <span class="token keyword" style="color: rgb(102, 217, 239);">throw</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">RangeError</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string">'The age seems invalid'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
      <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>

   <span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 对于age以外的属性，直接保存
</span>    obj<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>prop<span class="token punctuation" style="color: rgb(248, 248, 242);">]</span> <span class="token operator" style="color: rgb(249, 38, 114);">=</span> value<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> person <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> validator<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

person<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>age <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token number" style="color: rgb(174, 129, 255);">100</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

person<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>age<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 100
</span>person<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>age <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token string">'young'</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 报错
</span>person<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>age <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token number" style="color: rgb(174, 129, 255);">300</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 报错
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，由于设置了存值函数<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">set</code>，任何不符合要求的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">age</code>属性赋值，都会抛出一个错误，这是数据验证的一种实现方法。利用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">set</code>方法，还可以数据绑定，即每当对象发生变化时，会自动更新 DOM。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">有时，我们会在对象上面设置内部属性，属性名的第一个字符使用下划线开头，表示这些属性不应该被外部使用。结合<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>和<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">set</code>方法，就可以做到防止这些内部属性被外部读写。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">get</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> key<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token function">invariant<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>key<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'get'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> target<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>key<span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">set</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> key<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> value<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token function">invariant<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>key<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'set'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    target<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>key<span class="token punctuation" style="color: rgb(248, 248, 242);">]</span> <span class="token operator" style="color: rgb(249, 38, 114);">=</span> value<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token boolean" style="color: rgb(174, 129, 255);">true</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">function</span> invariant <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>key<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> action<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>key<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span> <span class="token operator" style="color: rgb(249, 38, 114);">===</span> <span class="token string">'_'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">throw</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Error</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>`Invalid attempt to $<span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>action<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span> private <span class="token string">"${key}"</span> property`<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
const target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
const proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>_prop<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// Error: Invalid attempt to get private "_prop" property
</span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>_prop <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token string">'c'</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// Error: Invalid attempt to set private "_prop" property
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，只要读写的属性名的第一个字符是下划线，一律抛错，从而达到禁止读写内部属性的目的。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">set</code>方法第四个参数的例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">set</span><span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>obj<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> prop<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> value<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> receiver<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    obj<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>prop<span class="token punctuation" style="color: rgb(248, 248, 242);">]</span> <span class="token operator" style="color: rgb(249, 38, 114);">=</span> receiver<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
const proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>foo <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token string">'bar'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>foo <span class="token operator" style="color: rgb(249, 38, 114);">===</span> proxy<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // true
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">set</code>方法的第四个参数<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">receiver</code>，总是返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">this</code>关键字所指向的那个对象，即<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy</code>实例本身。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，如果目标对象自身的某个属性，不可写也不可配置，那么<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">set</code>不得改变这个属性的值，只能返回同样的值，否则报错。</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>描述</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><strong style="margin: 0px; padding: 0px; border: 0px;">handler.set</strong></code>&nbsp;方法用于拦截设置属性值的操作。</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>拦截</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">该方法会拦截目标对象的以下操作:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">指定属性值:&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">proxy[foo] = bar</code>&nbsp;和&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">proxy.foo = bar</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">指定继承者的属性值:&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.create(proxy)[foo] = bar</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/set" title="静态方法&nbsp;Reflect.set() 工作方式就像在一个对象上设置一个属性。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.set()</code></a></li></ul><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>约束</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果违背以下的约束条件，proxy会抛出一个<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">若目标属性是不可写及不可配置的，则不能改变它的值。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果目标属性没有配置存储方法，即set方法是undefined的，则不能设置它的值。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">在严格模式下，若set方法返回false，则会抛出一个&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>&nbsp;异常。</li></ul><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>示例</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下代码演示如何捕获属性的设置操作。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">set</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> receiver<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"called: "</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> prop <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">" = "</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>a <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">10</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "called: a = 10"</span></code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/deleteProperty" title="handler.deleteProperty() 方法用于拦截对对象属性的 delete 操作。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">deleteProperty()</span></a><br></td><td><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.deleteProperty()</code></strong>&nbsp;方法用于拦截对对象属性的&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete" title="delete 操作符用于删除对象的某个属性。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">delete</code></a>&nbsp;操作。</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>语法</b></p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  deleteProperty<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> property<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">deleteProperty</code>&nbsp;方法将会接受以下参数。&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">this</code>&nbsp;被绑定在 handler上。</p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">目标对象。</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">property</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">待删除的属性名。</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">deleteProperty</code>&nbsp;必须返回一个&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Boolean" title="此页面仍未被本地化, 期待您的翻译!" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Boolean</code></a>&nbsp;类型的值，表示了该属性是否被成功删除。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">deleteProperty</code>方法用于拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">delete</code>操作，如果这个方法抛出错误或者返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">false</code>，当前属性就无法被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">delete</code>命令删除。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  deleteProperty <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> key<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token function">invariant<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>key<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'delete'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token boolean" style="color: rgb(174, 129, 255);">true</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">function</span> invariant <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>key<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> action<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>key<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span> <span class="token operator" style="color: rgb(249, 38, 114);">===</span> <span class="token string">'_'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">throw</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Error</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>`Invalid attempt to $<span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>action<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span> private <span class="token string">"${key}"</span> property`<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span> _prop<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">'foo'</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
delete proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>_prop<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// Error: Invalid attempt to delete private "_prop" property
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">deleteProperty</code>方法拦截了<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">delete</code>操作符，删除第一个字符为下划线的属性会报错。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，目标对象自身的不可配置（configurable）的属性，不能被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">deleteProperty</code>方法删除，否则报错。</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>描述</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><strong style="margin: 0px; padding: 0px; border: 0px;">handler.deleteProperty()</strong></code>&nbsp;方法可以拦截&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete" title="delete 操作符用于删除对象的某个属性。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">delete</code></a>&nbsp;操作。</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>拦截</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">该方法会拦截以下操作:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">删除属性:&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">delete proxy[foo]</code>&nbsp;和&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">delete proxy.foo</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/deleteProperty" title="静态方法&nbsp;Reflect.deleteProperty() 允许用于删除属性。它很像 delete operator ，但它是一个函数。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.deleteProperty()</code></a></li></ul><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>不变量</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果违背了以下不变量，proxy 将会抛出一个&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果目标对象的属性是不可配置的，那么该属性不能被删除。</li></ul><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>示例</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下代码演示了对&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete" title="delete 操作符用于删除对象的某个属性。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">delete</code></a>&nbsp;操作的拦截。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  deleteProperty<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'called: '</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> prop<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">delete</span> p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>a<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "called: a"</span></code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/ownKeys" title="handler.ownKeys() 方法用于拦截 Reflect.ownKeys()." style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">ownKeys()</span></a><br></td><td><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.ownKeys()</code></strong>&nbsp;方法用于拦截&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/ownKeys" title="静态方法&nbsp;Reflect.ownKeys() 返回一个由目标对象自身的属性键组成的数组。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.ownKeys()</code></a>.</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>语法</b></p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  ownKeys<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下面的参数被传递给<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">ownKeys。this</code>被绑定在<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler上。</code></p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">目标对象.</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">ownKeys</code>&nbsp;方法必须返回一个可枚举对象.</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">ownKeys</code>方法用来拦截对象自身属性的读取操作。具体来说，拦截以下操作。</p><ul style="list-style-type: none; padding-top: 0.5rem; padding-bottom: 0.5rem; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertyNames()</code></li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertySymbols()</code></li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.keys()</code></li></ul><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.keys()</code>的例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  a<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  b<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token number" style="color: rgb(174, 129, 255);">2</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  c<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token number" style="color: rgb(174, 129, 255);">3</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token function">ownKeys<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token string">'a'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">keys<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// [ 'a' ]
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码拦截了对于<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">target</code>对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.keys()</code>操作，只返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">a</code>、<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">b</code>、<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">c</code>三个属性之中的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">a</code>属性。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面的例子是拦截第一个字符为下划线的属性名。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  _bar<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">'foo'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  _prop<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">'bar'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  prop<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">'baz'</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  ownKeys <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> Reflect<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">ownKeys<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">filter<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>key <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> key<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span> <span class="token operator" style="color: rgb(249, 38, 114);">!</span><span class="token operator" style="color: rgb(249, 38, 114);">==</span> <span class="token string">'_'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">for</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> key of Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">keys<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>key<span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// "baz"
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，使用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.keys</code>方法时，有三类属性会被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">ownKeys</code>方法自动过滤，不会返回。</p><ul style="list-style-type: none; padding-top: 0.5rem; padding-bottom: 0.5rem; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><li style="text-indent: -5px; font-size: 0.8rem;">目标对象上不存在的属性</li><li style="text-indent: -5px; font-size: 0.8rem;">属性名为 Symbol 值</li><li style="text-indent: -5px; font-size: 0.8rem;">不可遍历（<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">enumerable</code>）的属性</li></ul><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">let</span> target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  a<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  b<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token number" style="color: rgb(174, 129, 255);">2</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  c<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token number" style="color: rgb(174, 129, 255);">3</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">[</span>Symbol<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token keyword" style="color: rgb(102, 217, 239);">for</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string">'secret'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">'4'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">defineProperty<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'key'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  enumerable<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token boolean" style="color: rgb(174, 129, 255);">false</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  configurable<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token boolean" style="color: rgb(174, 129, 255);">true</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  writable<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token boolean" style="color: rgb(174, 129, 255);">true</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  value<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token string">'static'</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token function">ownKeys<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token string">'a'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'d'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> Symbol<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token keyword" style="color: rgb(102, 217, 239);">for</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string">'secret'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'key'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">let</span> proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">keys<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// ['a']
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">ownKeys</code>方法之中，显式返回不存在的属性（<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">d</code>）、Symbol 值（<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for('secret')</code>）、不可遍历的属性（<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">key</code>），结果都被自动过滤掉。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">ownKeys</code>方法还可以拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertyNames()</code>。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  ownKeys<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token string">'a'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'b'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'c'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">getOwnPropertyNames<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>p<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// [ 'a', 'b', 'c' ]
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">ownKeys</code>方法返回的数组成员，只能是字符串或 Symbol 值。如果有其他类型的值，或者返回的根本不是数组，就会报错。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> obj <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>obj<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  ownKeys<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">123</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token boolean" style="color: rgb(174, 129, 255);">true</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> undefined<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token keyword" style="color: rgb(102, 217, 239);">null</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">getOwnPropertyNames<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>p<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// Uncaught TypeError: 123 is not a valid property name
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">ownKeys</code>方法虽然返回一个数组，但是每一个数组成员都不是字符串或 Symbol 值，因此就报错了。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">如果目标对象自身包含不可配置的属性，则该属性必须被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">ownKeys</code>方法返回，否则报错。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> obj <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">defineProperty<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>obj<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'a'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  configurable<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token boolean" style="color: rgb(174, 129, 255);">false</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  enumerable<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token boolean" style="color: rgb(174, 129, 255);">true</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span>
  value<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token number" style="color: rgb(174, 129, 255);">10</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>obj<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  ownKeys<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token string">'b'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">getOwnPropertyNames<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>p<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// Uncaught TypeError: 'ownKeys' on proxy: trap result did not include 'a'
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">obj</code>对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">a</code>属性是不可配置的，这时<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">ownKeys</code>方法返回的数组之中，必须包含<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">a</code>，否则会报错。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">另外，如果目标对象是不可扩展的（non-extensition），这时<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">ownKeys</code>方法返回的数组之中，必须包含原对象的所有属性，且不能包含多余的属性，否则报错。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> obj <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  a<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token number" style="color: rgb(174, 129, 255);">1</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">preventExtensions<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>obj<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>obj<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  ownKeys<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token string">'a'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token string">'b'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

Object<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">getOwnPropertyNames<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>p<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// Uncaught TypeError: 'ownKeys' on proxy: trap returned extra keys 
// but proxy target is non-extensible
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">obj</code>对象是不可扩展的，这时<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">ownKeys</code>方法返回的数组之中，包含了<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">obj</code>对象的多余属性<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">b</code>，所以导致了报错。</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>描述</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><strong style="margin: 0px; padding: 0px; border: 0px;">handler.ownKeys()</strong></code>&nbsp;方法用于拦截&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/ownKeys" title="静态方法&nbsp;Reflect.ownKeys() 返回一个由目标对象自身的属性键组成的数组。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.ownKeys()</code></a>.</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>拦截</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">该拦截器可以拦截以下操作::</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames" title="Object.getOwnPropertyNames()方法返回一个由指定对象的所有自身属性的属性名（包括不可枚举属性但不包括Symbol值作为名称的属性）组成的数组。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.getOwnPropertyNames()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols" title="Object.getOwnPropertySymbols() 方法返回一个给定对象自身的所有 Symbol&nbsp;属性的数组。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.getOwnPropertySymbols()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" title="Object.keys() 方法会返回一个由一个给定对象的自身可枚举属性组成的数组，数组中属性名的排列顺序和使用 for...in&nbsp;循环遍历该对象时返回的顺序一致 （两者的主要区别是 一个 for-in 循环还会枚举其原型链上的属性）。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.keys()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/ownKeys" title="静态方法&nbsp;Reflect.ownKeys() 返回一个由目标对象自身的属性键组成的数组。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.ownKeys()</code></a></li></ul><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>约定</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果违反了下面的约定，proxy将抛出错误&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">ownKeys</code>&nbsp;的结果必须试一个数组.</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">数组的元素类型要么是一个&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/String" title="此页面仍未被本地化, 期待您的翻译!" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">String</code></a>&nbsp;，要么是一个&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" title="Symbol()函数会返回symbol类型的值，该类型具有静态属性和静态方法。它的静态属性会暴露几个内建的成员对象；它的静态方法会暴露全局的symbol注册，且类似于内建对象类，但作为构造函数来说它并不完整，因为它不支持语法：&quot;new Symbol()&quot;。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol</code></a>.</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">结果列表必须包含目标对象的所有不可配置（non-configurable ）、自有（own）属性的key.</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">如果目标对象不可扩展，那么结果列表必须包含目标对象的所有自有（own）属性的key，不能有其它值.</li></ul><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>示例</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下面的代码拦截&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames" title="Object.getOwnPropertyNames()方法返回一个由指定对象的所有自身属性的属性名（包括不可枚举属性但不包括Symbol值作为名称的属性）组成的数组。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.getOwnPropertyNames()</code></a>.</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  ownKeys<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'called'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'a'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'b'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'c'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getOwnPropertyNames</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "called"</span>
                                            <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// [ 'a', 'b', 'c' ]</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下面的代码违反了约定</p><pre class="brush: js example-bad line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> obj <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">defineProperty</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'a'</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> 
  configurable<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">false</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> 
  enumerable<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> 
  value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">10</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>obj<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  ownKeys<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">123</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">12.5</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">true</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">false</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> undefined<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">null</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>Object<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">getOwnPropertyNames</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>p<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> 

<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// TypeError: proxy [[OwnPropertyKeys]] 必须返回一个数组 </span>
<span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 数组元素类型只能是String或Symbol</span></code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/apply" title="handler.apply()&nbsp;方法用于拦截函数的调用。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">apply()</span></a><br></td><td><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.apply()</code></strong>&nbsp;方法用于拦截函数的调用。</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>语法</b></p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  apply<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> thisArg<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> argumentsList<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下是传递给apply方法的参数，<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">this上下文绑定在</code>handler对象上.</p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">目标对象（函数）。</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">thisArg</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">被调用时的上下文对象。</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">argumentsList</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">被调用时的参数数组。</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">apply方法可以返回任何值。</code></p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">apply</code>方法拦截函数的调用、<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">call</code>和<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">apply</code>操作。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">apply</code>方法可以接受三个参数，分别是目标对象、目标对象的上下文对象（<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">this</code>）和目标对象的参数数组。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  apply <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> ctx<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> args<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> Reflect<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">apply<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>arguments<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是一个例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span> <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token string">'I am the target'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  apply<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token string">'I am the proxy'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token function">p<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// "I am the proxy"
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，变量<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p</code>是 Proxy 的实例，当它作为函数调用时（<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">p()</code>），就会被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">apply</code>方法拦截，返回一个字符串。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是另外一个例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> twice <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  apply <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> ctx<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> args<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> Reflect<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">apply<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>arguments<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token operator" style="color: rgb(249, 38, 114);">*</span> <span class="token number" style="color: rgb(174, 129, 255);">2</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">function</span> sum <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>left<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> right<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> left <span class="token operator" style="color: rgb(249, 38, 114);">+</span> right<span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token keyword" style="color: rgb(102, 217, 239);">var</span> proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>sum<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> twice<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token function">proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token number" style="color: rgb(174, 129, 255);">2</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 6
</span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">call<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token keyword" style="color: rgb(102, 217, 239);">null</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token number" style="color: rgb(174, 129, 255);">5</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token number" style="color: rgb(174, 129, 255);">6</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 22
</span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">apply<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token keyword" style="color: rgb(102, 217, 239);">null</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">7</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token number" style="color: rgb(174, 129, 255);">8</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 30
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，每当执行<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy</code>函数（直接调用或<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">call</code>和<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">apply</code>调用），就会被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">apply</code>方法拦截。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">另外，直接调用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Reflect.apply</code>方法，也会被拦截。</p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"></code></p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">Reflect<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">apply<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token keyword" style="color: rgb(102, 217, 239);">null</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">9</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token number" style="color: rgb(174, 129, 255);">10</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 38</span></code></pre><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>描述</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">handler.apply</code></strong>&nbsp;方法用于拦截函数的调用。</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>拦截</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">该方法会拦截目标对象的以下操作:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">proxy(...args)</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" title="apply() 方法调用一个函数, 其具有一个指定的this值，以及作为一个数组（或类似数组的对象）提供的参数。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Function.prototype.apply()</code></a>&nbsp;和&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call" title="call()&nbsp;方法调用一个函数, 其具有一个指定的this值和分别地提供的参数(参数的列表)。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Function.prototype.call()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/apply" title="静态方法&nbsp;Reflect.apply() 通过指定的参数列表发起对目标(target)函数的调用。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.apply()</code></a></li></ul><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>约束</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">无。</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>示例</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下代码演示如何捕获函数的调用。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  apply<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> thisArg<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> argumentsList<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">"called: "</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> argumentsList<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">join</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">", "</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> argumentsList<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">0</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> argumentsList<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> argumentsList<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">2</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">p</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">2</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">3</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "called: 1, 2, 3"</span>
                         <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 6</span></code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/construct" title="handler.construct()&nbsp;方法用于拦截new 操作. 为了使新的操作在生成的Proxy对象上有效，用于初始化代理的目标本身必须具有[[Construct]]内部方法（即 new target 必须是有效的）。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">construct()</span></a><br></td><td><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><strong style="margin: 0px; padding: 0px; border: 0px;">handler.construct()</strong></code>&nbsp;方法用于拦截<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new" title="new&nbsp;运算符创建一个自定义对象或具有构造函数的内置对象的实例。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">new</code></a>&nbsp;操作. 为了使新的操作在生成的Proxy对象上有效，用于初始化代理的目标本身必须具有[[Construct]]内部方法（即&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">new target</code>&nbsp;必须是有效的）。</p><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>语法</b></p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  construct<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> argumentsList<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> newTarget<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下面的参数被传递给<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">construct方法，this绑定在handler上</code>.</p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">目标对象</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">argumentsList</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">用于construct的参数列表</dd><dt style="margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">newTarget</code></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">最初被调用的构造函数，就上面的例子而言指的是p.</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">construct</code>&nbsp;方法必须返回一个对象.</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">construct</code>方法用于拦截<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">new</code>命令，下面是拦截对象的写法。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  construct <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> args<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> newTarget<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">target</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>args<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">construct</code>方法可以接受两个参数。</p><ul style="list-style-type: none; padding-top: 0.5rem; padding-bottom: 0.5rem; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">target</code>: 目标对象</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">args</code>：构建函数的参数对象</li></ul><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是一个例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  construct<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> args<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">'called: '</span> <span class="token operator" style="color: rgb(249, 38, 114);">+</span> args<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">join<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">', '</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span> value<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> args<span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span> <span class="token operator" style="color: rgb(249, 38, 114);">*</span> <span class="token number" style="color: rgb(174, 129, 255);">10</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">p</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>value<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// "called: 1"
</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">// 10
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">construct</code>方法返回的必须是一个对象，否则会报错。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">var</span> p <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  construct<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> argumentsList<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

<span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">p</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 报错</span></code></pre><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>描述</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><strong style="margin: 0px; padding: 0px; border: 0px;">handler.construct()</strong></code>&nbsp;方法用于拦截&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new" title="new&nbsp;运算符创建一个自定义对象或具有构造函数的内置对象的实例。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">new</code></a>&nbsp;.</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>拦截</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">该拦截器可以拦截以下操作:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">new proxy(...args)</code></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/construct" title="Reflect.construct() 方法的行为有点像&nbsp;new 操作符 构造函数&nbsp;， 相当于运行&nbsp;new target(...args)." style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Reflect.construct()</code></a></li></ul><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>约束</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果违反以下约定，代理将会抛出错误&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>:</p><ul style="list-style-position: initial; list-style-image: initial; margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">必须返回一个对象.</li></ul><p style="margin-top: 103px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.2; position: relative;"><b>示例</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下面代码显示了如何拦截&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new" title="new&nbsp;运算符创建一个自定义对象或具有构造函数的内置对象的实例。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">new</code></a>&nbsp;操作.</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  construct<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> argumentsList<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> newTarget<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'called: '</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">+</span> argumentsList<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">join</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token string" style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">', '</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span> value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> argumentsList<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">[</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">0</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">]</span> <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">*</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">10</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

console<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span class="token function" style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">p</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span>value<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// "called: 1"</span>
                             <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// 10</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下面的代码违反了约定.</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  construct<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> argumentsList<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> newTarget<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token number" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 0, 85);">1</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">p</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// TypeError is thrown</span><span class="line-numbers-rows" style="margin: 0px; padding: 0px; border-width: 0px 1px 0px 0px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: rgb(153, 153, 153); border-bottom-color: initial; border-left-color: initial; border-image: initial; display: block; position: absolute; pointer-events: none; top: 0px; font-size: 16px; left: -3.8em; width: 3em; letter-spacing: -1px; user-select: none;"><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span><span style="margin: 0px; padding: 0px; border: 0px; pointer-events: none; display: block; counter-increment: linenumber 1;"></span></span></code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下面的代码未能正确的初始化Proxy. Proxy初始化时的<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">target</code>&nbsp;其自身必须试一个合法的constructor.</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;"><span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">var</span> p <span class="token operator" style="margin: 0px; padding: 0px; border: 0px; color: rgb(166, 127, 89); background: transparent;">=</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">Proxy</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
  construct<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">:</span> <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span>target<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> argumentsList<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> newTarget<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span>
    <span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">return</span> <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>
  <span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span>
<span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span>

<span class="token keyword" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">new</span> <span class="token class-name" style="margin: 0px; padding: 0px; border: 0px;">p</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span class="token punctuation" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span> <span class="token comment" spellcheck="true" style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">// TypeError is thrown, "p" is not a constructor</span></code></pre></td></tr></tbody></table></div><div><b><br></b></div><div><b><br></b></div><div><b><br></b></div><h2 style="margin: 0px; padding: 0px; border: 0px;" id="blogTitle8"><b>this 问题</b></h2><div><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">虽然 Proxy 可以代理针对目标对象的访问，但它不是目标对象的透明代理，即不做任何拦截的情况下，也无法保证与目标对象的行为一致。主要原因就是在 Proxy 代理的情况下，目标对象内部的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">this</code>关键字会指向 Proxy 代理。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  m<span class="token punctuation" style="color: rgb(248, 248, 242);">:</span> <span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    console<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">log<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token keyword" style="color: rgb(102, 217, 239);">this</span> <span class="token operator" style="color: rgb(249, 38, 114);">===</span> proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
const handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

const proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

target<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">m<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // false
</span>proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">m<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // true
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，一旦<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy</code>代理<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">target.m</code>，后者内部的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">this</code>就是指向<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy</code>，而不是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">target</code>。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是一个例子，由于<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">this</code>指向的变化，导致 Proxy 无法代理目标对象。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const _name <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

class <span class="token class-name">Person</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token function">constructor<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>name<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    _name<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token keyword" style="color: rgb(102, 217, 239);">set</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">this</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> name<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">get</span> <span class="token function">name<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> _name<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token keyword" style="color: rgb(102, 217, 239);">get</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(102, 217, 239);">this</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>

const jane <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Person</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string">'Jane'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
jane<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>name<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 'Jane'
</span>
const proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>jane<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>name<span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // undefined
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，目标对象<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">jane</code>的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">name</code>属性，实际保存在外部<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">WeakMap</code>对象<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">_name</code>上面，通过<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">this</code>键区分。由于通过<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy.name</code>访问时，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">this</code>指向<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">proxy</code>，导致无法取到值，所以返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">undefined</code>。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">此外，有些原生对象的内部属性，只有通过正确的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">this</code>才能拿到，所以 Proxy 也无法代理这些原生对象的属性。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Date</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
const handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
const proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">getDate<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);">
// TypeError: this is not a Date object.
</span></code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">getDate</code>方法只能在<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Date</code>对象实例上面拿到，如果<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">this</code>不是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Date</code>对象实例就会报错。这时，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">this</code>绑定原始对象，就可以解决这个问题。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const target <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Date</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string">'2015-01-01'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
const handler <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">get</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> prop<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">if</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>prop <span class="token operator" style="color: rgb(249, 38, 114);">===</span> <span class="token string">'getDate'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> target<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span>getDate<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">bind<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> Reflect<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token keyword" style="color: rgb(102, 217, 239);">get</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> prop<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
const proxy <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> handler<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

proxy<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">getDate<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // 1</span></code></pre></div><div><b><br></b></div><h2 style="margin: 0px; padding: 0px; border: 0px;" id="blogTitle8"><b>实例：Web 服务的客户端</b><br></h2><div><b><br></b></div><div><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">Proxy 对象可以拦截目标对象的任意属性，这使得它很合适用来写 Web 服务的客户端。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const service <span class="token operator" style="color: rgb(249, 38, 114);">=</span> <span class="token function">createWebService<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token string">'http://example.com/data'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>

service<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">employees<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">then<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>json <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  const employees <span class="token operator" style="color: rgb(249, 38, 114);">=</span> JSON<span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token function">parse<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>json<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
 <span class="token comment" spellcheck="true" style="color: rgb(117, 113, 94);"> // ···
</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码新建了一个 Web 服务的接口，这个接口返回各种数据。Proxy 可以拦截这个对象的任意属性，所以不用为每一种数据写一个适配方法，只要写一个 Proxy 拦截就可以了。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;"><span class="token keyword" style="color: rgb(102, 217, 239);">function</span> <span class="token function">createWebService<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>baseUrl<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
  <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token keyword" style="color: rgb(102, 217, 239);">new</span> <span class="token class-name">Proxy</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
    <span class="token keyword" style="color: rgb(102, 217, 239);">get</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span>target<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> propKey<span class="token punctuation" style="color: rgb(248, 248, 242);">,</span> receiver<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">{</span>
      <span class="token keyword" style="color: rgb(102, 217, 239);">return</span> <span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span> <span class="token operator" style="color: rgb(249, 38, 114);">=</span><span class="token operator" style="color: rgb(249, 38, 114);">&gt;</span> <span class="token function">httpGet<span class="token punctuation" style="color: rgb(248, 248, 242);">(</span></span>baseUrl<span class="token operator" style="color: rgb(249, 38, 114);">+</span><span class="token string">'/'</span> <span class="token operator" style="color: rgb(249, 38, 114);">+</span> propKey<span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
    <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
  <span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span>
<span class="token punctuation" style="color: rgb(248, 248, 242);">}</span>
</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">同理，Proxy 也可以用来实现数据库的 ORM 层。</p></div><div><b><br></b></div><h2 style="margin: 0px; padding: 0px; border: 0px;" id="blogTitle8"><b>示例</b></h2><h3 id="blogTitle9" class="highlight-spanned" style="color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; font-size: 1.5rem; font-family: Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; line-height: 1.25; background-color: rgb(255, 255, 255); -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; background-color: rgb(51, 51, 51); color: rgb(255, 255, 255); line-height: 1.25; -webkit-box-decoration-break: clone;">基础示例</span></h3><p style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在以下简单的例子中，当对象中不存在属性名时，缺省返回数为<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">37</code>。例子中使用了&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/get" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">get</code></a>。</p><pre class="brush: js line-numbers  language-js" style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(238, 238, 238); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.5; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; text-shadow: none; word-break: normal; word-wrap: normal; counter-reset: linenumber 0; border-right-width: 0px !important; border-left-width: 5px !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">let handler = {
    get: function(target, name){
        return name in target ? target[name] : 37;
    }
};

let p = new Proxy({}, handler);

p.a = 1;
p.b = undefined;

console.log(p.a, p.b);    // 1, undefined

console.log('c' in p, p.c);    // false, 37</code></pre><h3 id="blogTitle10" class="highlight-spanned" style="color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; font-size: 1.5rem; font-family: Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; line-height: 1.25; background-color: rgb(255, 255, 255); -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; background-color: rgb(51, 51, 51); color: rgb(255, 255, 255); line-height: 1.25; -webkit-box-decoration-break: clone;">无操作转发代理</span></h3><p style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在以下例子中，我们使用了一个原生 JavaScript 对象，代理会将所有应用到它的操作转发到这个对象上。</p><pre class="brush: js line-numbers  language-js" style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(238, 238, 238); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.5; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; text-shadow: none; word-break: normal; word-wrap: normal; counter-reset: linenumber 0; border-right-width: 0px !important; border-left-width: 5px !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">let target = {};
let p = new Proxy(target, {});

p.a = 37;   // 操作转发到目标

console.log(target.a);    // 37. 操作已经被正确地转发</code></pre><h3 id="blogTitle11" class="highlight-spanned" style="color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; font-size: 1.5rem; font-family: Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; line-height: 1.25; background-color: rgb(255, 255, 255); -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; background-color: rgb(51, 51, 51); color: rgb(255, 255, 255); line-height: 1.25; -webkit-box-decoration-break: clone;">验证</span></h3><p style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">通过代理，你可以轻松地验证向一个对象的传值。这个例子使用了&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/set" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">set</code></a>。</p><pre class="brush: js line-numbers  language-js" style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(238, 238, 238); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.5; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; text-shadow: none; word-break: normal; word-wrap: normal; counter-reset: linenumber 0; border-right-width: 0px !important; border-left-width: 5px !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">let validator = {
  set: function(obj, prop, value) {
    if (prop === 'age') {
      if (!Number.isInteger(value)) {
        throw new TypeError('The age is not an integer');
      }
      if (value &gt; 200) {
        throw new RangeError('The age seems invalid');
      }
    }

    // The default behavior to store the value
    obj[prop] = value;
  }
};

let person = new Proxy({}, validator);

person.age = 100;

console.log(person.age); 
// 100

person.age = 'young'; 
// 抛出异常: Uncaught TypeError: The age is not an integer

person.age = 300; 
// 抛出异常: Uncaught RangeError: The age seems invalid</code></pre><h3 id="blogTitle12" class="highlight-spanned" style="color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; font-size: 1.5rem; font-family: Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; line-height: 1.25; background-color: rgb(255, 255, 255); -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; background-color: rgb(51, 51, 51); color: rgb(255, 255, 255); line-height: 1.25; -webkit-box-decoration-break: clone;">扩展构造函数</span></h3><p style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">方法代理可以轻松地通过一个新构造函数来扩展一个已有的构造函数。这个例子使用了<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/construct" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">construct</code></a>和<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/apply" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;">apply</a></code>。</p><pre class="brush: js line-numbers  language-js" style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(238, 238, 238); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.5; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; text-shadow: none; word-break: normal; word-wrap: normal; counter-reset: linenumber 0; border-right-width: 0px !important; border-left-width: 5px !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">function extend(sup,base) {
  var descriptor = Object.getOwnPropertyDescriptor(
    base.prototype,"constructor"
  );
  base.prototype = Object.create(sup.prototype);
  var handler = {
    construct: function(target, args) {
      var obj = Object.create(base.prototype);
      this.apply(target,obj,args);
      return obj;
    },
    apply: function(target, that, args) {
      sup.apply(that,args);
      base.apply(that,args);
    }
  };
  var proxy = new Proxy(base,handler);
  descriptor.value = proxy;
  Object.defineProperty(base.prototype, "constructor", descriptor);
  return proxy;
}

var Person = function(name){
  this.name = name
};

var Boy = extend(Person, function(name, age) {
  this.age = age;
});

Boy.prototype.sex = "M";

var Peter = new Boy("Peter", 13);
console.log(Peter.sex);  // "M"
console.log(Peter.name); // "Peter"
console.log(Peter.age);  // 13</code></pre><h3 id="blogTitle13" class="highlight-spanned" style="color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; font-size: 1.5rem; font-family: Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; line-height: 1.25; background-color: rgb(255, 255, 255); -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; background-color: rgb(51, 51, 51); color: rgb(255, 255, 255); line-height: 1.25; -webkit-box-decoration-break: clone;">操作 DOM 节点</span></h3><p style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">有时你希望切换两个不同的元素的属性或类名。下面展示了如何使用&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/set" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">set</code></a>。</p><pre class="brush: js line-numbers  language-js" style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(238, 238, 238); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.5; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; text-shadow: none; word-break: normal; word-wrap: normal; counter-reset: linenumber 0; border-right-width: 0px !important; border-left-width: 5px !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">let view = new Proxy({
  selected: null
},
{
  set: function(obj, prop, newval) {
    let oldval = obj[prop];

    if (prop === 'selected') {
      if (oldval) {
        oldval.setAttribute('aria-selected', 'false');
      }
      if (newval) {
        newval.setAttribute('aria-selected', 'true');
      }
    }

    // The default behavior to store the value
    obj[prop] = newval;
  }
});

let i1 = view.selected = document.getElementById('item-1');
console.log(i1.getAttribute('aria-selected')); // 'true'

let i2 = view.selected = document.getElementById('item-2');
console.log(i1.getAttribute('aria-selected')); // 'false'
console.log(i2.getAttribute('aria-selected')); // 'true'</code></pre><h3 id="blogTitle14" class="highlight-spanned" style="color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; font-size: 1.5rem; font-family: Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; line-height: 1.25; background-color: rgb(255, 255, 255); -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; background-color: rgb(51, 51, 51); color: rgb(255, 255, 255); line-height: 1.25; -webkit-box-decoration-break: clone;">值修正及附加属性</span></h3><p style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">products</code>代理会计算传值并根据需要转换为数组。这个代理对象同时支持一个叫做&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">latestBrowser</code>的附加属性，这个属性可以同时作为 getter 和 setter。</p><pre class="brush: js line-numbers  language-js" style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(238, 238, 238); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.5; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; text-shadow: none; word-break: normal; word-wrap: normal; counter-reset: linenumber 0; border-right-width: 0px !important; border-left-width: 5px !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">let products = new Proxy({
  browsers: ['Internet Explorer', 'Netscape']
},
{
  get: function(obj, prop) {
    // 附加属性
    if (prop === 'latestBrowser') {
      return obj.browsers[obj.browsers.length - 1];
    }

    // 缺省行为是返回属性值
    return obj[prop];
  },
  set: function(obj, prop, value) {
    // 附加属性
    if (prop === 'latestBrowser') {
      obj.browsers.push(value);
      return;
    }

    // 如果不是数组则进行转换
    if (typeof value === 'string') {
      value = [value];
    }

    // 缺省行为是保存属性值
    obj[prop] = value;
  }
});

console.log(products.browsers); // ['Internet Explorer', 'Netscape']
products.browsers = 'Firefox'; // ?传入一个 string (错误地)
console.log(products.browsers); // ['Firefox'] &lt;- ?没问题, ?得到的是一个 array

products.latestBrowser = 'Chrome';
console.log(products.browsers); // ['Firefox', 'Chrome']
console.log(products.latestBrowser); // 'Chrome'</code></pre><h3 id="blogTitle15" class="highlight-spanned" style="color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; font-size: 1.5rem; font-family: Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; line-height: 1.25; background-color: rgb(255, 255, 255); -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; background-color: rgb(51, 51, 51); color: rgb(255, 255, 255); line-height: 1.25; -webkit-box-decoration-break: clone;">通过属性查找数组中的特定对象</span></h3><p style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">以下代理为数组扩展了一些实用工具。可以看到，你可以灵活地“定义”属性，而不需要使用&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><a href="https://developer.mozilla.org/zh-CN/docs/JavaScript/Reference/Global_Objects/Object/defineProperties" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;">Object.defineProperties</a></code>方法。以下例子可以用于通过单元格来查找表格中的一行。在这种情况下，target 是<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><a href="https://developer.mozilla.org/zh-CN/docs/DOM/table.rows" class="new" rel="nofollow" style="color: rgb(153, 0, 0); margin: 0px; padding: 0px; border: 0px;">table.rows</a></code>。</p><pre class="brush: js line-numbers  language-js" style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(238, 238, 238); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.5; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; text-shadow: none; word-break: normal; word-wrap: normal; counter-reset: linenumber 0; border-right-width: 0px !important; border-left-width: 5px !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">let products = new Proxy([
  { name: 'Firefox', type: 'browser' },
  { name: 'SeaMonkey', type: 'browser' },
  { name: 'Thunderbird', type: 'mailer' }
],
{
  get: function(obj, prop) {
    // 缺省行为是返回属性值， prop ?通常是一个整数
    if (prop in obj) {
      return obj[prop];
    }

    // 获取 products 的 number; 它是 products.length 的别名
    if (prop === 'number') {
      return obj.length;
    }

    let result, types = {};

    for (let product of obj) {
      if (product.name === prop) {
        result = product;
      }
      if (types[product.type]) {
        types[product.type].push(product);
      } else {
        types[product.type] = [product];
      }
    }

    // 通过 name 获取 product
    if (result) {
      return result;
    }

    // 通过 type 获取 products
    if (prop in types) {
      return types[prop];
    }

    // 获取 product type
    if (prop === 'types') {
      return Object.keys(types);
    }

    return undefined;
  }
});

console.log(products[0]); // { name: 'Firefox', type: 'browser' }
console.log(products['Firefox']); // { name: 'Firefox', type: 'browser' }
console.log(products['Chrome']); // undefined
console.log(products.browser); // [{ name: 'Firefox', type: 'browser' }, { name: 'SeaMonkey', type: 'browser' }]
console.log(products.types); // ['browser', 'mailer']
console.log(products.number); // 3</code></pre><h3 id="blogTitle16" class="highlight-spanned" style="color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; font-size: 1.5rem; font-family: Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif; line-height: 1.25; background-color: rgb(255, 255, 255); -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; background-color: rgb(51, 51, 51); color: rgb(255, 255, 255); line-height: 1.25; -webkit-box-decoration-break: clone;">一个完整的&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(255, 255, 255, 0.4) !important; border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(255, 255, 255) !important;">traps</code>&nbsp;列表示例</span></h3><p style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">出于教学目的，这里为了创建一个完整的 traps 列表示例，我们将尝试代理化一个非原生对象，这特别适用于这类操作：由&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/DOM/document.cookie#A_little_framework.3A_a_complete_cookies_reader.2Fwriter_with_full_unicode_support" title="https://developer.mozilla.org/zh-CN/docs/DOM/document.cookie#A_little_framework.3A_a_complete_cookies_reader.2Fwriter_with_full_unicode_support" class="new" rel="nofollow" style="color: rgb(153, 0, 0); margin: 0px; padding: 0px; border: 0px;">发布在 document.cookie页面上的“小型框架”</a>创建的<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">docCookies</code>全局对象。</p><pre class="brush: js line-numbers  language-js" style="color: rgb(51, 51, 51); margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(238, 238, 238); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.5; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; text-shadow: none; word-break: normal; word-wrap: normal; counter-reset: linenumber 0; border-right-width: 0px !important; border-left-width: 5px !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">/*
  var docCookies = ... get the "docCookies" object here:  
  https://developer.mozilla.org/zh-CN/docs/DOM/document.cookie#A_little_framework.3A_a_complete_cookies_reader.2Fwriter_with_full_unicode_support
*/

var docCookies = new Proxy(docCookies, {
  "get": function (oTarget, sKey) {
    return oTarget[sKey] || oTarget.getItem(sKey) || undefined;
  },
  "set": function (oTarget, sKey, vValue) {
    if (sKey in oTarget) { return false; }
    return oTarget.setItem(sKey, vValue);
  },
  "deleteProperty": function (oTarget, sKey) {
    if (sKey in oTarget) { return false; }
    return oTarget.removeItem(sKey);
  },
  "enumerate": function (oTarget, sKey) {
    return oTarget.keys();
  },
  "ownKeys": function (oTarget, sKey) {
    return oTarget.keys();
  },
  "has": function (oTarget, sKey) {
    return sKey in oTarget || oTarget.hasItem(sKey);
  },
  "defineProperty": function (oTarget, sKey, oDesc) {
    if (oDesc &amp;&amp; "value" in oDesc) { oTarget.setItem(sKey, oDesc.value); }
    return oTarget;
  },
  "getOwnPropertyDescriptor": function (oTarget, sKey) {
    var vValue = oTarget.getItem(sKey);
    return vValue ? {
      "value": vValue,
      "writable": true,
      "enumerable": true,
      "configurable": false
    } : undefined;
  },
});

/* Cookies 测试 */

alert(docCookies.my_cookie1 = "First value");
alert(docCookies.getItem("my_cookie1"));

docCookies.setItem("my_cookie1", "Changed value");
alert(docCookies.my_cookie1);</code></pre></div></div><h1 id="blogTitle17"><b>Proxy 原型对象</b></h1><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div>
    </div>      
  </article>
</div>      
{% endblock %}