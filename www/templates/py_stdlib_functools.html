{% extends 'c-word.html' %}

{% block title %} list - Python | standard library | functools {% endblock title %}

{% block point1 %}
<article contenteditable="true">
    <p><span style="background-color: yellow;"><b>Category: 计算机 | 程序设计语言 | Python | standard library | functools</b></span></p>
    <h1 id="blogTitle0">functools</h1><h2 id="blogTitle1">概述</h2><p>functools --- Higher-order functions and operations on callable objects<br></p><p><strong style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">Source code:</strong><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;</span><a class="reference external" href="https://github.com/python/cpython/tree/3.7/Lib/functools.py" style="color: rgb(99, 99, 187); text-decoration-line: none; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">Lib/functools.py</a><br></p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#module-functools" title="functools: Higher-order functions and operations on callable objects." style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">functools</span></code></a>&nbsp;module is for higher-order functions: functions that act on or return other functions. In general, any callable object can be treated as a function for the purposes of this module.</p><pre><h3 id="blogTitle2">Help on module functools</h3>
<h4 id="blogTitle3">NAME</h4>    functools - functools.py - Tools for working with functions and callable objects

<h4 id="blogTitle4">MODULE REFERENCE</h4>    https://docs.python.org/3.7/library/functools

    The following documentation is automatically generated from the Python
    source files.  It may be incomplete, incorrect or include features that
    are considered implementation detail and may vary between Python
    implementations.  When in doubt, consult the module reference at the
    location listed above.

<h4 id="blogTitle5">CLASSES</h4>    builtins.object
        partial
        partialmethod

    class partial(builtins.object)
     |  partial(func, *args, **keywords) - new function with partial application
     |  of the given arguments and keywords.
     |
     |  Methods defined here:
     |
     |  __call__(self, /, *args, **kwargs)
     |      Call self as a function.
     |
     |  __delattr__(self, name, /)
     |      Implement delattr(self, name).
     |
     |  __getattribute__(self, name, /)
     |      Return getattr(self, name).
     |
     |  __reduce__(...)
     |      Helper for pickle.
     |
     |  __repr__(self, /)
     |      Return repr(self).
     |
     |  __setattr__(self, name, value, /)
     |      Implement setattr(self, name, value).
     |
     |  __setstate__(...)
     |
     |  ----------------------------------------------------------------------
     |  Static methods defined here:
     |
     |  __new__(*args, **kwargs) from builtins.type
     |      Create and return a new object.  See help(type) for accurate signature.
     |
     |  ----------------------------------------------------------------------
     |  Data descriptors defined here:
     |
     |  __dict__
     |
     |  args
     |      tuple of arguments to future partial calls
     |
     |  func
     |      function object to use in future partial calls
     |
     |  keywords
     |      dictionary of keyword arguments to future partial calls

    class partialmethod(builtins.object)
     |  partialmethod(func, *args, **keywords)
     |
     |  Method descriptor with partial application of the given arguments
     |  and keywords.
     |
     |  Supports wrapping existing descriptors and handles non-descriptor
     |  callables as instance methods.
     |
     |  Methods defined here:
     |
     |  __get__(self, obj, cls)
     |
     |  __init__(self, func, *args, **keywords)
     |      Initialize self.  See help(type(self)) for accurate signature.
     |
     |  __repr__(self)
     |      Return repr(self).
     |
     |  ----------------------------------------------------------------------
     |  Data descriptors defined here:
     |
     |  __dict__
     |      dictionary for instance variables (if defined)
     |
     |  __isabstractmethod__
     |
     |  __weakref__
     |      list of weak references to the object (if defined)

<h4 id="blogTitle6">FUNCTIONS</h4>    cmp_to_key(...)
        Convert a cmp= function into a key= function.

    lru_cache(maxsize=128, typed=False)
        Least-recently-used cache decorator.

        If *maxsize* is set to None, the LRU features are disabled and the cache
        can grow without bound.

        If *typed* is True, arguments of different types will be cached separately.
        For example, f(3.0) and f(3) will be treated as distinct calls with
        distinct results.

        Arguments to the cached function must be hashable.

        View the cache statistics named tuple (hits, misses, maxsize, currsize)
        with f.cache_info().  Clear the cache and statistics with f.cache_clear().
        Access the underlying function with f.__wrapped__.

        See:  http://en.wikipedia.org/wiki/Cache_algorithms#Least_Recently_Used

    reduce(...)
        reduce(function, sequence[, initial]) -&gt; value

        Apply a function of two arguments cumulatively to the items of a sequence,
        from left to right, so as to reduce the sequence to a single value.
        For example, reduce(lambda x, y: x+y, [1, 2, 3, 4, 5]) calculates
        ((((1+2)+3)+4)+5).  If initial is present, it is placed before the items
        of the sequence in the calculation, and serves as a default when the
        sequence is empty.

    singledispatch(func)
        Single-dispatch generic function decorator.

        Transforms a function into a generic function, which can have different
        behaviours depending upon the type of its first argument. The decorated
        function acts as the default implementation, and additional
        implementations can be registered using the register() attribute of the
        generic function.

    total_ordering(cls)
        Class decorator that fills in missing ordering methods

    update_wrapper(wrapper, wrapped, assigned=('__module__', '__name__', '__qualname__', '__doc__', '__annotations__'), updated=('__dict__',))
        Update a wrapper function to look like the wrapped function

        wrapper is the function to be updated
        wrapped is the original function
        assigned is a tuple naming the attributes assigned directly
        from the wrapped function to the wrapper function (defaults to
        functools.WRAPPER_ASSIGNMENTS)
        updated is a tuple naming the attributes of the wrapper that
        are updated with the corresponding attribute from the wrapped
        function (defaults to functools.WRAPPER_UPDATES)

    wraps(wrapped, assigned=('__module__', '__name__', '__qualname__', '__doc__', '__annotations__'), updated=('__dict__',))
        Decorator factory to apply update_wrapper() to a wrapper function

        Returns a decorator that invokes update_wrapper() with the decorated
        function as the wrapper argument and the arguments to wraps() as the
        remaining arguments. Default arguments are as for update_wrapper().
        This is a convenience function to simplify applying partial() to
        update_wrapper().

<h4 id="blogTitle7">DATA</h4>    WRAPPER_ASSIGNMENTS = ('__module__', '__name__', '__qualname__', '__do...
    WRAPPER_UPDATES = ('__dict__',)
    __all__ = ['update_wrapper', 'wraps', 'WRAPPER_ASSIGNMENTS', 'WRAPPER_...

<h4 id="blogTitle8">FILE</h4>    /usr/local/Cellar/python/3.7.1/Frameworks/Python.framework/Versions/3.7/lib/python3.7/functools.py<br></pre><p><br></p><h2>functions</h2><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#module-functools" title="functools: Higher-order functions and operations on callable objects." style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">functools</span></code></a>&nbsp;module defines the following functions:</p><div class="sphinxsidebar" role="navigation" aria-label="main navigation" style="float: left; width: 230px; margin-left: -851px; font-size: smaller; overflow-wrap: break-word; background-color: rgb(238, 238, 238); border-radius: 5px; line-height: 17.3333px;"><div class="sphinxsidebarwrapper" style="padding: 10px 5px 0px 10px; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 13.3333px; float: left; margin-right: 0px; width: 202px; top: 8648.17px;"><h3 style="color: rgb(68, 68, 68); font-size: 1.4em; font-weight: normal; margin: 0.2em 0px 0px; padding: 0px;"><a href="https://docs.python.org/3/contents.html" style="color: rgb(68, 68, 68); text-decoration-line: none;"><br>Table of Contents</a></h3><ul style="list-style: none; margin: 10px; padding: 0px; color: rgb(68, 68, 68);"><li><a class="reference internal" href="https://docs.python.org/3/library/functools.html#" style="color: rgb(68, 68, 68); text-decoration-line: none;"><code class="docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 12.8667px; font-family: monospace, sans-serif; font-weight: bold;"><span class="pre" style="hyphens: none;">functools</span></code>&nbsp;— Higher-order functions and operations on callable objects</a><ul style="list-style: square; margin: 0px 10px 0px 20px; padding: 0px;"><li style="margin-bottom: 0.4em;"><a class="reference internal" href="https://docs.python.org/3/library/functools.html#partial-objects" style="color: rgb(68, 68, 68); text-decoration-line: none;"><code class="docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 12.8667px; font-family: monospace, sans-serif; font-weight: bold;"><span class="pre" style="hyphens: none;">partial</span></code>&nbsp;Objects</a></li></ul></li></ul><h4 style="color: rgb(68, 68, 68); font-size: 1.3em; font-weight: normal; margin: 1.5em 0px 0px; padding: 0px;">Previous topic</h4><p class="topless" style="color: rgb(68, 68, 68); margin: 5px 10px 10px;"><a href="https://docs.python.org/3/library/itertools.html" title="previous chapter" style="color: rgb(68, 68, 68); text-decoration-line: none;"><code class="docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 12.8667px; font-family: monospace, sans-serif; font-weight: bold;"><span class="pre" style="hyphens: none;">itertools</span></code>&nbsp;— Functions creating iterators for efficient looping</a></p><h4 style="color: rgb(68, 68, 68); font-size: 1.3em; font-weight: normal; margin: 1.5em 0px 0px; padding: 0px;">Next topic</h4><p class="topless" style="color: rgb(68, 68, 68); margin: 5px 10px 10px;"><a href="https://docs.python.org/3/library/operator.html" title="next chapter" style="color: rgb(68, 68, 68); text-decoration-line: none;"><code class="docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 12.8667px; font-family: monospace, sans-serif; font-weight: bold;"><span class="pre" style="hyphens: none;">operator</span></code>&nbsp;— Standard operators as functions</a></p><div role="note" aria-label="source link"><h3 style="color: rgb(68, 68, 68); font-size: 1.4em; font-weight: normal; margin: 1.5em 0px 0px; padding: 0px;">This Page</h3><ul class="this-page-menu" style="list-style: none; margin: 10px; padding: 0px; color: rgb(68, 68, 68);"><li><a href="https://docs.python.org/3/bugs.html" style="color: rgb(68, 68, 68); text-decoration-line: none;">Report a Bug</a></li><li><a href="https://github.com/python/cpython/blob/3.7/Doc/library/functools.rst" rel="nofollow" style="color: rgb(68, 68, 68); text-decoration-line: none;">Show Source</a></li></ul></div></div><div id="sidebarbutton" title="Collapse sidebar" style="background-color: rgb(204, 204, 204); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; border-radius: 0px 5px 5px 0px; color: rgb(68, 68, 68); font-size: 1.2em; cursor: pointer; height: 9365.09px; padding-top: 1px; padding-left: 1px; margin-left: 218px;"></div></div><dl class="function" style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); margin-bottom: 15px;"><h3><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">functools.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">cmp_to_key</code><span class="sig-paren" style="font-size: larger;">(</span><em>func</em><span class="sig-paren" style="font-size: larger;">)</span></h3><dt id="functools.cmp_to_key"><a class="headerlink" href="https://docs.python.org/3/library/functools.html#functools.cmp_to_key" title="Permalink to this definition" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Transform an old-style comparison function to a&nbsp;<a class="reference internal" href="https://docs.python.org/3/glossary.html#term-key-function" style="color: rgb(99, 99, 187); text-decoration-line: none;">key function</a>. Used with tools that accept key functions (such as&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functions.html#sorted" title="sorted" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sorted()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functions.html#min" title="min" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">min()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functions.html#max" title="max" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">max()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/heapq.html#heapq.nlargest" title="heapq.nlargest" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">heapq.nlargest()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/heapq.html#heapq.nsmallest" title="heapq.nsmallest" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">heapq.nsmallest()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/itertools.html#itertools.groupby" title="itertools.groupby" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">itertools.groupby()</span></code></a>). This function is primarily used as a transition tool for programs being converted from Python 2 which supported the use of comparison functions.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">A comparison function is any callable that accept two arguments, compares them, and returns a negative number for less-than, zero for equality, or a positive number for greater-than. A key function is a callable that accepts one argument and returns another value to be used as the sort key.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Example:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">cmp_to_key</span><span class="p">(</span><span class="n">locale</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">strcoll</span><span class="p">))</span>  <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># locale-aware sort order</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">For sorting examples and a brief sorting tutorial, see&nbsp;<a class="reference internal" href="https://docs.python.org/3/howto/sorting.html#sortinghowto" style="color: rgb(99, 99, 187); text-decoration-line: none;">Sorting HOW TO</a>.</p><div class="versionadded"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">New in version 3.2.</span></p></div></dd></dl><dl class="function" style="margin-bottom: 15px; background-color: rgb(255, 255, 255);"><h3 style="color: rgb(34, 34, 34);"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">@</code><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">functools.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">lru_cache</code><span class="sig-paren" style="font-size: larger;">(</span><em>maxsize=128</em>,&nbsp;<em>typed=False</em><span class="sig-paren" style="font-size: larger;">)</span></h3><dt id="functools.lru_cache" style="color: rgb(34, 34, 34);"><a class="headerlink" href="https://docs.python.org/3/library/functools.html#functools.lru_cache" title="Permalink to this definition" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="color: rgb(34, 34, 34); margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span style="color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-size: 16px; font-variant-ligatures: common-ligatures; text-align: start;">functools.lru_cache 的作用主要是用来做缓存，他能把相对耗时的函数结果进行保存，避免传入相同的参数重复计算。同时，缓存并不会无限增长，不用的缓存会被释放。</span><br></p></dd><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><pre style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span style="text-align: start;"># clockdeco.py

import time
import functools

def clock(func):
    @functools.wraps(func)
    def clocked(*args, **kwargs):
        t0 = time.time()
        result = func(*args, **kwargs)
        elapsed = time.time() - t0
        name = func.__name__
        arg_lst = []
        if args:
            arg_lst.append(', '.join(repr(arg) for arg in args))
        if kwargs:
            pairs = ['%s=%r' % (k, w) for k, w in sorted(kwargs.items())]
            arg_lst.append(', '.join(pairs))
        arg_str = ', '.join(arg_lst)
        print('[%0.8fs] %s(%s) -&gt; %r ' % (elapsed, name, arg_str, result))
        return result
    return clocked
<br></span></pre></dd><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><pre style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span style="text-align: start;"># fib.py

from clockdeco import clock

@clock
def fib(n):
    if n &lt; 2:
        return n
    return fib(n-2) + fib(n-1)

if __name__ == '__main__':
    print(fib(6))
<br></span></pre></dd><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><pre style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span style="text-align: start;">python fib.py

[0.00000095s] fib(0) -&gt; 0
[0.00000072s] fib(1) -&gt; 1
[0.00047708s] fib(2) -&gt; 1
[0.00000095s] fib(1) -&gt; 1
[0.00000095s] fib(0) -&gt; 0
[0.00000119s] fib(1) -&gt; 1
[0.00003219s] fib(2) -&gt; 1
[0.00007105s] fib(3) -&gt; 2
[0.00059009s] fib(4) -&gt; 3
[0.00000095s] fib(1) -&gt; 1
[0.00000119s] fib(0) -&gt; 0
[0.00000119s] fib(1) -&gt; 1
[0.00006700s] fib(2) -&gt; 1
[0.00013280s] fib(3) -&gt; 2
[0.00000119s] fib(0) -&gt; 0
[0.00000095s] fib(1) -&gt; 1
[0.00005722s] fib(2) -&gt; 1
[0.00000095s] fib(1) -&gt; 1
[0.00000191s] fib(0) -&gt; 0
[0.00001407s] fib(1) -&gt; 1
[0.00010705s] fib(2) -&gt; 1
[0.00015736s] fib(3) -&gt; 2
[0.00026584s] fib(4) -&gt; 3
[0.00045085s] fib(5) -&gt; 5
[0.00111294s] fib(6) -&gt; 8
8
</span></pre></dd><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><pre style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span style="text-align: start;">有大量的重复函数计算在整个运行过程中，比如 fib(1)，fib(2) 就分别运行了多次。
现在给 fib() 函数加上 @functools.lru_cache() 装饰器进行缓存实现<br></span></pre></dd><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><pre style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span style="text-align: start;"># fib.py

from clockdeco import clock
from functools import lru_cache

@lru_cache()
@clock
def fib(n):
    if n &lt; 2:
        return n
    return fib(n-2) + fib(n-1)

if __name__ == '__main__':
    print(fib(6))

</span></pre></dd><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><pre style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span style="text-align: start;">python fib.py

[0.00000095s] fib(0) -&gt; 0
[0.00000095s] fib(1) -&gt; 1
[0.00011182s] fib(2) -&gt; 1
[0.00000215s] fib(3) -&gt; 2
[0.00014591s] fib(4) -&gt; 3
[0.00000095s] fib(5) -&gt; 5
[0.00017905s] fib(6) -&gt; 8
8<br></span></pre></dd><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><pre style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span style="text-align: start;">不使用 lru_cache 装饰器时的运行时间是 </span>0.00111294s，加上以后变成了 0.00017905s。
这个效率增加的杠杆的，尤其在充斥这大量重复计算时，它更能够为程序的运行节省大量的时间。</pre></dd><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><div><span style="text-align: start;"><br></span></div></dd><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span style="text-align: start;"><br></span></p></dd><dd style="color: rgb(34, 34, 34); margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Decorator to wrap a function with a memoizing callable that saves up to the&nbsp;<em>maxsize</em>&nbsp;most recent calls. It can save time when an expensive or I/O bound function is periodically called with the same arguments.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Since a dictionary is used to cache results, the positional and keyword arguments to the function must be hashable.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Distinct argument patterns may be considered to be distinct calls with separate cache entries. For example,&nbsp;<cite>f(a=1, b=2)</cite>&nbsp;and&nbsp;<cite>f(b=2, a=1)</cite>&nbsp;differ in their keyword argument order and may have two separate cache entries.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">If&nbsp;<em>maxsize</em>&nbsp;is set to&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>, the LRU feature is disabled and the cache can grow without bound. The LRU feature performs best when&nbsp;<em>maxsize</em>&nbsp;is a power-of-two.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">If&nbsp;<em>typed</em>&nbsp;is set to true, function arguments of different types will be cached separately. For example,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">f(3)</span></code>&nbsp;and&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">f(3.0)</span></code>&nbsp;will be treated as distinct calls with distinct results.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">To help measure the effectiveness of the cache and tune the&nbsp;<em>maxsize</em>&nbsp;parameter, the wrapped function is instrumented with a&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">cache_info()</span></code>function that returns a&nbsp;<a class="reference internal" href="https://docs.python.org/3/glossary.html#term-named-tuple" style="color: rgb(99, 99, 187); text-decoration-line: none;">named tuple</a>&nbsp;showing&nbsp;<em>hits</em>,&nbsp;<em>misses</em>,&nbsp;<em>maxsize</em>&nbsp;and&nbsp;<em>currsize</em>. In a multi-threaded environment, the hits and misses are approximate.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">The decorator also provides a&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">cache_clear()</span></code>&nbsp;function for clearing or invalidating the cache.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">The original underlying function is accessible through the&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__wrapped__</span></code>attribute. This is useful for introspection, for bypassing the cache, or for rewrapping the function with a different cache.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">An&nbsp;<a class="reference external" href="https://en.wikipedia.org/wiki/Cache_algorithms#Examples" style="color: rgb(99, 99, 187); text-decoration-line: none;">LRU (least recently used) cache</a>&nbsp;works best when the most recent calls are the best predictors of upcoming calls (for example, the most popular articles on a news server tend to change each day). The cache’s size limit assures that the cache does not grow without bound on long-running processes such as web servers.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">In general, the LRU cache should only be used when you want to reuse previously computed values. Accordingly, it doesn’t make sense to cache functions with side-effects, functions that need to create distinct mutable objects on each call, or impure functions such as time() or random().</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Example of an LRU cache for static web content:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">32</span><span class="p">)</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">get_pep</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="s1" style="color: rgb(64, 112, 160);">'Retrieve text of a Python Enhancement Proposal'</span>
    <span class="n">resource</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="s1" style="color: rgb(64, 112, 160);">'http://www.python.org/dev/peps/pep-</span><span class="si" style="color: rgb(112, 160, 208); font-style: italic;">%04d</span><span class="s1" style="color: rgb(64, 112, 160);">/'</span> <span class="o" style="color: rgb(102, 102, 102);">%</span> <span class="n">num</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">try</span><span class="p">:</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">with</span> <span class="n">urllib</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">request</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">as</span> <span class="n">s</span><span class="p">:</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">s</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">except</span> <span class="n">urllib</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">error</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">HTTPError</span><span class="p">:</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="s1" style="color: rgb(64, 112, 160);">'Not Found'</span>

<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">n</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="mi" style="color: rgb(32, 128, 80);">8</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">290</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">308</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">320</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">8</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">218</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">320</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">279</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">289</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">320</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">9991</span><span class="p">:</span>
<span class="o" style="color: rgb(102, 102, 102);">...</span>     <span class="n">pep</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">get_pep</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="o" style="color: rgb(102, 102, 102);">...</span>     <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb" style="color: rgb(0, 112, 32);">len</span><span class="p">(</span><span class="n">pep</span><span class="p">))</span>

<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">get_pep</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">cache_info</span><span class="p">()</span>
<span class="n">CacheInfo</span><span class="p">(</span><span class="n">hits</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="n">misses</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">8</span><span class="p">,</span> <span class="n">maxsize</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">32</span><span class="p">,</span> <span class="n">currsize</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">8</span><span class="p">)</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Example of efficiently computing&nbsp;<a class="reference external" href="https://en.wikipedia.org/wiki/Fibonacci_number" style="color: rgb(99, 99, 187); text-decoration-line: none;">Fibonacci numbers</a>&nbsp;using a cache to implement a&nbsp;<a class="reference external" href="https://en.wikipedia.org/wiki/Dynamic_programming" style="color: rgb(99, 99, 187); text-decoration-line: none;">dynamic programming</a>&nbsp;technique:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">)</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">n</span> <span class="o" style="color: rgb(102, 102, 102);">&lt;</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">:</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">n</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o" style="color: rgb(102, 102, 102);">-</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">)</span> <span class="o" style="color: rgb(102, 102, 102);">+</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o" style="color: rgb(102, 102, 102);">-</span><span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">)</span>

<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">n</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="nb" style="color: rgb(0, 112, 32);">range</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">16</span><span class="p">)]</span>
<span class="p">[</span><span class="mi" style="color: rgb(32, 128, 80);">0</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">8</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">13</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">21</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">34</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">55</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">89</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">144</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">233</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">377</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">610</span><span class="p">]</span>

<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">fib</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">cache_info</span><span class="p">()</span>
<span class="n">CacheInfo</span><span class="p">(</span><span class="n">hits</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">28</span><span class="p">,</span> <span class="n">misses</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">16</span><span class="p">,</span> <span class="n">maxsize</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">,</span> <span class="n">currsize</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">16</span><span class="p">)</span>
</pre></div></div><div class="versionadded"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">New in version 3.2.</span></p></div><div class="versionchanged"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">Changed in version 3.3:&nbsp;</span>Added the&nbsp;<em>typed</em>&nbsp;option.</p></div></dd></dl><dl class="function" style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); margin-bottom: 15px;"><h3><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">@</code><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">functools.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">total_ordering</code></h3><dt id="functools.total_ordering"><a class="headerlink" href="https://docs.python.org/3/library/functools.html#functools.total_ordering" title="Permalink to this definition" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Given a class defining one or more rich comparison ordering methods, this class decorator supplies the rest. This simplifies the effort involved in specifying all of the possible rich comparison operations:</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">The class must define one of&nbsp;<a class="reference internal" href="https://docs.python.org/3/reference/datamodel.html#object.__lt__" title="object.__lt__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__lt__()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/3/reference/datamodel.html#object.__le__" title="object.__le__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__le__()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/3/reference/datamodel.html#object.__gt__" title="object.__gt__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__gt__()</span></code></a>, or&nbsp;<a class="reference internal" href="https://docs.python.org/3/reference/datamodel.html#object.__ge__" title="object.__ge__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__ge__()</span></code></a>. In addition, the class should supply an&nbsp;<a class="reference internal" href="https://docs.python.org/3/reference/datamodel.html#object.__eq__" title="object.__eq__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__eq__()</span></code></a>&nbsp;method.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">For example:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@total_ordering</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Student</span><span class="p">:</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">_is_valid_operand</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">hasattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">"lastname"</span><span class="p">)</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">and</span>
                <span class="nb" style="color: rgb(0, 112, 32);">hasattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">"firstname"</span><span class="p">))</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__eq__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">not</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">_is_valid_operand</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="bp" style="color: rgb(0, 112, 32);">NotImplemented</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="p">((</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lastname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">(),</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">firstname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">())</span> <span class="o" style="color: rgb(102, 102, 102);">==</span>
                <span class="p">(</span><span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lastname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">firstname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">()))</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__lt__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">not</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">_is_valid_operand</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="bp" style="color: rgb(0, 112, 32);">NotImplemented</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="p">((</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lastname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">(),</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">firstname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">())</span> <span class="o" style="color: rgb(102, 102, 102);">&lt;</span>
                <span class="p">(</span><span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lastname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">firstname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">()))</span>
</pre></div></div><div class="admonition note" style="margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 3px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; line-height: 22.4px;">Note</p>&nbsp;<p class="last" style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px; display: inline;">While this decorator makes it easy to create well behaved totally ordered types, it&nbsp;<em>does</em>&nbsp;come at the cost of slower execution and more complex stack traces for the derived comparison methods. If performance benchmarking indicates this is a bottleneck for a given application, implementing all six rich comparison methods instead is likely to provide an easy speed boost.</p></div><div class="versionadded"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">New in version 3.2.</span></p></div><div class="versionchanged"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">Changed in version 3.4:&nbsp;</span>Returning NotImplemented from the underlying comparison function for unrecognised types is now supported.</p></div></dd></dl><dl class="function" style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); margin-bottom: 15px;"><h3><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">functools.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">partial</code><span class="sig-paren" style="font-size: larger;">(</span><em>func</em>,&nbsp;<em>*args</em>,&nbsp;<em>**keywords</em><span class="sig-paren" style="font-size: larger;">)</span></h3><dt id="functools.partial"><a class="headerlink" href="https://docs.python.org/3/library/functools.html#functools.partial" title="Permalink to this definition" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Return a new&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#partial-objects" style="color: rgb(99, 99, 187); text-decoration-line: none;">partial object</a>&nbsp;which when called will behave like&nbsp;<em>func</em>&nbsp;called with the positional arguments&nbsp;<em>args</em>&nbsp;and keyword arguments&nbsp;<em>keywords</em>. If more arguments are supplied to the call, they are appended to&nbsp;<em>args</em>. If additional keyword arguments are supplied, they extend and override&nbsp;<em>keywords</em>. Roughly equivalent to:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">partial</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">keywords</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">newfunc</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">fargs</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">fkeywords</span><span class="p">):</span>
        <span class="n">newkeywords</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">keywords</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">newkeywords</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">update</span><span class="p">(</span><span class="n">fkeywords</span><span class="p">)</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">func</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">fargs</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">newkeywords</span><span class="p">)</span>
    <span class="n">newfunc</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">func</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">func</span>
    <span class="n">newfunc</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">args</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">args</span>
    <span class="n">newfunc</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">keywords</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">keywords</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">newfunc</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">The&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial()</span></code></a>&nbsp;is used for partial function application which “freezes” some portion of a function’s arguments and/or keywords resulting in a new object with a simplified signature. For example,&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial()</span></code></a>&nbsp;can be used to create a callable that behaves like the&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functions.html#int" title="int" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">int()</span></code></a>&nbsp;function where the&nbsp;<em>base</em>&nbsp;argument defaults to two:</p><div class="highlight-default notranslate"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="kn" style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="color: rgb(14, 132, 181); font-weight: bold;">functools</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n">partial</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">basetwo</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">partial</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">int</span><span class="p">,</span> <span class="n">base</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">basetwo</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="vm" style="color: rgb(187, 96, 213);">__doc__</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="s1" style="color: rgb(64, 112, 160);">'Convert base 2 string to an int.'</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">basetwo</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'10010'</span><span class="p">)</span>
<span class="go">18</span>
</pre></div></div></dd></dl><dl class="class" style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); margin-bottom: 15px;"><h3><em class="property">class&nbsp;</em><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">functools.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">partialmethod</code><span class="sig-paren" style="font-size: larger;">(</span><em>func</em>,&nbsp;<em>*args</em>,&nbsp;<em>**keywords</em><span class="sig-paren" style="font-size: larger;">)</span></h3><dt id="functools.partialmethod"><a class="headerlink" href="https://docs.python.org/3/library/functools.html#functools.partialmethod" title="Permalink to this definition" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Return a new&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partialmethod" title="functools.partialmethod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partialmethod</span></code></a>&nbsp;descriptor which behaves like&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>&nbsp;except that it is designed to be used as a method definition rather than being directly callable.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><em>func</em>&nbsp;must be a&nbsp;<a class="reference internal" href="https://docs.python.org/3/glossary.html#term-descriptor" style="color: rgb(99, 99, 187); text-decoration-line: none;">descriptor</a>&nbsp;or a callable (objects which are both, like normal functions, are handled as descriptors).</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">When&nbsp;<em>func</em>&nbsp;is a descriptor (such as a normal Python function,<a class="reference internal" href="https://docs.python.org/3/library/functions.html#classmethod" title="classmethod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">classmethod()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functions.html#staticmethod" title="staticmethod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">staticmethod()</span></code></a>,&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">abstractmethod()</span></code>&nbsp;or another instance of&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partialmethod" title="functools.partialmethod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partialmethod</span></code></a>), calls to&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__get__</span></code>&nbsp;are delegated to the underlying descriptor, and an appropriate&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#partial-objects" style="color: rgb(99, 99, 187); text-decoration-line: none;">partial object</a>&nbsp;returned as the result.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">When&nbsp;<em>func</em>&nbsp;is a non-descriptor callable, an appropriate bound method is created dynamically. This behaves like a normal Python function when used as a method: the&nbsp;<em>self</em>&nbsp;argument will be inserted as the first positional argument, even before the&nbsp;<em>args</em>&nbsp;and&nbsp;<em>keywords</em>&nbsp;supplied to the&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partialmethod" title="functools.partialmethod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partialmethod</span></code></a>&nbsp;constructor.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Example:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Cell</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">object</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">_alive</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@property</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">alive</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">_alive</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">set_state</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">_alive</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">bool</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="n">set_alive</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">partialmethod</span><span class="p">(</span><span class="n">set_state</span><span class="p">,</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="n">set_dead</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">partialmethod</span><span class="p">(</span><span class="n">set_state</span><span class="p">,</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">Cell</span><span class="p">()</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">c</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">alive</span>
<span class="go">False</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">c</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">set_alive</span><span class="p">()</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">c</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">alive</span>
<span class="go">True</span>
</pre></div></div><div class="versionadded"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">New in version 3.4.</span></p></div></dd></dl><dl class="function" style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); margin-bottom: 15px;"><dt id="functools.reduce"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">functools.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">reduce</code><span class="sig-paren" style="font-size: larger;">(</span><em>function</em>,&nbsp;<em>iterable</em><span class="optional" style="font-size: 1.3em;">[</span>,&nbsp;<em>initializer</em><span class="optional" style="font-size: 1.3em;">]</span><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/3/library/functools.html#functools.reduce" title="Permalink to this definition" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Apply&nbsp;<em>function</em>&nbsp;of two arguments cumulatively to the items of&nbsp;<em>sequence</em>, from left to right, so as to reduce the sequence to a single value. For example,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">reduce(lambda</span>&nbsp;<span class="pre" style="hyphens: none;">x,</span>&nbsp;<span class="pre" style="hyphens: none;">y:</span>&nbsp;<span class="pre" style="hyphens: none;">x+y,</span>&nbsp;<span class="pre" style="hyphens: none;">[1,</span>&nbsp;<span class="pre" style="hyphens: none;">2,</span>&nbsp;<span class="pre" style="hyphens: none;">3,</span>&nbsp;<span class="pre" style="hyphens: none;">4,</span>&nbsp;<span class="pre" style="hyphens: none;">5])</span></code>&nbsp;calculates&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">((((1+2)+3)+4)+5)</span></code>. The left argument,&nbsp;<em>x</em>, is the accumulated value and the right argument,&nbsp;<em>y</em>, is the update value from the&nbsp;<em>sequence</em>. If the optional&nbsp;<em>initializer</em>&nbsp;is present, it is placed before the items of the sequence in the calculation, and serves as a default when the sequence is empty. If&nbsp;<em>initializer</em>&nbsp;is not given and&nbsp;<em>sequence</em>&nbsp;contains only one item, the first item is returned.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Roughly equivalent to:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">reduce</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span> <span class="n">initializer</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">):</span>
    <span class="n">it</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">initializer</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">is</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">:</span>
        <span class="n">value</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">else</span><span class="p">:</span>
        <span class="n">value</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">initializer</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">element</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n">it</span><span class="p">:</span>
        <span class="n">value</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">function</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">value</span>
</pre></div></div></dd></dl><dl class="function" style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); margin-bottom: 15px;"><h3><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">@</code><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">functools.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">singledispatch</code></h3><dt id="functools.singledispatch"><a class="headerlink" href="https://docs.python.org/3/library/functools.html#functools.singledispatch" title="Permalink to this definition" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Transform a function into a&nbsp;<a class="reference internal" href="https://docs.python.org/3/glossary.html#term-single-dispatch" style="color: rgb(99, 99, 187); text-decoration-line: none;">single-dispatch</a>&nbsp;<a class="reference internal" href="https://docs.python.org/3/glossary.html#term-generic-function" style="color: rgb(99, 99, 187); text-decoration-line: none;">generic function</a>.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">To define a generic function, decorate it with the&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">@singledispatch</span></code>&nbsp;decorator. Note that the dispatch happens on the type of the first argument, create your function accordingly:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="kn" style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="color: rgb(14, 132, 181); font-weight: bold;">functools</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n">singledispatch</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@singledispatch</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">fun</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Let me just say,"</span><span class="p">,</span> <span class="n">end</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s2" style="color: rgb(64, 112, 160);">" "</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">To add overloaded implementations to the function, use the&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">register()</span></code>attribute of the generic function. It is a decorator. For functions annotated with types, the decorator will infer the type of the first argument automatically:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">register</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb" style="color: rgb(0, 112, 32);">int</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Strength in numbers, eh?"</span><span class="p">,</span> <span class="n">end</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s2" style="color: rgb(64, 112, 160);">" "</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">register</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb" style="color: rgb(0, 112, 32);">list</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Enumerate this:"</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="nb" style="color: rgb(0, 112, 32);">enumerate</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">For code which doesn’t use type annotations, the appropriate type argument can be passed explicitly to the decorator itself:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">register</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">complex</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">_</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Better than complicated."</span><span class="p">,</span> <span class="n">end</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s2" style="color: rgb(64, 112, 160);">" "</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">arg</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">real</span><span class="p">,</span> <span class="n">arg</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">imag</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">To enable registering lambdas and pre-existing functions, the<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">register()</span></code>&nbsp;attribute can be used in a functional form:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">nothing</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Nothing."</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">register</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">type</span><span class="p">(</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">),</span> <span class="n">nothing</span><span class="p">)</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">The&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">register()</span></code>&nbsp;attribute returns the undecorated function which enables decorator stacking, pickling, as well as creating unit tests for each variant independently:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">register</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">float</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">register</span><span class="p">(</span><span class="n">Decimal</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">fun_num</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Half of your number:"</span><span class="p">,</span> <span class="n">end</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s2" style="color: rgb(64, 112, 160);">" "</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">arg</span> <span class="o" style="color: rgb(102, 102, 102);">/</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun_num</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">is</span> <span class="n">fun</span>
<span class="go">False</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">When called, the generic function dispatches on the type of the first argument:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Hello, world."</span><span class="p">)</span>
<span class="go">Hello, world.</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"test."</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">)</span>
<span class="go">Let me just say, test.</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">42</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">)</span>
<span class="go">Strength in numbers, eh? 42</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">([</span><span class="s1" style="color: rgb(64, 112, 160);">'spam'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'spam'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'eggs'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'spam'</span><span class="p">],</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">)</span>
<span class="go">Enumerate this:</span>
<span class="go">0 spam</span>
<span class="go">1 spam</span>
<span class="go">2 eggs</span>
<span class="go">3 spam</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">)</span>
<span class="go">Nothing.</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="mf" style="color: rgb(32, 128, 80);">1.23</span><span class="p">)</span>
<span class="go">0.615</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Where there is no registered implementation for a specific type, its method resolution order is used to find a more generic implementation. The original function decorated with&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">@singledispatch</span></code>&nbsp;is registered for the base&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object</span></code>&nbsp;type, which means it is used if no better implementation is found.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">To check which implementation will the generic function choose for a given type, use the&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">dispatch()</span></code>&nbsp;attribute:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">dispatch</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">float</span><span class="p">)</span>
<span class="go">&lt;function fun_num at 0x1035a2840&gt;</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">dispatch</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">dict</span><span class="p">)</span>    <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># note: default implementation</span>
<span class="go">&lt;function fun at 0x103fe0000&gt;</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">To access all registered implementations, use the read-only&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">registry</span></code>attribute:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">registry</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">dict_keys([&lt;class 'NoneType'&gt;, &lt;class 'int'&gt;, &lt;class 'object'&gt;,</span>
<span class="go">          &lt;class 'decimal.Decimal'&gt;, &lt;class 'list'&gt;,</span>
<span class="go">          &lt;class 'float'&gt;])</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">registry</span><span class="p">[</span><span class="nb" style="color: rgb(0, 112, 32);">float</span><span class="p">]</span>
<span class="go">&lt;function fun_num at 0x1035a2840&gt;</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">registry</span><span class="p">[</span><span class="nb" style="color: rgb(0, 112, 32);">object</span><span class="p">]</span>
<span class="go">&lt;function fun at 0x103fe0000&gt;</span>
</pre></div></div><div class="versionadded"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">New in version 3.4.</span></p></div><div class="versionchanged"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">Changed in version 3.7:&nbsp;</span>The&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">register()</span></code>&nbsp;attribute supports using type annotations.</p></div></dd></dl><dl class="function" style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); margin-bottom: 15px;"><h3><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">functools.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">update_wrapper</code><span class="sig-paren" style="font-size: larger;">(</span><em>wrapper</em>,&nbsp;<em>wrapped</em>,&nbsp;<em>assigned=WRAPPER_ASSIGNMENTS</em>,&nbsp;<em>updated=WRAPPER_UPDATES</em><span class="sig-paren" style="font-size: larger;">)</span></h3><dt id="functools.update_wrapper"><a class="headerlink" href="https://docs.python.org/3/library/functools.html#functools.update_wrapper" title="Permalink to this definition" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Update a&nbsp;<em>wrapper</em>&nbsp;function to look like the&nbsp;<em>wrapped</em>&nbsp;function. The optional arguments are tuples to specify which attributes of the original function are assigned directly to the matching attributes on the wrapper function and which attributes of the wrapper function are updated with the corresponding attributes from the original function. The default values for these arguments are the module level constants&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">WRAPPER_ASSIGNMENTS</span></code>&nbsp;(which assigns to the wrapper function’s&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__module__</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__name__</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__qualname__</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__annotations__</span></code>&nbsp;and&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__doc__</span></code>, the documentation string) and&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">WRAPPER_UPDATES</span></code>&nbsp;(which updates the wrapper function’s&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code>, i.e. the instance dictionary).</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">To allow access to the original function for introspection and other purposes (e.g. bypassing a caching decorator such as&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.lru_cache" title="functools.lru_cache" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">lru_cache()</span></code></a>), this function automatically adds a&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__wrapped__</span></code>&nbsp;attribute to the wrapper that refers to the function being wrapped.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">The main intended use for this function is in&nbsp;<a class="reference internal" href="https://docs.python.org/3/glossary.html#term-decorator" style="color: rgb(99, 99, 187); text-decoration-line: none;">decorator</a>&nbsp;functions which wrap the decorated function and return the wrapper. If the wrapper function is not updated, the metadata of the returned function will reflect the wrapper definition rather than the original function definition, which is typically less than helpful.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.update_wrapper" title="functools.update_wrapper" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">update_wrapper()</span></code></a>&nbsp;may be used with callables other than functions. Any attributes named in&nbsp;<em>assigned</em>&nbsp;or&nbsp;<em>updated</em>&nbsp;that are missing from the object being wrapped are ignored (i.e. this function will not attempt to set them on the wrapper function).&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>&nbsp;is still raised if the wrapper function itself is missing any attributes named in&nbsp;<em>updated</em>.</p><div class="versionadded"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">New in version 3.2:&nbsp;</span>Automatic addition of the&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__wrapped__</span></code>&nbsp;attribute.</p></div><div class="versionadded"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">New in version 3.2:&nbsp;</span>Copying of the&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__annotations__</span></code>&nbsp;attribute by default.</p></div><div class="versionchanged"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">Changed in version 3.2:&nbsp;</span>Missing attributes no longer trigger an&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>.</p></div><div class="versionchanged"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">Changed in version 3.4:&nbsp;</span>The&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__wrapped__</span></code>&nbsp;attribute now always refers to the wrapped function, even if that function defined a&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__wrapped__</span></code>&nbsp;attribute. (see&nbsp;<a class="reference external" href="https://bugs.python.org/issue17482" style="color: rgb(99, 99, 187); text-decoration-line: none;">bpo-17482</a>)</p></div></dd></dl><dl class="function" style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); margin-bottom: 15px;"><h3><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">@</code><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">functools.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">wraps</code><span class="sig-paren" style="font-size: larger;">(</span><em>wrapped</em>,&nbsp;<em>assigned=WRAPPER_ASSIGNMENTS</em>,&nbsp;<em>updated=WRAPPER_UPDATES</em><span class="sig-paren" style="font-size: larger;">)</span></h3><dt id="functools.wraps"><a class="headerlink" href="https://docs.python.org/3/library/functools.html#functools.wraps" title="Permalink to this definition" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">This is a convenience function for invoking&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.update_wrapper" title="functools.update_wrapper" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">update_wrapper()</span></code></a>&nbsp;as a function decorator when defining a wrapper function. It is equivalent to<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial(update_wrapper,</span>&nbsp;<span class="pre" style="hyphens: none;">wrapped=wrapped,</span>&nbsp;<span class="pre" style="hyphens: none;">assigned=assigned,</span><span class="pre" style="hyphens: none;">updated=updated)</span></code>. For example:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="kn" style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="color: rgb(14, 132, 181); font-weight: bold;">functools</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n">wraps</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">my_decorator</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">wrapper</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">kwds</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'Calling decorated function'</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">f</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">kwds</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">wrapper</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@my_decorator</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">example</span><span class="p">():</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="sd" style="color: rgb(64, 112, 160); font-style: italic;">"""Docstring"""</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'Called example function'</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">example</span><span class="p">()</span>
<span class="go">Calling decorated function</span>
<span class="go">Called example function</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">example</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="vm" style="color: rgb(187, 96, 213);">__name__</span>
<span class="go">'example'</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">example</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="vm" style="color: rgb(187, 96, 213);">__doc__</span>
<span class="go">'Docstring'</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Without the use of this decorator factory, the name of the example function would have been&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">'wrapper'</span></code>, and the docstring of the original&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">example()</span></code>&nbsp;would have been lost.</p></dd><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><br></p></dd></dl><div class="section" id="partial-objects" style=""><h2 style="hyphens: auto; line-height: 22.4px;"><span style="padding: 0px 1px; border-radius: 3px;">partial Objects</span></h2><p style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); hyphens: auto; text-align: justify; line-height: 22.4px;"><code class="xref py py-class docutils literal notranslate" style="color: rgb(99, 99, 187); text-decoration-line: none; background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;"><a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;">partial</a></span></code>&nbsp;objects are callable objects created by&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial()</span></code></a>. They have three read-only attributes:</p><dl class="attribute" style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); margin-bottom: 15px;"><h3><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">partial.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">func</code></h3><dt id="functools.partial.func"><a class="headerlink" href="https://docs.python.org/3/library/functools.html#functools.partial.func" title="Permalink to this definition" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">A callable object or function. Calls to the&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>&nbsp;object will be forwarded to&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partial.func" title="functools.partial.func" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">func</span></code></a>&nbsp;with new arguments and keywords.</p></dd></dl><dl class="attribute" style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); margin-bottom: 15px;"><h3><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">partial.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">args</code></h3><dt id="functools.partial.args"><a class="headerlink" href="https://docs.python.org/3/library/functools.html#functools.partial.args" title="Permalink to this definition" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">The leftmost positional arguments that will be prepended to the positional arguments provided to a&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>&nbsp;object call.</p></dd></dl><dl class="attribute" style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); margin-bottom: 15px;"><h3><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">partial.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">keywords</code></h3><dt id="functools.partial.keywords"><a class="headerlink" href="https://docs.python.org/3/library/functools.html#functools.partial.keywords" title="Permalink to this definition" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">The keyword arguments that will be supplied when the&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>&nbsp;object is called.</p></dd></dl><p style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255); hyphens: auto; text-align: justify; line-height: 22.4px;"><a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>&nbsp;objects are like&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">function</span></code>&nbsp;objects in that they are callable, weak referencable, and can have attributes. There are some important differences. For instance, the&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/stdtypes.html#definition.__name__" title="definition.__name__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__name__</span></code></a>&nbsp;and&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__doc__</span></code>&nbsp;attributes are not created automatically. Also,&nbsp;<a class="reference internal" href="https://docs.python.org/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>&nbsp;objects defined in classes behave like static methods and do not transform into bound methods during instance attribute look-up.</p></div><p><br></p><h2>cache algorithms (Cache replacement policies)</h2><div><p style="margin: 0.5em 0px; line-height: inherit; color: rgb(34, 34, 34); font-family: sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">In&nbsp;<a href="https://en.wikipedia.org/wiki/Computing" title="Computing" style="text-decoration-line: none; color: rgb(11, 0, 128); background: none;">computing</a>,&nbsp;<b>cache algorithms</b>&nbsp;(also frequently called&nbsp;<b>cache replacement algorithms</b>&nbsp;or&nbsp;<b>cache replacement policies</b>) are&nbsp;<a href="https://en.wikipedia.org/wiki/Optimization_(computer_science)" class="mw-redirect" title="Optimization (computer science)" style="text-decoration-line: none; color: rgb(11, 0, 128); background: none;">optimizing</a>&nbsp;instructions, or&nbsp;<a href="https://en.wikipedia.org/wiki/Algorithm" title="Algorithm" style="text-decoration-line: none; color: rgb(11, 0, 128); background: none;">algorithms</a>, that a&nbsp;<a href="https://en.wikipedia.org/wiki/Computer_program" title="Computer program" style="text-decoration-line: none; color: rgb(11, 0, 128); background: none;">computer program</a>&nbsp;or a hardware-maintained structure can utilize in order to manage a&nbsp;<a href="https://en.wikipedia.org/wiki/Cache_(computing)" title="Cache (computing)" style="text-decoration-line: none; color: rgb(11, 0, 128); background: none;">cache</a>&nbsp;of information stored on the computer. Caching improves performance by keeping recent or often-used data items in a memory locations that are faster or computationally cheaper to access than normal memory stores. When the cache is full, the algorithm must choose which items to discard to make room for the new ones.</p></div><h3>Least recently used (LRU)</h3><div><a target="_blank" href="https://baike.baidu.com/item/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/5633616" data-lemmaid="5633616" style="color: rgb(19, 110, 194); text-decoration-line: none; font-family: arial, 宋体, sans-serif; font-size: 14px; text-indent: 28px; background-color: rgb(255, 255, 255);">内存管理</a><span style="color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif; font-size: 14px; text-indent: 28px; background-color: rgb(255, 255, 255);">的一种页面置换算法，对于在内存中但又不用的</span><a target="_blank" href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%9D%97/107672" data-lemmaid="107672" style="color: rgb(19, 110, 194); text-decoration-line: none; font-family: arial, 宋体, sans-serif; font-size: 14px; text-indent: 28px; background-color: rgb(255, 255, 255);">数据块</a><span style="color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif; font-size: 14px; text-indent: 28px; background-color: rgb(255, 255, 255);">（内存块）叫做LRU，操作系统会根据哪些数据属于LRU而将其移出内存而腾出空间来加载另外的数据。</span><br></div><p><span style="color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif; font-size: 14px; text-indent: 28px; background-color: rgb(255, 255, 255);">LRU算法的提出，是基于这样一个事实：在前面几条指令中使用频繁的页面很可能在后面的几条指令中频繁使用。反过来说，已经很久没有使用的页面很可能在未来较长的一段时间内不会被用到。这个，就是著名的</span><a target="_blank" href="https://baike.baidu.com/item/%E5%B1%80%E9%83%A8%E6%80%A7%E5%8E%9F%E7%90%86" style="color: rgb(19, 110, 194); text-decoration-line: none; font-family: arial, 宋体, sans-serif; font-size: 14px; text-indent: 28px; background-color: rgb(255, 255, 255);">局部性原理</a><span style="color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif; font-size: 14px; text-indent: 28px; background-color: rgb(255, 255, 255);">——比</span><a target="_blank" href="https://baike.baidu.com/item/%E5%86%85%E5%AD%98%E9%80%9F%E5%BA%A6" style="color: rgb(19, 110, 194); text-decoration-line: none; font-family: arial, 宋体, sans-serif; font-size: 14px; text-indent: 28px; background-color: rgb(255, 255, 255);">内存速度</a><span style="color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif; font-size: 14px; text-indent: 28px; background-color: rgb(255, 255, 255);">还要快的cache，也是基于同样的原理运行的。因此，我们只需要在每次调换时，找到最近最久未使用的那个页面调出内存。这就是LRU算法的全部内容。</span><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><div><br></div>
</article>
{% endblock point1 %}
