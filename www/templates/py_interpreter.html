{% extends 'c-word.html' %}

{% block title %} interpreter - python {% endblock title %}

{% block point1 %}
<article contenteditable="true">
  <p><span style="background-color: yellow;"><b>Category: python | interpreter</b></span></p>
  <h1 id="blogTitle0">Python interpreter</h1><h2>调用解释器</h2><p style="hyphens: auto; line-height: 22.4px;">在Python可用的机器上，Python解释器通常放在&nbsp;<span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">/usr/local/bin/python3.7</span><span style="padding: 0px 1px; border-radius: 3px;">&nbsp;; 把&nbsp;</span><span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">/usr/local/bin</span><span style="padding: 0px 1px; border-radius: 3px;">&nbsp;</span><span style="padding: 0px 1px; border-radius: 3px;">放到你 Unix shell 的搜索路径当中 , 这样键入命令:</span></p><div class="highlight-text notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;">python3.7</pre></div></div><p style="hyphens: auto; line-height: 22.4px;">就能运行了。安装时可以选择安装目录，所以解释器也可能在别的地方。（比如&nbsp;<span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">/usr/local/python</span><span style="padding: 0px 1px; border-radius: 3px;">&nbsp;</span><span style="padding: 0px 1px; border-radius: 3px;">也是比较常用的备选路径）</span></p><p style="hyphens: auto; line-height: 22.4px;">在主提示符中输入文件结束字符（在 Unix 系统中是&nbsp;Control-D，Windows 系统中是&nbsp;Control-Z）就退出解释器并返回退出状态为0。如果这样不管用，你还可以写这个命令退出：<span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">quit()</span><span style="padding-right: 1px; padding-left: 1px; border-radius: 3px;">。</span></p><p style="hyphens: auto; line-height: 22.4px;">解释器的行编辑功能也包括交互式编辑，在支持 readline 的系统中，可以回看历史命令，也有&nbsp;Tab&nbsp;代码补全功能。要想快速检查是否支持行编辑，在出现提示符后，按键盘&nbsp;Control-P。如果它“哔”了一声，它就是支持行编辑的；关于按键的详细介绍请看附录&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/tutorial/interactive.html#tut-interacting" style="">交互式编辑和编辑历史</a>。如果什么都没发生，或者显示出&nbsp;<span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">^P</span><span style="padding: 0px 1px; border-radius: 3px;">，那么就不支持行编辑功能；你只能用退格（</span><span style="padding-right: 1px; padding-left: 1px; border-radius: 3px;">Backspace</span><span style="padding: 0px 1px; border-radius: 3px;">）键从当前行中删除字符。</span></p><p style="hyphens: auto; line-height: 22.4px;">解释器运行的时候有点像 Unix 命令行：在一个标准输入 tty 设备上调用，它能交互式地读取和执行命令；调用时提供文件名参数，或者有个文件重定向到标准输入的话，它就会读取和执行文件中的&nbsp;<i>脚本</i>。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">另一种启动解释器的方式是&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">python</span>&nbsp;<span class="pre" style="hyphens: none;">-c</span>&nbsp;<span class="pre" style="hyphens: none;">command</span>&nbsp;<span class="pre" style="hyphens: none;">[arg]</span>&nbsp;<span class="pre" style="hyphens: none;">...</span></code>，其中&nbsp;<em>command</em>&nbsp;要换成想执行的指令，就像命令行的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/using/cmdline.html#cmdoption-c" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-option docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">-c</span></code></a>&nbsp;选项。由于 Python 代码中经常会包含对终端来说比较特殊的字符，通常情况下都建议用英文单引号把&nbsp;<em>command</em>&nbsp;括起来。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">有些 Python 模块也可以作为脚本使用。可以这样输入：<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">python</span>&nbsp;<span class="pre" style="hyphens: none;">-m</span>&nbsp;<span class="pre" style="hyphens: none;">module</span>&nbsp;<span class="pre" style="hyphens: none;">[arg]</span><span class="pre" style="hyphens: none;">...</span></code>，这会执行&nbsp;<em>module</em>&nbsp;的源文件，就跟你在命令行把路径写全了一样。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">在运行脚本的时候，有时可能也会需要在运行后进入交互模式。这种时候在文件参数前，加上选项&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/using/cmdline.html#cmdoption-i" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-option docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">-i</span></code></a>&nbsp;就可以了。</p><p style="hyphens: auto; line-height: 22.4px;">关于所有的命令行选项，请参考&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/using/cmdline.html#using-on-general" style="">Command line and environment</a>。</p><h3>传入参数</h3><p><span style="text-align: justify;">如果可能的话，解释器会读取命令行参数，转化为字符串列表存入&nbsp;</span><span class="pre" style="padding: 0px 1px; border-radius: 3px; text-align: justify; hyphens: none;">sys</span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;模块中的&nbsp;</span><span class="pre" style="padding: 0px 1px; border-radius: 3px; text-align: justify; hyphens: none;">argv</span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;变量中。执行命令&nbsp;</span><span class="pre" style="padding: 0px 1px; border-radius: 3px; text-align: justify; hyphens: none;">import</span><span style="padding-right: 1px; padding-left: 1px; border-radius: 3px; text-align: justify;">&nbsp;</span><span class="pre" style="hyphens: none;">sys</span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;你可以导入这个模块并访问这个列表。这个列表最少也会有一个元素；如果没有给定输入参数，</span><span class="pre" style="padding: 0px 1px; border-radius: 3px; text-align: justify; hyphens: none;">sys.argv[0]</span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;就是个空字符串。如果脚本名是标准输入，</span><span class="pre" style="padding: 0px 1px; border-radius: 3px; text-align: justify; hyphens: none;">sys.argv[0]</span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;就是&nbsp;</span><span class="pre" style="padding: 0px 1px; border-radius: 3px; text-align: justify; hyphens: none;">'-'</span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">。使用&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/using/cmdline.html#cmdoption-c" style="padding: 0px 1px; border-radius: 3px; text-align: justify;"><span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">-c</span></a><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;</span><span style="padding-right: 1px; padding-left: 1px; border-radius: 3px; text-align: justify;"><i>command</i></span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;时，</span><span class="pre" style="padding: 0px 1px; border-radius: 3px; text-align: justify; hyphens: none;">sys.argv[0]</span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;就会是&nbsp;</span><span class="pre" style="padding: 0px 1px; border-radius: 3px; text-align: justify; hyphens: none;">'-c'</span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">。如果使用选项&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/using/cmdline.html#cmdoption-m" style="padding: 0px 1px; border-radius: 3px; text-align: justify;"><span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">-m</span></a><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;</span><span style="padding-right: 1px; padding-left: 1px; border-radius: 3px; text-align: justify;"><i>module</i></span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">，</span><span class="pre" style="padding: 0px 1px; border-radius: 3px; text-align: justify; hyphens: none;">sys.argv[0]</span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;就是包含目录的模块全名。在&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/using/cmdline.html#cmdoption-c" style="padding: 0px 1px; border-radius: 3px; text-align: justify;"><span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">-c</span></a><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;</span><span style="padding-right: 1px; padding-left: 1px; border-radius: 3px; text-align: justify;"><i>command</i></span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;或&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/using/cmdline.html#cmdoption-m" style="padding: 0px 1px; border-radius: 3px; text-align: justify;"><span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">-m</span></a><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;</span><span style="padding-right: 1px; padding-left: 1px; border-radius: 3px; text-align: justify;"><i>module</i></span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;之后的选项不会被解释器处理，而会直接留在&nbsp;</span><span class="pre" style="padding: 0px 1px; border-radius: 3px; text-align: justify; hyphens: none;">sys.argv</span><span style="padding: 0px 1px; border-radius: 3px; text-align: justify;">&nbsp;中给命令或模块来处理。</span><br></p><h3>交互模式</h3><p style="hyphens: auto; line-height: 22.4px;">在终端（tty）输入并执行指令时，我们说解释器是运行在&nbsp;<i>交互模式（interactive mode）</i>。在这种模式中，它会显示&nbsp;<i>主提示符（primary prompt）</i>，提示输入下一条指令，通常用三个大于号（<span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">&gt;&gt;&gt;</span><span style="padding: 0px 1px; border-radius: 3px;">）表示；连续输入行的时候，它会显示&nbsp;</span><span style="padding-right: 1px; padding-left: 1px; border-radius: 3px;"><i>次要提示符</i></span><span style="padding: 0px 1px; border-radius: 3px;">，默认是三个点（</span><span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">...</span><span style="padding: 0px 1px; border-radius: 3px;">）。进入解释器时，它会先显示欢迎信息、版本信息、版权声明，然后就会出现提示符：</span></p><div class="highlight-shell-session notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">$</span> python3.7
<span class="go">Python 3.7 (default, Sep 16 2015, 09:25:04)</span>
<span class="go">[GCC 4.8.2] on linux</span>
<span class="go">Type "help", "copyright", "credits" or "license" for more information.</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;</span>&gt;&gt;</pre></div></div><p style="hyphens: auto; line-height: 22.4px;">多行指令需要在连续的多行中输入。比如，以&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#if" style=""><span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">if</span></a>&nbsp;为例：</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">the_world_is_flat</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">the_world_is_flat</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Be careful not to fall off!"</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="go">Be careful not to fall off!</span></pre></div></div><p style="hyphens: auto; line-height: 22.4px;">有关交互模式的更多内容，请参考&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/tutorial/appendix.html#tut-interac" style="">交互模式</a>。</p><h2>解释器的运行环境</h2><h3>原文件的字符编码</h3><p>默认情况下，Python 原文件以 UTF-8 编码方式处理。在这种编码方式中，世界上大多数语言的字符都可以同时用于字符串字面值、变量或函数名称以及注释中<span style="text-align: justify;">——尽管标准库中只用常规的 ASCII 字符作为变量或函数名，而且任何可移植的代码都应该遵守此约定。要正确显示这些字符，你的编辑器必须能识别 UTF-8编码，而且必须使用能支持打开的文件中所有字符的字体。</span></p><p style="hyphens: auto; line-height: 22.4px;">如果不使用默认编码，要声明文件所使用的编码，文件的&nbsp;<i>第一&nbsp;</i>行要写成特殊的注释。语法如下所示：</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># -*- coding: encoding -*-</span></pre></div></div><p style="hyphens: auto; line-height: 22.4px;">其中&nbsp;<i>encoding</i>&nbsp;可以是 Python 支持的任意一种&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/codecs.html#module-codecs" title="codecs: Encode and decode data and streams." style=""><span class="pre" style="padding: 0px 1px; border-radius: 3px; hyphens: none;">codecs</span></a>。</p><p style="hyphens: auto; line-height: 22.4px;">比如，要声明使用 Windows-1252 编码，你的源码文件要写成：</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># -*- coding: cp1252 -*-</span></pre></div></div><p style="hyphens: auto; line-height: 22.4px;">关于&nbsp;<i>第一行</i>&nbsp;规则的一种例外情况是，源码以&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/tutorial/appendix.html#tut-scripts" style="">UNIX “shebang” 行</a>&nbsp;开头。这种情况下，编码声明就要写在文件的第二行。例如：</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="ch" style="color: rgb(64, 128, 144); font-style: italic;">#!/usr/bin/env python3</span>
<span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># -*- coding: cp1252 -*-</span></pre></div></div><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p>
</article>
{% endblock point1 %}
