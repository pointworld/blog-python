{% extends 'c-word.html' %}

{% block title %} tool | | Database | MySql {% endblock title %}

{% block point1 %}
<div class="tm-main uk-width-medium-3-4" contenteditable="true">
<article class="uk-article">
    <div id="maincontent">
        <div><b style="background-color: yellow;">tools | database | MySQL</b></div><div><br></div><div>MySQL数据库操作常见命令集合</div><div><table><caption>table 1.1 heading</caption><tbody><tr><th>操作</th><th>命令</th></tr><tr><td>登录到MySQL</td><td><div>mysql -h localhost -u root -p</div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>localhost:IP地址；</div><div><span class="Apple-tab-span" style="white-space: pre;">        </span>root:用户名；</div><div><span class="Apple-tab-span" style="white-space: pre;">      </span>database:数据库名（可以省略，如果有，跟在-p面）</div></td></tr><tr><td>删除数据库</td><td>mysqladmin -u root -p密码&nbsp;drop databaseName<br></td></tr><tr><td>初始化数据库<br></td><td><div>mysql –u root –p密码 &lt;D:\computer_learning\backup\schema.sql</div><div>mysql -u root -p &nbsp;&nbsp;</div><div>2.mysql -h localhost -u root -p database_name&nbsp;</div></td></tr><tr><td>列出数据库</td><td>show databases;&nbsp;<br></td></tr><tr><td>选择数据库<br></td><td>use databases_name;&nbsp;</td></tr><tr><td>列出数据表<br></td><td>show tables;&nbsp;<br></td></tr><tr><td>显示表格列的属性<br></td><td><div>show columns from table_name; &nbsp;&nbsp;</div><div>describe table_name; &nbsp;<span class="Apple-tab-span" style="white-space: pre;">  </span></div></td></tr><tr><td>导出整个数据库<br></td><td><div>mysqldump -u user_name -p database_name &gt; path_file_name<span class="Apple-tab-span" style="white-space: pre;">  </span></div><div>例如：mysqldump -u root -p test_db &gt; d:/test_db.sql</div></td></tr><tr><td>导出一个表<br></td><td><div>mysqldump -u user_name -p database_name table_name &gt; /tmp/file_name</div><div>例如：mysqldump -u root -p test_db table1 &gt; d:/table1.sql</div></td></tr><tr><td>导出一个数据库结构</td><td><div>mysqldump -u user_name -p -d --add-drop-table database_name &gt; file_name &nbsp;<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div>例如：mysqldump -u root -p -d --add-drop-table test_db &gt; test_db.sql</div></td></tr><tr><td>导入数据库<br></td><td><div>source file_name; &nbsp;&nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>或 &nbsp;&nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">     </span>mysql -u user_name -p database_name &lt; file_name &nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>source /tmp/bbs.sql；<span class="Apple-tab-span" style="white-space: pre;">  </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>source d:/bbs.sql；<span class="Apple-tab-span" style="white-space: pre;">    </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>mysql -u root -p bbs &lt; "d:/bbs.sql"<span class="Apple-tab-span" style="white-space: pre;">    </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>mysql -u root -p bbs &lt; "/tmp/bbs.sql"<span class="Apple-tab-span" style="white-space: pre;">  </span></div></td></tr><tr><td>将文本文件导入数据表<br>中（excel与之相同）<br></td><td><div>load data infile "tables.txt" into table table_name; &nbsp;<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>load data infile "/tmp/bbs.txt" into table bbs；<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>load data infile "/tmp/bbs.xls" into table bbs；<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>load data infile "d:/bbs.txt" into table bbs；<span class="Apple-tab-span" style="white-space: pre;"> </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>load data infile "d:/bbs.xls" into table bbs；<span class="Apple-tab-span" style="white-space: pre;"> </span></div></td></tr><tr><td>将数据表导出为文本文件（excel与之相同）<br></td><td><div>select * into outfile "path_file_name" from table_name; &nbsp;<span class="Apple-tab-span" style="white-space: pre;">    </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>select * into outfile "/tmp/bbs.txt" from bbs；<span class="Apple-tab-span" style="white-space: pre;">    </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>select * into outfile "/tmp/bbs.xls" from bbs where id=1;<span class="Apple-tab-span" style="white-space: pre;"> </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>select * into outfile "d:/bbs.txt" from bbs;<span class="Apple-tab-span" style="white-space: pre;">  </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>select * into outfile "d:/bbs.xls" from bbs where id=1;<span class="Apple-tab-span" style="white-space: pre;">   </span></div></td></tr><tr><td>创建数据库时先判断数据库是否存在<br></td><td><div>create database if not exists database_name; &nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：create database if not exists bbs</div></td></tr><tr><td>创建数据库</td><td><div>create database database_name; &nbsp;<span class="Apple-tab-span" style="white-space: pre;">  </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：create database bbs;</div></td></tr><tr><td>删除数据库<br></td><td><div>drop database database_name; &nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：drop database bbs;<span class="Apple-tab-span" style="white-space: pre;"> </span></div></td></tr><tr><td>创建数据表</td><td><div>mysql&gt; create table &lt;table_name&gt; ( &lt;column 1 name&gt; &lt;col. 1 type&gt; &lt;col. 1 details&gt;,&lt;column 2 name&gt; &lt;col. 2 type&gt; &lt;col. 2 details&gt;, ...); &nbsp;<span class="Apple-tab-span" style="white-space: pre;">    </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：create table (id int not null auto_increment primary key,name char(16) not null default "jack",date_year date not null);<span class="Apple-tab-span" style="white-space: pre;">   </span></div></td></tr><tr><td>删除数据表中数据<br></td><td><div>delete from table_name; &nbsp;<span class="Apple-tab-span" style="white-space: pre;">  </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>delete from bbs;<span class="Apple-tab-span" style="white-space: pre;">  </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>delete from bbs where id=2;<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><br></div></td></tr><tr><td>删除数据库中的数据表<br></td><td><div>drop table table_name; &nbsp;<span class="Apple-tab-span" style="white-space: pre;">  </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>drop table test_db;<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>rm -f database_name/table_name.* (linux下）<span class="Apple-tab-span" style="white-space: pre;"> </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>rm -rf bbs/accp.*<span class="Apple-tab-span" style="white-space: pre;"> </span></div><div><br></div></td></tr><tr><td>向数据库中添加数据<br></td><td><div><span class="Apple-tab-span" style="white-space: pre;">        </span>insert into table_name set column_name1=value1,column_name2=value2; &nbsp;<span class="Apple-tab-span" style="white-space: pre;">    </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：insert into bbs set name="jack",date_year="1993-10-01";<span class="Apple-tab-span" style="white-space: pre;">    </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>insert into table_name values (column1,column2,...); &nbsp;<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：insert into bbs ("2","jack","1993-10-02")<span class="Apple-tab-span" style="white-space: pre;">  </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>insert into table_name (column_name1,column_name2,...) values (value1,value2); &nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：insert into bbs (name,data_year) values ("jack","1993-10-01");<span class="Apple-tab-span" style="white-space: pre;"> </span></div><div><br></div></td></tr><tr><td>查询数据表中的数据<br></td><td><div>select * from table_name; &nbsp;<span class="Apple-tab-span" style="white-space: pre;">    </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：select * from bbs where id=1;</div></td></tr><tr><td>修改数据表中的数据<br></td><td><div>update table_name set col_name=new_value where id=1; &nbsp;<span class="Apple-tab-span" style="white-space: pre;">    </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：update bbs set name="tom" where name="jack";<span class="Apple-tab-span" style="white-space: pre;">   </span></div><div><br></div></td></tr><tr><td>增加一个字段<br></td><td><div>alter table table_name add column field_name datatype not null default "1"; &nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：alter table bbs add column tel char(16) not null;<span class="Apple-tab-span" style="white-space: pre;">  </span></div></td></tr><tr><td>增加多个字段：(column可省略不写）<br></td><td><div>alter table table_name add column filed_name1 datatype,add column filed_name2 datatype; &nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>例如：alter table bbs add column tel char(16) not null,add column address text;</div></td></tr><tr><td>删除一个字段<br></td><td><div>alter table table_name drop field_name; &nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">     </span>例如：alter table bbs drop tel;</div></td></tr><tr><td>修改字段的数据类型<br></td><td><div>alter table table_name modify id int unsigned;//修改列id的类型为int unsigned &nbsp; &nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">     </span>alter table table_name change id sid int unsigned;//修改列id的名字为sid，而且把属性修改为int unsigned &nbsp;</div></td></tr><tr><td>修改一个字段的默认值<br></td><td><div>alter table table_name modify column_name datatype not null default ""; &nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">     </span>例如：alter table test_db modify name char(16) default not null "yourname";</div></td></tr><tr><td>对表重新命名<br></td><td><div>alter table table_name rename as new_table_name; &nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">        </span>例如：alter table bbs rename as bbs_table;</div><div><span class="Apple-tab-span" style="white-space: pre;">        </span>rename table old_table_name to new_table_name; &nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">      </span>例如：rename table test_db to accp;</div><div><br></div></td></tr><tr><td>从已经有的表中复制表的结构<br></td><td><div>create table table2 select * from table1 where 1&lt;&gt;1; &nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">        </span>例如：create table test_db select * from accp where 1&lt;&gt;1;</div><div><br></div></td></tr><tr><td>查询时间<br></td><td>select now(); &nbsp;<br></td></tr><tr><td>查询当前用户<br></td><td>select user(); &nbsp;<br></td></tr><tr><td>查询数据库版本<br></td><td><div>select version(); &nbsp;</div></td></tr><tr><td>创建索引<br></td><td><div>alter table table1 add index ind_id(id); &nbsp;&nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>create index ind_id on table1(id); &nbsp;&nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">        </span>create unique index ind_id on table1(id);//建立唯一性索引 &nbsp;</div></td></tr><tr><td>删除索引<br></td><td><div>drop index idx_id on table1; &nbsp;&nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>alter table table1 drop index ind_id; &nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>联合字符或者多个列（将id与":"和列name和"="连接）</div><div><span class="Apple-tab-span" style="white-space: pre;">     </span>select concat(id，':',name,'=') from table; &nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">      </span>limit（选出10到20条）</div><div><span class="Apple-tab-span" style="white-space: pre;">        </span>select * from bbs order by id limit 9,10; &nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>（从查询结果中列出第几到几条的记录）</div></td></tr><tr><td>增加一个管理员账号<br></td><td><div><span class="Apple-tab-span" style="white-space: pre;">     </span>grant all on *.* to user@localhost identified by "password"; &nbsp;</div></td></tr><tr><td>创建表是先判断表是否存在<br></td><td>create table if not exists students(……); &nbsp;<br></td></tr><tr><td>复制表<br></td><td><div>create table table2 select * from table1; &nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">     </span>例如：create table test_db select * from accp;</div></td></tr><tr><td>授于用户远程访问mysql的权限<br></td><td><div>grant all privileges on *.* to "root"@"%" identified by "password" with grant option; &nbsp;<br></div><div><span class="Apple-tab-span" style="white-space: pre;">  </span>或者是修改mysql数据库中的user表中的host字段</div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>use mysql; &nbsp;&nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">        </span>select user,host from user; &nbsp;&nbsp;</div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>update user set host="%" where user="user_name";&nbsp;</div></td></tr><tr><td>查看当前状态<br></td><td><div>show status; &nbsp;</div></td></tr><tr><td>查看当前连接的用户<br></td><td><div>show processlist; &nbsp;<span class="Apple-tab-span" style="white-space: pre;">  </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>（如果是root用户，则查看全部的线程，得到的用户连接数同show status;里的 Threads_connected值是相同的）</div></td></tr><tr><td>qq邮箱授权密码<br></td><td>xgyphxmyyntjbfbg<br></td></tr><tr><td>data</td><td>data</td></tr>
</tbody></table></div><div><span class="Apple-tab-span" style="white-space:pre">    </span></div><div><span class="Apple-tab-span" style="white-space: pre;">       </span>&nbsp;</div><div><span class="Apple-tab-span" style="white-space:pre">   </span><span class="Apple-tab-span" style="white-space:pre">    </span></div><div><br></div><div><span class="Apple-tab-span" style="white-space:pre">      </span><span class="Apple-tab-span" style="white-space: pre;">  </span></div><div><span class="Apple-tab-span" style="white-space:pre">     </span></div><div><br></div><div><br></div>
    </div>
</article></div>      
{% endblock %}