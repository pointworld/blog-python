{% extends 'c-word.html' %}

{% block title %} function - Python | specification {% endblock title %}

{% block point1 %}
<article contenteditable="true">
    <p><span style="background-color: yellow;"><b>Category: 计算机 | 程序设计语言 | Python | specification | function</b></span></p>
    <h1 id="blogTitle0">函数</h1><div>Python 一切皆对象。</div><h2 id="blogTitle1">简介</h2><p>函数是组织好的，可重复使用的，用来实现单一，或相关联功能的代码段。</p><p>函数能提高应用的模块性，和代码的重复利用率。</p><h3 id="blogTitle2">定义函数</h3><div><p id="index-1" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">关键字&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#def" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">def</span></code></a>&nbsp;引入一个函数&nbsp;<em>定义</em>。它必须后跟函数名称和带括号的形式参数列表。构成函数体的语句从下一行开始，并且必须缩进。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">函数体的第一个语句可以（可选的）是字符串文字；这个字符串文字是函数的文档字符串或&nbsp;<em class="dfn">docstring</em>&nbsp;。（有关文档字符串的更多信息，请参阅&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/tutorial/controlflow.html#tut-docstrings" style="color: rgb(99, 99, 187); text-decoration-line: none;">文档字符串</a>&nbsp;部分）有些工具使用文档字符串自动生成在线或印刷文档，或者让用户以交互式的形式浏览代码；在你编写的代码中包含文档字符串是一种很好的做法，所以要养成习惯。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">函数的&nbsp;<em>执行</em>&nbsp;会引入一个用于函数局部变量的新符号表。更确切地说，函数中的所有变量赋值都将值存储在本地符号表中；而变量引用首先在本地符号表中查找，然后在封闭函数的本地符号表中查找，然后在全局符号表中查找，最后在内置符号表中查找。所以全局变量不能直接在函数中赋值（除非使用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#global" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">global</span></code></a>&nbsp;命名），尽管可以引用它们。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">在函数被调用时，实际参数（实参）会被引入被调用函数的本地符号表中；因此，实参是通过&nbsp;<em>按值调用</em>&nbsp;传递的（其中&nbsp;<em>值</em>&nbsp;始终是对象&nbsp;<em>引用</em>&nbsp;而不是对象的值）。<a class="footnote-reference" href="https://docs.python.org/zh-cn/3/tutorial/controlflow.html#id2" id="id1" style="color: rgb(99, 99, 187); text-decoration-line: none;">[1]</a>&nbsp;当一个函数调用另外一个函数时，将会为该调用创建一个新的本地符号表。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">函数定义会把函数名引入当前的符号表中。函数名称的值具有解释器将其识别为用户定义函数的类型。这个值可以分配给另一个名称，该名称也可以作为一个函数使用。这用作一般的重命名机制。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">没有&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#return" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">return</span></code></a>&nbsp;语句的函数也会返回一个值，尽管它是一个相当无聊的值。这个值称为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>（它是内置名称）。一般来说解释器不会打印出单独的返回值&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>&nbsp;，如果你真想看到它，你可以使用&nbsp;<code class="xref py py-func docutils literal notranslate" style="color: rgb(99, 99, 187); text-decoration-line: none; background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;"><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#print" title="print" style="color: rgb(99, 99, 187); text-decoration-line: none;">print()</a>。</span></code><br></p></div><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><br></span></div><div><p id="index-19" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">A function definition defines a user-defined function object (see section&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#types" style="color: rgb(99, 99, 187); text-decoration-line: none;">标准类型层级结构</a>):</p><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><strong id="grammar-token-funcdef">funcdef                </strong> ::=  [<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-decorators" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">decorators</span></code></a>] "def" <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-funcname" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">funcname</span></code></a> "(" [<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-parameter-list" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">parameter_list</span></code></a>] ")"
                             ["-&gt;" <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/expressions.html#grammar-token-expression" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">expression</span></code></a>] ":" <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-suite" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">suite</span></code></a>
<strong id="grammar-token-decorators">decorators             </strong> ::=  <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-decorator" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">decorator</span></code></a>+
<strong id="grammar-token-decorator">decorator              </strong> ::=  "@" <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-dotted-name" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">dotted_name</span></code></a> ["(" [<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/expressions.html#grammar-token-argument-list" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">argument_list</span></code></a> [","]] ")"] NEWLINE
<strong id="grammar-token-dotted-name">dotted_name            </strong> ::=  <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/lexical_analysis.html#grammar-token-identifier" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">identifier</span></code></a> ("." <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/lexical_analysis.html#grammar-token-identifier" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">identifier</span></code></a>)*
<strong id="grammar-token-parameter-list">parameter_list         </strong> ::=  <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-defparameter" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">defparameter</span></code></a> ("," <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-defparameter" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">defparameter</span></code></a>)* ["," [<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-parameter-list-starargs" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">parameter_list_starargs</span></code></a>]]
                             | <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-parameter-list-starargs" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">parameter_list_starargs</span></code></a>
<strong id="grammar-token-parameter-list-starargs">parameter_list_starargs</strong> ::=  "*" [<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-parameter" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">parameter</span></code></a>] ("," <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-defparameter" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">defparameter</span></code></a>)* ["," ["**" <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-parameter" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">parameter</span></code></a> [","]]]
                             | "**" <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-parameter" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">parameter</span></code></a> [","]
<strong id="grammar-token-parameter">parameter              </strong> ::=  <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/lexical_analysis.html#grammar-token-identifier" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">identifier</span></code></a> [":" <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/expressions.html#grammar-token-expression" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">expression</span></code></a>]
<strong id="grammar-token-defparameter">defparameter           </strong> ::=  <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-parameter" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">parameter</span></code></a> ["=" <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/expressions.html#grammar-token-expression" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">expression</span></code></a>]
<strong id="grammar-token-funcname">funcname               </strong> ::=  <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/lexical_analysis.html#grammar-token-identifier" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">identifier</span></code></a>
</pre><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">A function definition is an executable statement. Its execution binds the function name in the current local namespace to a function object (a wrapper around the executable code for the function). This function object contains a reference to the current global namespace as the global namespace to be used when the function is called.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The function definition does not execute the function body; this gets executed only when the function is called.&nbsp;<a class="footnote-reference" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#id5" id="id2" style="color: rgb(99, 99, 187); text-decoration-line: none;">[2]</a></p><p id="index-20" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">A function definition may be wrapped by one or more&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-decorator" style="color: rgb(99, 99, 187); text-decoration-line: none;">decorator</a>&nbsp;expressions. Decorator expressions are evaluated when the function is defined, in the scope that contains the function definition. The result must be a callable, which is invoked with the function object as the only argument. The returned value is bound to the function name instead of the function object. Multiple decorators are applied in nested fashion. For example, the following code</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@f1</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@f2</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">func</span><span class="p">():</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">is roughly equivalent to</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">func</span><span class="p">():</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>
<span class="n">func</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">f1</span><span class="p">(</span><span class="n">arg</span><span class="p">)(</span><span class="n">f2</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">except that the original function is not temporarily bound to the name&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">func</span></code>.</p><p id="index-21" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">When one or more&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-parameter" style="color: rgb(99, 99, 187); text-decoration-line: none;">parameters</a>&nbsp;have the form&nbsp;<em>parameter</em>&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">=</span></code>&nbsp;<em>expression</em>, the function is said to have “default parameter values.” For a parameter with a default value, the corresponding&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-argument" style="color: rgb(99, 99, 187); text-decoration-line: none;">argument</a>&nbsp;may be omitted from a call, in which case the parameter’s default value is substituted. If a parameter has a default value, all following parameters up until the “<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*</span></code>” must also have a default value — this is a syntactic restriction that is not expressed by the grammar.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><strong>Default parameter values are evaluated from left to right when the function definition is executed.</strong>&nbsp;This means that the expression is evaluated once, when the function is defined, and that the same “pre-computed” value is used for each call. This is especially important to understand when a default parameter is a mutable object, such as a list or a dictionary: if the function modifies the object (e.g. by appending an item to a list), the default value is in effect modified. This is generally not what was intended. A way around this is to use&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>&nbsp;as the default, and explicitly test for it in the body of the function, e.g.:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">whats_on_the_telly</span><span class="p">(</span><span class="n">penguin</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">penguin</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">is</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">:</span>
        <span class="n">penguin</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[]</span>
    <span class="n">penguin</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">append</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"property of the zoo"</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">penguin</span>
</pre></div></div><p id="index-22" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Function call semantics are described in more detail in section&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/expressions.html#calls" style="color: rgb(99, 99, 187); text-decoration-line: none;">调用</a>. A function call always assigns values to all parameters mentioned in the parameter list, either from position arguments, from keyword arguments, or from default values. If the form “<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*identifier</span></code>” is present, it is initialized to a tuple receiving any excess positional parameters, defaulting to the empty tuple. If the form “<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">**identifier</span></code>” is present, it is initialized to a new ordered mapping receiving any excess keyword arguments, defaulting to a new empty mapping of the same type. Parameters after “<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*</span></code>” or “<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*identifier</span></code>” are keyword-only parameters and may only be passed used keyword arguments.</p><p id="index-23" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Parameters may have annotations of the form “<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">:</span>&nbsp;<span class="pre" style="hyphens: none;">expression</span></code>” following the parameter name. Any parameter may have an annotation even those of the form&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*identifier</span></code>&nbsp;or&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">**identifier</span></code>. Functions may have “return” annotation of the form “<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">-&gt;</span>&nbsp;<span class="pre" style="hyphens: none;">expression</span></code>” after the parameter list. These annotations can be any valid Python expression. The presence of annotations does not change the semantics of a function. The annotation values are available as values of a dictionary keyed by the parameters’ names in the&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__annotations__</span></code>&nbsp;attribute of the function object. If the&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">annotations</span></code>&nbsp;import from<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/__future__.html#module-__future__" title="__future__: Future statement definitions" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__future__</span></code></a>&nbsp;is used, annotations are preserved as strings at runtime which enables postponed evaluation. Otherwise, they are evaluated when the function definition is executed. In this case annotations may be evaluated in a different order than they appear in the source code.</p><p id="index-24" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">It is also possible to create anonymous functions (functions not bound to a name), for immediate use in expressions. This uses lambda expressions, described in section&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/expressions.html#lambda" style="color: rgb(99, 99, 187); text-decoration-line: none;">Lambdas</a>. Note that the lambda expression is merely a shorthand for a simplified function definition; a function defined in a “<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#def" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">def</span></code></a>” statement can be passed around or assigned to another name just like a function defined by a lambda expression. The “<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#def" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">def</span></code></a>” form is actually more powerful since it allows the execution of multiple statements and annotations.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><strong>Programmer’s note:</strong>&nbsp;Functions are first-class objects. A “<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">def</span></code>” statement executed inside a function definition defines a local function that can be returned or passed around. Free variables used in the nested function can access the local variables of the function containing the def. See section&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/executionmodel.html#naming" style="color: rgb(99, 99, 187); text-decoration-line: none;">Naming and binding</a>&nbsp;for details.</p><div class="admonition seealso" style="margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(255, 255, 204); border: 1px solid rgb(221, 221, 102); border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; text-align: justify; line-height: 22.4px;">参见</p><dl class="last docutils" style="margin-bottom: 0px;"><dt style="font-weight: bold;"><span class="target" id="index-25"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3107" style="color: rgb(99, 99, 187); text-decoration-line: none;">PEP 3107</a>&nbsp;- Function Annotations</dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;">The original specification for function annotations.</dd><dt style="font-weight: bold;"><span class="target" id="index-26"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0484" style="color: rgb(99, 99, 187); text-decoration-line: none;">PEP 484</a>&nbsp;- Type Hints</dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;">Definition of a standard meaning for annotations: type hints.</dd><dt style="font-weight: bold;"><span class="target" id="index-27"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0526" style="color: rgb(99, 99, 187); text-decoration-line: none;">PEP 526</a>&nbsp;- Syntax for Variable Annotations</dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;">Ability to type hint variable declarations, including class variables and instance variables</dd><dt style="font-weight: bold;"><span class="target" id="index-28"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0563" style="color: rgb(99, 99, 187); text-decoration-line: none;">PEP 563</a>&nbsp;- Postponed Evaluation of Annotations</dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;">Support for forward references within annotations by preserving annotations in a string form at runtime instead of eager evaluation.</dd></dl></div></div><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><br></span></div><h3 id="blogTitle3">函数组成</h3><div><h4 id="blogTitle4"><b>语法层面</b></h4><h5 id="blogTitle5"><b>关键字 def</b></h5><h5 id="blogTitle6"><b>函数名</b></h5><h5 id="blogTitle7"><b>函数参数</b></h5><h5 id="blogTitle8"><b>函数体</b></h5><h4 id="blogTitle9">逻辑方面</h4><h5 id="blogTitle10">输入</h5><h5 id="blogTitle11">处理过程</h5><h5 id="blogTitle12">输出</h5></div><h3 id="blogTitle13">函数调用</h3><h3 id="blogTitle14">函数返回值</h3><div><div><ul><li>函数返回多个值时，全部放入一个 tuple 中，可以按位置赋给对应的值，所以，Python 的函数返回多值其实就是返回一个 tuple，但写起来更方便。&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br></li><li>函数体内部的语句在执行时，一旦执行到 return 时，函数就执行完毕，并将结果返回。因此，函数内部通过条件判断和循环可以实现非常复杂的逻辑。<br></li><li>如果没有 return 语句，函数执行完毕后也会返回结果，只是结果为 None。return None 可以简写为 return。<br></li><li>函数返回结果并不代表显示结果，显示该函数的返回值需要调用该函数。调用该函数也不一定会显示出结果，因为函数返回值为 None 时，是不显示的。故函数语句体内的 return 语句需指明该函数返回什么样的结果，才会在函数调用时显示该 return 语句指明的结果。<br></li></ul></div></div><h3 id="blogTitle15">函数作用域</h3><h2 id="blogTitle16">函数参数</h2><h3 id="blogTitle17">形式参数（parameters）</h3><div><a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-parameter" style="color: rgb(99, 99, 187); text-decoration-line: none; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><span class="xref std std-term">Parameters</span></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;are defined by the names that appear in a function definition.&nbsp;</span><span style="background-color: rgb(255, 255, 255); color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify;">Parameters define what types of arguments a function can accept.</span><br></div><div><span style="background-color: rgb(255, 255, 255); color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify;"><br></span></div><div><p class="first" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); margin-top: 0px !important;"><a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-function" style="color: rgb(99, 99, 187); text-decoration-line: none;">function</a>&nbsp;（或方法）定义中的命名实体，它指定函数可以接受的一个&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-argument" style="color: rgb(99, 99, 187); text-decoration-line: none;">argument</a>&nbsp;（或在某些情况下，多个实参）。有五种形参：</p><ul style="margin-bottom: 10px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><p class="first" style="hyphens: auto; line-height: 22.4px; margin-top: 0px !important;"><em class="dfn">positional-or-keyword</em>：位置或关键字，指定一个可以作为&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-argument" style="color: rgb(99, 99, 187); text-decoration-line: none;">位置参数</a>&nbsp;传入也可以作为&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-argument" style="color: rgb(99, 99, 187); text-decoration-line: none;">关键字参数</a>&nbsp;传入的实参。这是默认的形参类型，例如下面的&nbsp;<em>foo</em>&nbsp;和&nbsp;<em>bar</em>:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">func</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">):</span> <span class="o" style="color: rgb(102, 102, 102);">...</span>
</pre></div></div></li></ul><ul class="simple" id="positional-only-parameter" style="margin-bottom: 10px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><em class="dfn">positional-only</em>：仅限位置，指定一个只能按位置传入的参数。Python 中没有定义仅限位置形参的语法。但是一些内置函数有仅限位置形参（比如&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#abs" title="abs" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">abs()</span></code></a>）。</li></ul><ul id="keyword-only-parameter" style="margin-bottom: 10px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><p class="first" style="hyphens: auto; line-height: 22.4px; margin-top: 0px !important;"><em class="dfn">keyword-only</em>：仅限关键字，指定一个只能通过关键字传入的参数。仅限关键字形参可通过在函数定义的形参列表中包含单个可变位置形参或者在多个可变位置形参之前放一个&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*</span></code>&nbsp;来定义，例如下面的&nbsp;<em>kw_only1</em>&nbsp;和&nbsp;<em>kw_only2</em>:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">func</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">*</span><span class="p">,</span> <span class="n">kw_only1</span><span class="p">,</span> <span class="n">kw_only2</span><span class="p">):</span> <span class="o" style="color: rgb(102, 102, 102);">...</span>
</pre></div></div></li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><p class="first" style="hyphens: auto; line-height: 22.4px; margin-top: 0px !important;"><em class="dfn">var-positional</em>：可变位置，指定可以提供由一个任意数量的位置参数构成的序列（附加在其他形参已接受的位置参数之后）。这种形参可通过在形参名称前加缀&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*</span></code>&nbsp;来定义，例如下面的&nbsp;<em>args</em>:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">func</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="o" style="color: rgb(102, 102, 102);">...</span>
</pre></div></div></li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><p class="first" style="hyphens: auto; line-height: 22.4px; margin-top: 0px !important;"><em class="dfn">var-keyword</em>：可变关键字，指定可以提供任意数量的关键字参数（附加在其他形参已接受的关键字参数之后）。这种形参可通过在形参名称前加缀&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">**</span></code>&nbsp;来定义，例如上面的&nbsp;<em>kwargs</em>。</p></li></ul></div><div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">形参可以同时指定可选和必选参数，也可以为某些可选参数指定默认值。</p><p class="last" style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">另参见&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-argument" style="color: rgb(99, 99, 187); text-decoration-line: none;">argument</a>&nbsp;术语表条目、<a class="reference internal" href="https://docs.python.org/zh-cn/3/faq/programming.html#faq-argument-vs-parameter" style="color: rgb(99, 99, 187); text-decoration-line: none;">参数与形参的区别</a>&nbsp;中的常见问题、<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/inspect.html#inspect.Parameter" title="inspect.Parameter" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">inspect.Parameter</span></code></a>&nbsp;类、<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#function" style="color: rgb(99, 99, 187); text-decoration-line: none;">Function definitions</a>&nbsp;一节以及&nbsp;<span class="target" id="index-90"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0362" style="color: rgb(99, 99, 187); text-decoration-line: none;"><strong>PEP 362</strong></a>。</p><h4 style="margin-top: 0px; hyphens: auto; line-height: 22.4px;" id="blogTitle18">positional-or-keyword</h4><div><div><p class="first" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); margin-top: 0px !important;"><em class="dfn">positional-or-keyword</em>：位置或关键字，指定一个可以作为&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-argument" style="color: rgb(99, 99, 187); text-decoration-line: none;">位置参数</a>&nbsp;传入也可以作为&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-argument" style="color: rgb(99, 99, 187); text-decoration-line: none;">关键字参数</a>&nbsp;传入的实参。这是默认的形参类型，例如下面的&nbsp;<em>foo</em>&nbsp;和&nbsp;<em>bar</em>:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">func</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">):</span> <span class="o" style="color: rgb(102, 102, 102);">...</span></pre></div></div></div><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">最有用的形式是对一个或多个参数指定一个默认值。这样创建的函数，可以用比定义时允许的更少的参数调用，比如:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">ask_ok</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">retries</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">4</span><span class="p">,</span> <span class="n">reminder</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">'Please try again!'</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">while</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">:</span>
        <span class="n">ok</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">ok</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'y'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'ye'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'yes'</span><span class="p">):</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">ok</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'n'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'no'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'nop'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'nope'</span><span class="p">):</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span>
        <span class="n">retries</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">retries</span> <span class="o" style="color: rgb(102, 102, 102);">-</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">retries</span> <span class="o" style="color: rgb(102, 102, 102);">&lt;</span> <span class="mi" style="color: rgb(32, 128, 80);">0</span><span class="p">:</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">raise</span> <span class="ne" style="color: rgb(0, 112, 32);">ValueError</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'invalid user response'</span><span class="p">)</span>
        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">reminder</span><span class="p">)</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">这个函数可以通过几种方式调用:</p><ul class="simple" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">只给出必需的参数：<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">ask_ok('Do</span>&nbsp;<span class="pre" style="hyphens: none;">you</span>&nbsp;<span class="pre" style="hyphens: none;">really</span>&nbsp;<span class="pre" style="hyphens: none;">want</span>&nbsp;<span class="pre" style="hyphens: none;">to</span>&nbsp;<span class="pre" style="hyphens: none;">quit?')</span></code></li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">给出一个可选的参数：<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">ask_ok('OK</span>&nbsp;<span class="pre" style="hyphens: none;">to</span>&nbsp;<span class="pre" style="hyphens: none;">overwrite</span>&nbsp;<span class="pre" style="hyphens: none;">the</span>&nbsp;<span class="pre" style="hyphens: none;">file?',</span>&nbsp;<span class="pre" style="hyphens: none;">2)</span></code></li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">或者给出所有的参数：<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">ask_ok('OK</span>&nbsp;<span class="pre" style="hyphens: none;">to</span>&nbsp;<span class="pre" style="hyphens: none;">overwrite</span>&nbsp;<span class="pre" style="hyphens: none;">the</span>&nbsp;<span class="pre" style="hyphens: none;">file?',</span>&nbsp;<span class="pre" style="hyphens: none;">2,</span>&nbsp;<span class="pre" style="hyphens: none;">'Come</span>&nbsp;<span class="pre" style="hyphens: none;">on,&nbsp;</span><span class="pre" style="hyphens: none;">only</span>&nbsp;<span class="pre" style="hyphens: none;">yes</span>&nbsp;<span class="pre" style="hyphens: none;">or</span>&nbsp;<span class="pre" style="hyphens: none;">no!')</span></code></li></ul><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">默认值是在&nbsp;<em>定义过程</em>&nbsp;中在函数定义处计算的，所以<br></p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="n">i</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="mi" style="color: rgb(32, 128, 80);">5</span>

<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">f</span><span class="p">(</span><span class="n">arg</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">i</span><span class="p">):</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

<span class="n">i</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="mi" style="color: rgb(32, 128, 80);">6</span>
<span class="n">f</span><span class="p">()</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">会打印&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">5</span></code>。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">** 重要提示： ** 默认值只会计算一次。这在默认值为可变对象，比如列表，字典或者大多数类的实例时会有所不同。比如，下面的函数会把后续调用中传递给它的参数都存起来:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">L</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="p">[]):</span>
    <span class="n">L</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">L</span>

<span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">))</span>
<span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">))</span>
<span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">))</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">这将打印出</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="p">[</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">]</span>
<span class="p">[</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">]</span>
<span class="p">[</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">如果你不想要在后续调用之间共享默认值，你可以这样写这个函数:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">L</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">L</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">is</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">:</span>
        <span class="n">L</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[]</span>
    <span class="n">L</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">L</span></pre></div></div></div></div><h4 style="margin-top: 0px; hyphens: auto; line-height: 22.4px;" id="blogTitle19">positional-only</h4><div><ul class="simple" id="positional-only-parameter" style="font-size: 16px; margin-bottom: 10px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><em class="dfn">positional-only</em>：仅限位置，指定一个只能按位置传入的参数。Python 中没有定义仅限位置形参的语法。但是一些内置函数有仅限位置形参（比如&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#abs" title="abs" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">abs()</span></code></a>）。</li></ul></div><h4 style="margin-top: 0px; hyphens: auto; line-height: 22.4px;" id="blogTitle20">keyword-only</h4><div><p class="first" style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); margin-top: 0px !important;"><em class="dfn">keyword-only</em>：仅限关键字，指定一个只能通过关键字传入的参数。仅限关键字形参可通过在函数定义的形参列表中包含单个可变位置形参或者在多个可变位置形参之前放一个&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*</span></code>&nbsp;来定义，例如下面的&nbsp;<em>kw_only1</em>&nbsp;和&nbsp;<em>kw_only2</em>:</p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">func</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">*</span><span class="p">,</span> <span class="n">kw_only1</span><span class="p">,</span> <span class="n">kw_only2</span><span class="p">):</span> <span class="o" style="color: rgb(102, 102, 102);">...</span></pre></div></div><p>如下，在调用 func 时， 参数 a 和 b 若存在，则必须以关键字参数的形式传入，如：</p><pre>&gt;&gt;&gt; def func(a, *, b=0, c=0): pass
...

&gt;&gt;&gt; func()
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: func() missing 1 required positional argument: 'a'

&gt;&gt;&gt; func(1)
&gt;&gt;&gt; func(1, 2)
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: func() takes 1 positional argument but 2 were given

&gt;&gt;&gt; func(1, b=2)
&gt;&gt;&gt; func(1, b=2, 3)
  File "&lt;stdin&gt;", line 1
SyntaxError: positional argument follows keyword argument

&gt;&gt;&gt; func(1, b=2, c=3)
&gt;&gt;&gt;</pre></div><h4 style="margin-top: 0px; hyphens: auto; line-height: 22.4px;" id="blogTitle21">var-positional</h4><div><p>数目可变的位置参数</p><div><p class="first" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); margin-top: 0px !important;"><em class="dfn">var-positional</em>：可变位置，指定可以提供由一个任意数量的位置参数构成的序列（附加在其他形参已接受的位置参数之后）。这种形参可通过在形参名称前加缀&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*</span></code>&nbsp;来定义，例如下面的&nbsp;<em>args</em>:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">func</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="o" style="color: rgb(102, 102, 102);">...</span></pre></div></div></div></div><h4 style="margin-top: 0px; hyphens: auto; line-height: 22.4px;" id="blogTitle22">var-keyword</h4></div><div><p>数目可变的关键字参数</p><div><p class="first" style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); margin-top: 0px !important;"><em class="dfn">var-keyword</em>：可变关键字，指定可以提供任意数量的关键字参数（附加在其他形参已接受的关键字参数之后）。这种形参可通过在形参名称前加缀&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">**</span></code>&nbsp;来定义，例如下面的&nbsp;<em>kwargs</em>。</p></div><div><div style="text-align: justify;"><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">func</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="o" style="color: rgb(102, 102, 102);">...</span></pre></div></div></div></div></div><h3 id="blogTitle23">实际参数（arguments）</h3><div><span class="xref std std-term" style="color: rgb(99, 99, 187); text-decoration-line: none; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">A<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-argument" style="color: rgb(99, 99, 187); text-decoration-line: none; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">rguments</a></span><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;are the values actually passed to a function when calling it.</span><br></div><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><br></span></div><div><p class="first" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); margin-top: 0px !important;">在调用函数时传给&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-function" style="color: rgb(99, 99, 187); text-decoration-line: none;">function</a>&nbsp;（或&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-method" style="color: rgb(99, 99, 187); text-decoration-line: none;">method</a>&nbsp;）的值。参数分为两种：</p><ul style="margin-bottom: 10px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><p class="first" style="hyphens: auto; line-height: 22.4px; margin-top: 0px !important;"><em class="dfn">关键字参数</em>: 在函数调用中前面带有标识符（例如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">name=</span></code>）或者作为包含在前面带有&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">**</span></code>&nbsp;的字典里的值传入。举例来说，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">3</span></code>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">5</span></code>&nbsp;在以下对&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#complex" title="complex" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">complex()</span></code></a>&nbsp;的调用中均属于关键字参数:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="nb" style="color: rgb(0, 112, 32);">complex</span><span class="p">(</span><span class="n">real</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="n">imag</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">)</span>
<span class="nb" style="color: rgb(0, 112, 32);">complex</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">**</span><span class="p">{</span><span class="s1" style="color: rgb(64, 112, 160);">'real'</span><span class="p">:</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'imag'</span><span class="p">:</span> <span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">})</span>
</pre></div></div></li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><p class="first" style="hyphens: auto; line-height: 22.4px; margin-top: 0px !important;"><em class="dfn">位置参数</em>: 不属于关键字参数的参数。位置参数可出现于参数列表的开头以及/或者作为前面带有&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*</span></code>&nbsp;的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-iterable" style="color: rgb(99, 99, 187); text-decoration-line: none;">iterable</a>里的元素被传入。举例来说，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">3</span></code>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">5</span></code>&nbsp;在以下调用中均属于位置参数:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="nb" style="color: rgb(0, 112, 32);">complex</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">)</span>
<span class="nb" style="color: rgb(0, 112, 32);">complex</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">))</span>
</pre></div></div></li></ul><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">参数会被赋值给函数体中对应的局部变量。有关赋值规则参见&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/expressions.html#calls" style="color: rgb(99, 99, 187); text-decoration-line: none;">调用</a>&nbsp;一节。根据语法，任何表达式都可用来表示一个参数；最终算出的值会被赋给对应的局部变量。</p><p class="last" style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">另参见&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-parameter" style="color: rgb(99, 99, 187); text-decoration-line: none;">parameter</a>&nbsp;术语表条目，常见问题中&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/faq/programming.html#faq-argument-vs-parameter" style="color: rgb(99, 99, 187); text-decoration-line: none;">参数与形参的区别</a>&nbsp;以及&nbsp;<span class="target" id="index-71"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0362" style="color: rgb(99, 99, 187); text-decoration-line: none;"><strong>PEP 362</strong></a>。</p><h4 style="margin-top: 0px; hyphens: auto; line-height: 22.4px;" id="blogTitle24">关键字参数</h4><div><p class="first" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); hyphens: auto; line-height: 22.4px; margin-top: 0px !important;"><em class="dfn">关键字参数</em>: 在函数调用中前面带有标识符（例如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">name=</span></code>）或者作为包含在前面带有&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">**</span></code>&nbsp;的字典里的值传入。举例来说，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">3</span></code>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">5</span></code>&nbsp;在以下对&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#complex" title="complex" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">complex()</span></code></a>&nbsp;的调用中均属于关键字参数:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="nb" style="color: rgb(0, 112, 32);">complex</span><span class="p">(</span><span class="n">real</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="n">imag</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">)</span>
<span class="nb" style="color: rgb(0, 112, 32);">complex</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">**</span><span class="p">{</span><span class="s1" style="color: rgb(64, 112, 160);">'real'</span><span class="p">:</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'imag'</span><span class="p">:</span> <span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">})</span></pre></div></div></div><div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><br></p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">可以使用形如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">kwarg=value</span></code>&nbsp;的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-keyword-argument" style="color: rgb(99, 99, 187); text-decoration-line: none;">关键字参数</a>&nbsp;来调用函数。例如下面的函数:</p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="p">,</span> <span class="n">state</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">'a stiff'</span><span class="p">,</span> <span class="n">action</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">'voom'</span><span class="p">,</span> <span class="nb" style="color: rgb(0, 112, 32);">type</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">'Norwegian Blue'</span><span class="p">):</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"-- This parrot wouldn't"</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">end</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">' '</span><span class="p">)</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"if you put"</span><span class="p">,</span> <span class="n">voltage</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">"volts through it."</span><span class="p">)</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"-- Lovely plumage, the"</span><span class="p">,</span> <span class="nb" style="color: rgb(0, 112, 32);">type</span><span class="p">)</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"-- It's"</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">"!"</span><span class="p">)</span>
</pre></div></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">接受一个必需的参数（<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">voltage</span></code>）和三个可选的参数（<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">state</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">action</span></code>，和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type</span></code>）。这个函数可以通过下面的任何一种方式调用:</p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="n">parrot</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">1000</span><span class="p">)</span>                                          <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># 1 positional argument</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">1000</span><span class="p">)</span>                                  <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># 1 keyword argument</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">1000000</span><span class="p">,</span> <span class="n">action</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">'VOOOOOM'</span><span class="p">)</span>             <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># 2 keyword arguments</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">action</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">'VOOOOOM'</span><span class="p">,</span> <span class="n">voltage</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">1000000</span><span class="p">)</span>             <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># 2 keyword arguments</span>
<span class="n">parrot</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'a million'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'bereft of life'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'jump'</span><span class="p">)</span>         <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># 3 positional arguments</span>
<span class="n">parrot</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'a thousand'</span><span class="p">,</span> <span class="n">state</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">'pushing up the daisies'</span><span class="p">)</span>  <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># 1 positional, 1 keyword</span>
</pre></div></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">但下面的函数调用都是无效的:</p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="n">parrot</span><span class="p">()</span>                     <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># required argument missing</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mf" style="color: rgb(32, 128, 80);">5.0</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'dead'</span><span class="p">)</span>  <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># non-keyword argument after a keyword argument</span>
<span class="n">parrot</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">110</span><span class="p">,</span> <span class="n">voltage</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">220</span><span class="p">)</span>     <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># duplicate value for the same argument</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">actor</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">'John Cleese'</span><span class="p">)</span>  <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># unknown keyword argument</span>
</pre></div></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">在函数调用中，关键字参数必须跟随在位置参数的后面。传递的所有关键字参数必须与函数接受的其中一个参数匹配（比如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">actor</span></code>&nbsp;不是函数&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">parrot</span></code>&nbsp;的有效参数），它们的顺序并不重要。这也包括非可选参数，（比如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">parrot(voltage=1000)</span></code>&nbsp;也是有效的）。不能对同一个参数多次赋值。下面是一个因为此限制而失败的例子:</p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">function</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">function</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">0</span><span class="p">,</span> <span class="n">a</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">0</span><span class="p">)</span>
<span class="gt" style="color: rgb(0, 68, 221);">Traceback (most recent call last):</span>
  File <span class="nb" style="color: rgb(0, 112, 32);">"&lt;stdin&gt;"</span>, line <span class="m" style="color: rgb(32, 128, 80);">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr" style="color: rgb(255, 0, 0);">TypeError</span>: <span class="n">function() got multiple values for keyword argument 'a'</span>
</pre></div></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">当在最后出现形如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">**name</span></code>&nbsp;的形式参数时，它会接受一个字典（参见&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#typesmapping" style="color: rgb(99, 99, 187); text-decoration-line: none;">Mapping Types — dict</a>&nbsp;）字典中包含了所有除了与形式参数对应的其他关键字参数。这可以和形如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*name</span></code>&nbsp;的形式参数（在下一小节描述）结合，该参数会接受一个包含形式参数列表之外的位置参数的元组。（<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*name</span></code>&nbsp;必须在出现在&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">**name</span></code>&nbsp;之前。）比如，如果我们定义一个这样的函数:</p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">cheeseshop</span><span class="p">(</span><span class="n">kind</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">arguments</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">keywords</span><span class="p">):</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"-- Do you have any"</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">"?"</span><span class="p">)</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"-- I'm sorry, we're all out of"</span><span class="p">,</span> <span class="n">kind</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">arg</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n">arguments</span><span class="p">:</span>
        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"-"</span> <span class="o" style="color: rgb(102, 102, 102);">*</span> <span class="mi" style="color: rgb(32, 128, 80);">40</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">kw</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n">keywords</span><span class="p">:</span>
        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">kw</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">":"</span><span class="p">,</span> <span class="n">keywords</span><span class="p">[</span><span class="n">kw</span><span class="p">])</span>
</pre></div></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">它可以像这样调用:</p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="n">cheeseshop</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Limburger"</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">"It's very runny, sir."</span><span class="p">,</span>
           <span class="s2" style="color: rgb(64, 112, 160);">"It's really very, VERY runny, sir."</span><span class="p">,</span>
           <span class="n">shopkeeper</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s2" style="color: rgb(64, 112, 160);">"Michael Palin"</span><span class="p">,</span>
           <span class="n">client</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s2" style="color: rgb(64, 112, 160);">"John Cleese"</span><span class="p">,</span>
           <span class="n">sketch</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s2" style="color: rgb(64, 112, 160);">"Cheese Shop Sketch"</span><span class="p">)</span>
</pre></div></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">当然它会打印:</p><div class="highlight-none notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);">-- Do you have any Limburger ?
-- I'm sorry, we're all out of Limburger
It's very runny, sir.
It's really very, VERY runny, sir.
----------------------------------------
shopkeeper : Michael Palin
client : John Cleese
sketch : Cheese Shop Sketch
</pre></div></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">注意打印时关键字参数的顺序保证与调用函数时提供它们的顺序是相匹配的。</p></div><h4 style="margin-top: 0px; hyphens: auto; line-height: 22.4px;" id="blogTitle25">位置参数</h4></div><div><p class="first" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); hyphens: auto; line-height: 22.4px; margin-top: 0px !important;"><em class="dfn">位置参数</em>: 不属于关键字参数的参数。位置参数可出现于参数列表的开头以及/或者作为前面带有&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*</span></code>&nbsp;的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-iterable" style="color: rgb(99, 99, 187); text-decoration-line: none;">iterable</a>里的元素被传入。举例来说，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">3</span></code>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">5</span></code>&nbsp;在以下调用中均属于位置参数:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="nb" style="color: rgb(0, 112, 32);">complex</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">)</span>
<span class="nb" style="color: rgb(0, 112, 32);">complex</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">))</span></pre></div></div></div><h3 id="blogTitle26">形参（parameters）和实参（arguments）的区别</h3><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-parameter" style="color: rgb(99, 99, 187); text-decoration-line: none;">Parameters</a>&nbsp;are defined by the names that appear in a function definition, whereas&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-argument" style="color: rgb(99, 99, 187); text-decoration-line: none;">arguments</a>&nbsp;are the values actually passed to a function when calling it. Parameters define what types of arguments a function can accept. For example, given the function definition:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">func</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><em>foo</em>,&nbsp;<em>bar</em>&nbsp;and&nbsp;<em>kwargs</em>&nbsp;are parameters of&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">func</span></code>. However, when calling&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">func</span></code>, for example:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="n">func</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">42</span><span class="p">,</span> <span class="n">bar</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">314</span><span class="p">,</span> <span class="n">extra</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">somevar</span><span class="p">)</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">the values&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">42</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">314</span></code>, and&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">somevar</span></code>&nbsp;are arguments.</p></div><h3 id="blogTitle27">解包参数列表</h3><div><div class="section" id="unpacking-argument-lists"><p style="hyphens: auto; text-align: justify; line-height: 22.4px;">当参数已经在列表或元组中但要为需要单独位置参数的函数调用解包时，会发生相反的情况。例如，内置的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#range" title="range" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">range()</span></code></a>&nbsp;函数需要单独的&nbsp;<em>start</em>&nbsp;和&nbsp;<em>stop</em>&nbsp;参数。如果它们不能单独使用，可以使用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*</span></code>-操作符 来编写函数调用以便从列表或元组中解包参数:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">list</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">range</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">6</span><span class="p">))</span>            <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># normal call with separate arguments</span>
<span class="go">[3, 4, 5]</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[</span><span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">6</span><span class="p">]</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">list</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">range</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">))</span>            <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># call with arguments unpacked from a list</span>
<span class="go">[3, 4, 5]</span>
</pre></div></div><p id="index-3" style="hyphens: auto; text-align: justify; line-height: 22.4px;">同样的方式，字典可使用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">**</span></code>-操作符 来提供关键字参数:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="p">,</span> <span class="n">state</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">'a stiff'</span><span class="p">,</span> <span class="n">action</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">'voom'</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"-- This parrot wouldn't"</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">end</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">' '</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"if you put"</span><span class="p">,</span> <span class="n">voltage</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">"volts through it."</span><span class="p">,</span> <span class="n">end</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">' '</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"E's"</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">"!"</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">{</span><span class="s2" style="color: rgb(64, 112, 160);">"voltage"</span><span class="p">:</span> <span class="s2" style="color: rgb(64, 112, 160);">"four million"</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">"state"</span><span class="p">:</span> <span class="s2" style="color: rgb(64, 112, 160);">"bleedin' demised"</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">"action"</span><span class="p">:</span> <span class="s2" style="color: rgb(64, 112, 160);">"VOOM"</span><span class="p">}</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">parrot</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">d</span><span class="p">)</span>
<span class="go">-- This parrot wouldn't VOOM if you put four million volts through it. E's bleedin' demised !</span>
</pre></div></div></div><div class="section" id="lambda-expressions"><span id="tut-lambda" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"></span></div></div><h2 id="blogTitle28">函数类型</h2><h3 id="blogTitle29">空函数</h3><div>如果想定义一个什么事也不做的空函数，可以用 pass 语句。<br></div><h3 id="blogTitle30">匿名函数</h3><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">可以用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/expressions.html#lambda" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">lambda</span></code></a>&nbsp;关键字来创建一个小的匿名函数。这个函数返回两个参数的和：&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">lambda</span>&nbsp;<span class="pre" style="hyphens: none;">a,</span>&nbsp;<span class="pre" style="hyphens: none;">b:</span><span class="pre" style="hyphens: none;">a+b</span></code>&nbsp;。Lambda 函数可以在需要函数对象的任何地方使用。它们在语法上限于单个表达式。从语义上来说，它们只是正常函数定义的语法糖。与嵌套函数定义一样，lambda 函数可以引用包含范围的变量:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">make_incrementor</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o" style="color: rgb(102, 102, 102);">+</span> <span class="n">n</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">make_incrementor</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">42</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">0</span><span class="p">)</span>
<span class="go">42</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">)</span>
<span class="go">43</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">上面的例子使用一个 lambda 表达式来返回一个函数。另一个用法是传递一个小函数作为参数:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">pairs</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[(</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'one'</span><span class="p">),</span> <span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'two'</span><span class="p">),</span> <span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'three'</span><span class="p">),</span> <span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">4</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'four'</span><span class="p">)]</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">pairs</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">pair</span><span class="p">[</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">])</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">pairs</span>
<span class="go">[(4, 'four'), (1, 'one'), (3, 'three'), (2, 'two')]</span></pre></div></div></div><div><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">关键字<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">lambda</code>表示匿名函数，冒号前面的<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">x</code>表示函数参数。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">匿名函数有个限制，就是只能有一个表达式，不用写<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">return</code>，返回值就是该表达式的结果。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">用匿名函数有个好处，因为函数没有名字，不必担心函数名冲突。此外，匿名函数也是一个函数对象，也可以把匿名函数赋值给一个变量，再利用变量来调用该函数。</p></div><h3 id="blogTitle31">返回函数</h3><h4 id="blogTitle32">定义</h4><div>即能够返回一个函数的函数。</div><pre>def point():
    def world():
        pass
    return world

# 这里的 point 函数可以称作为一个返回函数</pre><div><br></div><h3 id="blogTitle33">闭包函数</h3><div>闭包函数是返回函数，但返回函数不一定是闭包函数。</div><h4 id="blogTitle34">定义</h4><div>在程序语言中，所谓<span style="font-weight: 700;"><font color="#000000" style="background-color: white;">闭包</font></span>，是指语法域位于某个特定的区域，具有持续参照（读写）位于该区域内自身范围之外的执行域上的非持久型变量值能力的段落。<span style="font-weight: 700; background-color: yellow;"><font color="#ff0000">这些外部执行域的非持久型变量神奇地保留了他们在闭包最初定义（或创建）时的值。</font></span></div><div><span style="font-weight: 700; background-color: yellow;"><font color="#ff0000"><br></font></span></div><div><span style="font-weight: 700;">简单的说，用一个函数去访问另外一个函数内部变量的方式即</span><font color="#000000" style="font-weight: 700; background-color: white;">闭包</font><span style="font-weight: 700;">。</span><span style="font-weight: 700; background-color: yellow;"><font color="#ff0000"><br></font></span></div><div><pre>def point():
    POWER = 2

    def world(dimension):
        print(POWER ** dimension)

    return world

# 这里的 point 函数可以称作为一个闭包函数

p = point()
print(p.__closure__[0].cell_contents) # 2
p(3)                                  # 8

POWER = 6
p(3)                                  # 8
</pre></div><div><pre>def point(power=0):
    def world(dimension=0):
        nonlocal power
        power **= dimension
        print(power)

    return world

# 这里的 point 函数可以称作为一个闭包函数

attach = point(3)

attach(4) # 81
attach(8) # 1853020188851841</pre><p style="margin-bottom: 24px; padding: 0px; border: 0px;">内部函数可以访问定义在外部函数中的所有变量和函数，以及外部函数能访问的所有变量和函数。</p><p style="margin-bottom: 24px; padding: 0px; border: 0px;">但是，外部函数却不能够访问定义在内部函数中的变量和函数。这给内部函数的变量提供了一定的安全性。而且，当内部函数生存周期大于外部函数时，由于内部函数可以访问外部函数的作用域，定义在外部函数的变量和函数的生存周期就会大于外部函数本身。当内部函数以某一种方式被任何一个外部函数作用域访问时，一个闭包就产生了。</p></div><h4 id="blogTitle35">闭包误区</h4><pre>def point():
    POWER = 2

    def world():
        print(POWER)

    return world


# 此时 point 函数是一个闭包函数
p = point()

# 2
p()

# (&lt;cell at 0x10559e9a8: int object at 0x10532c060&gt;,)
print(p.__closure__)<br></pre><div>误区1</div><div><pre>def point():<br>&nbsp; &nbsp; POWER = 2<br>&nbsp; &nbsp; def world():<br>&nbsp; &nbsp; &nbsp; &nbsp; POWER = 4<br>&nbsp; &nbsp; &nbsp; &nbsp; print(POWER)<br>&nbsp; &nbsp; print(POWER) # 2<br>&nbsp; &nbsp; world()&nbsp; &nbsp; &nbsp; # 4<br>&nbsp; &nbsp; print(POWER) # 2<br><br># point 函数并不是一个闭包函数<br>p = point()<br># 报错<br>print(p.__closure__)</pre></div><div>误区2</div><pre>def point():
    POWER = 2

    def world():
        POWER = 4
        print(POWER)

    return world


# point 函数并不是一个闭包函数
p = point()

# 4
p()

# None
print(p.__closure__)</pre><div>误区3</div><pre>def point():
    POWER = 2

    def world():
        pass

    return world


# point 函数并不是一个闭包函数
p = point()

p()

# None
print(p.__closure__)</pre><h4 id="blogTitle36">用途</h4><pre>def point(power):
    power = power

    def world(dimension):
        nonlocal power
        power *= dimension
        print(power)

    return world

attach = point(1)

attach(2) # 2
attach(3) # 6
attach(4) # 24
</pre><pre>def point(power):
    def world(dimension):
        nonlocal power
        power **= dimension
        print(power)

    return world

attach = point(3)

attach(4) # 81
attach(8) # 1853020188851841</pre><h3 id="blogTitle37">迭代器</h3><div><pre>Help on built-in function iter in module builtins:
<br>iter(...)<br>&nbsp; &nbsp; iter(iterable) -&gt; iterator<br>&nbsp; &nbsp; iter(callable, sentinel) -&gt; iterator<br>
&nbsp; &nbsp; Get an iterator from an object.&nbsp; In the first form, the argument must<br>&nbsp; &nbsp; supply its own iterator, or be a sequence.<br>&nbsp; &nbsp; In the second form, the callable is called until it returns the sentinel.</pre></div><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">迭代是Python最强大的功能之一，是访问集合元素的一种方式。</p><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">迭代器是一个可以记住遍历的位置的对象。</p><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">迭代器对象从集合的第一个元素开始访问，直到所有的元素被访问完结束。迭代器只能往前不会后退。</p><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">迭代器有两个基本的方法：<strong style="border: 0px; margin: 0px; padding: 0px;">iter()</strong>&nbsp;和&nbsp;<strong style="border: 0px; margin: 0px; padding: 0px;">next()</strong>。</p><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">字符串，列表或元组对象都可用于创建迭代器。</p><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);"><br></p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">您可能已经注意到大多数容器对象都可以使用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#for" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">for</span></code></a>&nbsp;语句:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">element</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="p">[</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">]:</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">element</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">):</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">key</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="p">{</span><span class="s1" style="color: rgb(64, 112, 160);">'one'</span><span class="p">:</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'two'</span><span class="p">:</span><span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">}:</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">char</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="s2" style="color: rgb(64, 112, 160);">"123"</span><span class="p">:</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">line</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="nb" style="color: rgb(0, 112, 32);">open</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"myfile.txt"</span><span class="p">):</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">end</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s1" style="color: rgb(64, 112, 160);">''</span><span class="p">)</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这种访问方式清晰，简洁，方便。</font><font style="vertical-align: inherit;">迭代器的使用遍及并统一了Python。</font><font style="vertical-align: inherit;">在幕后，</font></font><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#for" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">for</span></code></a><font style="vertical-align: inherit;">语句调用</font><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#iter" title="过程" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">iter()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">容器对象。</font><font style="vertical-align: inherit;">该函数返回一个迭代器对象，该对象定义</font></font><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#iterator.__next__" title="迭代器.__ next__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__next__()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一次访问容器中元素</font><font style="vertical-align: inherit;">的方法</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当没有更多元素时，&nbsp;</font></font><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#iterator.__next__" title="迭代器.__ next__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__next__()</span></code></a><font style="vertical-align: inherit;">引发一个</font><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#StopIteration" title="的StopIteration" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">StopIteration</span></code></a><font style="vertical-align: inherit;">异常，告诉&nbsp;</font><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">for</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">循环终止。</font><font style="vertical-align: inherit;">您可以</font></font><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#iterator.__next__" title="迭代器.__ next__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__next__()</span></code></a><font style="vertical-align: inherit;">使用</font><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#next" title="下一个" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">next()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置函数</font><font style="vertical-align: inherit;">调用该</font><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">;&nbsp;</font><font style="vertical-align: inherit;">这个例子说明了它是如何工作的：</font></font></p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="s1" style="color: rgb(64, 112, 160);">'abc'</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">it</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">iter</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">it</span>
<span class="go">&lt;iterator object at 0x00A1DB50&gt;</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
<span class="go">'a'</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
<span class="go">'b'</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
<span class="go">'c'</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
<span class="gt" style="color: rgb(0, 68, 221);">Traceback (most recent call last):</span>
  File <span class="nb" style="color: rgb(0, 112, 32);">"&lt;stdin&gt;"</span>, line <span class="m" style="color: rgb(32, 128, 80);">1</span>, in <span class="n">&lt;module&gt;</span>
    <span class="nb" style="color: rgb(0, 112, 32);">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
<span class="gr" style="color: rgb(255, 0, 0);">StopIteration</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">看过迭代器协议背后的机制，很容易将迭代器行为添加到类中。</font><font style="vertical-align: inherit;">定义一个使用</font></font><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__iter__" title="对象.__ iter__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__iter__()</span></code></a><font style="vertical-align: inherit;">方法返回对象的</font><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#iterator.__next__" title="迭代器.__ next__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__next__()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法。</font><font style="vertical-align: inherit;">如果类定义了</font></font><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__next__()</span></code><font style="vertical-align: inherit;">，那么</font><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__iter__" title="对象.__ iter__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__iter__()</span></code></a><font style="vertical-align: inherit;">可以返回</font><code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self</span></code><font style="vertical-align: inherit;">：</font></p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Reverse</span><span class="p">:</span>
    <span class="sd" style="color: rgb(64, 112, 160); font-style: italic;">"""Iterator for looping over a sequence backwards."""</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">data</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">data</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">index</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__iter__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__next__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">index</span> <span class="o" style="color: rgb(102, 102, 102);">==</span> <span class="mi" style="color: rgb(32, 128, 80);">0</span><span class="p">:</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">raise</span> <span class="ne" style="color: rgb(0, 112, 32);">StopIteration</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">index</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">index</span> <span class="o" style="color: rgb(102, 102, 102);">-</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">data</span><span class="p">[</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">index</span><span class="p">]</span>
</pre></div></div><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">rev</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">Reverse</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'spam'</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">iter</span><span class="p">(</span><span class="n">rev</span><span class="p">)</span>
<span class="go">&lt;__main__.Reverse object at 0x00A1DB50&gt;</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">char</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n">rev</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="go">m</span>
<span class="go">a</span>
<span class="go">p</span>
<span class="go">s</span></pre></div></div><h4 id="blogTitle38">可迭代对象</h4><div><p style="margin: 0px 0px 15px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">我们已经知道，可以直接作用于<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">for</code>循环的数据类型有以下几种：</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">一类是集合数据类型，如<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">list</code>、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">tuple</code>、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">dict</code>、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">set</code>、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">str</code>等；</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">一类是<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">generator</code>，包括生成器和带<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">yield</code>的generator function。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">这些可以直接作用于<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">for</code>循环的对象统称为可迭代对象：<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterable</code>。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">可以使用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">isinstance()</code>判断一个对象是否是<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterable</code>对象：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">from</span> collections <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">import</span> Iterable
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance([], Iterable)
<span class="built_in" style="color: rgb(0, 134, 179);">True</span>
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance({}, Iterable)
<span class="built_in" style="color: rgb(0, 134, 179);">True</span>
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance(<span class="string" style="color: rgb(221, 17, 68);">'abc'</span>, Iterable)
<span class="built_in" style="color: rgb(0, 134, 179);">True</span>
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance((x <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">for</span> x <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">in</span> range(<span class="number" style="color: rgb(0, 153, 153);">10</span>)), Iterable)
<span class="built_in" style="color: rgb(0, 134, 179);">True</span>
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance(<span class="number" style="color: rgb(0, 153, 153);">100</span>, Iterable)
<span class="built_in" style="color: rgb(0, 134, 179);">False</span></code></pre></div><h4 id="blogTitle39">创建一个迭代器</h4><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">把一个类作为一个迭代器使用需要在类中实现两个方法 __iter__() 与 __next__() 。</p><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">如果你已经了解的面向对象编程，就知道类都有一个构造函数，Python 的构造函数为 __init__(), 它会在对象初始化的时候执行。</p><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">__iter__() 方法返回一个特殊的迭代器对象， 这个迭代器对象实现了 __next__() 方法并通过 StopIteration 异常标识迭代的完成。</p><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">__next__() 方法会返回下一个迭代器对象。</p><h5 id="blogTitle40">iter() 方法将一个可迭代对象转换为迭代器对象</h5><div><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">可以被<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next()</code>函数调用并不断返回下一个值的对象称为迭代器：<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">可以使用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">isinstance()</code>判断一个对象是否是<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>对象：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">from</span> collections <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">import</span> Iterator
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance((x <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">for</span> x <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">in</span> range(<span class="number" style="color: rgb(0, 153, 153);">10</span>)), Iterator)
<span class="built_in" style="color: rgb(0, 134, 179);">True</span>
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance([], Iterator)
<span class="built_in" style="color: rgb(0, 134, 179);">False</span>
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance({}, Iterator)
<span class="built_in" style="color: rgb(0, 134, 179);">False</span>
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance(<span class="string" style="color: rgb(221, 17, 68);">'abc'</span>, Iterator)
<span class="built_in" style="color: rgb(0, 134, 179);">False</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">生成器都是<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>对象，但<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">list</code>、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">dict</code>、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">str</code>虽然是<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterable</code>，却不是<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">把<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">list</code>、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">dict</code>、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">str</code>等<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterable</code>变成<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>可以使用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">iter()</code>函数：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance(iter([]), Iterator)
<span class="built_in" style="color: rgb(0, 134, 179);">True</span>
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>isinstance(iter(<span class="string" style="color: rgb(221, 17, 68);">'abc'</span>), Iterator)
<span class="built_in" style="color: rgb(0, 134, 179);">True</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">你可能会问，为什么<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">list</code>、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">dict</code>、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">str</code>等数据类型不是<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>？</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">这是因为Python的<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>对象表示的是一个数据流，Iterator对象可以被<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next()</code>函数调用并不断返回下一个数据，直到没有数据时抛出<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">StopIteration</code>错误。可以把这个数据流看做是一个有序序列，但我们却不能提前知道序列的长度，只能不断通过<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next()</code>函数实现按需计算下一个数据，所以<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>的计算是惰性的，只有在需要返回下一个数据时它才会计算。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>甚至可以表示一个无限大的数据流，例如全体自然数。而使用list是永远不可能存储全体自然数的。</p></div><h5 id="blogTitle41">示例</h5><p>创建一个返回数字的迭代器，初始值为 1，逐步递增 1：<br></p><pre>class MyNumbers:
  def __iter__(self):
    self.a = 1
    return self

  def __next__(self):
    x = self.a
    self.a += 1
    return x

myclass = MyNumbers()
myiter = iter(myclass)

print(next(myiter))
print(next(myiter))
print(next(myiter))
print(next(myiter))
print(next(myiter))<br></pre><p><br></p><h4 id="blogTitle42">StopIteration 异常</h4><p>StopIteration 异常用于标识迭代的完成，防止出现无限循环的情况，在 __next__() 方法中我们可以设置在完成指定循环次数后触发 StopIteration 异常来结束迭代。<br></p><h4 id="blogTitle43">小结</h4><div><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">凡是可作用于<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">for</code>循环的对象都是<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterable</code>类型；</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">凡是可作用于<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next()</code>函数的对象都是<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>类型，它们表示一个惰性计算的序列；</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">集合数据类型如<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">list</code>、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">dict</code>、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">str</code>等是<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterable</code>但不是<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>，不过可以通过<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">iter()</code>函数获得一个<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>对象。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">Python的<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">for</code>循环本质上就是通过不断调用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next()</code>函数实现的，例如：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">for</span> x <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">in</span> [<span class="number" style="color: rgb(0, 153, 153);">1</span>, <span class="number" style="color: rgb(0, 153, 153);">2</span>, <span class="number" style="color: rgb(0, 153, 153);">3</span>, <span class="number" style="color: rgb(0, 153, 153);">4</span>, <span class="number" style="color: rgb(0, 153, 153);">5</span>]:
    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">pass</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">实际上完全等价于：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="comment" style="color: rgb(153, 153, 136); font-style: italic;"># 首先获得Iterator对象:</span>
it = iter([<span class="number" style="color: rgb(0, 153, 153);">1</span>, <span class="number" style="color: rgb(0, 153, 153);">2</span>, <span class="number" style="color: rgb(0, 153, 153);">3</span>, <span class="number" style="color: rgb(0, 153, 153);">4</span>, <span class="number" style="color: rgb(0, 153, 153);">5</span>])
<span class="comment" style="color: rgb(153, 153, 136); font-style: italic;"># 循环:</span>
<span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">while</span> <span class="built_in" style="color: rgb(0, 134, 179);">True</span>:
    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">try</span>:
        <span class="comment" style="color: rgb(153, 153, 136); font-style: italic;"># 获得下一个值:</span>
        x = next(it)
    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">except</span> StopIteration:
        <span class="comment" style="color: rgb(153, 153, 136); font-style: italic;"># 遇到StopIteration就退出循环</span>
        <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">break</span></code></pre></div><h3 id="blogTitle44">生成器</h3><div><p style="margin: 0px 0px 15px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">通过列表生成式，我们可以直接创建一个列表。但是，受到内存限制，列表容量肯定是有限的。而且，创建一个包含100万个元素的列表，不仅占用很大的存储空间，如果我们仅仅需要访问前面几个元素，那后面绝大多数元素占用的空间都白白浪费了。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">所以，如果列表元素可以按照某种算法推算出来，那我们是否可以在循环的过程中不断推算出后续的元素呢？这样就不必创建完整的list，从而节省大量的空间。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;"><b style="background-color: yellow;"><font color="#ff0000">在Python中，这种一边循环一边计算的机制，称为生成器：generator。</font></b></p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">generator 保存的是算法。<b><br></b></p></div><div><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51);"><b style="background-color: yellow;">在 Python 中，使用了 yield 的函数被称为生成器（generator）。</b></p><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">跟普通函数不同的是，生成器是一个返回迭代器的函数，只能用于迭代操作，更简单点理解生成器就是一个迭代器。</p><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">在调用生成器运行的过程中，每次遇到 yield 时函数会暂停并保存当前所有的运行信息，返回 yield 的值, 并在下一次执行 next() 方法时从当前位置继续运行。</p><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">调用一个生成器函数，返回的是一个迭代器对象。</p><p style="border: 0px; margin: 0px; padding: 0px; line-height: 2em; overflow-wrap: break-word; word-break: break-all; font-size: 13px; font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);"><br></p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-generator" style="color: rgb(99, 99, 187); text-decoration-line: none;">Generator</a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个用于创建迭代器的简单而强大的工具。</font><font style="vertical-align: inherit;">它们像常规函数一样编写，但</font></font><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#yield" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">yield</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只要他们想要返回数据就</font><font style="vertical-align: inherit;">使用该</font><font style="vertical-align: inherit;">语句。</font><font style="vertical-align: inherit;">每次</font></font><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#next" title="下一个" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">next()</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用它时，生成器从它停止的地方恢复（它记住所有数据值和上次执行的语句）。</font><font style="vertical-align: inherit;">一个例子表明，生成器很容易创建：</font></font></p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">reverse</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">index</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="nb" style="color: rgb(0, 112, 32);">range</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o" style="color: rgb(102, 102, 102);">-</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">-</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">-</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">yield</span> <span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</pre></div></div><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">char</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n">reverse</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'golf'</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="go">f</span>
<span class="go">l</span>
<span class="go">o</span>
<span class="go">g</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何可以使用生成器完成的操作也可以使用基于类的迭代器完成，如上一节中所述。</font><font style="vertical-align: inherit;">使生成器如此紧凑的原因是</font></font><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__iter__" title="对象.__ iter__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__iter__()</span></code></a><font style="vertical-align: inherit;">和</font><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/expressions.html#generator.__next__" title="发电机.__ next__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__next__()</span></code></a><font style="vertical-align: inherit;">方法是自动创建的。</font></p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一个关键特性是在调用之间自动保存局部变量和执行状态。</font><font style="vertical-align: inherit;">与使用</font></font><code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self.index</span></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;和</font><font style="vertical-align: inherit;">等实例变量的方法相比，这使得函数更容易编写并且更加清晰</font></font><code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self.data</span></code><font style="vertical-align: inherit;">。</font></p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><font style="vertical-align: inherit;">除了自动创建方法和保存程序状态，当生成器终止时，它们会自动引发</font><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#StopIteration" title="的StopIteration" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">StopIteration</span></code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">结合使用这些功能，可以轻松创建迭代器，而不需要编写常规函数。</font></font></p></div><h4 id="blogTitle45">创建生成器</h4><h5 id="blogTitle46">生成器表达式</h5><p><b><font color="#ff0000" style="background-color: yellow;">把一个列表生成式的 [] 改成 ()</font></b></p><div><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><font style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; white-space: normal; vertical-align: inherit;">一些简单的生成器可以使用类似于列表推导的语法简洁地编码为表达式，但使用括号而不是方括号。</font><font style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; white-space: normal; vertical-align: inherit;">这些表达式适用于通过封闭函数立即使用生成器的情况。</font><font style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; white-space: normal; vertical-align: inherit;">生成器表达式比完整的生成器定义更紧凑但功能更少，并且往往比等效列表推导更具内存友好性。</font><br></p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">要创建一个generator，有很多种方法。第一种方法很简单，只要把一个列表生成式的<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">[]</code>改成<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">()</code>，就创建了一个generator：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>L = [x * x <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">for</span> x <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">in</span> range(<span class="number" style="color: rgb(0, 153, 153);">10</span>)]
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>L
[<span class="number" style="color: rgb(0, 153, 153);">0</span>, <span class="number" style="color: rgb(0, 153, 153);">1</span>, <span class="number" style="color: rgb(0, 153, 153);">4</span>, <span class="number" style="color: rgb(0, 153, 153);">9</span>, <span class="number" style="color: rgb(0, 153, 153);">16</span>, <span class="number" style="color: rgb(0, 153, 153);">25</span>, <span class="number" style="color: rgb(0, 153, 153);">36</span>, <span class="number" style="color: rgb(0, 153, 153);">49</span>, <span class="number" style="color: rgb(0, 153, 153);">64</span>, <span class="number" style="color: rgb(0, 153, 153);">81</span>]
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>g = (x * x <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">for</span> x <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">in</span> range(<span class="number" style="color: rgb(0, 153, 153);">10</span>))
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>g
&lt;generator object &lt;genexpr&gt; at <span class="number" style="color: rgb(0, 153, 153);">0x1022ef630</span>&gt;</code></pre></div><div><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">创建<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">L</code>和<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">g</code>的区别仅在于最外层的<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">[]</code>和<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">()</code>，<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">L</code>是一个list，而<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">g</code>是一个generator。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">我们可以直接打印出list的每一个元素，但我们怎么打印出generator的每一个元素呢？</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">如果要一个一个打印出来，可以通过<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next()</code>函数获得generator的下一个返回值：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="ruby">&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(g)
<span class="number" style="color: rgb(0, 153, 153);">0</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(g)
<span class="number" style="color: rgb(0, 153, 153);">1</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(g)
<span class="number" style="color: rgb(0, 153, 153);">4</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(g)
<span class="number" style="color: rgb(0, 153, 153);">9</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(g)
<span class="number" style="color: rgb(0, 153, 153);">16</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(g)
<span class="number" style="color: rgb(0, 153, 153);">25</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(g)
<span class="number" style="color: rgb(0, 153, 153);">36</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(g)
<span class="number" style="color: rgb(0, 153, 153);">49</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(g)
<span class="number" style="color: rgb(0, 153, 153);">64</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(g)
<span class="number" style="color: rgb(0, 153, 153);">81</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(g)
<span class="constant" style="color: rgb(0, 153, 153);">Traceback</span> (most recent call last)<span class="symbol" style="color: rgb(153, 0, 115);">:</span>
  <span class="constant" style="color: rgb(0, 153, 153);">File</span> <span class="string" style="color: rgb(221, 17, 68);">"&lt;stdin&gt;"</span>, line <span class="number" style="color: rgb(0, 153, 153);">1</span>, <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">in</span> &lt;<span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">module</span>&gt;
<span class="constant" style="color: rgb(0, 153, 153);">StopIteration</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">我们讲过，generator保存的是算法，每次调用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next(g)</code>，就计算出<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">g</code>的下一个元素的值，直到计算到最后一个元素，没有更多的元素时，抛出<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">StopIteration</code>的错误。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">当然，上面这种不断调用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next(g)</code>实在是太变态了，正确的方法是使用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">for</code>循环，因为generator也是可迭代对象：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>g = (x * x <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">for</span> x <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">in</span> range(<span class="number" style="color: rgb(0, 153, 153);">10</span>))
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">for</span> n <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">in</span> g:
<span class="prompt" style="color: rgb(153, 0, 115);">... </span>    print(n)
<span class="prompt" style="color: rgb(153, 0, 115);">... </span>
<span class="number" style="color: rgb(0, 153, 153);">0</span>
<span class="number" style="color: rgb(0, 153, 153);">1</span>
<span class="number" style="color: rgb(0, 153, 153);">4</span>
<span class="number" style="color: rgb(0, 153, 153);">9</span>
<span class="number" style="color: rgb(0, 153, 153);">16</span>
<span class="number" style="color: rgb(0, 153, 153);">25</span>
<span class="number" style="color: rgb(0, 153, 153);">36</span>
<span class="number" style="color: rgb(0, 153, 153);">49</span>
<span class="number" style="color: rgb(0, 153, 153);">64</span>
<span class="number" style="color: rgb(0, 153, 153);">81</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">所以，我们创建了一个generator后，基本上永远不会调用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next()</code>，而是通过<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">for</code>循环来迭代它，并且不需要关心<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">StopIteration</code>的错误。</p></div><h5 id="blogTitle47">在函数中使用 yield</h5><div><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">generator非常强大。如果推算的算法比较复杂，用类似列表生成式的<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">for</code>循环无法实现的时候，还可以用函数来实现。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">比如，著名的斐波拉契数列（Fibonacci），除第一个和第二个数外，任意一个数都可由前两个数相加得到：</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">1, 1, 2, 3, 5, 8, 13, 21, 34, ...</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">斐波拉契数列用列表生成式写不出来，但是，用函数把它打印出来却很容易：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="function"><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="title" style="color: rgb(153, 0, 0); font-weight: bold;">fib</span><span class="params">(max)</span>:</span>
    n, a, b = <span class="number" style="color: rgb(0, 153, 153);">0</span>, <span class="number" style="color: rgb(0, 153, 153);">0</span>, <span class="number" style="color: rgb(0, 153, 153);">1</span>
    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">while</span> n &lt; max:
        print(b)
        a, b = b, a + b
        n = n + <span class="number" style="color: rgb(0, 153, 153);">1</span>
    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">return</span> <span class="string" style="color: rgb(221, 17, 68);">'done'</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="color: rgb(221, 0, 85);">注意</span>，赋值语句：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="undefined">a, b = b, a + b
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">相当于：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="ini"><span class="setting">t = <span class="value">(b, a + b) # t是一个tuple</span></span>
<span class="setting">a = <span class="value">t[<span class="number" style="color: rgb(0, 153, 153);">0</span>]</span></span>
<span class="setting">b = <span class="value">t[<span class="number" style="color: rgb(0, 153, 153);">1</span>]</span></span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">但不必显式写出临时变量t就可以赋值。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">上面的函数可以输出斐波那契数列的前N个数：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>fib(<span class="number" style="color: rgb(0, 153, 153);">6</span>)
<span class="number" style="color: rgb(0, 153, 153);">1</span>
<span class="number" style="color: rgb(0, 153, 153);">1</span>
<span class="number" style="color: rgb(0, 153, 153);">2</span>
<span class="number" style="color: rgb(0, 153, 153);">3</span>
<span class="number" style="color: rgb(0, 153, 153);">5</span>
<span class="number" style="color: rgb(0, 153, 153);">8</span>
<span class="string" style="color: rgb(221, 17, 68);">'done'</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">仔细观察，可以看出，<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">fib</code>函数实际上是定义了斐波拉契数列的推算规则，可以从第一个元素开始，推算出后续任意的元素，这种逻辑其实非常类似generator。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">也就是说，上面的函数和generator仅一步之遥。要把<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">fib</code>函数变成generator，只需要把<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">print(b)</code>改为<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">yield b</code>就可以了：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="function"><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="title" style="color: rgb(153, 0, 0); font-weight: bold;">fib</span><span class="params">(max)</span>:</span>
    n, a, b = <span class="number" style="color: rgb(0, 153, 153);">0</span>, <span class="number" style="color: rgb(0, 153, 153);">0</span>, <span class="number" style="color: rgb(0, 153, 153);">1</span>
    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">while</span> n &lt; max:
        <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">yield</span> b
        a, b = b, a + b
        n = n + <span class="number" style="color: rgb(0, 153, 153);">1</span>
    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">return</span> <span class="string" style="color: rgb(221, 17, 68);">'done'</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">这就是定义generator的另一种方法。如果一个函数定义中包含<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">yield</code>关键字，那么这个函数就不再是一个普通函数，而是一个generator：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="xml">&gt;&gt;&gt; f = fib(6)
&gt;&gt;&gt; f
<span class="tag" style="color: rgb(0, 0, 128);">&lt;<span class="title">generator</span> <span class="attribute" style="color: rgb(0, 128, 128);">object</span> <span class="attribute" style="color: rgb(0, 128, 128);">fib</span> <span class="attribute" style="color: rgb(0, 128, 128);">at</span> <span class="attribute" style="color: rgb(0, 128, 128);">0x104feaaa0</span>&gt;</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">这里，最难理解的就是generator和函数的执行流程不一样。函数是顺序执行，遇到<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">return</code>语句或者最后一行函数语句就返回。而变成generator的函数，在每次调用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next()</code>的时候执行，遇到<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">yield</code>语句返回，再次执行时从上次返回的<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">yield</code>语句处继续执行。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">举个简单的例子，定义一个generator，依次返回数字1，3，5：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="function"><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="title" style="color: rgb(153, 0, 0); font-weight: bold;">odd</span><span class="params">()</span>:</span>
    print(<span class="string" style="color: rgb(221, 17, 68);">'step 1'</span>)
    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">yield</span> <span class="number" style="color: rgb(0, 153, 153);">1</span>
    print(<span class="string" style="color: rgb(221, 17, 68);">'step 2'</span>)
    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">yield</span>(<span class="number" style="color: rgb(0, 153, 153);">3</span>)
    print(<span class="string" style="color: rgb(221, 17, 68);">'step 3'</span>)
    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">yield</span>(<span class="number" style="color: rgb(0, 153, 153);">5</span>)
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">调用该generator时，首先要生成一个generator对象，然后用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next()</code>函数不断获得下一个返回值：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="ruby">&gt;&gt;&gt; o = odd()
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(o)
step <span class="number" style="color: rgb(0, 153, 153);">1</span>
<span class="number" style="color: rgb(0, 153, 153);">1</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(o)
step <span class="number" style="color: rgb(0, 153, 153);">2</span>
<span class="number" style="color: rgb(0, 153, 153);">3</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(o)
step <span class="number" style="color: rgb(0, 153, 153);">3</span>
<span class="number" style="color: rgb(0, 153, 153);">5</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">next</span>(o)
<span class="constant" style="color: rgb(0, 153, 153);">Traceback</span> (most recent call last)<span class="symbol" style="color: rgb(153, 0, 115);">:</span>
  <span class="constant" style="color: rgb(0, 153, 153);">File</span> <span class="string" style="color: rgb(221, 17, 68);">"&lt;stdin&gt;"</span>, line <span class="number" style="color: rgb(0, 153, 153);">1</span>, <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">in</span> &lt;<span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">module</span>&gt;
<span class="constant" style="color: rgb(0, 153, 153);">StopIteration</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">可以看到，<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">odd</code>不是普通函数，而是generator，在执行过程中，遇到<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">yield</code>就中断，下次又继续执行。执行3次<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">yield</code>后，已经没有<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">yield</code>可以执行了，所以，第4次调用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next(o)</code>就报错。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">回到<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">fib</code>的例子，我们在循环过程中不断调用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">yield</code>，就会不断中断。当然要给循环设置一个条件来退出循环，不然就会产生一个无限数列出来。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">同样的，把函数改成generator后，我们基本上从来不会用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">next()</code>来获取下一个返回值，而是直接使用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">for</code>循环来迭代：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">for</span> n <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">in</span> fib(<span class="number" style="color: rgb(0, 153, 153);">6</span>):
<span class="prompt" style="color: rgb(153, 0, 115);">... </span>    print(n)
...
<span class="number" style="color: rgb(0, 153, 153);">1</span>
<span class="number" style="color: rgb(0, 153, 153);">1</span>
<span class="number" style="color: rgb(0, 153, 153);">2</span>
<span class="number" style="color: rgb(0, 153, 153);">3</span>
<span class="number" style="color: rgb(0, 153, 153);">5</span>
<span class="number" style="color: rgb(0, 153, 153);">8</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">但是用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">for</code>循环调用generator时，发现拿不到generator的<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">return</code>语句的返回值。如果想要拿到返回值，必须捕获<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">StopIteration</code>错误，返回值包含在<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">StopIteration</code>的<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">value</code>中：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>g = fib(<span class="number" style="color: rgb(0, 153, 153);">6</span>)
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">while</span> <span class="built_in" style="color: rgb(0, 134, 179);">True</span>:
<span class="prompt" style="color: rgb(153, 0, 115);">... </span>    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">try</span>:
<span class="prompt" style="color: rgb(153, 0, 115);">... </span>        x = next(g)
<span class="prompt" style="color: rgb(153, 0, 115);">... </span>        print(<span class="string" style="color: rgb(221, 17, 68);">'g:'</span>, x)
<span class="prompt" style="color: rgb(153, 0, 115);">... </span>    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">except</span> StopIteration <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">as</span> e:
<span class="prompt" style="color: rgb(153, 0, 115);">... </span>        print(<span class="string" style="color: rgb(221, 17, 68);">'Generator return value:'</span>, e.value)
<span class="prompt" style="color: rgb(153, 0, 115);">... </span>        <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">break</span>
...
g: <span class="number" style="color: rgb(0, 153, 153);">1</span>
g: <span class="number" style="color: rgb(0, 153, 153);">1</span>
g: <span class="number" style="color: rgb(0, 153, 153);">2</span>
g: <span class="number" style="color: rgb(0, 153, 153);">3</span>
g: <span class="number" style="color: rgb(0, 153, 153);">5</span>
g: <span class="number" style="color: rgb(0, 153, 153);">8</span>
Generator <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">return</span> value: done</code></pre></div><h4 id="blogTitle48">小结</h4><div><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">generator是非常强大的工具，在Python中，可以简单地把列表生成式改成generator，也可以通过函数实现复杂逻辑的generator。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">要理解generator的工作原理，它是在<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">for</code>循环的过程中不断计算出下一个元素，并在适当的条件结束<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">for</code>循环。对于函数改成的generator来说，遇到<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">return</code>语句或者执行到函数体最后一行语句，就是结束generator的指令，<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">for</code>循环随之结束。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">请注意区分普通函数和generator函数，普通函数调用直接返回结果：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>r = abs(<span class="number" style="color: rgb(0, 153, 153);">6</span>)
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>r
<span class="number" style="color: rgb(0, 153, 153);">6</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">generator函数的“调用”实际返回一个generator对象：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="xml">&gt;&gt;&gt; g = fib(6)
&gt;&gt;&gt; g
<span class="tag" style="color: rgb(0, 0, 128);">&lt;<span class="title">generator</span> <span class="attribute" style="color: rgb(0, 128, 128);">object</span> <span class="attribute" style="color: rgb(0, 128, 128);">fib</span> <span class="attribute" style="color: rgb(0, 128, 128);">at</span> <span class="attribute" style="color: rgb(0, 128, 128);">0x1022ef948</span>&gt;</span></code></pre></div><h3 id="blogTitle49">异步生成器函数</h3><h3 id="blogTitle50">装饰器函数</h3><div><ul><li>代码运行期间动态增加功能的方式，称之为“装饰器”（Decorator）。<br></li><li>本质上，decorator 就是一个返回函数的高阶函数。<br></li><ul><li>decorator 既是返回函数，又是高阶函数（接收函数作为参数）。</li></ul></ul></div><h4 id="blogTitle51">思想</h4><h5 id="blogTitle52">AOP 编程思想</h5><h5 id="blogTitle53">装饰器模式</h5><h4 id="blogTitle54">实现过程</h4><h5 id="blogTitle55">原生实现</h5><pre>import time

def f1():
    print('This is function 1')

def f2():
    print('This is function 2')

def print_current_time(func):
    print(time.time())
    func()

print_current_time(f1)
print_current_time(f2)<br></pre><div><br></div><h5 id="blogTitle56">闭包实现</h5><pre>import time

def decorator(func):
    def wrapper():
        print(time.time())
        func()

    return wrapper

def f1():
    print('This is function 1')

def f2():
    print('This is function 2')

decorator(f1)()
decorator(f2)()
</pre><div><br></div><h5 id="blogTitle57">@ 语法糖：接受定义时的复杂，但不接受调用时的复杂</h5><pre>import time

def decorator(func):
    def wrapper():
        print(time.time())
        func()
    return wrapper

@decorator
def f1():
    print('This is function 1')

@decorator
def f2():
    print('This is function 2')

f1()
f2()
print(f1.__name__) # 'wrapper'</pre><div><br></div><h5 id="blogTitle58">调用函数带参数的装饰器</h5><pre>import time

def decorator(func):
    def wrapper(*args, **kwargs):
        print(time.time())
        func(*args, **kwargs)
    return wrapper

@decorator
def f1(func_name):
    print('This is function 1' + func_name)

@decorator
def f2(func_name1, func_name2):
    print('This is function 2' + func_name1, func_name2)

f1('func')
f2('func1', 'func2')
print(f1.__name__) # 'wrapper'<br></pre><div><br></div><pre>import time

def decorator(func):
    def wrapper(*args, **kwargs):
        print(time.time())
        func(*args, **kwargs)
    return wrapper

@decorator
def f1(func_name):
    print('This is function 1 ' + func_name)

@decorator
def f2(func_name1, func_name2):
    print('This is function 2 ' + func_name1, func_name2)

@decorator
def f3(func_name1, func_name2, **kwargs):
    print('This is a function 3 ' + func_name1, func_name2, kwargs)

f1('func')
f2('func1', 'func2')
f3('func1', 'func2', a=1, b=2)
print(f1.__name__) # 'wrapper'<br></pre><div><br></div><h5 id="blogTitle59">装饰器带参数的装饰器</h5><pre>import time

def get(path):
    def decorator(func):
        def wrapper(*args, **kwargs):
            print(time.time())
            print(path)
            func(*args, **kwargs)
        return wrapper
    return decorator

@get('/index')
def index(request):
    print('this is index', request)

index('point')
print(index.__name__) # 'wrapper'</pre><div><br></div><div><h5 id="blogTitle60">装饰器带参数的装饰器（实现函数签名）</h5></div><div><pre>import time
import functools

def get(path):
    def decorator(func):
        @functools.wraps(func)
        def wrapper(*args, **kwargs):
            print(time.time())
            print(path)
            func(*args, **kwargs)
        return wrapper
    return decorator

@get('/index')
def index(request):
    print('this is index', request)

index('point')
print(index.__name__) # 'index'</pre></div><div><br></div><div><br></div><h3 id="blogTitle61">偏函数</h3><div>见 functools.partial</div><div><br></div><div><span style="color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);">当函数的参数个数太多，需要简化时，使用</span><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">functools.partial</code><span style="color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);">可以创建一个新的函数，这个新函数可以固定住原函数的部分参数，从而在调用时更简单。</span><br></div><div><br></div><div><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">在介绍函数参数的时候，我们讲到，通过设定参数的默认值，可以降低函数调用的难度。而偏函数也可以做到这一点。举例如下：</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">int()</code>函数可以把字符串转换为整数，当仅传入字符串时，<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">int()</code>函数默认按十进制转换：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="java">&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">int</span>(<span class="string" style="color: rgb(221, 17, 68);">'12345'</span>)
<span class="number" style="color: rgb(0, 153, 153);">12345</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">但<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">int()</code>函数还提供额外的<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">base</code>参数，默认值为<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">10</code>。如果传入<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">base</code>参数，就可以做N进制的转换：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="java">&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">int</span>(<span class="string" style="color: rgb(221, 17, 68);">'12345'</span>, base=<span class="number" style="color: rgb(0, 153, 153);">8</span>)
<span class="number" style="color: rgb(0, 153, 153);">5349</span>
&gt;&gt;&gt; <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">int</span>(<span class="string" style="color: rgb(221, 17, 68);">'12345'</span>, <span class="number" style="color: rgb(0, 153, 153);">16</span>)
<span class="number" style="color: rgb(0, 153, 153);">74565</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">假设要转换大量的二进制字符串，每次都传入<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">int(x, base=2)</code>非常麻烦，于是，我们想到，可以定义一个<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">int2()</code>的函数，默认把<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">base=2</code>传进去：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="function"><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="title" style="color: rgb(153, 0, 0); font-weight: bold;">int2</span><span class="params">(x, base=<span class="number" style="color: rgb(0, 153, 153);">2</span>)</span>:</span>
    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">return</span> int(x, base)
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">这样，我们转换二进制就非常方便了：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>int2(<span class="string" style="color: rgb(221, 17, 68);">'1000000'</span>)
<span class="number" style="color: rgb(0, 153, 153);">64</span>
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>int2(<span class="string" style="color: rgb(221, 17, 68);">'1010101'</span>)
<span class="number" style="color: rgb(0, 153, 153);">85</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">functools.partial</code>就是帮助我们创建一个偏函数的，不需要我们自己定义<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">int2()</code>，可以直接使用下面的代码创建一个新的函数<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">int2</code>：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">import</span> functools
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>int2 = functools.partial(int, base=<span class="number" style="color: rgb(0, 153, 153);">2</span>)
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>int2(<span class="string" style="color: rgb(221, 17, 68);">'1000000'</span>)
<span class="number" style="color: rgb(0, 153, 153);">64</span>
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>int2(<span class="string" style="color: rgb(221, 17, 68);">'1010101'</span>)
<span class="number" style="color: rgb(0, 153, 153);">85</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">所以，简单总结<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">functools.partial</code>的作用就是，把一个函数的某些参数给固定住（也就是设置默认值），返回一个新的函数，调用这个新函数会更简单。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">注意到上面的新的<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">int2</code>函数，仅仅是把<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">base</code>参数重新设定默认值为<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">2</code>，但也可以在函数调用时传入其他值：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>int2(<span class="string" style="color: rgb(221, 17, 68);">'1000000'</span>, base=<span class="number" style="color: rgb(0, 153, 153);">10</span>)
<span class="number" style="color: rgb(0, 153, 153);">1000000</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">最后，创建偏函数时，实际上可以接收函数对象、<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">*args</code>和<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">**kw</code>这3个参数，当传入：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="ini"><span class="setting">int2 = <span class="value">functools.partial(int, base=<span class="number" style="color: rgb(0, 153, 153);">2</span>)</span></span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">实际上固定了int()函数的关键字参数<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">base</code>，也就是：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="undefined">int2('10010')
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">相当于：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="java">kw = { <span class="string" style="color: rgb(221, 17, 68);">'base'</span>: <span class="number" style="color: rgb(0, 153, 153);">2</span> }
<span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">int</span>(<span class="string" style="color: rgb(221, 17, 68);">'10010'</span>, **kw)
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">当传入：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="ini"><span class="setting">max2 = <span class="value">functools.partial(max, <span class="number" style="color: rgb(0, 153, 153);">10</span>)</span></span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">实际上会把<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">10</code>作为<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">*args</code>的一部分自动加到左边，也就是：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="undefined">max2(5, 6, 7)
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">相当于：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="undefined">args = (10, 5, 6, 7)
max(*args)
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">结果为<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">10</code>。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><br></p></div><h3 id="blogTitle62">类方法</h3><h3 id="blogTitle63">静态方法</h3><h3 id="blogTitle64">实例方法</h3><h2 id="blogTitle65">高阶函数</h2><div><span style="color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);">既然变量可以指向函数，函数的参数能接收变量，那么一个函数就可以接收另一个函数作为参数，这种函数就称之为高阶函数。</span><br></div><div><span style="color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);">把函数作为参数传入，这样的函数称为高阶函数，函数式编程就是指这种高度抽象的编程范式。</span><span style="color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><br></span></div><div><h3 id="blogTitle66">map/reduce</h3><h4 id="blogTitle67">map</h4><div>内置函数</div><div><dl class="function" style="margin-bottom: 15px; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px;"><dt id="map" style="color: rgb(34, 34, 34); background-color: rgb(251, 229, 78);"><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">map</code><span class="sig-paren" style="font-size: larger;">(</span><em>function</em>,&nbsp;<em>iterable</em>,&nbsp;<em>...</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3/library/functions.html#map" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);">产生一个将&nbsp;</span><em style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);">function</em><span style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);">&nbsp;应用于迭代器中所有元素并返回结果的</span><span style="background-color: yellow;"><font color="#ff0000">迭代器</font></span><span style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);">。</span><span style="color: rgb(34, 34, 34); background-color: yellow;">如果传递了额外的&nbsp;<em>iterable</em>&nbsp;实参，<em>function</em>&nbsp;必须接受相同个数的实参</span><span style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);">，并使用所有迭代器中并行获取的元素。</span><span style="color: rgb(34, 34, 34); background-color: yellow;">当有多个迭代器时，最短的迭代器耗尽则整个迭代结束</span><span style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);">。如果函数的输入已经是元组实参，请参阅&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/itertools.html#itertools.starmap" title="itertools.starmap" style="color: rgb(99, 99, 187); background-color: rgb(255, 255, 255); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">itertools.starmap()</span></code></a><span style="color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);">。</span></p></dd></dl></div><div><span style="color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);">举例说明，比如我们有一个函数f(x)=x</span><span style="font-size: 10.5px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);">2</span><span style="color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);">，要把这个函数作用在一个list </span><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">[1, 2, 3, 4, 5, 6, 7, 8, 9]</code><span style="color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);">上，就可以用</span><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">map()</code><span style="color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);">实现如下：</span><br></div><div><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span><span class="function"><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="title" style="color: rgb(153, 0, 0); font-weight: bold;">f</span><span class="params">(x)</span>:</span>
<span class="prompt" style="color: rgb(153, 0, 115);">... </span>    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">return</span> x * x
...
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>r = map(f, [<span class="number" style="color: rgb(0, 153, 153);">1</span>, <span class="number" style="color: rgb(0, 153, 153);">2</span>, <span class="number" style="color: rgb(0, 153, 153);">3</span>, <span class="number" style="color: rgb(0, 153, 153);">4</span>, <span class="number" style="color: rgb(0, 153, 153);">5</span>, <span class="number" style="color: rgb(0, 153, 153);">6</span>, <span class="number" style="color: rgb(0, 153, 153);">7</span>, <span class="number" style="color: rgb(0, 153, 153);">8</span>, <span class="number" style="color: rgb(0, 153, 153);">9</span>])
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>list(r)
[<span class="number" style="color: rgb(0, 153, 153);">1</span>, <span class="number" style="color: rgb(0, 153, 153);">4</span>, <span class="number" style="color: rgb(0, 153, 153);">9</span>, <span class="number" style="color: rgb(0, 153, 153);">16</span>, <span class="number" style="color: rgb(0, 153, 153);">25</span>, <span class="number" style="color: rgb(0, 153, 153);">36</span>, <span class="number" style="color: rgb(0, 153, 153);">49</span>, <span class="number" style="color: rgb(0, 153, 153);">64</span>, <span class="number" style="color: rgb(0, 153, 153);">81</span>]
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">map()</code>传入的第一个参数是<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">f</code>，即函数对象本身。由于结果<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">r</code>是一个<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>，<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">Iterator</code>是惰性序列，因此通过<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">list()</code>函数让它把整个序列都计算出来并返回一个list。</p></div><div><br></div><h4 id="blogTitle68">reduce</h4><div><dt id="functools.reduce" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">functools.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">reduce</code><span class="sig-paren" style="font-size: larger;">(</span><em>function</em>,&nbsp;<em>iterable</em><span class="optional" style="font-size: 1.3em;">[</span>,&nbsp;<em>initializer</em><span class="optional" style="font-size: 1.3em;">]</span><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.reduce" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Apply&nbsp;<em>function</em>&nbsp;of two arguments cumulatively to the items of&nbsp;<em>sequence</em>, from left to right, so as to reduce the sequence to a single value. For example,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">reduce(lambda</span>&nbsp;<span class="pre" style="hyphens: none;">x,</span>&nbsp;<span class="pre" style="hyphens: none;">y:</span>&nbsp;<span class="pre" style="hyphens: none;">x+y,</span>&nbsp;<span class="pre" style="hyphens: none;">[1,</span>&nbsp;<span class="pre" style="hyphens: none;">2,</span>&nbsp;<span class="pre" style="hyphens: none;">3,</span>&nbsp;<span class="pre" style="hyphens: none;">4,</span>&nbsp;<span class="pre" style="hyphens: none;">5])</span></code>&nbsp;calculates&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">((((1+2)+3)+4)+5)</span></code>. The left argument,&nbsp;<em>x</em>, is the accumulated value and the right argument,&nbsp;<em>y</em>, is the update value from the&nbsp;<em>sequence</em>. If the optional&nbsp;<em>initializer</em>&nbsp;is present, it is placed before the items of the sequence in the calculation, and serves as a default when the sequence is empty. If&nbsp;<em>initializer</em>&nbsp;is not given and&nbsp;<em>sequence</em>&nbsp;contains only one item, the first item is returned.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">大致相当于：</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">reduce</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span> <span class="n">initializer</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">):</span>
    <span class="n">it</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">initializer</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">is</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">:</span>
        <span class="n">value</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">else</span><span class="p">:</span>
        <span class="n">value</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">initializer</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">element</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n">it</span><span class="p">:</span>
        <span class="n">value</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">function</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">value</span></pre></div></div></dd></div><div><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">reduce</code>把一个函数作用在一个序列<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">[x1, x2, x3, ...]</code>上，这个函数必须接收两个参数，<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">reduce</code>把结果继续和序列的下一个元素做累积计算，其效果就是：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="undefined">reduce(f, [x1, x2, x3, x4]) = f(f(f(x1, x2), x3), x4)
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">比方说对一个序列求和，就可以用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">reduce</code>实现：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">from</span> functools <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">import</span> reduce
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span><span class="function"><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="title" style="color: rgb(153, 0, 0); font-weight: bold;">add</span><span class="params">(x, y)</span>:</span>
<span class="prompt" style="color: rgb(153, 0, 115);">... </span>    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">return</span> x + y
...
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>reduce(add, [<span class="number" style="color: rgb(0, 153, 153);">1</span>, <span class="number" style="color: rgb(0, 153, 153);">3</span>, <span class="number" style="color: rgb(0, 153, 153);">5</span>, <span class="number" style="color: rgb(0, 153, 153);">7</span>, <span class="number" style="color: rgb(0, 153, 153);">9</span>])
<span class="number" style="color: rgb(0, 153, 153);">25</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">当然求和运算可以直接用Python内建函数<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">sum()</code>，没必要动用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">reduce</code>。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">但是如果要把序列<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">[1, 3, 5, 7, 9]</code>变换成整数<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">13579</code>，<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">reduce</code>就可以派上用场：</p><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px; background-color: rgb(250, 250, 250); font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 18px; font-family: Consolas, monospace, serif; color: rgb(68, 68, 68); tab-size: 4; border: 1px solid rgb(221, 221, 221); word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">from</span> functools <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">import</span> reduce
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span><span class="function"><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="title" style="color: rgb(153, 0, 0); font-weight: bold;">fn</span><span class="params">(x, y)</span>:</span>
<span class="prompt" style="color: rgb(153, 0, 115);">... </span>    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">return</span> x * <span class="number" style="color: rgb(0, 153, 153);">10</span> + y
...
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>reduce(fn, [<span class="number" style="color: rgb(0, 153, 153);">1</span>, <span class="number" style="color: rgb(0, 153, 153);">3</span>, <span class="number" style="color: rgb(0, 153, 153);">5</span>, <span class="number" style="color: rgb(0, 153, 153);">7</span>, <span class="number" style="color: rgb(0, 153, 153);">9</span>])
<span class="number" style="color: rgb(0, 153, 153);">13579</span></code></pre></div><h3 id="blogTitle69">fillter</h3><div>内置函数</div><div><br></div><div><dt id="filter" style="color: rgb(34, 34, 34); background-color: rgb(251, 229, 78); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px;"><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">filter</code><span class="sig-paren" style="font-size: larger;">(</span><em>function</em>,&nbsp;<em>iterable</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3/library/functions.html#filter" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">用&nbsp;<em>iterable</em>&nbsp;中函数&nbsp;<em>function</em>&nbsp;返回真的那些元素，构建一个新的迭代器。<em>iterable&nbsp;</em>可以是一个序列，一个支持迭代的容器，或一个迭代器。如果&nbsp;<em>function</em>&nbsp;是&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>&nbsp;，则会假设它是一个身份函数，即&nbsp;<em>iterable</em>&nbsp;中所有返回假的元素会被移除。</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">请注意，&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">filter(function,</span>&nbsp;<span class="pre" style="hyphens: none;">iterable)</span></code>&nbsp;相当于一个生成器表达式，当 function 不是&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>&nbsp;的时候为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">(item</span>&nbsp;<span class="pre" style="hyphens: none;">for</span>&nbsp;<span class="pre" style="hyphens: none;">item</span>&nbsp;<span class="pre" style="hyphens: none;">in</span>&nbsp;<span class="pre" style="hyphens: none;">iterable</span>&nbsp;<span class="pre" style="hyphens: none;">if&nbsp;</span><span class="pre" style="hyphens: none;">function(item))</span></code>；function 是&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>&nbsp;的时候为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">(item</span>&nbsp;<span class="pre" style="hyphens: none;">for</span>&nbsp;<span class="pre" style="hyphens: none;">item</span>&nbsp;<span class="pre" style="hyphens: none;">in&nbsp;</span><span class="pre" style="hyphens: none;">iterable</span>&nbsp;<span class="pre" style="hyphens: none;">if</span>&nbsp;<span class="pre" style="hyphens: none;">item)</span></code>&nbsp;。</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">请参阅&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/itertools.html#itertools.filterfalse" title="itertools.filterfalse" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">itertools.filterfalse()</span></code></a>&nbsp;了解，只有&nbsp;<em>function</em>&nbsp;返回 false 时才选取&nbsp;<em>iterable</em>&nbsp;中元素的补充函数。</p></dd></div></div><div><br></div><h3 id="blogTitle70">sorted</h3><div><dt id="sorted" style="background-color: rgb(251, 229, 78); color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px;"><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">sorted</code><span class="sig-paren" style="font-size: larger;">(</span><em>iterable</em>,&nbsp;<em>*</em>,&nbsp;<em>key=None</em>,&nbsp;<em>reverse=False</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3/library/functions.html#sorted" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Return a new sorted list from the items in&nbsp;<em>iterable</em>.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Has two optional arguments which must be specified as keyword arguments.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><em>key</em>&nbsp;specifies a function of one argument that is used to extract a comparison key from each element in&nbsp;<em>iterable</em>&nbsp;(for example,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">key=str.lower</span></code>). The default value is&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>&nbsp;(compare the elements directly).</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><em>reverse</em>&nbsp;is a boolean value. If set to&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">True</span></code>, then the list elements are sorted as if each comparison were reversed.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">Use&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.cmp_to_key" title="functools.cmp_to_key" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">functools.cmp_to_key()</span></code></a>&nbsp;to convert an old-style&nbsp;<em>cmp</em>&nbsp;function to a&nbsp;<em>key</em>&nbsp;function.</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">The built-in&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#sorted" title="sorted" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sorted()</span></code></a>&nbsp;function is guaranteed to be stable. A sort is stable if it guarantees not to change the relative order of elements that compare equal — this is helpful for sorting in multiple passes (for example, sort by department, then by salary grade).</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">有关排序示例和简要排序教程，请参阅&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/howto/sorting.html#sortinghowto" style="color: rgb(99, 99, 187); text-decoration-line: none;">排序指南</a>&nbsp;。</p></dd></div><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Python 列表有一个内置的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#list.sort" title="list.sort" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">list.sort()</span></code></a>&nbsp;方法可以直接修改列表。还有一个&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#sorted" title="sorted" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sorted()</span></code></a>&nbsp;内置函数，它会从一个可迭代对象构建一个新的排序列表。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">在本文档中，我们将探索使用Python对数据进行排序的各种技术。</p></div><h4 id="blogTitle71">排序算法</h4><div>排序是程序中经常用到的算法。无论使用冒泡排序还是快速排序，<span style="background-color: yellow;"><font color="#ff0000"><b>排序的核心是比较两个元素的大小</b></font></span>。如果是数字，我们可以直接比较，但如果是字符串或者两个 dict 呢？直接比较数学上的大小是没有意义的，因此，比较的过程必须通过函数抽象出来。<br></div><h4 id="blogTitle72">基本排序</h4><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">简单的升序排序非常简单：只需调用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#sorted" title="sorted" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sorted()</span></code></a>&nbsp;函数即可。它会返回一个新的已排序列表。</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">([</span><span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">4</span><span class="p">])</span>
<span class="go">[1, 2, 3, 4, 5]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">你也可以使用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#list.sort" title="list.sort" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">list.sort()</span></code></a>&nbsp;方法，它会直接修改原列表（并返回&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>&nbsp;以避免混淆），通常来说它不如&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#sorted" title="sorted" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sorted()</span></code></a>&nbsp;方便 ——— 但如果你不需要原列表，它会更有效率。</p><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[</span><span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">4</span><span class="p">]</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">a</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">sort</span><span class="p">()</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">[1, 2, 3, 4, 5]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">另外一个区别是&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#list.sort" title="list.sort" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">list.sort()</span></code></a>&nbsp;方法只是为列表定义的，而&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#sorted" title="sorted" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sorted()</span></code></a>&nbsp;函数可以接受任何可迭代对象</p><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">({</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">:</span> <span class="s1" style="color: rgb(64, 112, 160);">'D'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">:</span> <span class="s1" style="color: rgb(64, 112, 160);">'B'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">:</span> <span class="s1" style="color: rgb(64, 112, 160);">'B'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">4</span><span class="p">:</span> <span class="s1" style="color: rgb(64, 112, 160);">'E'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">:</span> <span class="s1" style="color: rgb(64, 112, 160);">'A'</span><span class="p">})</span>
<span class="go">[1, 2, 3, 4, 5]</span></pre></div></div></div><h4 id="blogTitle73">Key Functions</h4><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Both&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#list.sort" title="list.sort" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">list.sort()</span></code></a>&nbsp;and&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#sorted" title="sorted" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sorted()</span></code></a>&nbsp;have a&nbsp;<em>key</em>&nbsp;parameter to specify a function to be called on each list element prior to making comparisons.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">For example, here’s a case-insensitive string comparison:</p><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"This is a test string from Andrew"</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">split</span><span class="p">(),</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="nb" style="color: rgb(0, 112, 32);">str</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">)</span>
<span class="go">['a', 'Andrew', 'from', 'is', 'string', 'test', 'This']</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The value of the&nbsp;<em>key</em>&nbsp;parameter should be a function that takes a single argument and returns a key to use for sorting purposes. This technique is fast because the key function is called exactly once for each input record.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">A common pattern is to sort complex objects using some of the object’s indices as keys. For example:</p><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">student_tuples</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'john'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'A'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">15</span><span class="p">),</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'jane'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'B'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">12</span><span class="p">),</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'dave'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'B'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">10</span><span class="p">),</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="p">]</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">student_tuples</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">lambda</span> <span class="n">student</span><span class="p">:</span> <span class="n">student</span><span class="p">[</span><span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">])</span>   <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># sort by age</span>
<span class="go">[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The same technique works for objects with named attributes. For example:</p><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Student</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">grade</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">name</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">name</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">grade</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">grade</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">age</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">age</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__repr__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="nb" style="color: rgb(0, 112, 32);">repr</span><span class="p">((</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">name</span><span class="p">,</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">grade</span><span class="p">,</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">age</span><span class="p">))</span>
</pre></div></div><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">student_objects</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="n">Student</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'john'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'A'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">15</span><span class="p">),</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="n">Student</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'jane'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'B'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">12</span><span class="p">),</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="n">Student</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'dave'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'B'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">10</span><span class="p">),</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="p">]</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">student_objects</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">lambda</span> <span class="n">student</span><span class="p">:</span> <span class="n">student</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">age</span><span class="p">)</span>   <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># sort by age</span>
<span class="go">[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]</span></pre></div></div></div><h4 id="blogTitle74">Operator Module Functions</h4><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The key-function patterns shown above are very common, so Python provides convenience functions to make accessor functions easier and faster. The&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/operator.html#module-operator" title="operator: Functions corresponding to the standard operators." style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">operator</span></code></a>&nbsp;module has&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/operator.html#operator.itemgetter" title="operator.itemgetter" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">itemgetter()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/operator.html#operator.attrgetter" title="operator.attrgetter" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">attrgetter()</span></code></a>, and a&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/operator.html#operator.methodcaller" title="operator.methodcaller" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">methodcaller()</span></code></a>&nbsp;function.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Using those functions, the above examples become simpler and faster:</p><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="kn" style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="color: rgb(14, 132, 181); font-weight: bold;">operator</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n">itemgetter</span><span class="p">,</span> <span class="n">attrgetter</span>
</pre></div></div><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">student_tuples</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">))</span>
<span class="go">[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]</span>
</pre></div></div><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">student_objects</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'age'</span><span class="p">))</span>
<span class="go">[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The operator module functions allow multiple levels of sorting. For example, to sort by&nbsp;<em>grade</em>&nbsp;then by&nbsp;<em>age</em>:</p><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">student_tuples</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span><span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">))</span>
<span class="go">[('john', 'A', 15), ('dave', 'B', 10), ('jane', 'B', 12)]</span>
</pre></div></div><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">student_objects</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'grade'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'age'</span><span class="p">))</span>
<span class="go">[('john', 'A', 15), ('dave', 'B', 10), ('jane', 'B', 12)]</span></pre></div></div></div><div><h4 id="blogTitle75">Ascending and Descending</h4></div><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Both&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#list.sort" title="list.sort" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">list.sort()</span></code></a>&nbsp;and&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#sorted" title="sorted" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sorted()</span></code></a>&nbsp;accept a&nbsp;<em>reverse</em>&nbsp;parameter with a boolean value. This is used to flag descending sorts. For example, to get the student data in reverse&nbsp;<em>age</em>&nbsp;order:</p><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">student_tuples</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">),</span> <span class="n">reverse</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">)</span>
<span class="go">[('john', 'A', 15), ('jane', 'B', 12), ('dave', 'B', 10)]</span>
</pre></div></div><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">student_objects</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'age'</span><span class="p">),</span> <span class="n">reverse</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">)</span>
<span class="go">[('john', 'A', 15), ('jane', 'B', 12), ('dave', 'B', 10)]</span></pre></div></div></div><h4 id="blogTitle76">Sort Stability and Complex Sorts</h4><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Sorts are guaranteed to be&nbsp;<a class="reference external" href="https://en.wikipedia.org/wiki/Sorting_algorithm#Stability" style="color: rgb(99, 99, 187); text-decoration-line: none;">stable</a>. That means that when multiple records have the same key, their original order is preserved.</p><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[(</span><span class="s1" style="color: rgb(64, 112, 160);">'red'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">),</span> <span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'blue'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">),</span> <span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'red'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">),</span> <span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'blue'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">)]</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">0</span><span class="p">))</span>
<span class="go">[('blue', 1), ('blue', 2), ('red', 1), ('red', 2)]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Notice how the two records for&nbsp;<em>blue</em>&nbsp;retain their original order so that&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">('blue',</span>&nbsp;<span class="pre" style="hyphens: none;">1)</span></code>&nbsp;is guaranteed to precede&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">('blue',</span>&nbsp;<span class="pre" style="hyphens: none;">2)</span></code>.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">This wonderful property lets you build complex sorts in a series of sorting steps. For example, to sort the student data by descending&nbsp;<em>grade</em>&nbsp;and then ascending&nbsp;<em>age</em>, do the&nbsp;<em>age</em>&nbsp;sort first and then sort again using&nbsp;<em>grade</em>:</p><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">student_objects</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'age'</span><span class="p">))</span>     <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># sort on secondary key</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'grade'</span><span class="p">),</span> <span class="n">reverse</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">)</span>       <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># now sort on primary key, descending</span>
<span class="go">[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The&nbsp;<a class="reference external" href="https://en.wikipedia.org/wiki/Timsort" style="color: rgb(99, 99, 187); text-decoration-line: none;">Timsort</a>&nbsp;algorithm used in Python does multiple sorts efficiently because it can take advantage of any ordering already present in a dataset.</p></div><h4 id="blogTitle77">The Old Way Using Decorate-Sort-Undecorate<br></h4><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">This idiom is called Decorate-Sort-Undecorate after its three steps:</p><ul class="simple" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">First, the initial list is decorated with new values that control the sort order.</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">Second, the decorated list is sorted.</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">Finally, the decorations are removed, creating a list that contains only the initial values in the new order.</li></ul><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">For example, to sort the student data by&nbsp;<em>grade</em>&nbsp;using the DSU approach:</p><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">decorated</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[(</span><span class="n">student</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">grade</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">student</span><span class="p">)</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">student</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="nb" style="color: rgb(0, 112, 32);">enumerate</span><span class="p">(</span><span class="n">student_objects</span><span class="p">)]</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">decorated</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">sort</span><span class="p">()</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">student</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">grade</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">student</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n">decorated</span><span class="p">]</span>               <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># undecorate</span>
<span class="go">[('john', 'A', 15), ('jane', 'B', 12), ('dave', 'B', 10)]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">This idiom works because tuples are compared lexicographically; the first items are compared; if they are the same then the second items are compared, and so on.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">It is not strictly necessary in all cases to include the index&nbsp;<em>i</em>&nbsp;in the decorated list, but including it gives two benefits:</p><ul class="simple" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">The sort is stable – if two items have the same key, their order will be preserved in the sorted list.</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">The original items do not have to be comparable because the ordering of the decorated tuples will be determined by at most the first two items. So for example the original list could contain complex numbers which cannot be sorted directly.</li></ul><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Another name for this idiom is&nbsp;<a class="reference external" href="https://en.wikipedia.org/wiki/Schwartzian_transform" style="color: rgb(99, 99, 187); text-decoration-line: none;">Schwartzian transform</a>, after Randal L. Schwartz, who popularized it among Perl programmers.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Now that Python sorting provides key-functions, this technique is not often needed.</p></div><h4 id="blogTitle78">The Old Way Using the cmp Parameter</h4><div><div class="section" id="the-old-way-using-the-cmp-parameter" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><p style="hyphens: auto; text-align: justify; line-height: 22.4px;">Many constructs given in this HOWTO assume Python 2.4 or later. Before that, there was no&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#sorted" title="sorted" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sorted()</span></code></a>builtin and&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#list.sort" title="list.sort" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">list.sort()</span></code></a>&nbsp;took no keyword arguments. Instead, all of the Py2.x versions supported a&nbsp;<em>cmp</em>&nbsp;parameter to handle user specified comparison functions.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px;">In Py3.0, the&nbsp;<em>cmp</em>&nbsp;parameter was removed entirely (as part of a larger effort to simplify and unify the language, eliminating the conflict between rich comparisons and the&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__cmp__()</span></code>&nbsp;magic method).</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px;">In Py2.x, sort allowed an optional function which can be called for doing the comparisons. That function should take two arguments to be compared and then return a negative value for less-than, return zero if they are equal, or return a positive value for greater-than. For example, we can do:</p><div class="highlight-default notranslate"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">numeric_compare</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">x</span> <span class="o" style="color: rgb(102, 102, 102);">-</span> <span class="n">y</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">([</span><span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">4</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">],</span> <span class="nb" style="color: rgb(0, 112, 32);">cmp</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">numeric_compare</span><span class="p">)</span> <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># doctest: +SKIP</span>
<span class="go">[1, 2, 3, 4, 5]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px;">Or you can reverse the order of comparison with:</p><div class="highlight-default notranslate"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">reverse_numeric</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">y</span> <span class="o" style="color: rgb(102, 102, 102);">-</span> <span class="n">x</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">([</span><span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">4</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">],</span> <span class="nb" style="color: rgb(0, 112, 32);">cmp</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">reverse_numeric</span><span class="p">)</span> <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># doctest: +SKIP</span>
<span class="go">[5, 4, 3, 2, 1]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px;">When porting code from Python 2.x to 3.x, the situation can arise when you have the user supplying a comparison function and you need to convert that to a key function. The following wrapper makes that easy to do:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">cmp_to_key</span><span class="p">(</span><span class="n">mycmp</span><span class="p">):</span>
    <span class="s1" style="color: rgb(64, 112, 160);">'Convert a cmp= function into a key= function'</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">K</span><span class="p">:</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">):</span>
            <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">obj</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__lt__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">mycmp</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span><span class="p">)</span> <span class="o" style="color: rgb(102, 102, 102);">&lt;</span> <span class="mi" style="color: rgb(32, 128, 80);">0</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__gt__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">mycmp</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span><span class="p">)</span> <span class="o" style="color: rgb(102, 102, 102);">&gt;</span> <span class="mi" style="color: rgb(32, 128, 80);">0</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__eq__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">mycmp</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span><span class="p">)</span> <span class="o" style="color: rgb(102, 102, 102);">==</span> <span class="mi" style="color: rgb(32, 128, 80);">0</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__le__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">mycmp</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span><span class="p">)</span> <span class="o" style="color: rgb(102, 102, 102);">&lt;=</span> <span class="mi" style="color: rgb(32, 128, 80);">0</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__ge__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">mycmp</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span><span class="p">)</span> <span class="o" style="color: rgb(102, 102, 102);">&gt;=</span> <span class="mi" style="color: rgb(32, 128, 80);">0</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__ne__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">mycmp</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">obj</span><span class="p">)</span> <span class="o" style="color: rgb(102, 102, 102);">!=</span> <span class="mi" style="color: rgb(32, 128, 80);">0</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">K</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px;">To convert to a key function, just wrap the old comparison function:</p><div class="highlight-pycon notranslate"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">([</span><span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">4</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">],</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">cmp_to_key</span><span class="p">(</span><span class="n">reverse_numeric</span><span class="p">))</span>
<span class="go">[5, 4, 3, 2, 1]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px;">In Python 3.2, the&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.cmp_to_key" title="functools.cmp_to_key" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">functools.cmp_to_key()</span></code></a>&nbsp;function was added to the&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#module-functools" title="functools: Higher-order functions and operations on callable objects." style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">functools</span></code></a>&nbsp;module in the standard library.</p></div><div class="section" id="odd-and-ends" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"></div></div><h4 id="blogTitle79">Odd and Ends<br></h4><div><ul style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><p class="first" style="hyphens: auto; line-height: 22.4px; margin-top: 0px !important;">For locale aware sorting, use&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/locale.html#locale.strxfrm" title="locale.strxfrm" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">locale.strxfrm()</span></code></a>&nbsp;for a key function or&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/locale.html#locale.strcoll" title="locale.strcoll" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">locale.strcoll()</span></code></a>&nbsp;for a comparison function.</p></li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><p class="first" style="hyphens: auto; line-height: 22.4px; margin-top: 0px !important;">The&nbsp;<em>reverse</em>&nbsp;parameter still maintains sort stability (so that records with equal keys retain the original order). Interestingly, that effect can be simulated without the parameter by using the builtin&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#reversed" title="reversed" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">reversed()</span></code></a>&nbsp;function twice:</p><div class="highlight-default notranslate"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[(</span><span class="s1" style="color: rgb(64, 112, 160);">'red'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">),</span> <span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'blue'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">),</span> <span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'red'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">),</span> <span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'blue'</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">)]</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">standard_way</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">0</span><span class="p">),</span> <span class="n">reverse</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">double_reversed</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">list</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">reversed</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">reversed</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">0</span><span class="p">))))</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">assert</span> <span class="n">standard_way</span> <span class="o" style="color: rgb(102, 102, 102);">==</span> <span class="n">double_reversed</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">standard_way</span>
<span class="go">[('red', 1), ('red', 2), ('blue', 1), ('blue', 2)]</span>
</pre></div></div></li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><p class="first" style="hyphens: auto; line-height: 22.4px; margin-top: 0px !important;">The sort routines are guaranteed to use&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__lt__" title="object.__lt__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__lt__()</span></code></a>&nbsp;when making comparisons between two objects. So, it is easy to add a standard sort order to a class by defining an&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__lt__" title="object.__lt__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__lt__()</span></code></a>&nbsp;method:</p><div class="highlight-python3 notranslate" style="position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">Student</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="fm" style="color: rgb(6, 40, 126);">__lt__</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">lambda</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">age</span> <span class="o" style="color: rgb(102, 102, 102);">&lt;</span> <span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">age</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">student_objects</span><span class="p">)</span>
<span class="go">[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]</span>
</pre></div></div></li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><p class="first" style="hyphens: auto; line-height: 22.4px; margin-top: 0px !important;">Key functions need not depend directly on the objects being sorted. A key function can also access external resources. For instance, if the student grades are stored in a dictionary, they can be used to sort a separate list of student names:</p><div class="highlight-default notranslate"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">students</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[</span><span class="s1" style="color: rgb(64, 112, 160);">'dave'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'john'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'jane'</span><span class="p">]</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">newgrades</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">{</span><span class="s1" style="color: rgb(64, 112, 160);">'john'</span><span class="p">:</span> <span class="s1" style="color: rgb(64, 112, 160);">'F'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'jane'</span><span class="p">:</span><span class="s1" style="color: rgb(64, 112, 160);">'A'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'dave'</span><span class="p">:</span> <span class="s1" style="color: rgb(64, 112, 160);">'C'</span><span class="p">}</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">students</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">newgrades</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="fm" style="color: rgb(6, 40, 126);">__getitem__</span><span class="p">)</span>
<span class="go">['jane', 'dave', 'john']</span></pre></div></div></li></ul></div><div><br></div><div><br></div><div><br></div><h2 id="blogTitle80">函数式编程模块</h2><h3 id="blogTitle81">functools 模块</h3><div>Higher-order functions and operations on callable objects</div><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#module-functools" title="functools: Higher-order functions and operations on callable objects." style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">functools</span></code></a>&nbsp;module is for higher-order functions: functions that act on or return other functions. In general, any callable object can be treated as a function for the purposes of this module.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#module-functools" title="functools: Higher-order functions and operations on callable objects." style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">functools</span></code></a>&nbsp;module defines the following functions:</p></div><h4 id="blogTitle82">函数</h4><h5 id="blogTitle83">cmp_to_key</h5><div>functools.cmp_to_key(func)<br></div><div><br></div><div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Transform an old-style comparison function to a&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-key-function" style="color: rgb(99, 99, 187); text-decoration-line: none;">key function</a>. Used with tools that accept key functions (such as&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#sorted" title="sorted" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sorted()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#min" title="min" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">min()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#max" title="max" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">max()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/heapq.html#heapq.nlargest" title="heapq.nlargest" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">heapq.nlargest()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/heapq.html#heapq.nsmallest" title="heapq.nsmallest" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">heapq.nsmallest()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/itertools.html#itertools.groupby" title="itertools.groupby" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">itertools.groupby()</span></code></a>). This function is primarily used as a transition tool for programs being converted from Python 2 which supported the use of comparison functions.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">A comparison function is any callable that accept two arguments, compares them, and returns a negative number for less-than, zero for equality, or a positive number for greater-than. A key function is a callable that accepts one argument and returns another value to be used as the sort key.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">示例:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="nb" style="color: rgb(0, 112, 32);">sorted</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">key</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">cmp_to_key</span><span class="p">(</span><span class="n">locale</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">strcoll</span><span class="p">))</span>  <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># locale-aware sort order</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">有关排序示例和简要排序教程，请参阅&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/howto/sorting.html#sortinghowto" style="color: rgb(99, 99, 187); text-decoration-line: none;">排序指南</a>&nbsp;。</p><div class="versionadded" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">3.2 新版功能.</span></p></div></div><div><br></div><div><br></div><h5 id="blogTitle84">@lru_cache</h5><div>@functools.lru_cache(maxsize=128, typed=False)<br></div><div><br></div><div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Decorator to wrap a function with a memoizing callable that saves up to the&nbsp;<em>maxsize</em>&nbsp;most recent calls. It can save time when an expensive or I/O bound function is periodically called with the same arguments.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Since a dictionary is used to cache results, the positional and keyword arguments to the function must be hashable.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Distinct argument patterns may be considered to be distinct calls with separate cache entries. For example,&nbsp;<cite>f(a=1, b=2)</cite>&nbsp;and&nbsp;<cite>f(b=2, a=1)</cite>&nbsp;differ in their keyword argument order and may have two separate cache entries.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">If&nbsp;<em>maxsize</em>&nbsp;is set to&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>, the LRU feature is disabled and the cache can grow without bound. The LRU feature performs best when&nbsp;<em>maxsize</em>&nbsp;is a power-of-two.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">If&nbsp;<em>typed</em>&nbsp;is set to true, function arguments of different types will be cached separately. For example,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">f(3)</span></code>&nbsp;and&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">f(3.0)</span></code>&nbsp;will be treated as distinct calls with distinct results.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">To help measure the effectiveness of the cache and tune the&nbsp;<em>maxsize</em>parameter, the wrapped function is instrumented with a&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">cache_info()</span></code>function that returns a&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-named-tuple" style="color: rgb(99, 99, 187); text-decoration-line: none;">named tuple</a>&nbsp;showing&nbsp;<em>hits</em>,&nbsp;<em>misses</em>,&nbsp;<em>maxsize</em>&nbsp;and&nbsp;<em>currsize</em>. In a multi-threaded environment, the hits and misses are approximate.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The decorator also provides a&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">cache_clear()</span></code>&nbsp;function for clearing or invalidating the cache.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The original underlying function is accessible through the&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__wrapped__</span></code>attribute. This is useful for introspection, for bypassing the cache, or for rewrapping the function with a different cache.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">An&nbsp;<a class="reference external" href="https://en.wikipedia.org/wiki/Cache_algorithms#Examples" style="color: rgb(99, 99, 187); text-decoration-line: none;">LRU (least recently used) cache</a>&nbsp;works best when the most recent calls are the best predictors of upcoming calls (for example, the most popular articles on a news server tend to change each day). The cache’s size limit assures that the cache does not grow without bound on long-running processes such as web servers.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">In general, the LRU cache should only be used when you want to reuse previously computed values. Accordingly, it doesn’t make sense to cache functions with side-effects, functions that need to create distinct mutable objects on each call, or impure functions such as time() or random().</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Example of an LRU cache for static web content:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">32</span><span class="p">)</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">get_pep</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="s1" style="color: rgb(64, 112, 160);">'Retrieve text of a Python Enhancement Proposal'</span>
    <span class="n">resource</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="s1" style="color: rgb(64, 112, 160);">'http://www.python.org/dev/peps/pep-</span><span class="si" style="color: rgb(112, 160, 208); font-style: italic;">%04d</span><span class="s1" style="color: rgb(64, 112, 160);">/'</span> <span class="o" style="color: rgb(102, 102, 102);">%</span> <span class="n">num</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">try</span><span class="p">:</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">with</span> <span class="n">urllib</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">request</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">as</span> <span class="n">s</span><span class="p">:</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">s</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">except</span> <span class="n">urllib</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">error</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">HTTPError</span><span class="p">:</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="s1" style="color: rgb(64, 112, 160);">'Not Found'</span>

<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">n</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="mi" style="color: rgb(32, 128, 80);">8</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">290</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">308</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">320</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">8</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">218</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">320</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">279</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">289</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">320</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">9991</span><span class="p">:</span>
<span class="o" style="color: rgb(102, 102, 102);">...</span>     <span class="n">pep</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">get_pep</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="o" style="color: rgb(102, 102, 102);">...</span>     <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb" style="color: rgb(0, 112, 32);">len</span><span class="p">(</span><span class="n">pep</span><span class="p">))</span>

<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">get_pep</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">cache_info</span><span class="p">()</span>
<span class="n">CacheInfo</span><span class="p">(</span><span class="n">hits</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="n">misses</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">8</span><span class="p">,</span> <span class="n">maxsize</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">32</span><span class="p">,</span> <span class="n">currsize</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">8</span><span class="p">)</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Example of efficiently computing&nbsp;<a class="reference external" href="https://en.wikipedia.org/wiki/Fibonacci_number" style="color: rgb(99, 99, 187); text-decoration-line: none;">Fibonacci numbers</a>&nbsp;using a cache to implement a&nbsp;<a class="reference external" href="https://en.wikipedia.org/wiki/Dynamic_programming" style="color: rgb(99, 99, 187); text-decoration-line: none;">dynamic programming</a>&nbsp;technique:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">)</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">n</span> <span class="o" style="color: rgb(102, 102, 102);">&lt;</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">:</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">n</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o" style="color: rgb(102, 102, 102);">-</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">)</span> <span class="o" style="color: rgb(102, 102, 102);">+</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o" style="color: rgb(102, 102, 102);">-</span><span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">)</span>

<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">n</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="nb" style="color: rgb(0, 112, 32);">range</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">16</span><span class="p">)]</span>
<span class="p">[</span><span class="mi" style="color: rgb(32, 128, 80);">0</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">3</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">5</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">8</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">13</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">21</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">34</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">55</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">89</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">144</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">233</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">377</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">610</span><span class="p">]</span>

<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">fib</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">cache_info</span><span class="p">()</span>
<span class="n">CacheInfo</span><span class="p">(</span><span class="n">hits</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">28</span><span class="p">,</span> <span class="n">misses</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">16</span><span class="p">,</span> <span class="n">maxsize</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">,</span> <span class="n">currsize</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">16</span><span class="p">)</span>
</pre></div></div><div class="versionadded" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">3.2 新版功能.</span></p></div><div class="versionchanged" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">在 3.3 版更改:&nbsp;</span>Added the&nbsp;<em>typed</em>&nbsp;option.</p></div></div><div><br></div><div><br></div><h5 id="blogTitle85">@total_ordering</h5><div>@functools.total_ordering<br></div><div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Given a class defining one or more rich comparison ordering methods, this class decorator supplies the rest. This simplifies the effort involved in specifying all of the possible rich comparison operations:</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The class must define one of&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__lt__" title="object.__lt__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__lt__()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__le__" title="object.__le__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__le__()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__gt__" title="object.__gt__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__gt__()</span></code></a>, or&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__ge__" title="object.__ge__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__ge__()</span></code></a>. In addition, the class should supply an&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__eq__" title="object.__eq__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__eq__()</span></code></a>&nbsp;method.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">例如:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@total_ordering</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Student</span><span class="p">:</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">_is_valid_operand</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">hasattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">"lastname"</span><span class="p">)</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">and</span>
                <span class="nb" style="color: rgb(0, 112, 32);">hasattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s2" style="color: rgb(64, 112, 160);">"firstname"</span><span class="p">))</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__eq__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">not</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">_is_valid_operand</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="bp" style="color: rgb(0, 112, 32);">NotImplemented</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="p">((</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lastname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">(),</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">firstname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">())</span> <span class="o" style="color: rgb(102, 102, 102);">==</span>
                <span class="p">(</span><span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lastname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">firstname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">()))</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__lt__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">not</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">_is_valid_operand</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="bp" style="color: rgb(0, 112, 32);">NotImplemented</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="p">((</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lastname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">(),</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">firstname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">())</span> <span class="o" style="color: rgb(102, 102, 102);">&lt;</span>
                <span class="p">(</span><span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lastname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">other</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">firstname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">lower</span><span class="p">()))</span>
</pre></div></div><div class="admonition note" style="margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; line-height: 22.4px;">注解</p>&nbsp;<p class="last" style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px; display: inline;">While this decorator makes it easy to create well behaved totally ordered types, it&nbsp;<em>does</em>&nbsp;come at the cost of slower execution and more complex stack traces for the derived comparison methods. If performance benchmarking indicates this is a bottleneck for a given application, implementing all six rich comparison methods instead is likely to provide an easy speed boost.</p></div><div class="versionadded" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">3.2 新版功能.</span></p></div><div class="versionchanged" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">在 3.4 版更改:&nbsp;</span>Returning NotImplemented from the underlying comparison function for unrecognised types is now supported.</p></div></div><div><br></div><h5 id="blogTitle86">partial</h5><div>functools.partial(func, *args, **keywords)<br></div><div><br></div><div>当函数的参数个数太多，需要简化时，使用 functools.partial 可以创建一个新的函数，这个新函数可以固定住原函数的部分参数，从而在调用时更简单。<br></div><div><br></div><div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Return a new&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#partial-objects" style="color: rgb(99, 99, 187); text-decoration-line: none;">partial object</a>&nbsp;which when called will behave like&nbsp;<em>func</em>&nbsp;called with the positional arguments&nbsp;<em>args</em>&nbsp;and keyword arguments&nbsp;<em>keywords</em>. If more arguments are supplied to the call, they are appended to&nbsp;<em>args</em>. If additional keyword arguments are supplied, they extend and override&nbsp;<em>keywords</em>. Roughly equivalent to:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">partial</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">keywords</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">newfunc</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">fargs</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">fkeywords</span><span class="p">):</span>
        <span class="n">newkeywords</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">keywords</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">newkeywords</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">update</span><span class="p">(</span><span class="n">fkeywords</span><span class="p">)</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">func</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">fargs</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">newkeywords</span><span class="p">)</span>
    <span class="n">newfunc</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">func</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">func</span>
    <span class="n">newfunc</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">args</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">args</span>
    <span class="n">newfunc</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">keywords</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">keywords</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">newfunc</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial()</span></code></a>&nbsp;is used for partial function application which “freezes” some portion of a function’s arguments and/or keywords resulting in a new object with a simplified signature. For example,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial()</span></code></a>&nbsp;can be used to create a callable that behaves like the&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#int" title="int" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">int()</span></code></a>&nbsp;function where the&nbsp;<em>base</em>&nbsp;argument defaults to two:</p><div class="highlight-default notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="kn" style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="color: rgb(14, 132, 181); font-weight: bold;">functools</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n">partial</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">basetwo</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">partial</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">int</span><span class="p">,</span> <span class="n">base</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">basetwo</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="vm" style="color: rgb(187, 96, 213);">__doc__</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="s1" style="color: rgb(64, 112, 160);">'Convert base 2 string to an int.'</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">basetwo</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'10010'</span><span class="p">)</span>
<span class="go">18</span></pre></div></div></div><div><br></div><h5 id="blogTitle87">class functools.partialmethod(func, *args, **keywords)</h5><div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Return a new&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partialmethod" title="functools.partialmethod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partialmethod</span></code></a>&nbsp;descriptor which behaves like&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>except that it is designed to be used as a method definition rather than being directly callable.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><em>func</em>&nbsp;must be a&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-descriptor" style="color: rgb(99, 99, 187); text-decoration-line: none;">descriptor</a>&nbsp;or a callable (objects which are both, like normal functions, are handled as descriptors).</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">When&nbsp;<em>func</em>&nbsp;is a descriptor (such as a normal Python function,<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#classmethod" title="classmethod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">classmethod()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#staticmethod" title="staticmethod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">staticmethod()</span></code></a>,&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">abstractmethod()</span></code>&nbsp;or another instance of&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partialmethod" title="functools.partialmethod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partialmethod</span></code></a>), calls to&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__get__</span></code>&nbsp;are delegated to the underlying descriptor, and an appropriate&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#partial-objects" style="color: rgb(99, 99, 187); text-decoration-line: none;">partial object</a>&nbsp;returned as the result.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">When&nbsp;<em>func</em>&nbsp;is a non-descriptor callable, an appropriate bound method is created dynamically. This behaves like a normal Python function when used as a method: the&nbsp;<em>self</em>&nbsp;argument will be inserted as the first positional argument, even before the&nbsp;<em>args</em>&nbsp;and&nbsp;<em>keywords</em>&nbsp;supplied to the&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partialmethod" title="functools.partialmethod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partialmethod</span></code></a>&nbsp;constructor.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">示例:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Cell</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">object</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">_alive</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@property</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">alive</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">_alive</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">set_state</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">_alive</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">bool</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="n">set_alive</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">partialmethod</span><span class="p">(</span><span class="n">set_state</span><span class="p">,</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="n">set_dead</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">partialmethod</span><span class="p">(</span><span class="n">set_state</span><span class="p">,</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">Cell</span><span class="p">()</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">c</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">alive</span>
<span class="go">False</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">c</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">set_alive</span><span class="p">()</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">c</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">alive</span>
<span class="go">True</span>
</pre></div></div><div class="versionadded" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">3.4 新版功能.</span></p></div></div><h5 id="blogTitle88">reduce</h5><div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Apply&nbsp;<em>function</em>&nbsp;of two arguments cumulatively to the items of&nbsp;<em>sequence</em>, from left to right, so as to reduce the sequence to a single value. For example,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">reduce(lambda</span>&nbsp;<span class="pre" style="hyphens: none;">x,</span>&nbsp;<span class="pre" style="hyphens: none;">y:</span>&nbsp;<span class="pre" style="hyphens: none;">x+y,</span>&nbsp;<span class="pre" style="hyphens: none;">[1,</span>&nbsp;<span class="pre" style="hyphens: none;">2,</span>&nbsp;<span class="pre" style="hyphens: none;">3,</span>&nbsp;<span class="pre" style="hyphens: none;">4,</span>&nbsp;<span class="pre" style="hyphens: none;">5])</span></code>&nbsp;calculates&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">((((1+2)+3)+4)+5)</span></code>. The left argument,&nbsp;<em>x</em>, is the accumulated value and the right argument,&nbsp;<em>y</em>, is the update value from the&nbsp;<em>sequence</em>. If the optional&nbsp;<em>initializer</em>&nbsp;is present, it is placed before the items of the sequence in the calculation, and serves as a default when the sequence is empty. If&nbsp;<em>initializer</em>&nbsp;is not given and&nbsp;<em>sequence</em>&nbsp;contains only one item, the first item is returned.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">大致相当于：</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">reduce</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span> <span class="n">initializer</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">):</span>
    <span class="n">it</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">initializer</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">is</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">:</span>
        <span class="n">value</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="nb" style="color: rgb(0, 112, 32);">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">else</span><span class="p">:</span>
        <span class="n">value</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">initializer</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">element</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n">it</span><span class="p">:</span>
        <span class="n">value</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">function</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">value</span></pre></div></div></div><h5 id="blogTitle89">@functools.singledispatch</h5><div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Transform a function into a&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-single-dispatch" style="color: rgb(99, 99, 187); text-decoration-line: none;">single-dispatch</a>&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-generic-function" style="color: rgb(99, 99, 187); text-decoration-line: none;">generic function</a>.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">To define a generic function, decorate it with the&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">@singledispatch</span></code>decorator. Note that the dispatch happens on the type of the first argument, create your function accordingly:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="kn" style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="color: rgb(14, 132, 181); font-weight: bold;">functools</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n">singledispatch</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@singledispatch</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">fun</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Let me just say,"</span><span class="p">,</span> <span class="n">end</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s2" style="color: rgb(64, 112, 160);">" "</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">To add overloaded implementations to the function, use the&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">register()</span></code>attribute of the generic function. It is a decorator. For functions annotated with types, the decorator will infer the type of the first argument automatically:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">register</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb" style="color: rgb(0, 112, 32);">int</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Strength in numbers, eh?"</span><span class="p">,</span> <span class="n">end</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s2" style="color: rgb(64, 112, 160);">" "</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">register</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb" style="color: rgb(0, 112, 32);">list</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Enumerate this:"</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="nb" style="color: rgb(0, 112, 32);">enumerate</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">For code which doesn’t use type annotations, the appropriate type argument can be passed explicitly to the decorator itself:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">register</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">complex</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">_</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Better than complicated."</span><span class="p">,</span> <span class="n">end</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s2" style="color: rgb(64, 112, 160);">" "</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">arg</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">real</span><span class="p">,</span> <span class="n">arg</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">imag</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">To enable registering lambdas and pre-existing functions, the&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">register()</span></code>attribute can be used in a functional form:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">nothing</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Nothing."</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">register</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">type</span><span class="p">(</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">),</span> <span class="n">nothing</span><span class="p">)</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">register()</span></code>&nbsp;attribute returns the undecorated function which enables decorator stacking, pickling, as well as creating unit tests for each variant independently:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">register</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">float</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">register</span><span class="p">(</span><span class="n">Decimal</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">fun_num</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">False</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Half of your number:"</span><span class="p">,</span> <span class="n">end</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s2" style="color: rgb(64, 112, 160);">" "</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">arg</span> <span class="o" style="color: rgb(102, 102, 102);">/</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun_num</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">is</span> <span class="n">fun</span>
<span class="go">False</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">When called, the generic function dispatches on the type of the first argument:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Hello, world."</span><span class="p">)</span>
<span class="go">Hello, world.</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"test."</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">)</span>
<span class="go">Let me just say, test.</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">42</span><span class="p">,</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">)</span>
<span class="go">Strength in numbers, eh? 42</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">([</span><span class="s1" style="color: rgb(64, 112, 160);">'spam'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'spam'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'eggs'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'spam'</span><span class="p">],</span> <span class="n">verbose</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">)</span>
<span class="go">Enumerate this:</span>
<span class="go">0 spam</span>
<span class="go">1 spam</span>
<span class="go">2 eggs</span>
<span class="go">3 spam</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">)</span>
<span class="go">Nothing.</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="mf" style="color: rgb(32, 128, 80);">1.23</span><span class="p">)</span>
<span class="go">0.615</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Where there is no registered implementation for a specific type, its method resolution order is used to find a more generic implementation. The original function decorated with&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">@singledispatch</span></code>&nbsp;is registered for the base&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object</span></code>&nbsp;type, which means it is used if no better implementation is found.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">To check which implementation will the generic function choose for a given type, use the&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">dispatch()</span></code>&nbsp;attribute:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">dispatch</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">float</span><span class="p">)</span>
<span class="go">&lt;function fun_num at 0x1035a2840&gt;</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">dispatch</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">dict</span><span class="p">)</span>    <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># note: default implementation</span>
<span class="go">&lt;function fun at 0x103fe0000&gt;</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">To access all registered implementations, use the read-only&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">registry</span></code>attribute:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">registry</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">dict_keys([&lt;class 'NoneType'&gt;, &lt;class 'int'&gt;, &lt;class 'object'&gt;,</span>
<span class="go">          &lt;class 'decimal.Decimal'&gt;, &lt;class 'list'&gt;,</span>
<span class="go">          &lt;class 'float'&gt;])</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">registry</span><span class="p">[</span><span class="nb" style="color: rgb(0, 112, 32);">float</span><span class="p">]</span>
<span class="go">&lt;function fun_num at 0x1035a2840&gt;</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">fun</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">registry</span><span class="p">[</span><span class="nb" style="color: rgb(0, 112, 32);">object</span><span class="p">]</span>
<span class="go">&lt;function fun at 0x103fe0000&gt;</span>
</pre></div></div><div class="versionadded" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">3.4 新版功能.</span></p></div><div class="versionchanged" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">在 3.7 版更改:&nbsp;</span>The&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">register()</span></code>&nbsp;attribute supports using type annotations.</p></div></div><h5 id="blogTitle90">update_wrapper</h5><div>functools.update_wrapper(wrapper, wrapped, assigned=WRAPPER_ASSIGNMENTS, updated=WRAPPER_UPDATES)<br></div><div><br></div><div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Update a&nbsp;<em>wrapper</em>&nbsp;function to look like the&nbsp;<em>wrapped</em>&nbsp;function. The optional arguments are tuples to specify which attributes of the original function are assigned directly to the matching attributes on the wrapper function and which attributes of the wrapper function are updated with the corresponding attributes from the original function. The default values for these arguments are the module level constants&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">WRAPPER_ASSIGNMENTS</span></code>(which assigns to the wrapper function’s&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__module__</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__name__</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__qualname__</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__annotations__</span></code>&nbsp;and&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__doc__</span></code>, the documentation string) and&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">WRAPPER_UPDATES</span></code>&nbsp;(which updates the wrapper function’s&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code>, i.e. the instance dictionary).</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">To allow access to the original function for introspection and other purposes (e.g. bypassing a caching decorator such as&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.lru_cache" title="functools.lru_cache" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">lru_cache()</span></code></a>), this function automatically adds a&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__wrapped__</span></code>&nbsp;attribute to the wrapper that refers to the function being wrapped.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The main intended use for this function is in&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-decorator" style="color: rgb(99, 99, 187); text-decoration-line: none;">decorator</a>&nbsp;functions which wrap the decorated function and return the wrapper. If the wrapper function is not updated, the metadata of the returned function will reflect the wrapper definition rather than the original function definition, which is typically less than helpful.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.update_wrapper" title="functools.update_wrapper" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">update_wrapper()</span></code></a>&nbsp;may be used with callables other than functions. Any attributes named in&nbsp;<em>assigned</em>&nbsp;or&nbsp;<em>updated</em>&nbsp;that are missing from the object being wrapped are ignored (i.e. this function will not attempt to set them on the wrapper function).&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>&nbsp;is still raised if the wrapper function itself is missing any attributes named in&nbsp;<em>updated</em>.</p><div class="versionadded" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">3.2 新版功能:&nbsp;</span>Automatic addition of the&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__wrapped__</span></code>&nbsp;attribute.</p></div><div class="versionadded" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">3.2 新版功能:&nbsp;</span>Copying of the&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__annotations__</span></code>&nbsp;attribute by default.</p></div><div class="versionchanged" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">在 3.2 版更改:&nbsp;</span>Missing attributes no longer trigger an&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>.</p></div><div class="versionchanged" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">在 3.4 版更改:&nbsp;</span>The&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__wrapped__</span></code>&nbsp;attribute now always refers to the wrapped function, even if that function defined a&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__wrapped__</span></code>&nbsp;attribute. (see&nbsp;<a class="reference external" href="https://bugs.python.org/issue17482" style="color: rgb(99, 99, 187); text-decoration-line: none;">bpo-17482</a>)</p></div></div><h5 id="blogTitle91">@wraps</h5><div>@functools.wraps(wrapped, assigned=WRAPPER_ASSIGNMENTS, updated=WRAPPER_UPDATES)<br></div><div><br></div><div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">This is a convenience function for invoking&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.update_wrapper" title="functools.update_wrapper" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">update_wrapper()</span></code></a>&nbsp;as a function decorator when defining a wrapper function. It is equivalent to<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial(update_wrapper,</span>&nbsp;<span class="pre" style="hyphens: none;">wrapped=wrapped,</span>&nbsp;<span class="pre" style="hyphens: none;">assigned=assigned,</span><span class="pre" style="hyphens: none;">updated=updated)</span></code>. For example:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="kn" style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="color: rgb(14, 132, 181); font-weight: bold;">functools</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n">wraps</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">my_decorator</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">wrapper</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">kwds</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'Calling decorated function'</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">f</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">kwds</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">wrapper</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@my_decorator</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">example</span><span class="p">():</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="sd" style="color: rgb(64, 112, 160); font-style: italic;">"""Docstring"""</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'Called example function'</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">example</span><span class="p">()</span>
<span class="go">Calling decorated function</span>
<span class="go">Called example function</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">example</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="vm" style="color: rgb(187, 96, 213);">__name__</span>
<span class="go">'example'</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">example</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="vm" style="color: rgb(187, 96, 213);">__doc__</span>
<span class="go">'Docstring'</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Without the use of this decorator factory, the name of the example function would have been&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">'wrapper'</span></code>, and the docstring of the original&nbsp;<code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">example()</span></code>&nbsp;would have been lost.</p></div><h4 id="blogTitle92">partial Objects</h4><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>&nbsp;objects are callable objects created by&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial()</span></code></a>. They have three read-only attributes:</p><dl class="attribute" style="margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><dt id="functools.partial.func"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">partial.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">func</code><a class="headerlink" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial.func" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">A callable object or function. Calls to the&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>&nbsp;object will be forwarded to&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial.func" title="functools.partial.func" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">func</span></code></a>&nbsp;with new arguments and keywords.</p></dd></dl><dl class="attribute" style="margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><dt id="functools.partial.args"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">partial.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">args</code><a class="headerlink" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial.args" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">The leftmost positional arguments that will be prepended to the positional arguments provided to a&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>&nbsp;object call.</p></dd></dl><dl class="attribute" style="margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><dt id="functools.partial.keywords"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">partial.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">keywords</code><a class="headerlink" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial.keywords" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">The keyword arguments that will be supplied when the&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>&nbsp;object is called.</p></dd></dl><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>&nbsp;objects are like&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">function</span></code>&nbsp;objects in that they are callable, weak referencable, and can have attributes. There are some important differences. For instance, the&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#definition.__name__" title="definition.__name__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__name__</span></code></a>&nbsp;and&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__doc__</span></code>&nbsp;attributes are not created automatically. Also,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">partial</span></code></a>&nbsp;objects defined in classes behave like static methods and do not transform into bound methods during instance attribute look-up.</p></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h2 id="blogTitle93">作用域和函数堆栈</h2><h2 id="blogTitle94">函数式编程&nbsp;</h2><div>map reduce filter lambda</div><h3 id="blogTitle95">特点</h3><h4 id="blogTitle96">封装性</h4><h4 id="blogTitle97">复用性</h4><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p>
</article>
{% endblock point1 %}
