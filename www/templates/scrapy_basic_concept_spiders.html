{% extends 'c-word.html' %}

{% block title %} Spiders - computer | software | language | python | framework | crawler | scrapy | basic concepts | {% endblock title %}

{% block point1 %}
<article contenteditable="true">
  <p>Category: computer | software | language | python | framework | crawler | scrapy | basic concepts | spiders</p>
  <h1 id="blogTitle0">Spiders</h1><div><br></div><div><br></div><div><div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">Spiders are classes which define how a certain site (or a group of sites) will be scraped, including how to perform the crawl (i.e. follow links) and how to extract structured data from their pages (i.e. scraping items). In other words, Spiders are the place where you define the custom behaviour for crawling and parsing pages for a particular site (or, in some cases, a group of sites).</p><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">For spiders, the scraping cycle goes through something like this:</p><ol class="arabic" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style-position: initial; list-style-image: initial; line-height: 24px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><li style="box-sizing: border-box; list-style: decimal; margin-left: 24px;"><p class="first" style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 12px;">You start by generating the initial Requests to crawl the first URLs, and specify a callback function to be called with the response downloaded from those requests.</p><p style="box-sizing: border-box; line-height: 24px; margin: 0px;">The first requests to perform are obtained by calling the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.start_requests" title="scrapy.spiders.Spider.start_requests" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-meth docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">start_requests()</span></code></a>&nbsp;method which (by default) generates&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request" title="scrapy.http.Request" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Request</span></code></a>&nbsp;for the URLs specified in the<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.start_urls" title="scrapy.spiders.Spider.start_urls" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-attr docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">start_urls</span></code></a>&nbsp;and the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.parse" title="scrapy.spiders.Spider.parse" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-attr docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">parse</span></code></a>&nbsp;method as callback function for the Requests.</p></li><li style="box-sizing: border-box; list-style: decimal; margin-left: 24px;"><p class="first" style="box-sizing: border-box; line-height: 24px; margin: 0px;">In the callback function, you parse the response (web page) and return either dicts with extracted data,&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/items.html#scrapy.item.Item" title="scrapy.item.Item" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Item</span></code></a>&nbsp;objects,&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request" title="scrapy.http.Request" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Request</span></code></a>&nbsp;objects, or an iterable of these objects. Those Requests will also contain a callback (maybe the same) and will then be downloaded by Scrapy and then their response handled by the specified callback.</p></li><li style="box-sizing: border-box; list-style: decimal; margin-left: 24px;"><p class="first" style="box-sizing: border-box; line-height: 24px; margin: 0px;">In callback functions, you parse the page contents, typically using&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/selectors.html#topics-selectors" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Selectors</a>&nbsp;(but you can also use BeautifulSoup, lxml or whatever mechanism you prefer) and generate items with the parsed data.</p></li><li style="box-sizing: border-box; list-style: decimal; margin-left: 24px;"><p class="first" style="box-sizing: border-box; line-height: 24px; margin: 0px;">Finally, the items returned from the spider will be typically persisted to a database (in some&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/item-pipeline.html#topics-item-pipeline" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Item Pipeline</a>) or written to a file using&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/feed-exports.html#topics-feed-exports" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Feed exports</a>.</p></li></ol><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">Even though this cycle applies (more or less) to any kind of spider, there are different kinds of default spiders bundled into Scrapy for different purposes. We will talk about those types here.</p></div><h2 id="blogTitle1">scrapy.Spider</h2><h3 id="blogTitle2">class scrapy.spiders.Spider</h3><div><dl class="class" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">This is the simplest spider, and the one from which every other spider must inherit (including spiders that come bundled with Scrapy, as well as spiders that you write yourself). It doesn’t provide any special functionality. It just provides a default&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.start_requests" title="scrapy.spiders.Spider.start_requests" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-meth docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">start_requests()</span></code></a>&nbsp;implementation which sends requests from the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.start_urls" title="scrapy.spiders.Spider.start_urls" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-attr docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">start_urls</span></code></a>&nbsp;spider attribute and calls the spider’s method&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">parse</span></code>&nbsp;for each of the resulting responses.<br></p></dd><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle3"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">name</code></h4><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Spider.name" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.name" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">爬虫的名字，用于定位爬虫，所以不能重复。<br><br>A string which defines the name for this spider. The spider name is how the spider is located (and instantiated) by Scrapy, so it must be unique. However, nothing prevents you from instantiating more than one instance of the same spider. This is the most important spider attribute and it’s required.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">If the spider scrapes a single domain, a common practice is to name the spider after the domain, with or without the&nbsp;<a class="reference external" href="https://en.wikipedia.org/wiki/Top-level_domain" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">TLD</a>. So, for example, a spider that crawls&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">mywebsite.com</span></code>&nbsp;would often be called<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">mywebsite</span></code>.</p><div class="admonition note" style="box-sizing: border-box; -webkit-font-smoothing: antialiased; padding: 12px; line-height: 24px; margin-bottom: 24px; background: rgb(231, 242, 250);"><p class="first admonition-title" style="box-sizing: border-box; line-height: 1; margin: -12px -12px 12px; font-size: inherit; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: bold; font-stretch: normal; font-family: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; color: rgb(255, 255, 255); background: rgb(106, 176, 222); padding: 6px 12px;">Note</p><p class="last" style="box-sizing: border-box; line-height: 24px; margin: 0px;">In Python 2 this must be ASCII only.</p></div></dd></dl><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle4"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">allowed_domains</code></h4><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Spider.allowed_domains" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.allowed_domains" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">允许爬虫爬取的范围。如果不设置，爬虫可能会去爬取一些非目标网站的链接。<br><br>An optional list of strings containing domains that this spider is allowed to crawl. Requests for URLs not belonging to the domain names specified in this list (or their subdomains) won’t be followed if<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spider-middleware.html#scrapy.spidermiddlewares.offsite.OffsiteMiddleware" title="scrapy.spidermiddlewares.offsite.OffsiteMiddleware" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">OffsiteMiddleware</span></code></a>&nbsp;is enabled.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Let’s say your target url is&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">https://www.example.com/1.html</span></code>, then add&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">'example.com'</span></code>&nbsp;to the list.</p></dd></dl><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle5"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">start_urls</code></h4><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Spider.start_urls" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.start_urls" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">爬虫开始爬取的起始 URL 列表。<br><br>A list of URLs where the spider will begin to crawl from, when no particular URLs are specified. So, the first pages downloaded will be those listed here. The subsequent&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request" title="scrapy.http.Request" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Request</span></code></a>&nbsp;will be generated successively from data contained in the start URLs.</p></dd></dl><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle6"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">custom_settings</code></h4><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Spider.custom_settings" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.custom_settings" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">覆盖 settings.py 文件中对应字段的值，实现定制单个爬虫的设置。<br><br>A dictionary of settings that will be overridden from the project wide configuration when running this spider. It must be defined as a class attribute since the settings are updated before instantiation.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">For a list of available built-in settings see:&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/settings.html#topics-settings-ref" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Built-in settings reference</a>.</p></dd></dl><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle7"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">crawler</code></h4><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Spider.crawler" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.crawler" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">在实例化 Spider 类之后，在类方法 from_crawler 中被设置。是 Crawler 类的实例。<br><br>This attribute is set by the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/item-pipeline.html#from_crawler" title="from_crawler" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-meth docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">from_crawler()</span></code></a>&nbsp;class method after initializating the class, and links to the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/api.html#scrapy.crawler.Crawler" title="scrapy.crawler.Crawler" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Crawler</span></code></a>&nbsp;object to which this spider instance is bound.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Crawlers encapsulate a lot of components in the project for their single entry access (such as extensions, middlewares, signals managers, etc). See&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/api.html#topics-api-crawler" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Crawler API</a>&nbsp;to know more about them.</p></dd></dl><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle8"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">settings</code></h4><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Spider.settings" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.settings" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">运行该爬虫的配置。在类方法 from_crawler 中被设置。是 Settings 类的实例，在 Crawler 类中被实例化。<br><br>Configuration for running this spider. This is a<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/api.html#scrapy.settings.Settings" title="scrapy.settings.Settings" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Settings</span></code></a>&nbsp;instance, see the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/settings.html#topics-settings" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Settings</a>&nbsp;topic for a detailed introduction on this subject.</p></dd></dl><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle9"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">logger</code></h4><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Spider.logger" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.logger" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Python logger created with the Spider’s&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.name" title="scrapy.spiders.Spider.name" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-attr docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">name</span></code></a>. You can use it to send log messages through it as described on&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/logging.html#topics-logging-from-spiders" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Logging from Spiders</a>.</p></dd></dl><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle10"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">from_crawler</code><span class="sig-paren" style="box-sizing: border-box;">(</span><em style="box-sizing: border-box;">crawler</em>,&nbsp;<em style="box-sizing: border-box;">*args</em>,&nbsp;<em style="box-sizing: border-box;">**kwargs</em><span class="sig-paren" style="box-sizing: border-box;">)</span></h4><dl class="method" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Spider.from_crawler" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.from_crawler" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">该类方法被 Scrapy 用来创建一个爬虫，并设置了该爬虫实例的 crawler 属性和 settings 属性，以便于在后续的代码中能被访问到。<br><br>This is the class method used by Scrapy to create your spiders.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">You probably won’t need to override this directly because the default implementation acts as a proxy to the&nbsp;<code class="xref py py-meth docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">__init__()</span></code>&nbsp;method, calling it with the given arguments&nbsp;<cite style="box-sizing: border-box;">args</cite>&nbsp;and named arguments&nbsp;<cite style="box-sizing: border-box;">kwargs</cite>.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Nonetheless, this method sets the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.crawler" title="scrapy.spiders.Spider.crawler" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-attr docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">crawler</span></code></a>&nbsp;and&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.settings" title="scrapy.spiders.Spider.settings" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-attr docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">settings</span></code></a>&nbsp;attributes in the new instance so they can be accessed later inside the spider’s code.</p><table class="docutils field-list" frame="void" rules="none" style="width: 613px; border: none; box-sizing: border-box; border-spacing: 0px; margin-bottom: 24px; empty-cells: show;"><colgroup style="box-sizing: border-box;"><col class="field-name" style="box-sizing: border-box; padding-right: 10px; white-space: nowrap;"><col class="field-body" style="box-sizing: border-box;"></colgroup><tbody valign="top" style="box-sizing: border-box;"><tr class="field-odd field" style="box-sizing: border-box;"><th class="field-name" style="border-color: rgb(225, 228, 229); box-sizing: border-box; font-size: 14.4px; margin: 0px; overflow: visible; padding: 8px 10px 8px 16px; white-space: nowrap; border-left-width: 0px;">Parameters:</th><td class="field-body" style="border-bottom-width: 0px; box-sizing: border-box; vertical-align: middle; font-size: 14.4px; margin: 0px; overflow: visible; padding: 8px 16px; background-color: transparent;"><ul class="first last simple" style="box-sizing: border-box; margin: 0px; padding: 0px; list-style-position: initial; list-style-image: initial; line-height: 24px;"><li style="box-sizing: border-box; list-style: disc; margin-left: 24px;"><strong style="box-sizing: border-box;">crawler</strong>&nbsp;(<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/api.html#scrapy.crawler.Crawler" title="scrapy.crawler.Crawler" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer; margin-bottom: 0px;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 10.8px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold; margin-bottom: 0px;"><span class="pre" style="box-sizing: border-box; margin-bottom: 0px;">Crawler</span></code></a>&nbsp;instance) – crawler to which the spider will be bound</li><li style="box-sizing: border-box; list-style: disc; margin-left: 24px;"><strong style="box-sizing: border-box;">args</strong>&nbsp;(<em style="box-sizing: border-box;">list</em>) – arguments passed to the&nbsp;<code class="xref py py-meth docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 10.8px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; overflow-x: auto; font-weight: bold; margin-bottom: 0px;"><span class="pre" style="box-sizing: border-box; margin-bottom: 0px;">__init__()</span></code>&nbsp;method</li><li style="box-sizing: border-box; list-style: disc; margin-left: 24px; margin-bottom: 0px;"><strong style="box-sizing: border-box;">kwargs</strong>&nbsp;(<em style="box-sizing: border-box;">dict</em>) – keyword arguments passed to the&nbsp;<code class="xref py py-meth docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 10.8px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; overflow-x: auto; font-weight: bold; margin-bottom: 0px;"><span class="pre" style="box-sizing: border-box; margin-bottom: 0px;">__init__()</span></code>&nbsp;method</li></ul></td></tr></tbody></table></dd></dl><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle11"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">start_requests</code><span class="sig-paren" style="box-sizing: border-box;">(</span><span class="sig-paren" style="box-sizing: border-box;">)</span></h4><dl class="method" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Spider.start_requests" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.start_requests" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">该方法必须返回一个可迭代对象。该对象包含了 spider 用于抓取的起始请求。当爬虫被启动时，该方法会被调用。该方法只会被 Scrapy 调用一次，所以将该方法作为一个生成器来实现，是安全的。<br><br>This method must return an iterable with the first Requests to crawl for this spider. It is called by Scrapy when the spider is opened for scraping. Scrapy calls it only once, so it is safe to implement<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.start_requests" title="scrapy.spiders.Spider.start_requests" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-meth docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">start_requests()</span></code></a>&nbsp;as a generator.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">The default implementation generates&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Request(url,</span>&nbsp;<span class="pre" style="box-sizing: border-box;">dont_filter=True)</span></code>&nbsp;for each url in&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.start_urls" title="scrapy.spiders.Spider.start_urls" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-attr docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">start_urls</span></code></a>.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">If you want to change the Requests used to start scraping a domain, this is the method to override. For example, if you need to start by logging in using a POST request, you could do:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Spider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">name</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'myspider'</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">start_requests</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="p" style="box-sizing: border-box;">[</span><span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">FormRequest</span><span class="p" style="box-sizing: border-box;">(</span><span class="s2" style="box-sizing: border-box; color: rgb(64, 112, 160);">"http://www.example.com/login"</span><span class="p" style="box-sizing: border-box;">,</span>
                                   <span class="n" style="box-sizing: border-box;">formdata</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="p" style="box-sizing: border-box;">{</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'user'</span><span class="p" style="box-sizing: border-box;">:</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'john'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'pass'</span><span class="p" style="box-sizing: border-box;">:</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'secret'</span><span class="p" style="box-sizing: border-box;">},</span>
                                   <span class="n" style="box-sizing: border-box;">callback</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">logged_in</span><span class="p" style="box-sizing: border-box;">)]</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">logged_in</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># here you would extract links to follow and return Requests for</span>
        <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># each of them, with another callback</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">pass</span>
</pre></div></div></dd></dl><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle12"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">parse</code><span class="sig-paren" style="box-sizing: border-box;">(</span><em style="box-sizing: border-box;">response</em><span class="sig-paren" style="box-sizing: border-box;">)</span></h4><dl class="method" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Spider.parse" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.parse" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">当请求没有指定回调时的默认处理方法，用来处理该请求的响应内容。返回值可以是一个可迭代的请求对象，或 dicts，或 Item 对象。<br><br>This is the default callback used by Scrapy to process downloaded responses, when their requests don’t specify a callback.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">The&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">parse</span></code>&nbsp;method is in charge of processing the response and returning scraped data and/or more URLs to follow. Other Requests callbacks have the same requirements as the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider" title="scrapy.spiders.Spider" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Spider</span></code></a>&nbsp;class.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">This method, as well as any other Request callback, must return an iterable of&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request" title="scrapy.http.Request" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Request</span></code></a>and/or dicts or&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/items.html#scrapy.item.Item" title="scrapy.item.Item" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Item</span></code></a>&nbsp;objects.</p><table class="docutils field-list" frame="void" rules="none" style="width: 613px; border: none; box-sizing: border-box; border-spacing: 0px; margin-bottom: 24px; empty-cells: show;"><colgroup style="box-sizing: border-box;"><col class="field-name" style="box-sizing: border-box; padding-right: 10px; white-space: nowrap;"><col class="field-body" style="box-sizing: border-box;"></colgroup><tbody valign="top" style="box-sizing: border-box;"><tr class="field-odd field" style="box-sizing: border-box;"><th class="field-name" style="border-color: rgb(225, 228, 229); box-sizing: border-box; font-size: 14.4px; margin: 0px; overflow: visible; padding: 8px 10px 8px 16px; white-space: nowrap; border-left-width: 0px;">Parameters:</th><td class="field-body" style="border-bottom-width: 0px; box-sizing: border-box; vertical-align: middle; font-size: 14.4px; margin: 0px; overflow: visible; padding: 8px 16px; background-color: transparent;"><strong style="box-sizing: border-box; display: inline-block;">response</strong>&nbsp;(<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Response" title="scrapy.http.Response" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 10.8px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Response</span></code></a>) – the response to parse</td></tr></tbody></table></dd></dl><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle13"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">log</code><span class="sig-paren" style="box-sizing: border-box;">(</span><em style="box-sizing: border-box;">message</em><span class="optional" style="box-sizing: border-box; display: inline-block; padding: 0px 4px; color: rgb(0, 0, 0);">[</span>,&nbsp;<em style="box-sizing: border-box;">level</em>,&nbsp;<em style="box-sizing: border-box;">component</em><span class="optional" style="box-sizing: border-box; display: inline-block; padding: 0px 4px; color: rgb(0, 0, 0);">]</span><span class="sig-paren" style="box-sizing: border-box;">)</span></h4><dl class="method" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Spider.log" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.log" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Wrapper that sends a log message through the Spider’s&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.logger" title="scrapy.spiders.Spider.logger" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-attr docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">logger</span></code></a>, kept for backwards compatibility. For more information see&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/logging.html#topics-logging-from-spiders" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Logging from Spiders</a>.</p></dd></dl><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle14"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">closed</code><span class="sig-paren" style="box-sizing: border-box;">(</span><em style="box-sizing: border-box;">reason</em><span class="sig-paren" style="box-sizing: border-box;">)</span></h4><dl class="method" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Spider.closed" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.closed" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Called when the spider closes. This method provides a shortcut to signals.connect() for the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/signals.html#std:signal-spider_closed" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref std std-signal docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">spider_closed</span></code></a>&nbsp;signal.</p></dd></dl></dd></dl><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">Let’s see an example:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy</span>


<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Spider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">name</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span>
    <span class="n" style="box-sizing: border-box;">allowed_domains</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span><span class="p" style="box-sizing: border-box;">]</span>
    <span class="n" style="box-sizing: border-box;">start_urls</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span>
        <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/1.html'</span><span class="p" style="box-sizing: border-box;">,</span>
        <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/2.html'</span><span class="p" style="box-sizing: border-box;">,</span>
        <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/3.html'</span><span class="p" style="box-sizing: border-box;">,</span>
    <span class="p" style="box-sizing: border-box;">]</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">parse</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">logger</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">info</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'A response from </span><span class="si" style="box-sizing: border-box; color: rgb(112, 160, 208); font-style: italic;">%s</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);"> just arrived!'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">url</span><span class="p" style="box-sizing: border-box;">)</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">Return multiple Requests and items from a single callback:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Spider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">name</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span>
    <span class="n" style="box-sizing: border-box;">allowed_domains</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span><span class="p" style="box-sizing: border-box;">]</span>
    <span class="n" style="box-sizing: border-box;">start_urls</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span>
        <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/1.html'</span><span class="p" style="box-sizing: border-box;">,</span>
        <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/2.html'</span><span class="p" style="box-sizing: border-box;">,</span>
        <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/3.html'</span><span class="p" style="box-sizing: border-box;">,</span>
    <span class="p" style="box-sizing: border-box;">]</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">parse</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n" style="box-sizing: border-box;">h3</span> <span class="ow" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n" style="box-sizing: border-box;">response</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">xpath</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'//h3'</span><span class="p" style="box-sizing: border-box;">)</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">getall</span><span class="p" style="box-sizing: border-box;">():</span>
            <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">yield</span> <span class="p" style="box-sizing: border-box;">{</span><span class="s2" style="box-sizing: border-box; color: rgb(64, 112, 160);">"title"</span><span class="p" style="box-sizing: border-box;">:</span> <span class="n" style="box-sizing: border-box;">h3</span><span class="p" style="box-sizing: border-box;">}</span>

        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n" style="box-sizing: border-box;">href</span> <span class="ow" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n" style="box-sizing: border-box;">response</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">xpath</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'//a/@href'</span><span class="p" style="box-sizing: border-box;">)</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">getall</span><span class="p" style="box-sizing: border-box;">():</span>
            <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">yield</span> <span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Request</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">response</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">urljoin</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">href</span><span class="p" style="box-sizing: border-box;">),</span> <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">parse</span><span class="p" style="box-sizing: border-box;">)</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">Instead of&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.start_urls" title="scrapy.spiders.Spider.start_urls" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-attr docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">start_urls</span></code></a>&nbsp;you can use&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.start_requests" title="scrapy.spiders.Spider.start_requests" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-meth docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">start_requests()</span></code></a>directly; to give data more structure you can use&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/items.html#topics-items" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Items</a>:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy</span>
<span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">myproject.items</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">MyItem</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Spider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">name</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span>
    <span class="n" style="box-sizing: border-box;">allowed_domains</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span><span class="p" style="box-sizing: border-box;">]</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">start_requests</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">yield</span> <span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Request</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/1.html'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">parse</span><span class="p" style="box-sizing: border-box;">)</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">yield</span> <span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Request</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/2.html'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">parse</span><span class="p" style="box-sizing: border-box;">)</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">yield</span> <span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Request</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/3.html'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">parse</span><span class="p" style="box-sizing: border-box;">)</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">parse</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n" style="box-sizing: border-box;">h3</span> <span class="ow" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n" style="box-sizing: border-box;">response</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">xpath</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'//h3'</span><span class="p" style="box-sizing: border-box;">)</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">getall</span><span class="p" style="box-sizing: border-box;">():</span>
            <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">yield</span> <span class="n" style="box-sizing: border-box;">MyItem</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">title</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="n" style="box-sizing: border-box;">h3</span><span class="p" style="box-sizing: border-box;">)</span>

        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n" style="box-sizing: border-box;">href</span> <span class="ow" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n" style="box-sizing: border-box;">response</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">xpath</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'//a/@href'</span><span class="p" style="box-sizing: border-box;">)</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">getall</span><span class="p" style="box-sizing: border-box;">():</span>
            <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">yield</span> <span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Request</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">response</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">urljoin</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">href</span><span class="p" style="box-sizing: border-box;">),</span> <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">parse</span><span class="p" style="box-sizing: border-box;">)</span></pre></div></div></div><div><br></div><h2 id="blogTitle15">Spider arguments</h2><div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">Spiders can receive arguments that modify their behaviour. Some common uses for spider arguments are to define the start URLs or to restrict the crawl to certain sections of the site, but they can be used to configure any functionality of the spider.</p><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">Spider arguments are passed through the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/commands.html#std:command-crawl" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref std std-command docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">crawl</span></code></a>command using the&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto;"><span class="pre" style="box-sizing: border-box;">-a</span></code>&nbsp;option. For example:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="n" style="box-sizing: border-box;">scrapy</span> <span class="n" style="box-sizing: border-box;">crawl</span> <span class="n" style="box-sizing: border-box;">myspider</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">-</span><span class="n" style="box-sizing: border-box;">a</span> <span class="n" style="box-sizing: border-box;">category</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="n" style="box-sizing: border-box;">electronics</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">Spiders can access arguments in their&nbsp;<cite style="box-sizing: border-box;">__init__</cite>&nbsp;methods:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Spider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">name</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'myspider'</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">__init__</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">category</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="kc" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p" style="box-sizing: border-box;">,</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">*</span><span class="n" style="box-sizing: border-box;">args</span><span class="p" style="box-sizing: border-box;">,</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">**</span><span class="n" style="box-sizing: border-box;">kwargs</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="nb" style="box-sizing: border-box; color: rgb(0, 112, 32);">super</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">MySpider</span><span class="p" style="box-sizing: border-box;">,</span> <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">)</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="fm" style="box-sizing: border-box; color: rgb(6, 40, 126);">__init__</span><span class="p" style="box-sizing: border-box;">(</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">*</span><span class="n" style="box-sizing: border-box;">args</span><span class="p" style="box-sizing: border-box;">,</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">**</span><span class="n" style="box-sizing: border-box;">kwargs</span><span class="p" style="box-sizing: border-box;">)</span>
        <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">start_urls</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/categories/</span><span class="si" style="box-sizing: border-box; color: rgb(112, 160, 208); font-style: italic;">%s</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">%</span> <span class="n" style="box-sizing: border-box;">category</span><span class="p" style="box-sizing: border-box;">]</span>
        <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># ...</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">The default&nbsp;<cite style="box-sizing: border-box;">__init__</cite>&nbsp;method will take any spider arguments and copy them to the spider as attributes. The above example can also be written as follows:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Spider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">name</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'myspider'</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">start_requests</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">yield</span> <span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Request</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/categories/</span><span class="si" style="box-sizing: border-box; color: rgb(112, 160, 208); font-style: italic;">%s</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">%</span> <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">category</span><span class="p" style="box-sizing: border-box;">)</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">Keep in mind that spider arguments are only strings. The spider will not do any parsing on its own. If you were to set the&nbsp;<cite style="box-sizing: border-box;">start_urls</cite>&nbsp;attribute from the command line, you would have to parse it on your own into a list using something like&nbsp;<a class="reference external" href="https://docs.python.org/library/ast.html#ast.literal_eval" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">ast.literal_eval</a>&nbsp;or&nbsp;<a class="reference external" href="https://docs.python.org/library/json.html#json.loads" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">json.loads</a>&nbsp;and then set it as an attribute. Otherwise, you would cause iteration over a&nbsp;<cite style="box-sizing: border-box;">start_urls</cite>&nbsp;string (a very common python pitfall) resulting in each character being seen as a separate url.</p><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">A valid use case is to set the http auth credentials used by&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/downloader-middleware.html#scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware" title="scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">HttpAuthMiddleware</span></code></a>&nbsp;or the user agent used by&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/downloader-middleware.html#scrapy.downloadermiddlewares.useragent.UserAgentMiddleware" title="scrapy.downloadermiddlewares.useragent.UserAgentMiddleware" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">UserAgentMiddleware</span></code></a>:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="n" style="box-sizing: border-box;">scrapy</span> <span class="n" style="box-sizing: border-box;">crawl</span> <span class="n" style="box-sizing: border-box;">myspider</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">-</span><span class="n" style="box-sizing: border-box;">a</span> <span class="n" style="box-sizing: border-box;">http_user</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="n" style="box-sizing: border-box;">myuser</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">-</span><span class="n" style="box-sizing: border-box;">a</span> <span class="n" style="box-sizing: border-box;">http_pass</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="n" style="box-sizing: border-box;">mypassword</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">-</span><span class="n" style="box-sizing: border-box;">a</span> <span class="n" style="box-sizing: border-box;">user_agent</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="n" style="box-sizing: border-box;">mybot</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">Spider arguments can also be passed through the Scrapyd&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto;"><span class="pre" style="box-sizing: border-box;">schedule.json</span></code>&nbsp;API. See&nbsp;<a class="reference external" href="https://scrapyd.readthedocs.io/en/latest/" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Scrapyd documentation</a>.</p></div><div><br></div><div><br></div><div><br></div><div><br></div><h2 id="blogTitle16">Generic Spiders</h2><div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">Scrapy comes with some useful generic spiders that you can use to subclass your spiders from. Their aim is to provide convenient functionality for a few common scraping cases, like following all links on a site based on certain rules, crawling from&nbsp;<a class="reference external" href="https://www.sitemaps.org/index.html" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Sitemaps</a>, or parsing an XML/CSV feed.</p><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px; font-size: 16px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; background-color: rgb(252, 252, 252);">For the examples used in the following spiders, we’ll assume you have a project with a&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto;"><span class="pre" style="box-sizing: border-box;">TestItem</span></code>&nbsp;declared in a&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto;"><span class="pre" style="box-sizing: border-box;">myproject.items</span></code>&nbsp;module:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">TestItem</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Item</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="nb" style="box-sizing: border-box; color: rgb(0, 112, 32);">id</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Field</span><span class="p" style="box-sizing: border-box;">()</span>
    <span class="n" style="box-sizing: border-box;">name</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Field</span><span class="p" style="box-sizing: border-box;">()</span>
    <span class="n" style="box-sizing: border-box;">description</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Field</span><span class="p" style="box-sizing: border-box;">()</span></pre></div></div></div><div><br></div><h3 id="blogTitle17">CrawlSpider</h3><h4 id="blogTitle18"><em class="property" style="box-sizing: border-box; display: inline-block; padding-right: 8px;">class</em><code class="descclassname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; overflow-x: auto;">scrapy.spiders.</code><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; overflow-x: auto;">CrawlSpider</code></h4><div><dt id="scrapy.spiders.CrawlSpider" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(231, 242, 250); color: rgb(41, 128, 185); border-top: 3px solid rgb(106, 176, 222); padding: 6px; position: relative; font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif;"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.CrawlSpider" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">This is the most commonly used spider for crawling regular websites, as it provides a convenient mechanism for following links by defining a set of rules. It may not be the best suited for your particular web sites or project, but it’s generic enough for several cases, so you can start from it and override it as needed for more custom functionality, or just implement your own spider.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Apart from the attributes inherited from Spider (that you must specify), this class supports a new attribute:</p><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle19"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">rules</code></h5><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.CrawlSpider.rules" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.CrawlSpider.rules" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Which is a list of one (or more)&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Rule" title="scrapy.spiders.Rule" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Rule</span></code></a>&nbsp;objects. Each&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Rule" title="scrapy.spiders.Rule" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Rule</span></code></a>&nbsp;defines a certain behaviour for crawling the site. Rules objects are described below. If multiple rules match the same link, the first one will be used, according to the order they’re defined in this attribute.</p></dd></dl><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">This spider also exposes an overrideable method:</p><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle20"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">parse_start_url</code><span class="sig-paren" style="box-sizing: border-box;">(</span><em style="box-sizing: border-box;">response</em><span class="sig-paren" style="box-sizing: border-box;">)</span></h5><dl class="method" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.CrawlSpider.parse_start_url" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.CrawlSpider.parse_start_url" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">This method is called for the start_urls responses. It allows to parse the initial responses and must return either an&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/items.html#scrapy.item.Item" title="scrapy.item.Item" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Item</span></code></a>&nbsp;object, a&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request" title="scrapy.http.Request" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Request</span></code></a>&nbsp;object, or an iterable containing any of them.</p></dd></dl></dd></div><div><div class="section" id="crawling-rules" style="box-sizing: border-box; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><h4 style="box-sizing: border-box; margin-top: 0px; font-family: &quot;Roboto Slab&quot;, ff-tisa-web-pro, Georgia, Arial, sans-serif; font-size: 18.4px;" id="blogTitle21">Crawling rules</h4><h5 style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;" id="blogTitle22"><em class="property" style="box-sizing: border-box; display: inline-block; padding-right: 8px;">class</em><code class="descclassname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">scrapy.spiders.</code><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">Rule</code><span class="sig-paren" style="box-sizing: border-box;">(</span><em style="box-sizing: border-box;">link_extractor</em>,&nbsp;<em style="box-sizing: border-box;">callback=None</em>,&nbsp;<em style="box-sizing: border-box;">cb_kwargs=None</em>,&nbsp;<em style="box-sizing: border-box;">follow=None</em>,&nbsp;<em style="box-sizing: border-box;">process_links=None</em>,&nbsp;<em style="box-sizing: border-box;">process_request=None</em><span class="sig-paren" style="box-sizing: border-box;">)</span></h5><dl class="class" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.Rule" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(231, 242, 250); color: rgb(41, 128, 185); border-top: 3px solid rgb(106, 176, 222); padding: 6px; position: relative;"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Rule" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;"><code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">link_extractor</span></code>&nbsp;<br>该链接提取器对象用来定义了，如何从被爬取到的页面中提取需要的链接。<br>is a&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/link-extractors.html#topics-link-extractors" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Link Extractor</a>&nbsp;object which defines how links will be extracted from each crawled page.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;"><code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">callback</span></code>&nbsp;<br>链接提取器提取出来的 URL 地址对应的响应会交给该回调函数处理。<br>is a callable or a string (in which case a method from the spider object with that name will be used) to be called for each link extracted with the specified link_extractor. This callback receives a response as its first argument and must return a list containing&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/items.html#scrapy.item.Item" title="scrapy.item.Item" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Item</span></code></a>&nbsp;and/or&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request" title="scrapy.http.Request" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Request</span></code></a>&nbsp;objects (or any subclass of them).</p><div class="admonition warning" style="box-sizing: border-box; -webkit-font-smoothing: antialiased; padding: 12px; line-height: 24px; margin-bottom: 24px; background: rgb(255, 237, 204);"><p class="first admonition-title" style="box-sizing: border-box; line-height: 1; margin: -12px -12px 12px; font-size: inherit; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: bold; font-stretch: normal; font-family: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; color: rgb(255, 255, 255); background: rgb(240, 179, 126); padding: 6px 12px;">Warning</p><p class="last" style="box-sizing: border-box; line-height: 24px; margin: 0px;">When writing crawl spider rules, avoid using&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">parse</span></code>&nbsp;as callback, since the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.CrawlSpider" title="scrapy.spiders.CrawlSpider" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">CrawlSpider</span></code></a>&nbsp;uses the&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">parse</span></code>&nbsp;method itself to implement its logic. So if you override the&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">parse</span></code>&nbsp;method, the crawl spider will no longer work.</p></div><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;"><code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">cb_kwargs</span></code>&nbsp;is a dict containing the keyword arguments to be passed to the callback function.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;"><code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">follow</span></code>&nbsp;<br>链接提取器提取出来的 URL 地址对应的响应，是否继续使用该规则继续处理。<br>is a boolean which specifies if links should be followed from each response extracted with this rule. If&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">callback</span></code>&nbsp;is None&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">follow</span></code>&nbsp;defaults to&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">True</span></code>, otherwise it defaults to&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">False</span></code>.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;"><code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">process_links</span></code>&nbsp;is a callable, or a string (in which case a method from the spider object with that name will be used) which will be called for each list of links extracted from each response using the specified&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">link_extractor</span></code>. This is mainly used for filtering purposes.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;"><code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">process_request</span></code>&nbsp;is a callable, or a string (in which case a method from the spider object with that name will be used) which will be called with every request extracted by this rule, and must return a request or None (to filter out the request).</p></dd></dl></div><div class="section" id="crawlspider-example" style="box-sizing: border-box; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><h4 style="box-sizing: border-box; margin-top: 0px; font-family: &quot;Roboto Slab&quot;, ff-tisa-web-pro, Georgia, Arial, sans-serif; font-size: 18.4px;" id="blogTitle23">CrawlSpider example</h4><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px;">Let’s now take a look at an example CrawlSpider with rules:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy</span>
<span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy.spiders</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">CrawlSpider</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">Rule</span>
<span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy.linkextractors</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">LinkExtractor</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">CrawlSpider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">name</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span>
    <span class="n" style="box-sizing: border-box;">allowed_domains</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span><span class="p" style="box-sizing: border-box;">]</span>
    <span class="n" style="box-sizing: border-box;">start_urls</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com'</span><span class="p" style="box-sizing: border-box;">]</span>

    <span class="n" style="box-sizing: border-box;">rules</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">(</span>
        <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># Extract links matching 'category.php' (but not matching 'subsection.php')</span>
        <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># and follow links from them (since no callback means follow=True by default).</span>
        <span class="n" style="box-sizing: border-box;">Rule</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">LinkExtractor</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">allow</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'category\.php'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="p" style="box-sizing: border-box;">),</span> <span class="n" style="box-sizing: border-box;">deny</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'subsection\.php'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="p" style="box-sizing: border-box;">))),</span>

        <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># Extract links matching 'item.php' and parse them with the spider's method parse_item</span>
        <span class="n" style="box-sizing: border-box;">Rule</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">LinkExtractor</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">allow</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'item\.php'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="p" style="box-sizing: border-box;">)),</span> <span class="n" style="box-sizing: border-box;">callback</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'parse_item'</span><span class="p" style="box-sizing: border-box;">),</span>
    <span class="p" style="box-sizing: border-box;">)</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">parse_item</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">logger</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">info</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'Hi, this is an item page! </span><span class="si" style="box-sizing: border-box; color: rgb(112, 160, 208); font-style: italic;">%s</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">url</span><span class="p" style="box-sizing: border-box;">)</span>
        <span class="n" style="box-sizing: border-box;">item</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Item</span><span class="p" style="box-sizing: border-box;">()</span>
        <span class="n" style="box-sizing: border-box;">item</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'id'</span><span class="p" style="box-sizing: border-box;">]</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">response</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">xpath</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'//td[@id="item_id"]/text()'</span><span class="p" style="box-sizing: border-box;">)</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">re</span><span class="p" style="box-sizing: border-box;">(</span><span class="sa" style="box-sizing: border-box; color: rgb(64, 112, 160);">r</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'ID: (\d+)'</span><span class="p" style="box-sizing: border-box;">)</span>
        <span class="n" style="box-sizing: border-box;">item</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'name'</span><span class="p" style="box-sizing: border-box;">]</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">response</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">xpath</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'//td[@id="item_name"]/text()'</span><span class="p" style="box-sizing: border-box;">)</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">get</span><span class="p" style="box-sizing: border-box;">()</span>
        <span class="n" style="box-sizing: border-box;">item</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'description'</span><span class="p" style="box-sizing: border-box;">]</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">response</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">xpath</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'//td[@id="item_description"]/text()'</span><span class="p" style="box-sizing: border-box;">)</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">get</span><span class="p" style="box-sizing: border-box;">()</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n" style="box-sizing: border-box;">item</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px;">This spider would start crawling example.com’s home page, collecting category links, and item links, parsing the latter with the&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto;"><span class="pre" style="box-sizing: border-box;">parse_item</span></code>&nbsp;method. For each item response, some data will be extracted from the HTML using XPath, and an&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/items.html#scrapy.item.Item" title="scrapy.item.Item" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Item</span></code></a>&nbsp;will be filled with it.</p></div></div><div><br></div><h3 id="blogTitle24">XMLSpider</h3><div><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);" id="blogTitle25"><em class="property" style="box-sizing: border-box; display: inline-block; padding-right: 8px;">class</em><code class="descclassname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">scrapy.spiders.</code><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">XMLFeedSpider</code></h4><dl class="class" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><dt id="scrapy.spiders.XMLFeedSpider" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(231, 242, 250); color: rgb(41, 128, 185); border-top: 3px solid rgb(106, 176, 222); padding: 6px; position: relative;"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.XMLFeedSpider" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">XMLFeedSpider is designed for parsing XML feeds by iterating through them by a certain node name. The iterator can be chosen from:&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">iternodes</span></code>,&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">xml</span></code>, and&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">html</span></code>. It’s recommended to use the&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">iternodes</span></code>iterator for performance reasons, since the&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">xml</span></code>&nbsp;and&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">html</span></code>&nbsp;iterators generate the whole DOM at once in order to parse it. However, using&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">html</span></code>&nbsp;as the iterator may be useful when parsing XML with bad markup.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">To set the iterator and the tag name, you must define the following class attributes:</p><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle26"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">iterator</code></h5><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.XMLFeedSpider.iterator" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.XMLFeedSpider.iterator" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">A string which defines the iterator to use. It can be either:</p><blockquote style="box-sizing: border-box; margin: 0px 0px 24px 24px; line-height: 24px;"><div style="box-sizing: border-box;"><ul class="simple" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style-position: initial; list-style-image: initial; line-height: 24px;"><li style="box-sizing: border-box; list-style: disc; margin-left: 24px;"><code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">'iternodes'</span></code>&nbsp;- a fast iterator based on regular expressions</li><li style="box-sizing: border-box; list-style: disc; margin-left: 24px;"><code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">'html'</span></code>&nbsp;- an iterator which uses&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/selectors.html#scrapy.selector.Selector" title="scrapy.selector.Selector" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Selector</span></code></a>. Keep in mind this uses DOM parsing and must load all DOM in memory which could be a problem for big feeds</li><li style="box-sizing: border-box; list-style: disc; margin-left: 24px;"><code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">'xml'</span></code>&nbsp;- an iterator which uses&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/selectors.html#scrapy.selector.Selector" title="scrapy.selector.Selector" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Selector</span></code></a>. Keep in mind this uses DOM parsing and must load all DOM in memory which could be a problem for big feeds</li></ul></div></blockquote><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">It defaults to:&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">'iternodes'</span></code>.</p></dd></dl><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle27"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">itertag</code></h5><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.XMLFeedSpider.itertag" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.XMLFeedSpider.itertag" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">A string with the name of the node (or element) to iterate in. Example:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="n" style="box-sizing: border-box;">itertag</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'product'</span>
</pre></div></div></dd></dl><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle28"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">namespaces</code></h5><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.XMLFeedSpider.namespaces" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.XMLFeedSpider.namespaces" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">A list of&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">(prefix,</span>&nbsp;<span class="pre" style="box-sizing: border-box;">uri)</span></code>&nbsp;tuples which define the namespaces available in that document that will be processed with this spider. The&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">prefix</span></code>&nbsp;and&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">uri</span></code>&nbsp;will be used to automatically register namespaces using the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/selectors.html#scrapy.selector.Selector.register_namespace" title="scrapy.selector.Selector.register_namespace" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-meth docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">register_namespace()</span></code></a>method.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">You can then specify nodes with namespaces in the&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.XMLFeedSpider.itertag" title="scrapy.spiders.XMLFeedSpider.itertag" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-attr docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">itertag</span></code></a>&nbsp;attribute.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Example:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">YourSpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">XMLFeedSpider</span><span class="p" style="box-sizing: border-box;">):</span>

    <span class="n" style="box-sizing: border-box;">namespaces</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'n'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.sitemaps.org/schemas/sitemap/0.9'</span><span class="p" style="box-sizing: border-box;">)]</span>
    <span class="n" style="box-sizing: border-box;">itertag</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'n:url'</span>
    <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># ...</span>
</pre></div></div></dd></dl><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Apart from these new attributes, this spider has the following overrideable methods too:</p><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle29"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">adapt_response</code><span class="sig-paren" style="box-sizing: border-box;">(</span><em style="box-sizing: border-box;">response</em><span class="sig-paren" style="box-sizing: border-box;">)</span></h5><dl class="method" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.XMLFeedSpider.adapt_response" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.XMLFeedSpider.adapt_response" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">A method that receives the response as soon as it arrives from the spider middleware, before the spider starts parsing it. It can be used to modify the response body before parsing it. This method receives a response and also returns a response (it could be the same or another one).</p></dd></dl><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle30"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">parse_node</code><span class="sig-paren" style="box-sizing: border-box;">(</span><em style="box-sizing: border-box;">response</em>,&nbsp;<em style="box-sizing: border-box;">selector</em><span class="sig-paren" style="box-sizing: border-box;">)</span></h5><dl class="method" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.XMLFeedSpider.parse_node" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.XMLFeedSpider.parse_node" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">This method is called for the nodes matching the provided tag name (<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">itertag</span></code>). Receives the response and an&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/selectors.html#scrapy.selector.Selector" title="scrapy.selector.Selector" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Selector</span></code></a>&nbsp;for each node. Overriding this method is mandatory. Otherwise, you spider won’t work. This method must return either a&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/items.html#scrapy.item.Item" title="scrapy.item.Item" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Item</span></code></a>&nbsp;object, a&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request" title="scrapy.http.Request" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Request</span></code></a>&nbsp;object, or an iterable containing any of them.</p></dd></dl><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle31"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">process_results</code><span class="sig-paren" style="box-sizing: border-box;">(</span><em style="box-sizing: border-box;">response</em>,&nbsp;<em style="box-sizing: border-box;">results</em><span class="sig-paren" style="box-sizing: border-box;">)</span></h5><dl class="method" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.XMLFeedSpider.process_results" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.XMLFeedSpider.process_results" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">This method is called for each result (item or request) returned by the spider, and it’s intended to perform any last time processing required before returning the results to the framework core, for example setting the item IDs. It receives a list of results and the response which originated those results. It must return a list of results (Items or Requests).</p></dd></dl></dd></dl><div class="section" id="xmlfeedspider-example" style="box-sizing: border-box; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><h4 style="box-sizing: border-box; margin-top: 0px; font-family: &quot;Roboto Slab&quot;, ff-tisa-web-pro, Georgia, Arial, sans-serif; font-size: 18.4px;" id="blogTitle32">XMLFeedSpider example</h4><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px;">These spiders are pretty easy to use, let’s have a look at one example:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy.spiders</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">XMLFeedSpider</span>
<span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">myproject.items</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">TestItem</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">XMLFeedSpider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">name</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span>
    <span class="n" style="box-sizing: border-box;">allowed_domains</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span><span class="p" style="box-sizing: border-box;">]</span>
    <span class="n" style="box-sizing: border-box;">start_urls</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/feed.xml'</span><span class="p" style="box-sizing: border-box;">]</span>
    <span class="n" style="box-sizing: border-box;">iterator</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'iternodes'</span>  <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># This is actually unnecessary, since it's the default value</span>
    <span class="n" style="box-sizing: border-box;">itertag</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'item'</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">parse_node</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">node</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">logger</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">info</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'Hi, this is a &lt;</span><span class="si" style="box-sizing: border-box; color: rgb(112, 160, 208); font-style: italic;">%s</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">&gt; node!: </span><span class="si" style="box-sizing: border-box; color: rgb(112, 160, 208); font-style: italic;">%s</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">itertag</span><span class="p" style="box-sizing: border-box;">,</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">''</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">join</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">node</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">getall</span><span class="p" style="box-sizing: border-box;">()))</span>

        <span class="n" style="box-sizing: border-box;">item</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">TestItem</span><span class="p" style="box-sizing: border-box;">()</span>
        <span class="n" style="box-sizing: border-box;">item</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'id'</span><span class="p" style="box-sizing: border-box;">]</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">node</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">xpath</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'@id'</span><span class="p" style="box-sizing: border-box;">)</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">get</span><span class="p" style="box-sizing: border-box;">()</span>
        <span class="n" style="box-sizing: border-box;">item</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'name'</span><span class="p" style="box-sizing: border-box;">]</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">node</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">xpath</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'name'</span><span class="p" style="box-sizing: border-box;">)</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">get</span><span class="p" style="box-sizing: border-box;">()</span>
        <span class="n" style="box-sizing: border-box;">item</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'description'</span><span class="p" style="box-sizing: border-box;">]</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">node</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">xpath</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'description'</span><span class="p" style="box-sizing: border-box;">)</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">get</span><span class="p" style="box-sizing: border-box;">()</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n" style="box-sizing: border-box;">item</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px;">Basically what we did up there was to create a spider that downloads a feed from the given&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto;"><span class="pre" style="box-sizing: border-box;">start_urls</span></code>, and then iterates through each of its&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto;"><span class="pre" style="box-sizing: border-box;">item</span></code>&nbsp;tags, prints them out, and stores some random data in an&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/items.html#scrapy.item.Item" title="scrapy.item.Item" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">Item</span></code></a>.</p></div></div><div><br></div><div><br></div><h3 id="blogTitle33">CSVFeedSpider</h3><div><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);" id="blogTitle34"><em class="property" style="box-sizing: border-box; display: inline-block; padding-right: 8px;">class</em><code class="descclassname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">scrapy.spiders.</code><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">CSVFeedSpider</code></h4><dl class="class" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><dt id="scrapy.spiders.CSVFeedSpider" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(231, 242, 250); color: rgb(41, 128, 185); border-top: 3px solid rgb(106, 176, 222); padding: 6px; position: relative;"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.CSVFeedSpider" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">This spider is very similar to the XMLFeedSpider, except that it iterates over rows, instead of nodes. The method that gets called in each iteration is&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.CSVFeedSpider.parse_row" title="scrapy.spiders.CSVFeedSpider.parse_row" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-meth docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">parse_row()</span></code></a>.</p><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle35"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">delimiter</code></h5><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.CSVFeedSpider.delimiter" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.CSVFeedSpider.delimiter" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">A string with the separator character for each field in the CSV file Defaults to&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">','</span></code>&nbsp;(comma).</p></dd></dl><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle36"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">quotechar</code></h5><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.CSVFeedSpider.quotechar" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.CSVFeedSpider.quotechar" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">A string with the enclosure character for each field in the CSV file Defaults to&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">'"'</span></code>&nbsp;(quotation mark).</p></dd></dl><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle37"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">headers</code></h5><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.CSVFeedSpider.headers" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.CSVFeedSpider.headers" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">A list of the column names in the CSV file.</p></dd></dl><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle38"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">parse_row</code><span class="sig-paren" style="box-sizing: border-box;">(</span><em style="box-sizing: border-box;">response</em>,&nbsp;<em style="box-sizing: border-box;">row</em><span class="sig-paren" style="box-sizing: border-box;">)</span></h5><dl class="method" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.CSVFeedSpider.parse_row" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.CSVFeedSpider.parse_row" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Receives a response and a dict (representing each row) with a key for each provided (or detected) header of the CSV file. This spider also gives the opportunity to override&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">adapt_response</span></code>&nbsp;and&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">process_results</span></code>&nbsp;methods for pre- and post-processing purposes.</p></dd></dl></dd></dl><div class="section" id="csvfeedspider-example" style="box-sizing: border-box; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><h4 style="box-sizing: border-box; margin-top: 0px; font-family: &quot;Roboto Slab&quot;, ff-tisa-web-pro, Georgia, Arial, sans-serif; font-size: 18.4px;" id="blogTitle39">CSVFeedSpider example</h4><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px;">Let’s see an example similar to the previous one, but using a&nbsp;<a class="reference internal" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.CSVFeedSpider" title="scrapy.spiders.CSVFeedSpider" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;"><code class="xref py py-class docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(64, 64, 64); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">CSVFeedSpider</span></code></a>:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy.spiders</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">CSVFeedSpider</span>
<span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">myproject.items</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">TestItem</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">CSVFeedSpider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">name</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span>
    <span class="n" style="box-sizing: border-box;">allowed_domains</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span><span class="p" style="box-sizing: border-box;">]</span>
    <span class="n" style="box-sizing: border-box;">start_urls</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/feed.csv'</span><span class="p" style="box-sizing: border-box;">]</span>
    <span class="n" style="box-sizing: border-box;">delimiter</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">';'</span>
    <span class="n" style="box-sizing: border-box;">quotechar</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s2" style="box-sizing: border-box; color: rgb(64, 112, 160);">"'"</span>
    <span class="n" style="box-sizing: border-box;">headers</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'id'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'name'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'description'</span><span class="p" style="box-sizing: border-box;">]</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">parse_row</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">row</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">logger</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">info</span><span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'Hi, this is a row!: </span><span class="si" style="box-sizing: border-box; color: rgb(112, 160, 208); font-style: italic;">%r</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">row</span><span class="p" style="box-sizing: border-box;">)</span>

        <span class="n" style="box-sizing: border-box;">item</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">TestItem</span><span class="p" style="box-sizing: border-box;">()</span>
        <span class="n" style="box-sizing: border-box;">item</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'id'</span><span class="p" style="box-sizing: border-box;">]</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">row</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'id'</span><span class="p" style="box-sizing: border-box;">]</span>
        <span class="n" style="box-sizing: border-box;">item</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'name'</span><span class="p" style="box-sizing: border-box;">]</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">row</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'name'</span><span class="p" style="box-sizing: border-box;">]</span>
        <span class="n" style="box-sizing: border-box;">item</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'description'</span><span class="p" style="box-sizing: border-box;">]</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">row</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'description'</span><span class="p" style="box-sizing: border-box;">]</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n" style="box-sizing: border-box;">item</span></pre></div></div></div></div><div><br></div><h3 id="blogTitle40">SitemapSpider</h3><div><h4 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);" id="blogTitle41"><em class="property" style="box-sizing: border-box; display: inline-block; padding-right: 8px;">class</em><code class="descclassname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">scrapy.spiders.</code><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">SitemapSpider</code></h4><dl class="class" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><dt id="scrapy.spiders.SitemapSpider" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(231, 242, 250); color: rgb(41, 128, 185); border-top: 3px solid rgb(106, 176, 222); padding: 6px; position: relative;"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.SitemapSpider" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">SitemapSpider allows you to crawl a site by discovering the URLs using&nbsp;<a class="reference external" href="https://www.sitemaps.org/index.html" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Sitemaps</a>.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">It supports nested sitemaps and discovering sitemap urls from&nbsp;<a class="reference external" href="http://www.robotstxt.org/" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">robots.txt</a>.</p><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle42"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">sitemap_urls</code></h5><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.SitemapSpider.sitemap_urls" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.SitemapSpider.sitemap_urls" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">A list of urls pointing to the sitemaps whose urls you want to crawl.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">You can also point to a&nbsp;<a class="reference external" href="http://www.robotstxt.org/" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">robots.txt</a>&nbsp;and it will be parsed to extract sitemap urls from it.</p></dd></dl><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle43"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">sitemap_rules</code></h5><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.SitemapSpider.sitemap_rules" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.SitemapSpider.sitemap_rules" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">A list of tuples&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">(regex,</span>&nbsp;<span class="pre" style="box-sizing: border-box;">callback)</span></code>&nbsp;where:</p><ul class="simple" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style-position: initial; list-style-image: initial; line-height: 24px;"><li style="box-sizing: border-box; list-style: disc; margin-left: 24px;"><code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">regex</span></code>&nbsp;is a regular expression to match urls extracted from sitemaps.&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">regex</span></code>&nbsp;can be either a str or a compiled regex object.</li><li style="box-sizing: border-box; list-style: disc; margin-left: 24px;">callback is the callback to use for processing the urls that match the regular expression.&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">callback</span></code>&nbsp;can be a string (indicating the name of a spider method) or a callable.</li></ul><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">For example:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="n" style="box-sizing: border-box;">sitemap_rules</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'/product/'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'parse_product'</span><span class="p" style="box-sizing: border-box;">)]</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Rules are applied in order, and only the first one that matches will be used.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">If you omit this attribute, all urls found in sitemaps will be processed with the&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">parse</span></code>&nbsp;callback.</p></dd></dl><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle44"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">sitemap_follow</code></h5><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.SitemapSpider.sitemap_follow" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.SitemapSpider.sitemap_follow" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">A list of regexes of sitemap that should be followed. This is is only for sites that use&nbsp;<a class="reference external" href="https://www.sitemaps.org/protocol.html#index" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">Sitemap index files</a>&nbsp;that point to other sitemap files.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">By default, all sitemaps are followed.</p></dd></dl><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle45"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">sitemap_alternate_links</code></h5><dl class="attribute" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.SitemapSpider.sitemap_alternate_links" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.SitemapSpider.sitemap_alternate_links" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Specifies if alternate links for one&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">url</span></code>&nbsp;should be followed. These are links for the same website in another language passed within the same&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">url</span></code>block.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">For example:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&lt;</span><span class="n" style="box-sizing: border-box;">url</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&gt;</span>
    <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&lt;</span><span class="n" style="box-sizing: border-box;">loc</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&gt;</span><span class="n" style="box-sizing: border-box;">http</span><span class="p" style="box-sizing: border-box;">:</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">//</span><span class="n" style="box-sizing: border-box;">example</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">com</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">/&lt;/</span><span class="n" style="box-sizing: border-box;">loc</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&gt;</span>
    <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&lt;</span><span class="n" style="box-sizing: border-box;">xhtml</span><span class="p" style="box-sizing: border-box;">:</span><span class="n" style="box-sizing: border-box;">link</span> <span class="n" style="box-sizing: border-box;">rel</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="s2" style="box-sizing: border-box; color: rgb(64, 112, 160);">"alternate"</span> <span class="n" style="box-sizing: border-box;">hreflang</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="s2" style="box-sizing: border-box; color: rgb(64, 112, 160);">"de"</span> <span class="n" style="box-sizing: border-box;">href</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span><span class="s2" style="box-sizing: border-box; color: rgb(64, 112, 160);">"http://example.com/de"</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">/&gt;</span>
<span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&lt;/</span><span class="n" style="box-sizing: border-box;">url</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&gt;</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">With&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">sitemap_alternate_links</span></code>&nbsp;set, this would retrieve both URLs. With<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">sitemap_alternate_links</span></code>&nbsp;disabled, only&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">http://example.com/</span></code>&nbsp;would be retrieved.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Default is&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">sitemap_alternate_links</span></code>&nbsp;disabled.</p></dd></dl><h5 style="padding: 0px; box-sizing: border-box; margin: 0px 0px 24px; list-style: none none;" id="blogTitle46"><code class="descname" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 14.4px; white-space: nowrap; max-width: 100%; background: transparent; border: none; padding: 0px; color: rgb(0, 0, 0); overflow-x: auto;">sitemap_filter</code><span class="sig-paren" style="box-sizing: border-box;">(</span><em style="box-sizing: border-box;">entries</em><span class="sig-paren" style="box-sizing: border-box;">)</span></h5><dl class="method" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style: none none;"><dt id="scrapy.spiders.SitemapSpider.sitemap_filter" style="box-sizing: border-box; font-weight: bold; margin: 0px 0px 6px; display: table; font-size: 14.4px; line-height: normal; background: rgb(240, 240, 240); color: rgb(85, 85, 85); border-top: none; padding: 6px; position: relative; border-right: none; border-bottom: none; border-image: initial; border-left: 3px solid rgb(204, 204, 204);"><a class="headerlink" href="https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.SitemapSpider.sitemap_filter" title="Permalink to this definition" style="box-sizing: border-box; color: rgb(64, 64, 64); text-decoration-line: none; cursor: pointer; display: inline-block; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: inherit; font-size: 14.4px; text-rendering: auto; -webkit-font-smoothing: antialiased; visibility: hidden;"></a></dt><dd style="box-sizing: border-box; margin: 0px 0px 12px 24px; line-height: 24px;"><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">This is a filter funtion that could be overridden to select sitemap entries based on their attributes.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">For example:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&lt;</span><span class="n" style="box-sizing: border-box;">url</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&gt;</span>
    <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&lt;</span><span class="n" style="box-sizing: border-box;">loc</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&gt;</span><span class="n" style="box-sizing: border-box;">http</span><span class="p" style="box-sizing: border-box;">:</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">//</span><span class="n" style="box-sizing: border-box;">example</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">com</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">/&lt;/</span><span class="n" style="box-sizing: border-box;">loc</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&gt;</span>
    <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&lt;</span><span class="n" style="box-sizing: border-box;">lastmod</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&gt;</span><span class="mi" style="box-sizing: border-box; color: rgb(32, 128, 80);">2005</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">-</span><span class="mi" style="box-sizing: border-box; color: rgb(32, 128, 80);">01</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">-</span><span class="mi" style="box-sizing: border-box; color: rgb(32, 128, 80);">01</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&lt;/</span><span class="n" style="box-sizing: border-box;">lastmod</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&gt;</span>
<span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&lt;/</span><span class="n" style="box-sizing: border-box;">url</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&gt;</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">We can define a&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">sitemap_filter</span></code>&nbsp;function to filter&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">entries</span></code>&nbsp;by date:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">datetime</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">datetime</span>
<span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy.spiders</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">SitemapSpider</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">FilteredSitemapSpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">SitemapSpider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">name</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'filtered_sitemap_spider'</span>
    <span class="n" style="box-sizing: border-box;">allowed_domains</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'example.com'</span><span class="p" style="box-sizing: border-box;">]</span>
    <span class="n" style="box-sizing: border-box;">sitemap_urls</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://example.com/sitemap.xml'</span><span class="p" style="box-sizing: border-box;">]</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">sitemap_filter</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">entries</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n" style="box-sizing: border-box;">entry</span> <span class="ow" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n" style="box-sizing: border-box;">entries</span><span class="p" style="box-sizing: border-box;">:</span>
            <span class="n" style="box-sizing: border-box;">date_time</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="n" style="box-sizing: border-box;">datetime</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">strptime</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">entry</span><span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'lastmod'</span><span class="p" style="box-sizing: border-box;">],</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'%Y-%m-</span><span class="si" style="box-sizing: border-box; color: rgb(112, 160, 208); font-style: italic;">%d</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'</span><span class="p" style="box-sizing: border-box;">)</span>
            <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">if</span> <span class="n" style="box-sizing: border-box;">date_time</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">year</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">&gt;=</span> <span class="mi" style="box-sizing: border-box; color: rgb(32, 128, 80);">2005</span><span class="p" style="box-sizing: border-box;">:</span>
                <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">yield</span> <span class="n" style="box-sizing: border-box;">entry</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">This would retrieve only&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">entries</span></code>&nbsp;modified on 2005 and the following years.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">Entries are dict objects extracted from the sitemap document. Usually, the key is the tag name and the value is the text inside it.</p><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">It’s important to notice that:</p><ul class="simple" style="box-sizing: border-box; margin: 0px 0px 24px; padding: 0px; list-style-position: initial; list-style-image: initial; line-height: 24px;"><li style="box-sizing: border-box; list-style: disc; margin-left: 24px;">as the loc attribute is required, entries without this tag are discarded</li><li style="box-sizing: border-box; list-style: disc; margin-left: 24px;">alternate links are stored in a list with the key&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">alternate</span></code>&nbsp;(see&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">sitemap_alternate_links</span></code>)</li><li style="box-sizing: border-box; list-style: disc; margin-left: 24px;">namespaces are removed, so lxml tags named as&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">{namespace}tagname</span></code>&nbsp;become only&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto; font-weight: bold;"><span class="pre" style="box-sizing: border-box;">tagname</span></code></li></ul><p style="box-sizing: border-box; line-height: 24px; margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 12px !important;">If you omit this method, all entries found in sitemaps will be processed, observing other attributes and their settings.</p></dd></dl></dd></dl><div class="section" id="sitemapspider-examples" style="box-sizing: border-box; color: rgb(64, 64, 64); font-family: Lato, proxima-nova, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(252, 252, 252);"><h4 style="box-sizing: border-box; margin-top: 0px; font-family: &quot;Roboto Slab&quot;, ff-tisa-web-pro, Georgia, Arial, sans-serif; font-size: 18.4px;" id="blogTitle47">SitemapSpider examples</h4><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px;">Simplest example: process all urls discovered through sitemaps using the&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto;"><span class="pre" style="box-sizing: border-box;">parse</span></code>&nbsp;callback:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy.spiders</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">SitemapSpider</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">SitemapSpider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">sitemap_urls</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/sitemap.xml'</span><span class="p" style="box-sizing: border-box;">]</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">parse</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">pass</span> <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># ... scrape item here ...</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px;">Process some urls with certain callback and other urls with a different callback:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy.spiders</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">SitemapSpider</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">SitemapSpider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">sitemap_urls</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/sitemap.xml'</span><span class="p" style="box-sizing: border-box;">]</span>
    <span class="n" style="box-sizing: border-box;">sitemap_rules</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span>
        <span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'/product/'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'parse_product'</span><span class="p" style="box-sizing: border-box;">),</span>
        <span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'/category/'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'parse_category'</span><span class="p" style="box-sizing: border-box;">),</span>
    <span class="p" style="box-sizing: border-box;">]</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">parse_product</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">pass</span> <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># ... scrape product ...</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">parse_category</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">pass</span> <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># ... scrape category ...</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px;">Follow sitemaps defined in the&nbsp;<a class="reference external" href="http://www.robotstxt.org/" style="box-sizing: border-box; color: rgb(155, 89, 182); text-decoration-line: none; cursor: pointer;">robots.txt</a>&nbsp;file and only follow sitemaps whose url contains&nbsp;<code class="docutils literal notranslate" style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-size: 12px; white-space: nowrap; max-width: 100%; background: rgb(255, 255, 255); border: 1px solid rgb(225, 228, 229); padding: 2px 5px; color: rgb(231, 76, 60); overflow-x: auto;"><span class="pre" style="box-sizing: border-box;">/sitemap_shop</span></code>:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy.spiders</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">SitemapSpider</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">SitemapSpider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">sitemap_urls</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/robots.txt'</span><span class="p" style="box-sizing: border-box;">]</span>
    <span class="n" style="box-sizing: border-box;">sitemap_rules</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span>
        <span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'/shop/'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'parse_shop'</span><span class="p" style="box-sizing: border-box;">),</span>
    <span class="p" style="box-sizing: border-box;">]</span>
    <span class="n" style="box-sizing: border-box;">sitemap_follow</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'/sitemap_shops'</span><span class="p" style="box-sizing: border-box;">]</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">parse_shop</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">pass</span> <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># ... scrape shop here ...</span>
</pre></div></div><p style="box-sizing: border-box; line-height: 24px; margin: 0px 0px 24px;">Combine SitemapSpider with other sources of urls:</p><div class="highlight-default notranslate" style="box-sizing: border-box; border: 1px solid rgb(225, 228, 229); overflow-x: auto; margin: 1px 0px 24px;"><div class="highlight" style="box-sizing: border-box; background: rgb(238, 255, 204); border: none; overflow-x: auto; margin: 0px; padding: 0px;"><pre style="padding: 12px; font-size: 12px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, Courier, monospace; line-height: 1.4; box-sizing: border-box; margin-top: 0px; margin-bottom: 0px;"><span style="box-sizing: border-box;"></span><span class="kn" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">scrapy.spiders</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n" style="box-sizing: border-box;">SitemapSpider</span>

<span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="box-sizing: border-box; color: rgb(14, 132, 181); font-weight: bold;">MySpider</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">SitemapSpider</span><span class="p" style="box-sizing: border-box;">):</span>
    <span class="n" style="box-sizing: border-box;">sitemap_urls</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/robots.txt'</span><span class="p" style="box-sizing: border-box;">]</span>
    <span class="n" style="box-sizing: border-box;">sitemap_rules</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span>
        <span class="p" style="box-sizing: border-box;">(</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'/shop/'</span><span class="p" style="box-sizing: border-box;">,</span> <span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'parse_shop'</span><span class="p" style="box-sizing: border-box;">),</span>
    <span class="p" style="box-sizing: border-box;">]</span>

    <span class="n" style="box-sizing: border-box;">other_urls</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="s1" style="box-sizing: border-box; color: rgb(64, 112, 160);">'http://www.example.com/about'</span><span class="p" style="box-sizing: border-box;">]</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">start_requests</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="n" style="box-sizing: border-box;">requests</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">=</span> <span class="nb" style="box-sizing: border-box; color: rgb(0, 112, 32);">list</span><span class="p" style="box-sizing: border-box;">(</span><span class="nb" style="box-sizing: border-box; color: rgb(0, 112, 32);">super</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">MySpider</span><span class="p" style="box-sizing: border-box;">,</span> <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">)</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">start_requests</span><span class="p" style="box-sizing: border-box;">())</span>
        <span class="n" style="box-sizing: border-box;">requests</span> <span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">+=</span> <span class="p" style="box-sizing: border-box;">[</span><span class="n" style="box-sizing: border-box;">scrapy</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">Request</span><span class="p" style="box-sizing: border-box;">(</span><span class="n" style="box-sizing: border-box;">x</span><span class="p" style="box-sizing: border-box;">,</span> <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">parse_other</span><span class="p" style="box-sizing: border-box;">)</span> <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n" style="box-sizing: border-box;">x</span> <span class="ow" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="o" style="box-sizing: border-box; color: rgb(102, 102, 102);">.</span><span class="n" style="box-sizing: border-box;">other_urls</span><span class="p" style="box-sizing: border-box;">]</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n" style="box-sizing: border-box;">requests</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">parse_shop</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">pass</span> <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># ... scrape shop here ...</span>

    <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="box-sizing: border-box; color: rgb(6, 40, 126);">parse_other</span><span class="p" style="box-sizing: border-box;">(</span><span class="bp" style="box-sizing: border-box; color: rgb(0, 112, 32);">self</span><span class="p" style="box-sizing: border-box;">,</span> <span class="n" style="box-sizing: border-box;">response</span><span class="p" style="box-sizing: border-box;">):</span>
        <span class="k" style="box-sizing: border-box; color: rgb(0, 112, 32); font-weight: bold;">pass</span> <span class="c1" style="box-sizing: border-box; color: rgb(64, 128, 144); font-style: italic;"># ... scrape other here ...</span></pre></div></div></div></div></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div>
</article>
{% endblock point1 %}
