{% extends 'c-word.html' %}

{% block title %} object - Python | specification {% endblock title %}

{% block point1 %}
<article contenteditable="true">
    <p><span style="background-color: yellow;"><b>Category: 计算机 | 程序设计语言 | Python | specification | object</b></span></p>
    <h1 id="blogTitle0">对象</h1><p>类与实例，抽象与具体</p><p>一切皆对象（类和实例都是对象）</p><h2 id="blogTitle1">类</h2><h3 id="blogTitle2">概述</h3><div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">类提供了一种组合数据和功能的方法。创建一个新类意味着创建一个新&nbsp;<em>类型</em>&nbsp;的对象，从而允许创建一个该类型的新&nbsp;<em>实例</em>&nbsp;。每个类的实例可以拥有保存自己状态的属性。一个类的实例也可以有改变自己状态的（定义在类中的）方法。<br></p></div><h4 id="blogTitle3">定义</h4><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><b style=""><font color="#ff0000">类是现实世界或思维世界中的实体在计算机中的反映，它将数据以及这些数据上的操作封装在一起。</font></b></p></div><h3 id="blogTitle4">类的设计</h3><h4 id="blogTitle5">特征</h4><div>特征的主体是什么</div><h4 id="blogTitle6">行为</h4><div>行为的主体是什么</div><div><br></div><h3 id="blogTitle7">类的作用</h3><h4 id="blogTitle8">封装</h4><h4 id="blogTitle9">继承</h4><div><br></div><div><br></div><div><br></div><div><br></div><h2 id="blogTitle10">面向对象编程&nbsp;</h2><div><p style="margin: 0px 0px 15px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">面向对象编程——Object Oriented Programming，简称OOP，是一种程序设计思想。OOP把对象作为程序的基本单元，一个对象包含了数据和操作数据的函数。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">面向过程的程序设计把计算机程序视为一系列的命令集合，即一组函数的顺序执行。为了简化程序设计，面向过程把函数继续切分为子函数，即把大块函数通过切割成小块函数来降低系统的复杂度。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">而面向对象的程序设计把计算机程序视为一组对象的集合，而每个对象都可以接收其他对象发过来的消息，并处理这些消息，计算机程序的执行就是一系列消息在各个对象之间传递。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">在Python中，所有数据类型都可以视为对象，当然也可以自定义对象。自定义的对象数据类型就是面向对象中的类（Class）的概念。</p></div><h3 id="blogTitle11">面向对象的三大特性</h3><h4 id="blogTitle12">封装</h4><h4 id="blogTitle13">继承</h4><h4 id="blogTitle14">多态</h4><h3 id="blogTitle15">方法与函数的区别</h3><p>方法：关注设计层面</p><p>函数：程序运行、过程式的一种称谓</p><div><br></div><h2 id="blogTitle16">Python 对类和对象的实现</h2><div><p id="index-0" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><em class="dfn">对象</em>&nbsp;是 Python 中对数据的抽象。Python 程序中的所有数据都是由对象或对象间关系来表示的。(从某种意义上说，按照冯·诺依曼的 "存储程序计算机" 模型，代码本身也是由对象来表示的。)</p><span class="target" id="index-1" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"></span><p style="hyphens: auto; text-align: justify; line-height: 22.4px; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><font color="#ff0000"><b>每个对象都有各自的编号、类型和值。</b></font><span style="color: rgb(34, 34, 34);">一个对象被创建后，它的&nbsp;<em>编号</em>&nbsp;就绝不会改变；你可以将其理解为该对象在内存中的地址。 '<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/expressions.html#is" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">is</span></code></a>' 运算符可以比较两个对象的编号是否相同；<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#id" title="id" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">id()</span></code></a>&nbsp;函数能返回一个代表其编号的整型数。</span></p><div class="impl-detail compound" style="border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><p style="hyphens: auto; text-align: justify; line-height: 22.4px; margin: 0px;"><strong>CPython implementation detail:</strong>&nbsp;在 CPython 中，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">id(x)</span></code>&nbsp;就是存放&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span></code>&nbsp;的内存的地址。</p></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><font color="#ff0000"><b>对象的类型决定该对象所支持的操作</b></font><span style="color: rgb(34, 34, 34);"> (例如 "对象是否有长度属性？") 并且定义了该类型的对象可能的取值。<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#type" title="type" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type()</span></code></a>&nbsp;函数能返回一个对象的类型 (类型本身也是对象)。与编号一样，一个对象的&nbsp;<em class="dfn">类型</em>&nbsp;也是不可改变的。</span></p><p id="index-3" style="hyphens: auto; text-align: justify; line-height: 22.4px; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><font color="#ff0000"><b>有些对象包含对其他对象的引用；它们被称为&nbsp;<em style="">容器</em>。</b></font><span style="color: rgb(34, 34, 34);">容器的例子有元组、列表和字典等。这些引用是容器对象值的组成部分。在多数情况下，当谈论一个容器的值时，我们是指所包含对象的值而不是其编号；但是，当我们谈论一个容器的可变性时，则仅指其直接包含的对象的编号。因此，如果一个不可变容器 (例如元组) 包含对一个可变对象的引用，则当该可变对象被改变时容器的值也会改变。</span></p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">类型会影响对象行为的几乎所有方面。甚至对象编号的重要性也在某种程度上受到影响: 对于不可变类型，会得出新值的运算实际上会返回对相同类型和取值的任一现有对象的引用，而对于可变类型来说这是不允许的。例如在&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">a</span>&nbsp;<span class="pre" style="hyphens: none;">=</span>&nbsp;<span class="pre" style="hyphens: none;">1;</span>&nbsp;<span class="pre" style="hyphens: none;">b</span>&nbsp;<span class="pre" style="hyphens: none;">=</span>&nbsp;<span class="pre" style="hyphens: none;">1</span></code>&nbsp;之后，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">a</span></code>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">b</span></code>&nbsp;可能会也可能不会指向同一个值为一的对象，这取决于具体实现，但是在&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">c</span>&nbsp;<span class="pre" style="hyphens: none;">=</span>&nbsp;<span class="pre" style="hyphens: none;">[];</span>&nbsp;<span class="pre" style="hyphens: none;">d</span>&nbsp;<span class="pre" style="hyphens: none;">=</span>&nbsp;<span class="pre" style="hyphens: none;">[]</span></code>&nbsp;之后，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">c</span></code>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">d</span></code>&nbsp;保证会指向两个不同、单独的新建空列表。(请注意&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">c</span>&nbsp;<span class="pre" style="hyphens: none;">=</span>&nbsp;<span class="pre" style="hyphens: none;">d</span>&nbsp;<span class="pre" style="hyphens: none;">=</span>&nbsp;<span class="pre" style="hyphens: none;">[]</span></code>&nbsp;则是将同一个对象赋值给&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">c</span></code>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">d</span></code>。)</p></div><h3 id="blogTitle17"><span style="text-align: justify;">辩论</span></h3><div>类的类型叫做元类</div><div>python 中一切皆对象，类也是对象<br></div><div>所有类的最顶层基类是 object<br></div><div><font color="#ff0000" style="background-color: yellow;"><b>object 与 type 互为实例</b></font></div><div><font color="#ff0000" style="background-color: yellow;"><b>type 是 object 的子类（type 继承自 object）</b></font></div><pre>&gt;&gt;&gt; isinstance(object, type)
True
&gt;&gt;&gt; isinstance(type, object)
True
&gt;&gt;&gt; issubclass(object, type)
False
&gt;&gt;&gt; issubclass(type, object)
True<br></pre><pre>&gt;&gt;&gt; object
&lt;class 'object'&gt;
&gt;&gt;&gt; type
&lt;class 'type'&gt;<br></pre><pre>&gt;&gt;&gt; type(type)
&lt;class 'type'&gt;
&gt;&gt;&gt; type(object)
&lt;class 'type'&gt;
&gt;&gt;&gt; type(int)
&lt;class 'type'&gt;
&gt;&gt;&gt; type(1)
&lt;class 'int'&gt;<br></pre><pre># 所有类的最顶层基类是 object，object 没有基类

&gt;&gt;&gt; object.__bases__
()
&gt;&gt;&gt; type.__bases__
(&lt;class 'object'&gt;,)
&gt;&gt;&gt; int.__bases__
(&lt;class 'object'&gt;,)
&gt;&gt;&gt; bool.__bases__
(&lt;class 'int'&gt;,)<br></pre><pre>&gt;&gt;&gt; dir(object)
['__class__', '__delattr__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__',
 '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__',
 '__lt__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__',
 '__sizeof__', '__str__', '__subclasshook__']

&gt;&gt;&gt; dir(type)
['__abstractmethods__', '__base__', '__bases__', '__basicsize__', '__call__',
 '__class__', '__delattr__', '__dict__', '__dictoffset__', '__dir__', '__doc__',
 '__eq__', '__flags__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__',
 '__init__', '__init_subclass__', '__instancecheck__', '__itemsize__', '__le__',
 '__lt__', '__module__', '__mro__', '__name__', '__ne__', '__new__', '__prepare__',
 '__qualname__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__',
 '__str__', '__subclasscheck__', '__subclasses__', '__subclasshook__',
 '__text_signature__', '__weakrefoffset__', 'mro']<br></pre><pre>class object:
    """ The most base type """
    def __delattr__(self, *args, **kwargs): # real signature unknown
        """ Implement delattr(self, name). """
        pass

    def __dir__(self, *args, **kwargs): # real signature unknown
        """ Default dir() implementation. """
        pass

    def __eq__(self, *args, **kwargs): # real signature unknown
        """ Return self==value. """
        pass

    def __format__(self, *args, **kwargs): # real signature unknown
        """ Default object formatter. """
        pass

    def __getattribute__(self, *args, **kwargs): # real signature unknown
        """ Return getattr(self, name). """
        pass

    def __ge__(self, *args, **kwargs): # real signature unknown
        """ Return self&gt;=value. """
        pass

    def __gt__(self, *args, **kwargs): # real signature unknown
        """ Return self&gt;value. """
        pass

    def __hash__(self, *args, **kwargs): # real signature unknown
        """ Return hash(self). """
        pass

    def __init_subclass__(self, *args, **kwargs): # real signature unknown
        """
        This method is called when a class is subclassed.

        The default implementation does nothing. It may be
        overridden to extend subclasses.
        """
        pass

    def __init__(self): # known special case of object.__init__
        """ Initialize self.  See help(type(self)) for accurate signature. """
        pass

    def __le__(self, *args, **kwargs): # real signature unknown
        """ Return self&lt;=value. """
        pass

    def __lt__(self, *args, **kwargs): # real signature unknown
        """ Return self&lt;value. """
        pass

    @staticmethod # known case of __new__
    def __new__(cls, *more): # known special case of object.__new__
        """ Create and return a new object.  See help(type) for accurate signature. """
        pass

    def __ne__(self, *args, **kwargs): # real signature unknown
        """ Return self!=value. """
        pass

    def __reduce_ex__(self, *args, **kwargs): # real signature unknown
        """ Helper for pickle. """
        pass

    def __reduce__(self, *args, **kwargs): # real signature unknown
        """ Helper for pickle. """
        pass

    def __repr__(self, *args, **kwargs): # real signature unknown
        """ Return repr(self). """
        pass

    def __setattr__(self, *args, **kwargs): # real signature unknown
        """ Implement setattr(self, name, value). """
        pass

    def __sizeof__(self, *args, **kwargs): # real signature unknown
        """ Size of object in memory, in bytes. """
        pass

    def __str__(self, *args, **kwargs): # real signature unknown
        """ Return str(self). """
        pass

    @classmethod # known case
    def __subclasshook__(cls, subclass): # known special case of object.__subclasshook__
        """
        Abstract classes can override this to customize issubclass().

        This is invoked early on by abc.ABCMeta.__subclasscheck__().
        It should return True, False or NotImplemented.  If it returns
        NotImplemented, the normal algorithm is used.  Otherwise, it
        overrides the normal algorithm (and the outcome is cached).
        """
        pass

    __class__ = None # (!) forward: type, real value is ''
    __dict__ = {}
    __doc__ = ''
    __module__ = ''<br></pre><div><br></div><h3 id="blogTitle18">概述</h3><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">类提供了一种组合数据和功能的方法。创建一个新类意味着创建一个新&nbsp;<em>类型</em>&nbsp;的对象，从而允许创建一个该类型的新&nbsp;<em>实例</em>&nbsp;。每个类的实例可以拥有保存自己状态的属性。一个类的实例也可以有改变自己状态的（定义在类中的）方法。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">和其他编程语言相比，Python 用非常少的新语法和语义将类加入到语言中。它是 C++ 和 Modula-3 中类机制的结合。Python 的类提供了面向对象编程的所有标准特性：类继承机制允许多个基类，派生类可以覆盖它基类的任何方法，一个方法可以调用基类中相同名称的的方法。对象可以包含任意数量和类型的数据。和模块一样，类也拥有 Python 天然的动态特性：它们在运行时创建，可以在创建后修改。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><font color="#222222">在C++术语中，通常类成员（包括数据成员）是&nbsp;</font><em style="color: rgb(34, 34, 34);">public</em><font color="#222222">&nbsp;（除了见下文&nbsp;</font><a class="reference internal" href="https://docs.python.org/zh-cn/3/tutorial/classes.html#tut-private" style="color: rgb(99, 99, 187); text-decoration-line: none;">私有变量</a><font color="#222222">&nbsp;），所有成员函数都是&nbsp;</font><em style="color: rgb(34, 34, 34);">virtual</em><font color="#222222">&nbsp;。与在Modula-3中一样，没有用于从其方法引用对象成员的简写：方法函数使用表示对象的显式第一个参数声明，该参数由调用隐式提供。与Smalltalk一样，</font><b style=""><font color="#ff0000">类本身也是对象</font></b><font color="#222222">。这为导入和重命名提供了语义。与C++和Modula-3不同，内置类型可以用作用户扩展的基类。此外，与C++一样，大多数具有特殊语法（算术运算符，下标等）的内置运算符都可以重新定义为类实例。</font></p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">(Lacking universally accepted terminology to talk about classes, I will make occasional use of Smalltalk and C++ terms. I would use Modula-3 terms, since its object-oriented semantics are closer to those of Python than C++, but I expect that few readers have heard of it.)</p></div><div><h3 id="blogTitle19">自定义类</h3><div><p class="first" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); margin-top: 0px !important;">自定义类这种类型一般通过类定义来创建 (参见&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#class" style="color: rgb(99, 99, 187); text-decoration-line: none;">Class definitions</a>&nbsp;一节)。每个类都有通过一个字典对象实现的独立命名空间。类属性引用会被转化为在此字典中查找，例如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C.x</span></code>&nbsp;会被转化为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C.__dict__["x"]</span></code>(不过也存在一些钩子对象以允许其他定位属性的方式)。当未在其中发现某个属性名称时，会继续在基类中查找。这种基类查找使用 C3 方法解析顺序，即使存在 '钻石形' 继承结构即有多条继承路径连到一个共同祖先也能保持正确的行为。有关 Python 使用的 C3 MRO 的详情可查看配合 2.3 版发布的文档&nbsp;<a class="reference external" href="https://www.python.org/download/releases/2.3/mro/" style="color: rgb(99, 99, 187); text-decoration-line: none;">https://www.python.org/download/releases/2.3/mro/</a>.</p><p id="index-45" style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">当一个类属性引用 (假设类名为&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C</span></code>) 会产生一个类方法对象时，它将转化为一个&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__self__</span></code>&nbsp;属性为&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C</span></code>&nbsp;的实例方法对象。当其会产生一个静态方法对象时，它将转化为该静态方法对象所封装的对象。从类的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#object.__dict__" title="object.__dict__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code></a>&nbsp;所包含内容以外获取属性的其他方式请参看&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#descriptors" style="color: rgb(99, 99, 187); text-decoration-line: none;">实现描述器</a>&nbsp;一节。</p><p id="index-46" style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">类属性赋值会更新类的字典，但不会更新基类的字典。</p><p id="index-47" style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">类对象可被调用 (见上文) 以产生一个类实例 (见下文)。</p><p class="last" id="index-48" style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">特殊属性:&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#definition.__name__" title="definition.__name__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__name__</span></code></a>&nbsp;为类的名称;&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__module__</span></code>&nbsp;为类所在模块的名称;&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#object.__dict__" title="object.__dict__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code></a>&nbsp;为包含类命名空间的字典;&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#class.__bases__" title="class.__bases__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__bases__</span></code></a>&nbsp;为包含基类的元组，按其在基类列表中的出现顺序排列;&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__doc__</span></code>&nbsp;为类的文档字符串，如果没有则为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>;&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__annotations__</span></code>&nbsp;(可选) 为一个包含&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-variable-annotation" style="color: rgb(99, 99, 187); text-decoration-line: none;">变量标注</a>&nbsp;的字典，它是在类体执行时获取的。</p></div><h3 id="blogTitle20">类定义</h3><div><p id="index-29" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">A class definition defines a class object (see section&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#types" style="color: rgb(99, 99, 187); text-decoration-line: none;">标准类型层级结构</a>):</p><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><strong id="grammar-token-classdef">classdef   </strong> ::=  [<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-decorators" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">decorators</span></code></a>] "class" <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-classname" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">classname</span></code></a> [<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-inheritance" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">inheritance</span></code></a>] ":" <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#grammar-token-suite" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">suite</span></code></a>
<strong id="grammar-token-inheritance">inheritance</strong> ::=  "(" [<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/expressions.html#grammar-token-argument-list" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">argument_list</span></code></a>] ")"
<strong id="grammar-token-classname">classname  </strong> ::=  <a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/lexical_analysis.html#grammar-token-identifier" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 14.8996px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">identifier</span></code></a>
</pre><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">A class definition is an executable statement. The inheritance list usually gives a list of base classes (see&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#metaclasses" style="color: rgb(99, 99, 187); text-decoration-line: none;">元类</a>&nbsp;for more advanced uses), so each item in the list should evaluate to a class object which allows subclassing. Classes without an inheritance list inherit, by default, from the base class&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#object" title="object" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object</span></code></a>; hence,</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Foo</span><span class="p">:</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">等价于</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Foo</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">object</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The class's suite is then executed in a new execution frame (see&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/executionmodel.html#naming" style="color: rgb(99, 99, 187); text-decoration-line: none;">命名与绑定</a>), using a newly created local namespace and the original global namespace. (Usually, the suite contains mostly function definitions.) When the class's suite finishes execution, its execution frame is discarded but its local namespace is saved.&nbsp;A class object is then created using the inheritance list for the base classes and the saved local namespace for the attribute dictionary. The class name is bound to this class object in the original local namespace.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The order in which attributes are defined in the class body is preserved in the new class's&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code>. Note that this is reliable only right after the class is created and only for classes that were defined using the definition syntax.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Class creation can be customized heavily using&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#metaclasses" style="color: rgb(99, 99, 187); text-decoration-line: none;">metaclasses</a>.</p><p id="index-30" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Classes can also be decorated: just like when decorating functions,</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@f1</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="nd" style="color: rgb(85, 85, 85); font-weight: bold;">@f2</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Foo</span><span class="p">:</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">is roughly equivalent to</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Foo</span><span class="p">:</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>
<span class="n">Foo</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">f1</span><span class="p">(</span><span class="n">arg</span><span class="p">)(</span><span class="n">f2</span><span class="p">(</span><span class="n">Foo</span><span class="p">))</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The evaluation rules for the decorator expressions are the same as for function decorators. The result is then bound to the class name.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><strong>Programmer's note:</strong>&nbsp;Variables defined in the class definition are class attributes; they are shared by instances. Instance attributes can be set in a method with&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self.name</span>&nbsp;<span class="pre" style="hyphens: none;">=</span>&nbsp;<span class="pre" style="hyphens: none;">value</span></code>. Both class and instance attributes are accessible through the notation "<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self.name</span></code>", and an instance attribute hides a class attribute with the same name when accessed in this way. Class attributes can be used as defaults for instance attributes, but using mutable values there can lead to unexpected results.<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#descriptors" style="color: rgb(99, 99, 187); text-decoration-line: none;">Descriptors</a>&nbsp;can be used to create instance variables with different implementation details.</p><div class="admonition seealso" style="margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(255, 255, 204); border: 1px solid rgb(221, 221, 102); border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; text-align: justify; line-height: 22.4px;">参见</p><dl class="last docutils" style="margin-bottom: 0px;"><dt style="font-weight: bold;"><span class="target" id="index-42"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3115" style="color: rgb(99, 99, 187); text-decoration-line: none;">PEP 3115</a>&nbsp;- Python 3000 中的元类</dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;">The proposal that changed the declaration of metaclasses to the current syntax, and the semantics for how classes with metaclasses are constructed.</dd><dt style="font-weight: bold;"><span class="target" id="index-32"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3129" style="color: rgb(99, 99, 187); text-decoration-line: none;">PEP 3129</a>&nbsp;- Class Decorators</dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;">The proposal that added class decorators. Function and method decorators were introduced in&nbsp;<span class="target" id="index-33"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0318" style="color: rgb(99, 99, 187); text-decoration-line: none;"><strong>PEP 318</strong></a>.</dd></dl></div></div><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">最简单的类定义看起来像这样:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">ClassName</span><span class="p">:</span>
    <span class="o" style="color: rgb(102, 102, 102);">&lt;</span><span class="n">statement</span><span class="o" style="color: rgb(102, 102, 102);">-</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="o" style="color: rgb(102, 102, 102);">&gt;</span>
    <span class="o" style="color: rgb(102, 102, 102);">.</span>
    <span class="o" style="color: rgb(102, 102, 102);">.</span>
    <span class="o" style="color: rgb(102, 102, 102);">.</span>
    <span class="o" style="color: rgb(102, 102, 102);">&lt;</span><span class="n">statement</span><span class="o" style="color: rgb(102, 102, 102);">-</span><span class="n">N</span><span class="o" style="color: rgb(102, 102, 102);">&gt;</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Class definitions, like function definitions (<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#def" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">def</span></code></a>&nbsp;statements) must be executed before they have any effect. (You could conceivably place a class definition in a branch of an&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#if" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">if</span></code></a>&nbsp;statement, or inside a function.)</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">In practice, the statements inside a class definition will usually be function definitions, but other statements are allowed, and sometimes useful — we’ll come back to this later. The function definitions inside a class normally have a peculiar form of argument list, dictated by the calling conventions for methods — again, this is explained later.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">When a class definition is entered, a new namespace is created, and used as the local scope — thus, all assignments to local variables go into this new namespace. In particular, function definitions bind the name of the new function here.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">When a class definition is left normally (via the end), a&nbsp;<em>class object</em>&nbsp;is created. This is basically a wrapper around the contents of the namespace created by the class definition; we’ll learn more about class objects in the next section. The original local scope (the one in effect just before the class definition was entered) is reinstated, and the class object is bound here to the class name given in the class definition header (<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">ClassName</span></code>&nbsp;in the example).</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><br></p><p class="first" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); hyphens: auto; line-height: 22.4px; margin-top: 0px !important;">自定义类这种类型一般通过类定义来创建 (参见&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#class" style="color: rgb(99, 99, 187); text-decoration-line: none;">Class definitions</a>&nbsp;一节)。每个类都有通过一个字典对象实现的独立命名空间。类属性引用会被转化为在此字典中查找，例如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C.x</span></code>&nbsp;会被转化为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C.__dict__["x"]</span></code>&nbsp;(不过也存在一些钩子对象以允许其他定位属性的方式)。当未在其中发现某个属性名称时，会继续在基类中查找。这种基类查找使用 C3 方法解析顺序，即使存在 ‘钻石形’ 继承结构即有多条继承路径连到一个共同祖先也能保持正确的行为。有关 Python 使用的 C3 MRO 的详情可查看配合 2.3 版发布的文档&nbsp;<a class="reference external" href="https://www.python.org/download/releases/2.3/mro/" style="color: rgb(99, 99, 187); text-decoration-line: none;">https://www.python.org/download/releases/2.3/mro/</a>.</p><p id="index-45" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">当一个类属性引用 (假设类名为&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C</span></code>) 会产生一个类方法对象时，它将转化为一个&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__self__</span></code>&nbsp;属性为&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C</span></code>&nbsp;的实例方法对象。当其会产生一个静态方法对象时，它将转化为该静态方法对象所封装的对象。从类的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#object.__dict__" title="object.__dict__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code></a>&nbsp;所包含内容以外获取属性的其他方式请参看&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#descriptors" style="color: rgb(99, 99, 187); text-decoration-line: none;">实现描述器</a>&nbsp;一节。</p><p id="index-46" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">类属性赋值会更新类的字典，但不会更新基类的字典。</p><p id="index-47" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">类对象可被调用 (见上文) 以产生一个类实例 (见下文)。</p><p class="last" id="index-48" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">特殊属性:&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#definition.__name__" title="definition.__name__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__name__</span></code></a>&nbsp;为类的名称;&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__module__</span></code>&nbsp;为类所在模块的名称;&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#object.__dict__" title="object.__dict__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code></a>&nbsp;为包含类命名空间的字典;&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#class.__bases__" title="class.__bases__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__bases__</span></code></a>&nbsp;为包含基类的元组，按其在基类列表中的出现顺序排列;&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__doc__</span></code>&nbsp;为类的文档字符串，如果没有则为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>;&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__annotations__</span></code>&nbsp;(可选) 为一个包含&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-variable-annotation" style="color: rgb(99, 99, 187); text-decoration-line: none;">变量标注</a>&nbsp;的字典，它是在类体执行时获取的。</p></div><h3 id="blogTitle21">类对象与实例对象</h3><h4 id="blogTitle22">类对象</h4><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">类是可调用的。此种对象通常是作为“工厂”来创建自身的实例，类也可以有重载&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>&nbsp;的变体类型。调用的参数会传给&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>，而且通常也会传给&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;来初始化新的实例。<br></p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><font color="#ff0000"><b>类对象支持两种操作：属性引用和实例化。</b></font></p><h5 id="blogTitle23" style="hyphens: auto; line-height: 22.4px;">属性引用</h5><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><em>Attribute references</em>&nbsp;use the standard syntax used for all attribute references in Python:&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">obj.name</span></code>. Valid attribute names are all the names that were in the class’s namespace when the class object was created. So, if the class definition looked like this:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">MyClass</span><span class="p">:</span>
    <span class="sd" style="color: rgb(64, 112, 160); font-style: italic;">"""A simple example class"""</span>
    <span class="n">i</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="mi" style="color: rgb(32, 128, 80);">12345</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">f</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="s1" style="color: rgb(64, 112, 160);">'hello world'</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">then&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MyClass.i</span></code>&nbsp;and&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MyClass.f</span></code>&nbsp;are valid attribute references, returning an integer and a function object, respectively. Class attributes can also be assigned to, so you can change the value of&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MyClass.i</span></code>&nbsp;by assignment.&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__doc__</span></code>&nbsp;is also a valid attribute, returning the docstring belonging to the class:&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">"A</span>&nbsp;<span class="pre" style="hyphens: none;">simple</span>&nbsp;<span class="pre" style="hyphens: none;">example</span>&nbsp;<span class="pre" style="hyphens: none;">class"</span></code>.</p><h6 id="blogTitle24">类数据属性</h6><h6 id="blogTitle25">类静态方法属性</h6><h6 id="blogTitle26">类方法属性</h6><h5 id="blogTitle27" style="hyphens: auto; line-height: 22.4px;">实例化</h5><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Class&nbsp;<em>instantiation</em>&nbsp;uses function notation. Just pretend that the class object is a parameterless function that returns a new instance of the class. For example (assuming the above class):</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="n">x</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">MyClass</span><span class="p">()</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">创建类的新&nbsp;<em>实例</em>&nbsp;并将此对象分配给局部变量&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span></code>。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The instantiation operation (“calling” a class object) creates an empty object. Many classes like to create objects with instances customized to a specific initial state. Therefore a class may define a special method named&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>, like this:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
    <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">data</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">__init__ 方法是一个构造器，用于定制实例的初始化状态。每当创建一个新的实例时，都会调用该方法。（类似于 js 中的构造函数）。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">When a class defines an&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;method, class instantiation automatically invokes&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;for the newly-created class instance. So in this example, a new, initialized instance can be obtained by:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="n">x</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">MyClass</span><span class="p">()</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Of course, the&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;method may have arguments for greater flexibility. In that case, arguments given to the class instantiation operator are passed on to&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>. For example,</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Complex</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">realpart</span><span class="p">,</span> <span class="n">imagpart</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">r</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">realpart</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">i</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">imagpart</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">Complex</span><span class="p">(</span><span class="mf" style="color: rgb(32, 128, 80);">3.0</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">-</span><span class="mf" style="color: rgb(32, 128, 80);">4.5</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">x</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">r</span><span class="p">,</span> <span class="n">x</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">i</span>
<span class="go">(3.0, -4.5)</span></pre></div></div></div><div><br></div><h4 id="blogTitle28">实例对象</h4><div><span style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255);">任意类的实例通过在所属类中定义&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__call__" title="object.__call__" style="font-size: 16px; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__call__()</span></code></a><span style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;方法即能成为可调用的对象。</span>&nbsp;<br></div><div><br></div><div><p class="first" id="index-49" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); hyphens: auto; line-height: 22.4px; margin-top: 0px !important;">对象是由&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;协作构造完成的 (由&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>&nbsp;创建，并由&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;定制)，所以&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;返回的值只能是&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>，否则会在运行时引发&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError" title="TypeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">TypeError</span></code></a>。<br></p><p class="first" id="index-49" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); hyphens: auto; line-height: 22.4px; margin-top: 0px !important;">类实例可通过调用类对象来创建 (见上文)。每个类实例都有通过一个字典对象实现的独立命名空间，属性引用会首先在此字典中查找。当未在其中发现某个属性，而实例对应的类中有该属性时，会继续在类属性中查找。如果找到的类属性为一个用户定义函数对象，它会被转化为实例方法对象，其&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__self__</span></code>&nbsp;属性即该实例。静态方法和类方法对象也会被转化；参见上文 “Classes” 一节。要了解其他通过类实例来获取相应类属性的方式可参见&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#descriptors" style="color: rgb(99, 99, 187); text-decoration-line: none;">实现描述器</a>&nbsp;一节，这样得到的属性可能与实际存放于类的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#object.__dict__" title="object.__dict__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code></a>&nbsp;中的对象不同。如果未找到类属性，而对象对应的类具有&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getattr__" title="object.__getattr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattr__()</span></code></a>&nbsp;方法，则会调用该方法来满足查找要求。</p><p id="index-50" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">属性赋值和删除会更新实例的字典，但不会更新对应类的字典。如果类具有&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__setattr__" title="object.__setattr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__setattr__()</span></code></a>&nbsp;或&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__delattr__" title="object.__delattr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__delattr__()</span></code></a>&nbsp;方法，则将调用方法而不再直接更新实例的字典。</p><p id="index-51" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">如果类实例具有某些特殊名称的方法，就可以伪装为数字、序列或映射。参见&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#specialnames" style="color: rgb(99, 99, 187); text-decoration-line: none;">特殊方法名称</a>&nbsp;一节。</p><p class="last" id="index-52" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">特殊属性:&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#object.__dict__" title="object.__dict__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code></a>&nbsp;为属性字典;&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#instance.__class__" title="instance.__class__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__class__</span></code></a>&nbsp;为实例对应的类。</p></div><h5 id="blogTitle29">属性引用</h5><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><span style="color: rgb(34, 34, 34);">现在我们可以用实例对象做什么？</span><font color="#ff0000"><b>实例对象理解的唯一操作是属性引用</b></font><font color="#222222">。有两种有效的属性名称，数据属性和方法。</font></p><h6 id="blogTitle30">实例数据属性</h6><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><em>data attributes</em>&nbsp;correspond to “instance variables” in Smalltalk, and to “data members” in C++. Data attributes need not be declared; like local variables, they spring into existence when they are first assigned to. For example, if&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span></code>&nbsp;is the instance of&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MyClass&nbsp;</span></code>created above, the following piece of code will print the value&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">16</span></code>, without leaving a trace:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="n">x</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">counter</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="mi" style="color: rgb(32, 128, 80);">1</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">while</span> <span class="n">x</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">counter</span> <span class="o" style="color: rgb(102, 102, 102);">&lt;</span> <span class="mi" style="color: rgb(32, 128, 80);">10</span><span class="p">:</span>
    <span class="n">x</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">counter</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">x</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">counter</span> <span class="o" style="color: rgb(102, 102, 102);">*</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span>
<span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">x</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">counter</span><span class="p">)</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">del</span> <span class="n">x</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">counter</span></pre></div></div><h6 id="blogTitle31">实例方法属性</h6><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The other kind of instance attribute reference is a&nbsp;<em>method</em>. A method is a function that “belongs to” an object. (In Python, the term method is not unique to class instances: other object types can have methods as well. For example, list objects have methods called append, insert, remove, sort, and so on. However, in the following discussion, we’ll use the term method exclusively to mean methods of class instance objects, unless explicitly stated otherwise.)</p><p id="index-0" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Valid method names of an instance object depend on its class. By definition, all attributes of a class that are function objects define corresponding methods of its instances. So in our example,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.f</span></code>&nbsp;is a valid method reference, since&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MyClass.f</span></code>&nbsp;is a function, but&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.i</span></code>&nbsp;is not, since&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MyClass.i</span></code>&nbsp;is not. But&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.f</span></code>&nbsp;is not the same thing as&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MyClass.f</span></code>&nbsp;— it is a&nbsp;<em>method object</em>, not a function object.</p></div><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><br></p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">通常，方法在绑定后立即调用:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="n">x</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">f</span><span class="p">()</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">In the&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MyClass</span></code>&nbsp;example, this will return the string&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">'hello</span>&nbsp;<span class="pre" style="hyphens: none;">world'</span></code>. However, it is not necessary to call a method right away:&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.f</span></code>&nbsp;is a method object, and can be stored away and called at a later time. For example:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="n">xf</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">x</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">f</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">while</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">True</span><span class="p">:</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">xf</span><span class="p">())</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">将继续打印&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">hello</span>&nbsp;<span class="pre" style="hyphens: none;">world</span></code>，直到结束。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">What exactly happens when a method is called? You may have noticed that&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.f()</span></code>&nbsp;was called without an argument above, even though the function definition for&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">f()</span></code>&nbsp;specified an argument. What happened to the argument? Surely Python raises an exception when a function that requires an argument is called without any — even if the argument isn’t actually used…</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Actually, you may have guessed the answer: the special thing about methods is that the instance object is passed as the first argument of the function. In our example, the call&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.f()</span></code>&nbsp;is exactly equivalent to&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MyClass.f(x)</span></code>. In general, calling a method with a list of&nbsp;<em>n</em>&nbsp;arguments is equivalent to calling the corresponding function with an argument list that is created by inserting the method’s instance object before the first argument.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">If you still don’t understand how methods work, a look at the implementation can perhaps clarify matters. When a non-data attribute of an instance is referenced, the instance’s class is searched. If the name denotes a valid class attribute that is a function object, a method object is created by packing (pointers to) the instance object and the function object just found together in an abstract object: this is the method object. When the method object is called with an argument list, a new argument list is constructed from the instance object and the argument list, and the function object is called with this new argument list.</p></div><div><p class="first" id="index-35" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); hyphens: auto; line-height: 22.4px; margin-top: 0px !important;">实例方法用于结合类、类实例和任何可调用对象 (通常为用户定义函数)。</p><p id="index-36" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">特殊的只读属性:&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__self__</span></code>&nbsp;为类实例对象本身，<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__func__</span></code>&nbsp;为函数对象；<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__doc__</span></code>&nbsp;为方法的文档 (与&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__func__.__doc__</span></code>&nbsp;作用相同)；<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#definition.__name__" title="definition.__name__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__name__</span></code></a>&nbsp;为方法名称 (与&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__func__.__name__</span></code>&nbsp;作用相同)；<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__module__</span></code>&nbsp;为方法所属模块的名称，没有则为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>。</p><p style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">方法还支持获取 (但不能设置) 下层函数对象的任意函数属性。</p><p style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">用户定义方法对象可在获取一个类的属性时被创建 (也可能通过该类的一个实例)，如果该属性为用户定义函数对象或类方法对象。</p><p style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">当通过从类实例获取一个用户定义函数对象的方式创建一个实例方法对象时，类实例对象的&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__self__</span></code>&nbsp;属性即为该实例，并会绑定方法对象。该新建方法的&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__func__</span></code>&nbsp;属性就是原来的函数对象。</p><p style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">当通过从类或实例获取另一个方法对象的方式创建一个用户定义方法对象时，其行为将等同于一个函数对象，例外的只有新实例的&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__func__</span></code>&nbsp;属性将不是原来的方法对象，而是其&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__func__</span></code>&nbsp;属性。</p><p style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">当通过从类或实例获取一个类方法对象的方式创建一个实例对象时，实例对象的&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__self__</span></code>&nbsp;属性为该类本身，其&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__func__</span></code>&nbsp;属性为类方法对应的下层函数对象。</p><p style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">当一个实例方法对象被调用时，会调用对应的下层函数 (<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__func__</span></code>)，并将类实例 (<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__self__</span></code>) 插入参数列表的开头。例如，当&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C</span></code>&nbsp;是一个包含了&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">f()</span></code>&nbsp;函数定义的类，而&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span></code>&nbsp;是&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C</span></code>&nbsp;的一个实例，则调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.f(1)</span></code>&nbsp;就等同于调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C.f(x,</span><span class="pre" style="hyphens: none;">1)</span></code>。</p><p style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">当一个实例方法对象是衍生自一个类方法对象时，保存在&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__self__</span></code>&nbsp;中的 “类实例” 实际上会是该类本身，因此无论是调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.f(1)</span></code>&nbsp;还是&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C.f(1)</span></code>&nbsp;都等同于调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">f(C,1)</span></code>，其中&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">f</span></code>&nbsp;为对应的下层函数。</p><p class="last" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">请注意从函数对象到实例方法对象的变换会在每一次从实例获取属性时发生。在某些情况下，一种高效的优化方式是将属性赋值给一个本地变量并调用该本地变量。还要注意这样的变换只发生于用户定义函数；其他可调用对象 (以及所有不可调用对象) 在被获取时都不会发生变换。还有一个需要关注的要点是作为一个类实例属性的用户定义函数不会被转换为绑定方法；这样的变换&nbsp;<em>仅当</em>&nbsp;函数是类属性时才会发生。</p></div><h3 id="blogTitle32">类变量和实例变量</h3><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">一般来说，实例变量用于每个实例的唯一数据，而类变量用于类的所有实例共享的属性和方法:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Dog</span><span class="p">:</span>

    <span class="n">kind</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="s1" style="color: rgb(64, 112, 160);">'canine'</span>         <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># class variable shared by all instances</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">name</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">name</span>    <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># instance variable unique to each instance</span>

<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">Dog</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'Fido'</span><span class="p">)</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">e</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">Dog</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'Buddy'</span><span class="p">)</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">kind</span>                  <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># shared by all dogs</span>
<span class="s1" style="color: rgb(64, 112, 160);">'canine'</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">e</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">kind</span>                  <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># shared by all dogs</span>
<span class="s1" style="color: rgb(64, 112, 160);">'canine'</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">name</span>                  <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># unique to d</span>
<span class="s1" style="color: rgb(64, 112, 160);">'Fido'</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">e</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">name</span>                  <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># unique to e</span>
<span class="s1" style="color: rgb(64, 112, 160);">'Buddy'</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Shared data can have possibly surprising effects with involving&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-mutable" style="color: rgb(99, 99, 187); text-decoration-line: none;">mutable</a>&nbsp;objects such as lists and dictionaries. For example, the&nbsp;<em>tricks</em>&nbsp;list in the following code should not be used as a class variable because just a single list would be shared by all&nbsp;<em>Dog</em>&nbsp;instances:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Dog</span><span class="p">:</span>

    <span class="n">tricks</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[]</span>             <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># mistaken use of a class variable</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">name</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">name</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">add_trick</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">trick</span><span class="p">):</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">tricks</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">append</span><span class="p">(</span><span class="n">trick</span><span class="p">)</span>

<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">Dog</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'Fido'</span><span class="p">)</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">e</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">Dog</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'Buddy'</span><span class="p">)</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">add_trick</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'roll over'</span><span class="p">)</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">e</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">add_trick</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'play dead'</span><span class="p">)</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">tricks</span>                <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># unexpectedly shared by all dogs</span>
<span class="p">[</span><span class="s1" style="color: rgb(64, 112, 160);">'roll over'</span><span class="p">,</span> <span class="s1" style="color: rgb(64, 112, 160);">'play dead'</span><span class="p">]</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">正确的类设计应该使用实例变量:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Dog</span><span class="p">:</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">name</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">name</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">tricks</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[]</span>    <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># creates a new empty list for each dog</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">add_trick</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">trick</span><span class="p">):</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">tricks</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">append</span><span class="p">(</span><span class="n">trick</span><span class="p">)</span>

<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">Dog</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'Fido'</span><span class="p">)</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">e</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">Dog</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'Buddy'</span><span class="p">)</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">add_trick</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'roll over'</span><span class="p">)</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">e</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">add_trick</span><span class="p">(</span><span class="s1" style="color: rgb(64, 112, 160);">'play dead'</span><span class="p">)</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">tricks</span>
<span class="p">[</span><span class="s1" style="color: rgb(64, 112, 160);">'roll over'</span><span class="p">]</span>
<span class="o" style="color: rgb(102, 102, 102);">&gt;&gt;&gt;</span> <span class="n">e</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">tricks</span>
<span class="p">[</span><span class="s1" style="color: rgb(64, 112, 160);">'play dead'</span><span class="p">]</span></pre></div></div></div><div><br></div><h4 id="blogTitle33">类变量</h4><p>类变量是和类相关联的。</p><p>类变量的正确访问方式：</p><p></p><ul><li><b style="background-color: yellow;">类名.类变量</b><br></li><li>或者在实例方法中通过 <b style="background-color: yellow;">self.__class__.类变量</b> 访问<br></li></ul><p></p><div><h5 id="blogTitle34">私有变量</h5><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">“Private” instance variables that cannot be accessed except from inside an object don’t exist in Python. However, there is a convention that is followed by most Python code: a name prefixed with an underscore (e.g.&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">_spam</span></code>) should be treated as a non-public part of the API (whether it is a function, a method or a data member). It should be considered an implementation detail and subject to change without notice.</p><p id="index-1" style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Since there is a valid use-case for class-private members (namely to avoid name clashes of names with names defined by subclasses), there is limited support for such a mechanism, called&nbsp;<em class="dfn">name mangling</em>. Any identifier of the form&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__spam</span></code>&nbsp;(at least two leading underscores, at most one trailing underscore) is textually replaced with&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">_classname__spam</span></code>, where&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">classname</span></code>&nbsp;is the current class name with leading underscore(s) stripped. This mangling is done without regard to the syntactic position of the identifier, as long as it occurs within the definition of a class.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">名称修改有助于让子类重载方法而不破坏类内方法调用。例如:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Mapping</span><span class="p">:</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">):</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">items_list</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[]</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">__update</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">update</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">item</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="n">iterable</span><span class="p">:</span>
            <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">items_list</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="n">__update</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">update</span>   <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># private copy of original update() method</span>

<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">MappingSubclass</span><span class="p">(</span><span class="n">Mapping</span><span class="p">):</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">update</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># provides new signature for update()</span>
        <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># but does not break __init__()</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">for</span> <span class="n">item</span> <span class="ow" style="color: rgb(0, 112, 32); font-weight: bold;">in</span> <span class="nb" style="color: rgb(0, 112, 32);">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
            <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">items_list</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The above example would work even if&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MappingSubclass</span></code>&nbsp;were to introduce a&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__update&nbsp;</span></code>identifier since it is replaced with&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">_Mapping__update</span></code>&nbsp;in the&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">Mapping</span></code>&nbsp;class and&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">_MappingSubclass__update</span></code>&nbsp;in the&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MappingSubclass</span></code>&nbsp;class respectively.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">请注意，修剪规则主要是为了避免事故; 它仍然可以访问或修改被视为私有的变量。这在特殊情况下甚至可能很有用，例如在调试器中。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Notice that code passed to&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">exec()</span></code>&nbsp;or&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">eval()</span></code>&nbsp;does not consider the classname of the invoking class to be the current class; this is similar to the effect of the&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">global&nbsp;</span></code>statement, the effect of which is likewise restricted to code that is byte-compiled together. The same restriction applies to&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">getattr()</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">setattr()</span></code>&nbsp;and&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">delattr()</span></code>, as well as when referencing&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code>&nbsp;directly.</p></div></div><h4 id="blogTitle35">实例变量</h4><p>实例变量是和实例相关联的。有以下两种来源：</p><h5 id="blogTitle36">实例属性的动态增删</h5><h5 id="blogTitle37">类定义的构造函数 __init__ 中通过 self 设置的</h5><h4 id="blogTitle38">补充说明</h4><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Data attributes override method attributes with the same name; to avoid accidental name conflicts, which may cause hard-to-find bugs in large programs, it is wise to use some kind of convention that minimizes the chance of conflicts. Possible conventions include capitalizing method names, prefixing data attribute names with a small unique string (perhaps just an underscore), or using verbs for methods and nouns for data attributes.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Data attributes may be referenced by methods as well as by ordinary users (“clients”) of an object. In other words, classes are not usable to implement pure abstract data types. In fact, nothing in Python makes it possible to enforce data hiding — it is all based upon convention. (On the other hand, the Python implementation, written in C, can completely hide implementation details and control access to an object if necessary; this can be used by extensions to Python written in C.)</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Clients should use data attributes with care — clients may mess up invariants maintained by the methods by stamping on their data attributes. Note that clients may add data attributes of their own to an instance object without affecting the validity of the methods, as long as name conflicts are avoided — again, a naming convention can save a lot of headaches here.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">There is no shorthand for referencing data attributes (or other methods!) from within methods. I find that this actually increases the readability of methods: there is no chance of confusing local variables and instance variables when glancing through a method.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Often, the first argument of a method is called&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self</span></code>. This is nothing more than a convention: the name&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self</span></code>&nbsp;has absolutely no special meaning to Python. Note, however, that by not following the convention your code may be less readable to other Python programmers, and it is also conceivable that a&nbsp;<em>class browser</em>&nbsp;program might be written that relies upon such a convention.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Any function object that is a class attribute defines a method for instances of that class. It is not necessary that the function definition is textually enclosed in the class definition: assigning a function object to a local variable in the class is also ok. For example:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># Function defined outside the class</span>
<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">f1</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="nb" style="color: rgb(0, 112, 32);">min</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o" style="color: rgb(102, 102, 102);">+</span><span class="n">y</span><span class="p">)</span>

<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">C</span><span class="p">:</span>
    <span class="n">f</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">f1</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">g</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="s1" style="color: rgb(64, 112, 160);">'hello world'</span>

    <span class="n">h</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">g</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Now&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">f</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">g</span></code>&nbsp;and&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">h</span></code>&nbsp;are all attributes of class&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C</span></code>&nbsp;that refer to function objects, and consequently they are all methods of instances of&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">C</span></code>&nbsp;—&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">h</span></code>&nbsp;being exactly equivalent to&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">g</span></code>. Note that this practice usually only serves to confuse the reader of a program.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">方法可以通过使用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self</span></code>&nbsp;参数的方法属性调用其他方法:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Bag</span><span class="p">:</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">data</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="p">[]</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">add</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">data</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">addtwice</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Methods may reference global names in the same way as ordinary functions. The global scope associated with a method is the module containing its definition. (A class is never used as a global scope.) While one rarely encounters a good reason for using global data in a method, there are many legitimate uses of the global scope: for one thing, functions and modules imported into the global scope can be used by methods, as well as functions and classes defined in it. Usually, the class containing the method is itself defined in this global scope, and in the next section we’ll find some good reasons why a method would want to reference its own class.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">每个值都是一个对象，因此具有&nbsp;<em>class</em>&nbsp;（也称为&nbsp;<em>type</em>）。它存储在&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object</span>&nbsp;<span class="pre" style="hyphens: none;">.__</span>&nbsp;<span class="pre" style="hyphens: none;">class__</span></code>。</p></div></div><h3 id="blogTitle39">方法</h3><div><br></div><pre>class MyClass:
    def instance_method(self):
        return 'instance method called', self

    @classmethod
    def class_method(cls):
        return 'class method called', cls

    @staticmethod
    def static_method():
        return 'static method called'<br></pre><pre>&gt;&gt;&gt; obj = MyClass()

&gt;&gt;&gt; obj.instance_method()
('instance method called', &lt;demo.MyClass object at 0x10e7f0e80&gt;)
&gt;&gt;&gt; MyClass.instance_method()
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: instance_method() missing 1 required positional argument: 'self'
&gt;&gt;&gt; MyClass.instance_method(obj)
('instance method called', &lt;demo.MyClass object at 0x10e7f0e80&gt;)

&gt;&gt;&gt; obj.class_method()
('class method called', &lt;class 'demo.MyClass'&gt;)
&gt;&gt;&gt; MyClass.class_method()
('class method called', &lt;class 'demo.MyClass'&gt;)

&gt;&gt;&gt; obj.static_method()
'static method called'
&gt;&gt;&gt; MyClass.static_method()
'static method called'<br></pre><div><h4 id="blogTitle40">实例方法</h4><div>在类的定义中，没有加 @staticmethod 或 @classmethod 的方法</div></div><div><br></div><div><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.125rem; color: rgb(34, 34, 34); font-family: &quot;source sans pro&quot;, -apple-system, system-ui, &quot;segoe ui&quot;, Roboto, &quot;helvetica neue&quot;, Arial, sans-serif, &quot;apple color emoji&quot;, &quot;segoe ui emoji&quot;, &quot;segoe ui symbol&quot;; font-size: 18px; background-color: rgb(255, 255, 255);">The first method on&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">MyClass</code>, called&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">instance_method</code>, is a regular&nbsp;<em style="box-sizing: border-box;">instance method</em>. That’s the basic, no-frills method type you’ll use most of the time. You can see the method takes one parameter,&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">self</code>, which points to an instance of&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">MyClass</code>&nbsp;when the method is called (but of course instance methods can accept more than just one parameter).</p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.125rem; color: rgb(34, 34, 34); font-family: &quot;source sans pro&quot;, -apple-system, system-ui, &quot;segoe ui&quot;, Roboto, &quot;helvetica neue&quot;, Arial, sans-serif, &quot;apple color emoji&quot;, &quot;segoe ui emoji&quot;, &quot;segoe ui symbol&quot;; font-size: 18px; background-color: rgb(255, 255, 255);">Through the&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">self</code>&nbsp;parameter, instance methods can freely access attributes and other methods on the same object. This gives them a lot of power when it comes to modifying an object’s state.</p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.125rem; color: rgb(34, 34, 34); font-family: &quot;source sans pro&quot;, -apple-system, system-ui, &quot;segoe ui&quot;, Roboto, &quot;helvetica neue&quot;, Arial, sans-serif, &quot;apple color emoji&quot;, &quot;segoe ui emoji&quot;, &quot;segoe ui symbol&quot;; font-size: 18px; background-color: rgb(255, 255, 255);">Not only can they modify object state, instance methods can also access the class itself through the&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">self.__class__</code>&nbsp;attribute. This means instance methods can also modify class state.</p></div><h4 id="blogTitle41">类方法</h4><p>@classmethod&nbsp;把一个方法封装成类方法。</p><p>定义时，传入的是类本身 cls，而不是实例 self&nbsp;</p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.125rem; color: rgb(34, 34, 34); font-family: &quot;source sans pro&quot;, -apple-system, system-ui, &quot;segoe ui&quot;, Roboto, &quot;helvetica neue&quot;, Arial, sans-serif, &quot;apple color emoji&quot;, &quot;segoe ui emoji&quot;, &quot;segoe ui symbol&quot;; font-size: 18px; background-color: rgb(255, 255, 255);">Let’s compare that to the second method,&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">MyClass.class_method</code>. I marked this method with a&nbsp;<a href="https://docs.python.org/3/library/functions.html#classmethod" style="box-sizing: border-box; color: rgb(54, 118, 171); text-decoration-line: none; background-color: transparent;"><code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; color: inherit; word-break: break-word;">@classmethod</code></a>&nbsp;decorator to flag it as a&nbsp;<em style="box-sizing: border-box;">class method</em>.</p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.125rem; color: rgb(34, 34, 34); font-family: &quot;source sans pro&quot;, -apple-system, system-ui, &quot;segoe ui&quot;, Roboto, &quot;helvetica neue&quot;, Arial, sans-serif, &quot;apple color emoji&quot;, &quot;segoe ui emoji&quot;, &quot;segoe ui symbol&quot;; font-size: 18px; background-color: rgb(255, 255, 255);">Instead of accepting a&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">self</code>&nbsp;parameter, class methods take a&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">cls</code>&nbsp;parameter that points to the class—and not the object instance—when the method is called.</p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.125rem; color: rgb(34, 34, 34); font-family: &quot;source sans pro&quot;, -apple-system, system-ui, &quot;segoe ui&quot;, Roboto, &quot;helvetica neue&quot;, Arial, sans-serif, &quot;apple color emoji&quot;, &quot;segoe ui emoji&quot;, &quot;segoe ui symbol&quot;; font-size: 18px; background-color: rgb(255, 255, 255);">Because the class method only has access to this&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">cls</code>&nbsp;argument, it can’t modify object instance state. That would require access to&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">self</code>. However, class methods can still modify class state that applies across all instances of the class.</p><pre>Help on class classmethod in module builtins:

class classmethod(object)
 |  classmethod(function) -&gt; method
 |
 |  Convert a function to be a class method.
 |
 |  A class method receives the class as implicit first argument,
 |  just like an instance method receives the instance.
 |  To declare a class method, use this idiom:
 |
 |    class C:
 |        @classmethod
 |        def f(cls, arg1, arg2, ...):
 |            ...
 |
 |  It can be called either on the class (e.g. C.f()) or on an instance
 |  (e.g. C().f()).  The instance is ignored except for its class.
 |  If a class method is called for a derived class, the derived class
 |  object is passed as the implied first argument.
 |
 |  Class methods are different than C++ or Java static methods.
 |  If you want those, see the staticmethod builtin.
 |
 |  Methods defined here:
 |
 |  __get__(self, instance, owner, /)
 |      Return an attribute of instance, which is of type owner.
 |
 |  __init__(self, /, *args, **kwargs)
 |      Initialize self.  See help(type(self)) for accurate signature.
 |
 |  ----------------------------------------------------------------------
 |  Static methods defined here:
 |
 |  __new__(*args, **kwargs) from builtins.type
 |      Create and return a new object.  See help(type) for accurate signature.
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |
 |  __dict__
 |
 |  __func__
 |
 |  __isabstractmethod__<br></pre><p><br></p><h4 id="blogTitle42">静态方法</h4><p>@staticmethod&nbsp;把一个方法封装成静态方法。</p><p>和普通函数没有什么区别，定义时，不需要传 self 或 cls</p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.125rem; color: rgb(34, 34, 34); font-family: &quot;source sans pro&quot;, -apple-system, system-ui, &quot;segoe ui&quot;, Roboto, &quot;helvetica neue&quot;, Arial, sans-serif, &quot;apple color emoji&quot;, &quot;segoe ui emoji&quot;, &quot;segoe ui symbol&quot;; font-size: 18px; background-color: rgb(255, 255, 255);">The third method,&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">MyClass.static_method</code>&nbsp;was marked with a&nbsp;<code style="box-sizing: border-box; color: inherit; text-decoration-line: none; background-color: transparent; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;"><a href="https://docs.python.org/3/library/functions.html#staticmethod" style="box-sizing: border-box; color: rgb(54, 118, 171); text-decoration-line: none; background-color: transparent;">@staticmethod</a>&nbsp;</code>decorator to flag it as a&nbsp;<em style="box-sizing: border-box;">static method</em>.</p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.125rem; color: rgb(34, 34, 34); font-family: &quot;source sans pro&quot;, -apple-system, system-ui, &quot;segoe ui&quot;, Roboto, &quot;helvetica neue&quot;, Arial, sans-serif, &quot;apple color emoji&quot;, &quot;segoe ui emoji&quot;, &quot;segoe ui symbol&quot;; font-size: 18px; background-color: rgb(255, 255, 255);">This type of method takes neither a&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">self</code>&nbsp;nor a&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">cls</code>&nbsp;parameter (but of course it’s free to accept an arbitrary number of other parameters).</p><p style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.125rem; color: rgb(34, 34, 34); font-family: &quot;source sans pro&quot;, -apple-system, system-ui, &quot;segoe ui&quot;, Roboto, &quot;helvetica neue&quot;, Arial, sans-serif, &quot;apple color emoji&quot;, &quot;segoe ui emoji&quot;, &quot;segoe ui symbol&quot;; font-size: 18px; background-color: rgb(255, 255, 255);">Therefore a static method can neither modify object state nor class state. Static methods are restricted in what data they can access - and they’re primarily a way to namespace your methods.</p><pre>Help on class staticmethod in module builtins:

class staticmethod(object)
 |  staticmethod(function) -&gt; method
 |
 |  Convert a function to be a static method.
 |
 |  A static method does not receive an implicit first argument.
 |  To declare a static method, use this idiom:
 |
 |       class C:
 |           @staticmethod
 |           def f(arg1, arg2, ...):
 |               ...
 |
 |  It can be called either on the class (e.g. C.f()) or on an instance
 |  (e.g. C().f()).  The instance is ignored except for its class.
 |
 |  Static methods in Python are similar to those found in Java or C++.
 |  For a more advanced concept, see the classmethod builtin.
 |
 |  Methods defined here:
 |
 |  __get__(self, instance, owner, /)
 |      Return an attribute of instance, which is of type owner.
 |
 |  __init__(self, /, *args, **kwargs)
 |      Initialize self.  See help(type(self)) for accurate signature.
 |
 |  ----------------------------------------------------------------------
 |  Static methods defined here:
 |
 |  __new__(*args, **kwargs) from builtins.type
 |      Create and return a new object.  See help(type) for accurate signature.
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |
 |  __dict__
 |
 |  __func__
 |
 |  __isabstractmethod__</pre><h4 id="blogTitle43">区别</h4><div><ul><li>类方法和静态方法不能访问实例方法中定义的实例属性<br></li><li>静态方法不能访问类中的类属性</li></ul></div><div><br></div><div><ul style="box-sizing: border-box; margin-top: 0px; margin-bottom: 1.125rem; font-family: &quot;source sans pro&quot;, -apple-system, system-ui, &quot;segoe ui&quot;, Roboto, &quot;helvetica neue&quot;, Arial, sans-serif, &quot;apple color emoji&quot;, &quot;segoe ui emoji&quot;, &quot;segoe ui symbol&quot;; font-size: 18px; background-color: rgb(255, 255, 255);"><li style="color: rgb(34, 34, 34); box-sizing: border-box; margin-bottom: 0.28125rem;">Instance methods need a class instance and can access the instance through&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">self</code>.</li><li style="color: rgb(34, 34, 34); box-sizing: border-box; margin-bottom: 0.28125rem;">Class methods don’t need a class instance. They can’t access the instance (<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">self</code>) but they have access to the class itself via&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">cls</code>.</li><li style="color: rgb(34, 34, 34); box-sizing: border-box; margin-bottom: 0.28125rem;">Static methods don’t have access to&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">cls</code>&nbsp;or&nbsp;<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; font-size: 14.85px; word-break: break-word;">self</code>. They work like regular functions but belong to the class’s namespace.</li><li style="box-sizing: border-box; margin-bottom: 0.28125rem;"><font color="#ff0000"><b>Static and class methods communicate and (to a certain degree) enforce developer intent about class design. This can have maintenance benefits.</b></font></li></ul></div><div><br></div><h3 id="blogTitle44">属性访问机制</h3><div><p style="margin: 0px; padding: 5px 0px; list-style: none; border: none; font-size: 14px; color: rgb(34, 34, 34); background-color: rgb(253, 253, 253); outline: none; line-height: 30px; font-family: tahoma, arial, &quot;Microsoft YaHei&quot;;">在 Python 中，对于一个对象的属性访问，我们一般采用的是点(.)属性运算符进行操作。例如，有一个类实例对象 foo，它有一个 name 属性，那便可以使用 foo.name 对此属性进行访问。一般而言，点(.)属性运算符比较直观，也是我们经常碰到的一种属性访问方式。</p><p style="margin: 0px; padding: 5px 0px; list-style: none; border: none; font-size: 14px; color: rgb(34, 34, 34); background-color: rgb(253, 253, 253); outline: none; line-height: 30px; font-family: tahoma, arial, &quot;Microsoft YaHei&quot;;">python的提供一系列和属性访问有关的特殊方法： __get__ , __getattr__ , __getattribute__ , __getitem__ 。</p></div><div><br></div><div>一般情况下，通过 __dict__ 属性实现</div><div><br></div><div><p style="margin: 0px; padding: 5px 0px; list-style: none; border: none; font-size: 14px; color: rgb(34, 34, 34); background-color: rgb(253, 253, 253); outline: none; line-height: 30px; font-family: tahoma, arial, &quot;Microsoft YaHei&quot;;">一般情况下，属性访问的默认行为是从对象的字典中获取，并当获取不到时会沿着一定的查找链进行查找。例如 a.x 的查找链就是，从 a.__dict__['x'] ，然后是 type(a).__dict__['x'] ，再通过 type(a) 的基类开始查找。</p><p style="margin: 0px; padding: 5px 0px; list-style: none; border: none; font-size: 14px; color: rgb(34, 34, 34); background-color: rgb(253, 253, 253); outline: none; line-height: 30px; font-family: tahoma, arial, &quot;Microsoft YaHei&quot;;">若查找链都获取不到属性，则抛出 AttributeError 异常。</p></div><div><br></div><h3 id="blogTitle45">成员可见性</h3><div><div>变量可见性</div><div>方法可见性</div></div><h4 id="blogTitle46">公开的</h4><h4 id="blogTitle47">私有的</h4><div>在成员前面加一个双下划线 <i><b style="background-color: yellow;">__</b></i>，Python 会自动将该成员更改为 <b><i style="background-color: yellow;">_类名__成员名</i></b></div><h3 id="blogTitle48">继承的实现</h3><div><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">当然，如果不支持继承，语言特性就不值得称为“类”。派生类定义的语法如下所示:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">DerivedClassName</span><span class="p">(</span><span class="n">BaseClassName</span><span class="p">):</span>
    <span class="o" style="color: rgb(102, 102, 102);">&lt;</span><span class="n">statement</span><span class="o" style="color: rgb(102, 102, 102);">-</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="o" style="color: rgb(102, 102, 102);">&gt;</span>
    <span class="o" style="color: rgb(102, 102, 102);">.</span>
    <span class="o" style="color: rgb(102, 102, 102);">.</span>
    <span class="o" style="color: rgb(102, 102, 102);">.</span>
    <span class="o" style="color: rgb(102, 102, 102);">&lt;</span><span class="n">statement</span><span class="o" style="color: rgb(102, 102, 102);">-</span><span class="n">N</span><span class="o" style="color: rgb(102, 102, 102);">&gt;</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The name&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">BaseClassName</span></code>&nbsp;must be defined in a scope containing the derived class definition. In place of a base class name, other arbitrary expressions are also allowed. This can be useful, for example, when the base class is defined in another module:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">DerivedClassName</span><span class="p">(</span><span class="n">modname</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">BaseClassName</span><span class="p">):</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Execution of a derived class definition proceeds the same as for a base class. When the class object is constructed, the base class is remembered. This is used for resolving attribute references: if a requested attribute is not found in the class, the search proceeds to look in the base class. This rule is applied recursively if the base class itself is derived from some other class.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">There’s nothing special about instantiation of derived classes:&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">DerivedClassName()&nbsp;</span></code>creates a new instance of the class. Method references are resolved as follows: the corresponding class attribute is searched, descending down the chain of base classes if necessary, and the method reference is valid if this yields a function object.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Derived classes may override methods of their base classes. Because methods have no special privileges when calling other methods of the same object, a method of a base class that calls another method defined in the same base class may end up calling a method of a derived class that overrides it. (For C++ programmers: all methods in Python are effectively&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">virtual</span></code>.)</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">An overriding method in a derived class may in fact want to extend rather than simply replace the base class method of the same name. There is a simple way to call the base class method directly: just call&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">BaseClassName.methodname(self,</span>&nbsp;<span class="pre" style="hyphens: none;">arguments)</span></code>. This is occasionally useful to clients as well. (Note that this only works if the base class is accessible as&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">BaseClassName</span></code>&nbsp;in the global scope.)</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Python有两个内置函数同继承一起工作：</p><ul class="simple" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">Use&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#isinstance" title="isinstance" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">isinstance()</span></code></a>&nbsp;to check an instance’s type:&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">isinstance(obj,</span>&nbsp;<span class="pre" style="hyphens: none;">int)</span></code>&nbsp;will be&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">True</span></code>&nbsp;only if&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">obj.__class__</span></code>&nbsp;is&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#int" title="int" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">int</span></code></a>&nbsp;or some class derived from&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#int" title="int" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">int</span></code></a>.</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">Use&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#issubclass" title="issubclass" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">issubclass()</span></code></a>&nbsp;to check class inheritance:&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">issubclass(bool,</span>&nbsp;<span class="pre" style="hyphens: none;">int)</span></code>&nbsp;is&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">True&nbsp;</span></code>since&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#bool" title="bool" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">bool</span></code></a>&nbsp;is a subclass of&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#int" title="int" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">int</span></code></a>. However,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">issubclass(float,</span>&nbsp;<span class="pre" style="hyphens: none;">int)</span></code>&nbsp;is&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">False&nbsp;</span></code>since&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#float" title="float" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">float</span></code></a>&nbsp;is not a subclass of&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#int" title="int" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">int</span></code></a>.</li></ul></div><h4 id="blogTitle49">多重继承</h4><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Python supports a form of multiple inheritance as well. A class definition with multiple base classes looks like this:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">DerivedClassName</span><span class="p">(</span><span class="n">Base1</span><span class="p">,</span> <span class="n">Base2</span><span class="p">,</span> <span class="n">Base3</span><span class="p">):</span>
    <span class="o" style="color: rgb(102, 102, 102);">&lt;</span><span class="n">statement</span><span class="o" style="color: rgb(102, 102, 102);">-</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="o" style="color: rgb(102, 102, 102);">&gt;</span>
    <span class="o" style="color: rgb(102, 102, 102);">.</span>
    <span class="o" style="color: rgb(102, 102, 102);">.</span>
    <span class="o" style="color: rgb(102, 102, 102);">.</span>
    <span class="o" style="color: rgb(102, 102, 102);">&lt;</span><span class="n">statement</span><span class="o" style="color: rgb(102, 102, 102);">-</span><span class="n">N</span><span class="o" style="color: rgb(102, 102, 102);">&gt;</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">For most purposes, in the simplest cases, you can think of the search for attributes inherited from a parent class as depth-first, left-to-right, not searching twice in the same class where there is an overlap in the hierarchy. Thus, if an attribute is not found in&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">DerivedClassName</span></code>, it is searched for in&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">Base1</span></code>, then (recursively) in the base classes of&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">Base1</span></code>, and if it was not found there, it was searched for in&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">Base2</span></code>, and so on.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">In fact, it is slightly more complex than that; the method resolution order changes dynamically to support cooperative calls to&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#super" title="super" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super()</span></code></a>. This approach is known in some other multiple-inheritance languages as call-next-method and is more powerful than the super call found in single-inheritance languages.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Dynamic ordering is necessary because all cases of multiple inheritance exhibit one or more diamond relationships (where at least one of the parent classes can be accessed through multiple paths from the bottommost class). For example, all classes inherit from&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#object" title="object" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object</span></code></a>, so any case of multiple inheritance provides more than one path to reach&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#object" title="object" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object</span></code></a>. To keep the base classes from being accessed more than once, the dynamic algorithm linearizes the search order in a way that preserves the left-to-right ordering specified in each class, that calls each parent only once, and that is monotonic (meaning that a class can be subclassed without affecting the precedence order of its parents). Taken together, these properties make it possible to design reliable and extensible classes with multiple inheritance. For more detail, see<a class="reference external" href="https://www.python.org/download/releases/2.3/mro/" style="color: rgb(99, 99, 187); text-decoration-line: none;">https://www.python.org/download/releases/2.3/mro/</a>.</p></div></div><div><br></div><h4 id="blogTitle50">super</h4><div>super([type[, object-or-type]])<br></div><div><br></div><div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Return a proxy object that delegates method calls to a parent or sibling class of&nbsp;<em>type</em>. This is useful for accessing inherited methods that have been overridden in a class. The search order is same as that used by&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#getattr" title="getattr" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">getattr()</span></code></a>&nbsp;except that the&nbsp;<em>type</em>&nbsp;itself is skipped.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#class.__mro__" title="class.__mro__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__mro__</span></code></a>&nbsp;attribute of the&nbsp;<em>type</em>&nbsp;lists the method resolution search order used by both&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#getattr" title="getattr" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">getattr()</span></code></a>&nbsp;and&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#super" title="super" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super()</span></code></a>. The attribute is dynamic and can change whenever the inheritance hierarchy is updated.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">If the second argument is omitted, the super object returned is unbound. If the second argument is an object,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">isinstance(obj,</span>&nbsp;<span class="pre" style="hyphens: none;">type)</span></code>&nbsp;must be true. If the second argument is a type,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">issubclass(type2,</span>&nbsp;<span class="pre" style="hyphens: none;">type)</span></code>must be true (this is useful for class methods).</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">There are two typical use cases for&nbsp;<em>super</em>. In a class hierarchy with single inheritance,&nbsp;<em>super</em>&nbsp;can be used to refer to parent classes without naming them explicitly, thus making the code more maintainable. This use closely parallels the use of&nbsp;<em>super</em>&nbsp;in other programming languages.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The second use case is to support cooperative multiple inheritance in a dynamic execution environment. This use case is unique to Python and is not found in statically compiled languages or languages that only support single inheritance. This makes it possible to implement “diamond diagrams” where multiple base classes implement the same method. Good design dictates that this method have the same calling signature in every case (because the order of calls is determined at runtime, because that order adapts to changes in the class hierarchy, and because that order can include sibling classes that are unknown prior to runtime).</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">For both use cases, a typical superclass call looks like this:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="overflow-y: hidden; padding: 5px; background-color: rgb(238, 255, 204); color: rgb(51, 51, 51); line-height: 18.528px; border: 1px solid rgb(170, 204, 153); font-family: monospace, sans-serif; font-size: 15.44px;"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">C</span><span class="p">(</span><span class="n">B</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">method</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="nb" style="color: rgb(0, 112, 32);">super</span><span class="p">()</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">method</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>    <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># This does the same thing as:</span>
                               <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># super(C, self).method(arg)</span>
</pre></div></div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Note that&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#super" title="super" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super()</span></code></a>&nbsp;is implemented as part of the binding process for explicit dotted attribute lookups such as&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super().__getitem__(name)</span></code>. It does so by implementing its own&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getattribute__" title="object.__getattribute__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattribute__()</span></code></a>&nbsp;method for searching classes in a predictable order that supports cooperative multiple inheritance. Accordingly,&nbsp;<code class="xref py py-func docutils literal notranslate" style="color: rgb(99, 99, 187); text-decoration-line: none; background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;"><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#super" title="super" style="color: rgb(99, 99, 187); text-decoration-line: none;">super()</a>&nbsp;</span></code>is undefined for implicit lookups using statements or operators such as&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super()[name]</span></code>.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Also note that, aside from the zero argument form,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#super" title="super" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super()</span></code></a>&nbsp;is not limited to use inside methods. The two argument form specifies the arguments exactly and makes the appropriate references. The zero argument form only works inside a class definition, as the compiler fills in the necessary details to correctly retrieve the class being defined, as well as accessing the current instance for ordinary methods.</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">For practical suggestions on how to design cooperative classes using&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#super" title="super" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super()</span></code></a>, see&nbsp;<a class="reference external" href="https://rhettinger.wordpress.com/2011/05/26/super-considered-super/" style="color: rgb(99, 99, 187); text-decoration-line: none;">guide to using super()</a>.</p></div><div><br></div><div><br></div><div><h3 id="blogTitle51">其余琐碎<br></h3><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">有时，使用类似于Pascal “record”或C “struct”的数据类型是有用的，将一些命名数据项捆绑在一起。定义一个空类就很适合:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Employee</span><span class="p">:</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>

<span class="n">john</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">Employee</span><span class="p">()</span>  <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># Create an empty employee record</span>

<span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># Fill the fields of the record</span>
<span class="n">john</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">name</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="s1" style="color: rgb(64, 112, 160);">'John Doe'</span>
<span class="n">john</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">dept</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="s1" style="color: rgb(64, 112, 160);">'computer lab'</span>
<span class="n">john</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">salary</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="mi" style="color: rgb(32, 128, 80);">1000</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">A piece of Python code that expects a particular abstract data type can often be passed a class that emulates the methods of that data type instead. For instance, if you have a function that formats some data from a file object, you can define a class with methods&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">read()</span></code>&nbsp;and&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">readline()</span></code>&nbsp;that get the data from a string buffer instead, and pass it as an argument.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Instance method objects have attributes, too:&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">m.__self__</span></code>&nbsp;is the instance object with the method&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">m()</span></code>, and&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">m.__func__</span></code>&nbsp;is the function object corresponding to the method.</p></div></div><div><div><h2 id="blogTitle52">面向对象高级编程</h2><div>数据封装、继承和多态只是面向对象程序设计中最基础的3个概念。在Python中，面向对象还有很多高级特性，允许我们写出非常强大的功能。<br></div><h3 id="blogTitle53">使用 __slots__</h3><div>Python 允许在定义 class 的时候，定义一个特殊的 __slots__ 变量，来限制该 class 实例能添加的属性<br></div><div><br></div><h3 id="blogTitle54">使用 @property</h3><div>@property 广泛应用在类的定义中，可以让调用者写出简短的代码，同时保证对参数进行必要的检查，这样，程序运行时就减少了出错的可能性。<br></div><div><br></div><div><br></div><h3 id="blogTitle55">多重继承</h3><div>由于 Python 允许使用多重继承，因此，MixIn 就是一种常见的设计。<br></div><div><br></div><div>MixIn 的目的就是给一个类增加多个功能，这样，在设计类的时候，我们优先考虑通过多重继承来组合多个 MixIn 的功能，而不是设计多层次的复杂的继承关系</div><h3 id="blogTitle56">使用枚举类</h3><div><h3 id="blogTitle57">自定义类</h3><h4 id="blogTitle58">通过 type 创建类</h4><div><p id="index-81" style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">默认情况下，类是使用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#type" title="type" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type()</span></code></a>&nbsp;来构建的。类体会在一个新的命名空间内执行，类名会被局部绑定到&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type(name,</span>&nbsp;<span class="pre" style="hyphens: none;">bases,</span>&nbsp;<span class="pre" style="hyphens: none;">namespace)</span></code>&nbsp;的结果。</p></div><h4 id="blogTitle59">通过继承创建类</h4><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">当一个类继承其他类时，那个类的&nbsp;<em>__init_subclass__</em>&nbsp;会被调用。这样就可以编写能够改变子类行为的类。这与类装饰器有紧密的关联，但是类装饰器是影响它们所应用的特定类，而&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init_subclass__</span></code>&nbsp;则只作用于定义了该方法的类所派生的子类。</p><h5 id="blogTitle60" style=""><i>classmethod</i>&nbsp;object.__init_subclass__(cls)</h5><div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">当所在类派生子类时此方法就会被调用。<em>cls</em>&nbsp;将指向新的子类。如果定义为一个普通实例方法，此方法将被隐式地转换为类方法。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">传入一个新类的关键字参数会被传给父类的&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init_subclass__</span></code>。为了与其他使用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init_subclass__</span></code>&nbsp;的类兼容，应当根据需要去掉部分关键字参数再将其余的传给基类，例如:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Philosopher</span><span class="p">:</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__init_subclass__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">cls</span><span class="p">,</span> <span class="n">default_name</span><span class="p">,</span> <span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb" style="color: rgb(0, 112, 32);">super</span><span class="p">()</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">__init_subclass__</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp" style="color: rgb(0, 112, 32);">cls</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">default_name</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">default_name</span>

<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">AustralianPhilosopher</span><span class="p">(</span><span class="n">Philosopher</span><span class="p">,</span> <span class="n">default_name</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="s2" style="color: rgb(64, 112, 160);">"Bruce"</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>
</pre></div></div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;"><code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object.__init_subclass__</span></code>&nbsp;的默认实现什么都不做，只在带任意参数调用时引发一个错误。</p><div class="admonition note" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 3px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; line-height: 22.4px;">注解</p>&nbsp;<p class="last" style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px; display: inline;">元类提示&nbsp;<code class="docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">metaclass</span></code>&nbsp;将被其它类型机制消耗掉，并不会被传给<code class="docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init_subclass__</span></code>&nbsp;的实现。实际的元类（而非显式的提示）可通过&nbsp;<code class="docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type(cls)</span></code>&nbsp;访问。</p></div><div class="versionadded" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">3.6 新版功能.</span></p></div></div><h4 id="blogTitle61">通过元类创建类</h4><div><div><span style="background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; white-space: pre-wrap;">要控制类的创建行为，还可以使用 metaclass。</span><br></div><div><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">metaclass，直译为元类，简单的解释就是：</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">当我们定义了类以后，就可以根据这个类创建出实例，所以：先定义类，然后创建实例。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">但是如果我们想创建出类呢？那就必须根据 metaclass 创建出类，所以：先定义 metaclass，然后创建类。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">连接起来就是：先定义 metaclass，就可以创建类，最后创建实例。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">所以，metaclass 允许你创建类或者修改类。换句话说，你可以把类看成是 metaclass 创建出来的“实例”。</p><h5 id="blogTitle62">元类的作用</h5><p><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">元类的潜在作用非常广泛。已经尝试过的设想包括 ORM、枚举、日志、接口检查、自动委托、自动特征属性创建、代理、框架以及自动资源锁定/同步等等。</span></p></div><h5 id="blogTitle63">metaclass 是类的模板，所以必须从 type 类派生</h5><div><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">我们先看一个简单的例子，这个 metaclass 可以给我们自定义的 MyList 增加一个<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">add</code>方法：</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">定义<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">ListMetaclass</code>，按照默认习惯，metaclass 的类名总是以 Metaclass 结尾，以便清楚地表示这是一个 metaclass：</p><pre style="padding: 10px; background-color: rgb(250, 250, 250); font-size: 12px; font-family: Consolas, monospace, serif; word-break: break-all; line-height: 18px; tab-size: 4; color: rgb(68, 68, 68); margin-top: 15px; margin-bottom: 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; border: 1px solid rgb(221, 221, 221); overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="comment" style="color: rgb(153, 153, 136); font-style: italic;"># metaclass 是类的模板，所以必须从`type`类型派生：</span>
<span class="class" style="color: rgb(68, 85, 136); font-weight: bold;"><span class="keyword" style="color: rgb(51, 51, 51);">class</span> <span class="title">ListMetaclass</span><span class="params">(type)</span>:</span>
    <span class="function"><span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">def</span> <span class="title" style="color: rgb(153, 0, 0); font-weight: bold;">__new__</span><span class="params">(cls, name, bases, attrs)</span>:</span>
        attrs[<span class="string" style="color: rgb(221, 17, 68);">'add'</span>] = <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">lambda</span> self, value: self.append(value)
        <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">return</span> type.__new__(cls, name, bases, attrs)
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">有了 ListMetaclass，我们在定义类的时候还要指示使用ListMetaclass来定制类，传入关键字参数<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">metaclass</code>：</p><pre style="padding: 10px; background-color: rgb(250, 250, 250); font-size: 12px; font-family: Consolas, monospace, serif; word-break: break-all; line-height: 18px; tab-size: 4; color: rgb(68, 68, 68); margin-top: 15px; margin-bottom: 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; border: 1px solid rgb(221, 221, 221); overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="class" style="color: rgb(68, 85, 136); font-weight: bold;"><span class="keyword" style="color: rgb(51, 51, 51);">class</span> <span class="title">MyList</span><span class="params">(list, metaclass=ListMetaclass)</span>:</span>
    <span class="keyword" style="color: rgb(51, 51, 51); font-weight: bold;">pass</span>
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">当我们传入关键字参数<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">metaclass</code>时，魔术就生效了，它指示Python解释器在创建<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">MyList</code>时，要通过<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">ListMetaclass.__new__()</code>来创建，在此，我们可以修改类的定义，比如，加上新的方法，然后，返回修改后的定义。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">__new__()</code>方法接收到的参数依次是：</p><ol style="margin: 15px 0px; padding-left: 30px; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><li><p style="margin: 0px 0px 15px; overflow-wrap: break-word; white-space: pre-wrap;">当前准备创建的类的对象；</p></li><li><p style="margin: 0px 0px 15px; overflow-wrap: break-word; white-space: pre-wrap;">类的名字；</p></li><li><p style="margin: 0px 0px 15px; overflow-wrap: break-word; white-space: pre-wrap;">类继承的父类集合；</p></li><li><p style="margin: 0px 0px 15px; overflow-wrap: break-word; white-space: pre-wrap;">类的方法集合。</p></li></ol><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">测试一下<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">MyList</code>是否可以调用<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">add()</code>方法：</p><pre style="padding: 10px; background-color: rgb(250, 250, 250); font-size: 12px; font-family: Consolas, monospace, serif; word-break: break-all; line-height: 18px; tab-size: 4; color: rgb(68, 68, 68); margin-top: 15px; margin-bottom: 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; border: 1px solid rgb(221, 221, 221); overflow-wrap: break-word; white-space: pre-wrap;"><code class="python"><span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>L = MyList()
<span class="prompt" style="color: rgb(153, 0, 115);">&gt;&gt;&gt; </span>L.add(<span class="number" style="color: rgb(0, 153, 153);">1</span>)
&gt;&gt; L
[<span class="number" style="color: rgb(0, 153, 153);">1</span>]
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">而普通的<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">list</code>没有<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">add()</code>方法：</p><pre style="padding: 10px; background-color: rgb(250, 250, 250); font-size: 12px; font-family: Consolas, monospace, serif; word-break: break-all; line-height: 18px; tab-size: 4; color: rgb(68, 68, 68); margin-top: 15px; margin-bottom: 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; border: 1px solid rgb(221, 221, 221); overflow-wrap: break-word; white-space: pre-wrap;"><code class="xml">&gt;&gt;&gt; L2 = list()
&gt;&gt;&gt; L2.add(1)
Traceback (most recent call last):
  File "<span class="tag" style="color: rgb(0, 0, 128);">&lt;<span class="title">stdin</span>&gt;</span>", line 1, in <span class="tag" style="color: rgb(0, 0, 128);">&lt;<span class="title">module</span>&gt;</span>
AttributeError: 'list' object has no attribute 'add'
</code></pre><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">动态修改有什么意义？直接在<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">MyList</code>定义中写上<code style="font-size: 12px; font-family: Consolas, monospace, serif; color: rgb(221, 0, 85); white-space: nowrap; padding: 0px 4px; border: 1px solid rgb(221, 221, 221); border-radius: 3px; background: rgb(250, 250, 250);">add()</code>方法不是更简单吗？正常情况下，确实应该直接写，通过 metaclass 修改纯属变态。</p><p style="margin: 15px 0px; overflow-wrap: break-word; white-space: pre-wrap; color: rgb(102, 102, 102); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">但总会有用到的地方，比如 ORM 的实现。</p></div></div><p id="index-81" style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">类创建过程可通过在定义行传入&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">metaclass</span></code>&nbsp;关键字参数，或是通过继承一个包含此参数的现有类来进行定制。在以下示例中，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MyClass</span></code>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MySubclass</span></code>&nbsp;都是&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">Meta</span></code>&nbsp;的实例:<br></p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Meta</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">type</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>

<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">MyClass</span><span class="p">(</span><span class="n">metaclass</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">Meta</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>

<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">MySubclass</span><span class="p">(</span><span class="n">MyClass</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>
</pre></div></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">在类定义内指定的任何其他关键字参数都会在下面所描述的所有元类操作中进行传递。</p><h3 style="hyphens: auto; line-height: 22.4px;" id="blogTitle64">类定义的执行过程</h3><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">当一个类定义被执行时，将发生以下步骤:</p><ul class="simple" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">解析 MRO 条目</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">确定适当的元类</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">准备类命名空间</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">执行类主体</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">创建类对象</li></ul><h4 id="blogTitle65">解析 MRO 条目</h4><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">如果在类定义中出现的基类不是&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#type" title="type" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type</span></code></a>&nbsp;的实例，则使用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__mro_entries__</span></code>&nbsp;方法对其进行搜索，当找到结果时，它会以原始基类元组做参数进行调用。此方法必须返回类的元组以替代此基类被使用。元组可以为空，在此情况下原始基类将被忽略。</p><div class="admonition seealso" style="font-size: 16px; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(255, 255, 204); border: 1px solid rgb(221, 221, 102); border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; text-align: justify; line-height: 22.4px;">参见</p>&nbsp;<p class="last" style="hyphens: auto; text-align: justify; line-height: 22.4px; margin-bottom: 5px; display: inline;"><span class="target" id="index-115"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0560" style="color: rgb(99, 99, 187); text-decoration-line: none;"><strong>PEP 560</strong></a>&nbsp;- 对类型模块和泛型类型的核心支持</p></div><h4 id="blogTitle66">确定适当的元类</h4><p id="index-83" style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">为一个类定义确定适当的元类是根据以下规则:</p><ul class="simple" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">如果没有给出基类也没有显式元类，则使用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#type" title="type" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type()</span></code></a></li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">如果给出一个显式元类而且&nbsp;<em>不是</em>&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#type" title="type" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type()</span></code></a>&nbsp;的实例，则其会被直接用作元类</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">如果给出一个&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#type" title="type" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type()</span></code></a>&nbsp;的实例作为显式元类，或是定义了基类，则使用最近派生的元类</li></ul><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">最近派生的元类会从显式指定的元类（如果有）以及所有指定的基类的元类（即&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type(cls)</span></code>）中选取。最近派生的元类应为&nbsp;<em>所有</em>&nbsp;这些候选元类的一个子类型。如果没有一个候选元类符合该条件，则类定义将失败并抛出&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">TypeError</span></code>。</p><h4 id="blogTitle67">准备类命名空间</h4><p id="index-84" style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">一旦适当的元类被确定，则类命名空间将会准备好。如果元类具有&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__prepare__</span></code>&nbsp;属性，它会以&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">namespace</span>&nbsp;<span class="pre" style="hyphens: none;">=</span>&nbsp;<span class="pre" style="hyphens: none;">metaclass.__prepare__(name,</span>&nbsp;<span class="pre" style="hyphens: none;">bases,</span>&nbsp;<span class="pre" style="hyphens: none;">**kwds)</span></code>的形式被调用（其中如果有附加的关键字参数，应来自类定义）。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">如果元类没有&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__prepare__</span></code>&nbsp;属性，则类命名空间将初始化为一个空的有序映射。</p><div class="admonition seealso" style="font-size: 16px; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(255, 255, 204); border: 1px solid rgb(221, 221, 102); border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; text-align: justify; line-height: 22.4px;">参见</p><dl class="last docutils" style="margin-bottom: 0px;"><dt style="font-weight: bold;"><span class="target" id="index-116"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3115" style="color: rgb(99, 99, 187); text-decoration-line: none;">PEP 3115</a>&nbsp;- Python 3000 中的元类</dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;">引入&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__prepare__</span></code>&nbsp;命名空间钩子</dd></dl></div><h4 id="blogTitle68">执行类主体</h4><p id="index-86" style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">类主体会以（类似于）&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">exec(body,</span>&nbsp;<span class="pre" style="hyphens: none;">globals(),</span>&nbsp;<span class="pre" style="hyphens: none;">namespace)</span></code>&nbsp;的形式被执行。普通调用与&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#exec" title="exec" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">exec()</span></code></a>&nbsp;的关键区别在于当类定义发生于函数内部时，词法作用域允许类主体（包括任何方法）引用来自当前和外部作用域的名称。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">但是，即使当类定义发生于函数内部时，在类内部定义的方法仍然无法看到在类作用域层次上定义的名称。类变量必须通过实例的第一个形参或类方法来访问，或者是通过下一节中描述的隐式词法作用域的&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__class__</span></code>&nbsp;引用。</p><h4 id="blogTitle69">创建类对象</h4><p id="index-87" style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">一旦执行类主体完成填充类命名空间，将通过调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">metaclass(name,</span>&nbsp;<span class="pre" style="hyphens: none;">bases,&nbsp;</span><span class="pre" style="hyphens: none;">namespace,</span>&nbsp;<span class="pre" style="hyphens: none;">**kwds)</span></code>&nbsp;创建类对象（此处的附加关键字参数与传入&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__prepare__</span></code>的相同）。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">如果类主体中有任何方法引用了&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__class__</span></code>&nbsp;或&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super</span></code>，这个类对象会通过零参数形式的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#super" title="super" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super()</span></code></a>.&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__class__</span></code>&nbsp;所引用，这是由编译器所创建的隐式闭包引用。这使用零参数形式的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#super" title="super" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super()</span></code></a>&nbsp;能够正确标识正在基于词法作用域来定义的类，而被用于进行当前调用的类或实例则是基于传递给方法的第一个参数来标识的。</p><div class="impl-detail compound" style="font-size: 16px; border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><p style="hyphens: auto; text-align: justify; line-height: 22.4px; margin: 0px;"><strong>CPython implementation detail:</strong>&nbsp;在 CPython 3.6 及之后的版本中，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__class__</span></code>单元会被作为类命名空间中的&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__classcell__</span></code>&nbsp;一项传递给元类。如果存在，这必须被向上传播给&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type.__new__</span></code>&nbsp;调用，以便能正确地初始化该类。如果不这样做，在 Python 3.6 中将导致&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#DeprecationWarning" title="DeprecationWarning" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">DeprecationWarning</span></code></a>，而在 Python 3.8 中将引发&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#RuntimeError" title="RuntimeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">RuntimeError</span></code></a>。</p></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">当使用默认的元类&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#type" title="type" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type</span></code></a>&nbsp;或者任何最终会调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type.__new__</span></code>&nbsp;的元类时，以下额外的自定义步骤将在创建类对象之后被发起调用:</p><ul class="simple" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">首先，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type.__new__</span></code>&nbsp;将收集类命名空间中所有定义了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__set_name__" title="object.__set_name__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__set_name__()</span></code></a>&nbsp;方法的描述器；</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">接下来，所有这些&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__set_name__</span></code>&nbsp;方法将使用所定义的类和特定描述器所赋的名称进行调用；</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">最后，将在新类根据方法解析顺序所确定的直接父类上调用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init_subclass__" title="object.__init_subclass__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init_subclass__()</span></code></a>&nbsp;钩子。</li></ul><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">在类对象创建之后，它会被传给包含在类定义中的类装饰器（如果有的话），得到的对象将作为已定义的类绑定到局部命名空间。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">当通过&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type.__new__</span></code>&nbsp;创建一个新类时，提供以作为命名空间形参的对象会被复制到一个新的有序映射并丢弃原对象。这个新副本包装于一个只读代理中，后者则成为类对象的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#object.__dict__" title="object.__dict__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code></a>&nbsp;属性。</p><div class="admonition seealso" style="font-size: 16px; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(255, 255, 204); border: 1px solid rgb(221, 221, 102); border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; text-align: justify; line-height: 22.4px;">参见</p><dl class="last docutils" style="margin-bottom: 0px;"><dt style="font-weight: bold;"><span class="target" id="index-117"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3135" style="color: rgb(99, 99, 187); text-decoration-line: none;">PEP 3135</a>&nbsp;- 新的超类型</dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;">描述隐式的&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__class__</span></code>&nbsp;闭包引用</dd></dl></div></div></div><h3 id="blogTitle70">装饰类</h3><div>使用装饰器装饰类</div><h3 id="blogTitle71">元类、类（类对象）、类实例之间的区别</h3><div><table style=""><thead style="box-sizing: border-box;"><tr style="box-sizing: border-box;"><th style="box-sizing: border-box; padding: 8px; text-align: inherit; border-top: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-bottom-color: rgb(221, 221, 221); border-image: initial; line-height: 20px; vertical-align: middle;">类对象</th><th style="box-sizing: border-box; padding: 8px; text-align: inherit; border-top: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-bottom-color: rgb(221, 221, 221); border-image: initial; line-height: 20px; vertical-align: middle;">类对象的基类</th><th style="box-sizing: border-box; padding: 8px; text-align: inherit; border-top: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-bottom-color: rgb(221, 221, 221); border-image: initial; line-height: 20px; vertical-align: middle;">类对象的类型</th></tr></thead><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; padding: 8px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); line-height: 20px; vertical-align: middle;">普通类型</td><td style="box-sizing: border-box; padding: 8px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); line-height: 20px; vertical-align: middle;">object/object 派生类</td><td style="box-sizing: border-box; padding: 8px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); line-height: 20px; vertical-align: middle;">type/type 派生类</td></tr><tr style="box-sizing: border-box; background-color: rgba(181, 181, 181, 0.1);"><td style="box-sizing: border-box; padding: 8px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); line-height: 20px; vertical-align: middle;">元类</td><td style="box-sizing: border-box; padding: 8px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); line-height: 20px; vertical-align: middle;">type</td><td style="box-sizing: border-box; padding: 8px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); line-height: 20px; vertical-align: middle;">type</td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; padding: 8px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); line-height: 20px; vertical-align: middle;">object（默认基类）</td><td style="box-sizing: border-box; padding: 8px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); line-height: 20px; vertical-align: middle;">-</td><td style="box-sizing: border-box; padding: 8px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); line-height: 20px; vertical-align: middle;">type</td></tr><tr style="box-sizing: border-box; background-color: rgba(181, 181, 181, 0.1);"><td style="box-sizing: border-box; padding: 8px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); line-height: 20px; vertical-align: middle;">type（默认元类）</td><td style="box-sizing: border-box; padding: 8px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); line-height: 20px; vertical-align: middle;">object</td><td style="box-sizing: border-box; padding: 8px; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); line-height: 20px; vertical-align: middle;">type</td></tr></tbody></table></div><div><br></div><h4 id="blogTitle72">变量</h4><div><ul><li>Python 中的变量，实际上是一个名字，指向所引用的对象<br></li><li>Python 中有“命名空间”的概念，类似于其他编程语言中的作用域<br></li><li>Python 中，命名空间底层由一个 dict 实现，变量名就是字典中的键，而变量引用的对象就是字典中键对应的值<br></li></ul></div><div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAApgAAABuCAYAAACDZWPkAAAUsUlEQVR4Xu2da3RU13mGX3kEiuVAIIRQLsY4YG5FcZfd0sRGKcG1YwGOqZvm5ibYLOQ4WV5x0/zMj6zVv11tY/8hFgbsVVI7zqXBXB1FxHYwtdPWrHBHCAuMRWpWqLBwJY+YYbrOzOgyF81Ne87sfc6jX4DO2fvbz/d+H++cy566RCKRED8QgAAEIAABCEAAAhAwRKAOg2mIJMNAAAIQgAAEIAABCCQJYDARAgQgAAEIQAACEICAUQIYTKM4GQwCEIAABCAAAQhAAIOJBiAAAQhAAAIQgAAEjBLAYBrFyWAQgAAEIAABCEAAAhhMNAABCEAAAhCAAAQgYJQABtMoTgaDAAQgAAEIQAACEMBgogEIQAACEIAABCAAAaMEMJhGcTIYBCAAAQhAAAIQgAAGEw1AAAIQgAAEIAABCBglgME0ipPBIAABCEAAAhCAAAQwmGgAAhCAAAQgAAEIQMAoAQymUZwMBgEIQAACEIAABCCAwUQDEIAABCAAAQhAAAJGCWAwjeJkMAhAAAIQgAAEIAABDCYaMEKgrq7OyDgMAgEIQAAC+QkkEgnQQMAZAhhMZ1Jld6CewaT52Z0jF6NDVy5mjZirQYBaqAZVxqwmAQxmNemGaGyaX4iS7eNS0ZWPsJnKagLUgtXpIbg8BDCYyMIIAZqfEYwMkkUAXSEJCKQIUAsowTUCGEzXMmZpvDQ/SxPjeFjoyvEEEr4xAtSCMZQM5BMBDKZPoIM+Dc0v6BmuzfrQVW24M6t9BKgF+3JCRIUJYDBRiBECND8jGBmEW+RoAAJ5CdBjEYZrBDCYrmXM0nhpfpYmxvGw0JXjCSR8YwSoBWMoGcgnAhhMn0AHfRqaX9AzXJv1oavacGdW+whQC/blhIi4RY4GfCBA8/MBcginQFchTDpL5hY5GggEAa5gBiKNtV8ERqD2OQhiBOgqiFllTZUQoBYqocY5tSSAwawl/QDNTfMLUDItWgq6sigZhFJTAtRCTfEzeQUEMJgVQOOUXAI0P1RRDQLoqhpUGdNFAtSCi1kLd8wYzHDn39jqaX7GUDLQKALoCjlAIEWAWkAJrhHAYLqWMUvjpflZmhjHw0JXjieQ8I0RoBaMoWQgnwhgMH0CHfRpaH5Bz3Bt1oeuasOdWe0jQC3YlxMiKkwAg4lCjBCg+eXHuK91tlq2rtbueJtWq07F/m4kGQEaBF35m8xi+sz+vb/RhXs2aiHc+Xdx9RhMF7NmYcw0PwxmNWSJrqpBdewxMZj+8i5nNmqhHFocawMBDKYNWQhADDS/ACTRwiWgKwuTQkg1IUAt1AQ7k46DAAZzHPA4dYQAzQ81VIMAuqoGVcZ0kQC14GLWwh0zBjPc+Te2epqfMZQMNIoAukIOEEgRoBZQgmsEMJiuZczSeGl+libG8bDQleMJJHxjBKgFYygZyCcCGEyfQAd9Gppf0DNcm/Whq9pwZ1b7CFAL9uWEiAoTwGCiECMEaH5GMDJIFgF0hSQgwC1yNOAmAQymm3mzLmqMgHUpCURA6CoQaWQRBghQCwYgMoSvBDCYvuIO7mRe8+MHAhCAAASqRyCRSFRvcEaGgGECbhjMPY+rbs2T+rMnTuq3315kGAHDmSCAwTRBkTEgAAEIjE0Ag4k6XCJgucF8S09++jY9/vp7SaYYTHulxe0be3PjcmToyuXsEbtJAtSCSZqM5QcBqw3mmR/cowXfvUm743+jF+vW6s0njnAF0w9VVDAHza8CaJxSlAC6KoqIA0JCgFoISaIDtMwqGszMq4+6bqN2x9u0WpU8q9euR+vWYDAtFh7Nz+LkOBwaunI4eYRulAC1YBQng/lAoEoG0zOX6xXf/oq+M/86SWmzeet2JX64Vjq9SXcufEwHdS13id/YmTom4weD6YMWxjUFzW9c+Dh5DALoCmlAIEWAWhhSwmW1b/+J3pmyXA+vvbUseZx/+cfa1dmoBx+5T5PLOPPCb36qHWemasNDd6mh0Hmx8/rZ5l2K/Plfad1tfyQppv7+wbxnTGxsVH0ZMbh4aJUMZi6K5O3un96rzgN/r1vKJoXBLBuZzyfQ/HwGHpLp0FVIEs0yixKgFjxEUR14YZuOXEooMmWOFs26QfG49+8RRTSoyIwmrfhjz9hJfW+f0tnLMUUiabSRiHq7/1tHzvbpxqY7tGBqvZKnej/xuBpnzNfNM25QX/dxHe75QI2N6d/V1+vK24d0/Hy/bmxarrmNdYoNndcvTbplqW6Z8aHh/B3fuU2vvHNVzRtateSt3Wp7+Xye3EbUvL5VyxoruaNbVCrWHFBFg5kyhU/p6shi7/wnDKY1qTcbCM3PLE9GSxFAVygBAtRCisBl7X/ueZ26nNDESZMUiUWHzaUGB+RdJ5wwb5U2tqR2mjm182ntf2eU/ygipMSsFfrW/U15zvPMa9LDDrnR9Lypvw6dF+s9pdeOXdOdK2Zqx6bn9O6UZXrkK8t1pbd/1MwRRfqP6kcvHsVgVl7YuVccM65gcou8crSWnokRyJMYb3utF+/O88hH7rEjL7RV+pyypcIYZ1joapwAjZ2e9ZhTOeN6/X7Rm/retVK1nZrrd9+/pC33Dv+vXs6MgTw2tLUQ69fpw2/o1TdOJk3kR+bdoS+23Jpxe/nACz/UkUuTtab1q5qbvu/ctfNp/fLaHfrW/UuL6uHUL55SR11z8tjRf/ZO9K5oXp62RHMn16nv9CEdjk/XisVzkmN27XwqPUeTBk7s0TMvn1Pzhke1+PIZnddM3TjtBtWn44nFYqr3/hLtVNvWl3UHVzCL5iX/AUkD+a/6QteB9DOYErfIK2TpyGmhbX5j5SdPDRRKJQYzPx10lcllfH10PM2kNIO5r3W2Wk58N+NOVfLfIk/lftAqsL9x7dY5HkbVPTestRDv+Y3aXjyqCbOW6a6l12nfrw5Lkela+eW/1pLJH+jAC88mb5kv+/zDap49cqs6aRTrV2rjJ3u0ZfepMZMz/96va+HR7dpzLWUwLx5+SQf7lmrdio/rcPu/67WuXk1YcI823n2TDvxsm45cjEkTp2vlA/drWne7fn15kb60ar4GOl/SMx3ntHJDqxb2vKK2l07kzDln1UO6b/55tW3GYFZeLekrlFefOJ7aVmjoiuWd/8gt8sqpWn1mWJvfWEnJ9x/t2AlMXfG/uneAKzZZkNCVAYPpGbn7+sexi4cXQ6UGM5+2S9jfuMwPaFY3R0PBhbkWotGYGhqGLgVeVPv2n6trIKGJkgY1Ucsf+LpunzEhg3Qs2q94pFEN8Ys6dup/0s9bRjRxonTh2EGd8oyirtfyBx7U7dOuKaoGpaaI6fSBX+nVI93JK6Yzmz6ndSs+MTx2f88R7dp9QJfi0vSmFn1hxbzk7zIM5rl9auvo1V9+uUUfGxxUZOKA2p/fq8iqh7QOg2mgItKfTpMj1X1aP/iXP9Hf/WRBWQYz+Sn2O+25weR909xAzAxRMYEwN79caKX9Zzx0XlLnJ79d0q30ihPk6Inoyi2DmSOzPOa2tP2NUzW0/StvsPdxGiq14L3jc1knjx3W4f86ljR4kWnzteb+uzW7ofSXZQ7t2KrXL0Q1Zd5yrWm5Pc/b5O/ouU07pXnLtOruZs0Y41XvU/t/rP0XZmjD365Mvlk+2mDOP7dPWzr+T2sevEeT4nFFIu+r/Ue7MJiO/j9E2DUmQPMrlgCT+8IWmys4v0dXhQzmiAn7hyOr1PL0hdTBoz6AJ6+kD/17+sP+P58eeXRp9Og5H+gzPsiPfGjqWvzkyAf/rBc3s29tF77VXXh3kPLuAgRH82OtJKy10NfTrbPd3TrZ1aVLA8PvfefHdP1CrX/oLnkvgEf7+hTNOqq+/n21P7tD/7tolb72mXka7I8OvxFe39CoxvRV0sG3D+oXr/9eEcWTVzG9J4EjkYjiqVfWk1dDI3Fp5qc+r+abU7flM69g/lJtHW/lxMgt8uDXKSusAoGwNr/SUBbZF7a0QUJ5FLoqbjC9r9Id/hrd7MeTvNNLuEWe+wxweheQb/w8fWV91AekYeOZfUzus/ZjPn+ZXFZhg8lzyZm5D2ctRPXrLdt0cjCh66fN0qT+3+tiwyf02T+9Obm10JDhi0Qmqv/8f+iNrqla/8371Kgr2rFpu9IfuUrsnXPS50rRnkPa9dpb6TfH61Wv93XhYp8meTE0xBTz7q7HpY9/ao2a5+YzmN4t8qge/Oa69BXSK9q1abti3CIvMRccBoFRBMLZ/CqXAC8xlMYOXZVgMIe+wCJ9aI6pK2owx3gG2Dtv7X8qdcXzbPKW9eNZc2WbwExdF3tUpMj+xkXjLk1DQTkqtLUQ61dUjcnnI8/ueVp7ruZ/M3ywc6+2dMSGTWJ/b6+uSMnnNId+hm5Vx5o+p5ZPTh213dCgBjVJM6YObX6ZrZozatvUoebWVi2pz387PvcW+R/U9JnbNDl5i/yKDr16WB9e9TWtm3+Bl3yCUpSswx8CoW1+JeM1uS9syZM6fyC68sFgjvVCTca/5zeYyaujwyb0uqzdQoo9R4nBLKdAqYXU3pYdY2w9lG0w87ONau+mrYp6Rm/Rh0vHHzujts2lG0zvLfItL50Y2cg9OZP3QtF63T7tNAazdPIcCQE2xC6sgSL7wiKgMQnwn6r7BjP7qufIijCY5ZQ+tSB17dmm9nMfeA9EJm+R5/xEbtL6R1Ynn8HM/3NBz23aoetXfVXrFn0k7yHevpddvR+k9qwc+um7oNeOdGtW03ItmDxh2Dh6e1tOmp36Jp/hK5jrW7WkwDf0xHqPavPzB9lovRzxc2y4CdD8CuTf+L6w4dEauvLLYD6mxXsHM7fJyrhF3V3BLXKJZzDN1Sq1oOQm6PsvTtPSpdNTb9oM/0Q0+IcT6ro4fdRzj6N+HTunZzbv0UD6nxaueVh3pZ+dzM7Q2Y5/097O90pO3IQb/0Ib1y7VQOdePdNxVs3rHx3jKyAH1L7lWXUNJpJXM1duWK8lZbz9XnJAFh1Yxa+KtGiVhFJ1AjS/YgbzMZnbF7bq6bRmAnRlyGCOuo2dL7lJI7h19ai9MrOvLo685DP8QlGel3R4i7x6pUMtSP09Xeqpn5Px3d/DxKMXdfLtq1pwy+yMb/lJ/T6md7u71ReT6hum6ea5HzWfqNgVnTzeo1lLF2vyGFsbRXvf1btXomqYMlMzJmfu22k+oNqPiMGsfQ4CEQHNr0gaDewLGwihlLkIdGXAYA5tkv76e8k9icfapih7S6MRI+nFUHxLJO+onJfXxtoHs+j+xsWe3yxTSAE4nFoIQBJDtgQMZsgSXq3l0vyqRTbc46Irt/KfuztChd9SxTf55CSeWnCrFohWwmCiAiMEaH5GMDJIFgF05ZIk8m9LVPg5zPzrYxuvXC7Ugku1QKweAQwmOjBCgOZnBCODYDDd1MDQIyD5bsF7VyMXvanvXWvTapXylX4po/q771/KfOnITTLGoqbHGkPJQD4RwGD6BDro09D8gp7h2qwPXdWGO7PaR4BasC8nRFSYAAYThRghQPMzgpFBuIKJBiCQlwA9FmG4RgCD6VrGLI2X5mdpYhwPC105nkDCN0aAWjCGkoF8IoDB9Al00Keh+QU9w7VZH7qqDXdmtY8AtWBfToiIW+RowAcCXvPjBwIQgAAEqkcgkfC+BYYfCLhBgCuYbuTJ+ij5dG19ipwMEF05mTaCrgIBaqEKUBmyqgQwmFXFG57BaX7hybWfK0VXftJmLpsJUAs2Z4fY8hHAYKILIwRofkYwMkgWAXSFJCCQIkAtoATXCGAwXcuYpfHS/CxNjONhoSvHE0j4xghQC8ZQMpBPBDCYPoEO+jQ0v6BnuDbrQ1e14c6s9hGgFuzLCREVJoDBRCFGCND8jGBkEG6RowEI5CVAj0UYrhHAYLqWMUvjpflZmhjHw0JXjieQ8I0RMF0LnZ2dxmJjoOATWLhwYdmLxGCWjYwT8hEw3fygDAGPALpCBxBIEaAWUIJrBDCYrmXM0nhpfpYmxvGw0JXjCSR8YwSoBWMoGcgnAhhMn0AHfRqaX9AzXJv1oavacGdW+whQC/blhIgKE8BgohAjBGh+RjAySBYBdIUkIMAtcjTgJgEMppt5sy5qjIB1KQlEQOgqEGlkEQYIUAsGIDKErwQwmL7iDu5kNL/g5raWK0NXtaTP3DYRoBZsygaxlEIAg1kKJY4pSoDmVxQRB1RAAF1VAI1TAkmAWghkWgO9KAxmoNPr3+Jofv6xDtNM6CpM2WathQhQC+jDNQIYTNcyZmm8NL/8idnXOlstW1drd7xNq1WnYn+3NL01Cwtd+Yu+mD6zf+9vdOGejVoId/5dXD0G08WsWRgzzQ+DWQ1ZoqtqUB17TAymv7zLmY1aKIcWx9pAAINpQxYCEAPNLwBJtHAJ6MrCpBBSTQhQCzXBzqTjIIDBHAc8Th0hQPNDDdUggK6qQZUxXSRALbiYtXDHjMEMd/6NrZ7mZwwlA40igK6QAwRSBKgFlOAaAQymaxmzNF6an6WJcTwsdOV4AgnfGAFqwRhKBvKJAAbTJ9BBn4bmF/QM12Z96Ko23JnVPgLUgn05IaLCBDCYKMQIAZqfEYwMkkUAXSEJCHCLHA24SQCD6WberIsaI2BdSgIRELoKRBpZhAEC1IIBiAzhKwEMpq+4gzsZzS+4ua3lytBVLekzt00EqAWbskEspRDAYJZCiWOKEvCaHz8QgAAEIFA9AolEonqDMzIEDBPAYBoGynAQgAAEIAABCEAg7AQwmGFXAOuHAAQgAAEIQAAChglgMA0DZTgIQAACEIAABCAQdgIYzLArgPVDAAIQgAAEIAABwwQwmIaBMhwEIAABCEAAAhAIOwEMZtgVwPohAAEIQAACEICAYQIYTMNAGQ4CEIAABCAAAQiEnQAGM+wKYP0QgAAEIAABCEDAMAEMpmGgDAcBCEAAAhCAAATCTgCDGXYFsH4IQAACEIAABCBgmAAG0zBQhoMABCAAAQhAAAJhJ4DBDLsCWD8EIAABCEAAAhAwTACDaRgow0EAAhCAAAQgAIGwE8Bghl0BrB8CEIAABCAAAQgYJoDBNAyU4SAAAQhAAAIQgEDYCfw/fvLhTVb8oXQAAAAASUVORK5CYII="><br></div><div><br></div><h4 id="blogTitle73">Python 一切皆对象</h4><div><ul><li>Python 中的整数、布尔值、字符串等类型的变量均是一个对象而不是简单的值<br></li><li>更进一步的，Python 中的所有语法元素，全部都是对象<br></li><li>函数是函数对象，模块是模块对象，最特殊的是，对象的类型也是一个对象<br></li></ul></div><h4 id="blogTitle74">类（类对象）</h4><div><ul><li>Python 中所有类型默认继承自基类 object，或者 object 的某个派生类型</li><li>Python 中类型也是一个对象，所以包含基类 object 在内的所有类型，都是对象实例。</li><li>区别于普通对象，我们姑且把描述类型的对象叫做 类对象<br></li></ul></div><h4 id="blogTitle75">元类（metaclass）</h4><div><ul><li>所有类对象的类型被叫做元类（metaclass）<br></li><li>元类默认是一个 type 类对象，或者继承自 type 的某个类对象<br></li><li>type 类对象的类型是 type 自身<br></li></ul></div><pre>&gt;&gt;&gt; type(type)
&lt;class 'type'&gt;<br></pre><div><br></div><div><br></div><div><br></div><h2 id="blogTitle76">抽象基类</h2><div>ABC</div><div><br></div><div><div>1、协议是 Python 中非正式的接口；</div><div>2、了解抽象基类的基本概念以及标准库中的抽象基类；</div><div>3、掌握抽象基类的使用方法。</div></div><h3 id="blogTitle77">定义</h3><div>Python 的抽象基类类似于 Java、C++ 等面向对象语言中的接口的概念。抽象基类提供了一种要求子类实现指定协议的方式，如果一个抽象基类要求实现指定的方法，而子类没有实现的话，当试图创建子类或者执行子类代码时会抛出异常。</div><h3 id="blogTitle78">Python 实现抽象基类的三种方法</h3><h4 id="blogTitle79">使用 NotImplementedError</h4><div>见下面的测试代码，只有子类实现了 run 方法才能运行 run。<br></div><pre># demo.py

class Task:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def run(self):
        raise NotImplementedError('Please define "run" method')


class SubTask(Task):
    def __init__(self, x, y):
        super().__init__(x, y)

    def run(self):
        print('Task(x=%s, y=%s)' %(self.x, self.y))<br></pre><pre>&gt;&gt;&gt; from demo import Task, SubTask
&gt;&gt;&gt; task = Task(1, 2)
&gt;&gt;&gt; task.x
1
&gt;&gt;&gt; task.run()
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/.../demo.py", line 7, in run
    raise NotImplementedError('Please define "run" method')
NotImplementedError: Please define "run" method

&gt;&gt;&gt; st = SubTask(1, 2)
&gt;&gt;&gt; st.x
1
&gt;&gt;&gt; st.run()
Task(x=1, y=2)<br></pre><div><br></div><div><br></div><div><br></div><h4 id="blogTitle80">使用元类</h4><pre># demo.py

class TaskMeta(type):
    def __new__(cls, name, bases, attrs):
        new_class = super(TaskMeta, cls).__new__(cls, name, bases, attrs)

        if attrs.pop('abstract', False):
            return new_class

        if not hasattr(new_class, 'run') or not callable(new_class.run):
            raise TypeError('Please define "run" method')

        return new_class


class Task(metaclass=TaskMeta):
    abstract = True

    def __init__(self, x, y):
        self.x = x
        self.y = y


class SubTask(Task):
    def __init__(self, x, y):
        super().__init__(x, y)

    def run(self):
        print('Task(x=%s, y=%s)' %(self.x, self.y))<br></pre><div><br></div><pre>&gt;&gt;&gt; from demo import Task, SubTask
&gt;&gt;&gt; t = Task(1, 2)
&gt;&gt;&gt; t.x
1
&gt;&gt;&gt; t.run()
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
AttributeError: 'Task' object has no attribute 'run'

&gt;&gt;&gt; st = SubTask(1, 2)
&gt;&gt;&gt; st.x
1
&gt;&gt;&gt; st.run()
Task(x=1, y=2)<br></pre><div>这个示例类似于方法一，但有一些细微的区别。第一个区别就是 Task 类本身仍然能被实例化，但是不能运行 run 方法，否则会抛出 AttributeError 错误。更为重要的区别在于子类。当子类被创建时元类会运行 __new__ 方法，解释器将不再允许创建没有 run 方法的子类。<br></div><pre>&gt;&gt;&gt; from demo import Task
&gt;&gt;&gt; class SubTask(Task):
...     pass
...
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/.../demo.py", line 11, in __new__
    raise TypeError('Please define "run" method')
TypeError: Please define "run" method<br></pre><div><br></div><div><br></div><h4 id="blogTitle81">使用 @abstractmethod</h4><div>abc 模块提供了一个使用某个抽象基类声明协议的机制，并且子类一定要提供了一个符合该协议的实现。<br></div><pre># demo.py

import abc


class Task(metaclass=abc.ABCMeta):
    def __init__(self, x, y):
        self.x = x
        self.y = y

    @abc.abstractmethod
    def run(self):
        pass


class SubTask(Task):
    def __init__(self, x, y):
        super().__init__(x, y)

    def run(self):
        print('Task(x=%s, y=%s)' %(self.x, self.y))


class OtherSubTask(Task):
    def __init__(self, x, y):
        super().__init__(x, y)<br></pre><p>和方法一、方法二的示例类似，但略有不同。</p><p>第一，Task 类本身不能被实例化：</p><pre>&gt;&gt;&gt; from demo import Task, SubTask, OtherSubTask
&gt;&gt;&gt; t = Task(1, 2)
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: Can't instantiate abstract class Task with abstract methods run</pre><div><p>第二，对于不能正确重写 run 方法的子类，在错误的情况下它与之前的两个方法的差别也是不同的。方法一中，使用 NotImplementedError，最终在 run 方法被调用时引发 NotImplementedError 错误。在方法二中，使用了自定义的 TaskMeta 元类， 当这个抽象类被创建时引发 TypeError 错误。</p><p>当没有实现 run 方法的子类实例化时会报错，给出的错误信息与实例化 Task 类时给出的一样，逻辑上完全符合预期。</p></div><pre>&gt;&gt;&gt; from demo import Task, SubTask, OtherSubTask
&gt;&gt;&gt; t = Task(1, 2)
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: Can't instantiate abstract class Task with abstract methods run
&gt;&gt;&gt; st = SubTask(1, 2)
&gt;&gt;&gt; st.x
1
&gt;&gt;&gt; st.run()
Task(x=1, y=2)
&gt;&gt;&gt; ost = OtherSubTask(1, 2)
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: Can't instantiate abstract class OtherSubTask with abstract methods run<br></pre><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h2 id="blogTitle82">特殊方法名称</h2><p id="index-67" style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">一个类可以通过定义具有特殊名称的方法来实现由特殊语法所引发的特定操作 (例如算术运算或下标与切片)。这是 Python 实现&nbsp;<em class="dfn">操作符重载</em>&nbsp;的方式，允许每个类自行定义基于操作符的特定行为。例如，如果一个类定义了名为&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getitem__" title="object.__getitem__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getitem__()</span></code></a>&nbsp;的方法，并且&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span></code>&nbsp;为该类的一个实例，则&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x[i]</span></code>&nbsp;基本就等同于&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type(x).__getitem__(x,</span>&nbsp;<span class="pre" style="hyphens: none;">i)</span></code>。除非有说明例外情况，在没有定义适当方法的情况下尝试执行一种操作将引发一个异常 (通常为&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>&nbsp;或&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError" title="TypeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">TypeError</span></code></a>)。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">将一个特殊方法设为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>&nbsp;表示对应的操作不可用。例如，如果一个类将&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__iter__" title="object.__iter__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__iter__()</span></code></a>&nbsp;设为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>，则该类就是不可迭代的，因此对其实例调用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#iter" title="iter" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">iter()</span></code></a>&nbsp;将引发一个&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError" title="TypeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">TypeError</span></code></a>&nbsp;(而不会回退至&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getitem__" title="object.__getitem__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getitem__()</span></code></a>).&nbsp;</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">在实现模拟任何内置类型的类时，很重要的一点是模拟的实现程度对于被模拟对象来说应当是有意义的。例如，提取单个元素的操作对于某些序列来说是适宜的，但提取切片可能就没有意义。(这种情况的一个实例是 W3C 的文档对象模型中的&nbsp;<code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">NodeList</span></code>接口。)</p><h3 id="blogTitle83">基本定制</h3><h4 id="blogTitle84">object.__new__(cls[, ...])</h4><div><p id="index-68" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; margin-top: 0px; hyphens: auto; line-height: 22.4px;">调用以创建一个&nbsp;<em>cls</em>&nbsp;类的新实例。<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>&nbsp;是一个静态方法 (因为是特例所以你不需要显式地声明)，它会将所请求实例所属的类作为第一个参数。其余的参数会被传递给对象构造器表达式 (对类的调用)。<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>&nbsp;的返回值应为新对象实例 (通常是&nbsp;<em>cls</em>&nbsp;的实例)。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; margin-top: 0px; hyphens: auto; line-height: 22.4px;">典型的实现会附带适宜的参数使用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super().__new__(cls[,</span>&nbsp;<span class="pre" style="hyphens: none;">...])</span></code>，通过超类的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>&nbsp;方法来创建一个类的新实例，然后根据需要修改新创建的实例再将其返回。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; margin-top: 0px; hyphens: auto; line-height: 22.4px;">如果&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>&nbsp;返回一个&nbsp;<em>cls</em>&nbsp;的实例，则新实例的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;方法会在之后被执行，例如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__(self[,</span>&nbsp;<span class="pre" style="hyphens: none;">...])</span></code>，其中&nbsp;<em>self</em>&nbsp;为新实例，其余的参数与被传递给&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>&nbsp;的相同。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; margin-top: 0px; hyphens: auto; line-height: 22.4px;">如果&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>&nbsp;未返回一个&nbsp;<em>cls</em>&nbsp;的实例，则新实例的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;方法就不会被执行。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; margin-top: 0px; hyphens: auto; line-height: 22.4px;"><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>&nbsp;的目的主要是允许不可变类型的子类 (例如 int, str 或 tuple) 定制实例创建过程。它也常会在自定义元类中被重载以便定制类创建过程。</p></div><h4 id="blogTitle85">object.__init__(self[, ...])<br></h4><div>构造函数：用于初始化实例对象的数据属性。</div><div><br></div><div><p id="index-69" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">在实例 (通过&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>) 被创建之后，返回调用者之前调用。其参数与传递给类构造器表达式的参数相同。一个基类如果有&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;方法，则其所派生的类如果也有&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;方法，就必须显式地调用它以确保实例基类部分的正确初始化；例如:&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super().__init__([args...])</span></code>.</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">因为对象是由&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;协作构造完成的 (由&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__new__" title="object.__new__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__new__()</span></code></a>&nbsp;创建，并由&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;定制)，所以&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__init__" title="object.__init__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__init__()</span></code></a>&nbsp;返回的值只能是&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>，否则会在运行时引发&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError" title="TypeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">TypeError</span></code></a>。</p></div><h4 id="blogTitle86">object.__del__(self)<br></h4><div><p id="index-70" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">在实例将被销毁时调用。这还会调用终结器或析构器 (不适当)。如果一个基类具有&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__del__" title="object.__del__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__del__()</span></code></a>&nbsp;方法，则其所派生的类如果也有&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__del__" title="object.__del__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__del__()</span></code></a>&nbsp;方法，就必须显式地调用它以确保实例基类部分的正确清除。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;"><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__del__" title="object.__del__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__del__()</span></code></a>&nbsp;方法可以 (但不推荐!) 通过创建一个该实例的新引用来推迟其销毁。这被称为对象&nbsp;<em>重生</em>。<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__del__" title="object.__del__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__del__()</span></code></a>&nbsp;是否会在重生的对象将被销毁时再次被调用是由具体实现决定的 ；当前的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-cpython" style="color: rgb(99, 99, 187); text-decoration-line: none;">CPython</a>&nbsp;实现只会调用一次。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">当解释器退出时不会确保为仍然存在的对象调用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__del__" title="object.__del__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__del__()</span></code></a>&nbsp;方法。</p><div class="admonition note" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 3px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; line-height: 22.4px;">注解</p>&nbsp;<p class="last" style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px; display: inline;"><code class="docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">del</span>&nbsp;<span class="pre" style="hyphens: none;">x</span></code>&nbsp;并不直接调用&nbsp;<code class="docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__del__()</span></code>&nbsp;— 前者会将&nbsp;<code class="docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span></code>&nbsp;的引用计数减一，而后者仅会在&nbsp;<code class="docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span></code>&nbsp;的引用计数变为零时被调用。</p></div><div class="impl-detail compound" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); border-radius: 3px;"><p class="compound-first" style="margin: 0px; hyphens: auto; line-height: 22.4px;"><strong>CPython implementation detail:</strong>&nbsp;It is possible for a reference cycle to prevent the reference count of an object from going to zero. In this case, the cycle will be later detected and deleted by the&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-garbage-collection" style="color: rgb(99, 99, 187); text-decoration-line: none;">cyclic garbage collector</a>. A common cause of reference cycles is when an exception has been caught in a local variable. The frame’s locals then reference the exception, which references its own traceback, which references the locals of all frames caught in the traceback.</p><div class="compound-last admonition seealso" style="margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(255, 255, 204); border: 1px solid rgb(221, 221, 102); border-radius: 3px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; line-height: 22.4px;">参见</p>&nbsp;<p class="last" style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px; display: inline;"><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/gc.html#module-gc" title="gc: Interface to the cycle-detecting garbage collector." style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">gc</span></code></a>&nbsp;模块的文档。</p></div></div><div class="admonition warning" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(255, 228, 228); border: 1px solid rgb(255, 102, 102); border-radius: 3px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; line-height: 22.4px;">警告</p>&nbsp;<p style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px; display: inline;">由于调用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__del__" title="object.__del__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background: rgb(239, 194, 194); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__del__()</span></code></a>&nbsp;方法时周边状况已不确定，在其执行期间发生的异常将被忽略，改为打印一个警告到&nbsp;<code class="docutils literal notranslate" style="background: rgb(239, 194, 194); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sys.stderr</span></code>。特别地：</p><ul class="last simple" style="margin-bottom: 5px;"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__del__" title="object.__del__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background: rgb(239, 194, 194); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__del__()</span></code></a>&nbsp;可在任意代码被执行时启用，包括来自任意线程的代码。如果&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__del__" title="object.__del__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background: rgb(239, 194, 194); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__del__()</span></code></a>&nbsp;需要接受锁或启用其他阻塞资源，可能会发生死锁，例如该资源已被为执行&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__del__" title="object.__del__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background: rgb(239, 194, 194); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__del__()</span></code></a>&nbsp;而中断的代码所获取。</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__del__" title="object.__del__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background: rgb(239, 194, 194); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__del__()</span></code></a>&nbsp;可以在解释器关闭阶段被执行。因此，它需要访问的全局变量（包含其他模块）可能已被删除或设为&nbsp;<code class="docutils literal notranslate" style="background: rgb(239, 194, 194); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>。Python 会保证先删除模块中名称以单个下划线打头的全局变量再删除其他全局变量；如果已不存在其他对此类全局变量的引用，这有助于确保导入的模块在&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__del__" title="object.__del__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background: rgb(239, 194, 194); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__del__()</span></code></a>&nbsp;方法被调用时仍然可用。</li></ul></div></div><h4 id="blogTitle87">object.__repr__(self)<br></h4><div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">由&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#repr" title="repr" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">repr()</span></code></a>&nbsp;内置函数调用以输出一个对象的“官方”字符串表示。如果可能，这应类似一个有效的 Python 表达式，能被用来重建具有相同取值的对象（只要有适当的环境）。如果这不可能，则应返回形式如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">&lt;...some</span>&nbsp;<span class="pre" style="hyphens: none;">useful</span><span class="pre" style="hyphens: none;">description...&gt;</span></code>&nbsp;的字符串。返回值必须是一个字符串对象。如果一个类定义了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__repr__" title="object.__repr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__repr__()</span></code></a>&nbsp;但未定义&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__str__" title="object.__str__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__str__()</span></code></a>，则在需要该类的实例的“非正式”字符串表示时也会使用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__repr__" title="object.__repr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__repr__()</span></code></a>。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">此方法通常被用于调试，因此确保其表示的内容包含丰富信息且无歧义是很重要的。</p></div><h4 id="blogTitle88">object.__str__(self)<br></h4><div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">通过&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#str" title="str" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">str(object)</span></code></a>&nbsp;以及内置函数&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#format" title="format" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">format()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#print" title="print" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">print()</span></code></a>&nbsp;调用以生成一个对象的“非正式”或格式良好的字符串表示。返回值必须为一个&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#textseq" style="color: rgb(99, 99, 187); text-decoration-line: none;">字符串</a>&nbsp;对象。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">此方法与&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__repr__" title="object.__repr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object.__repr__()</span></code></a>&nbsp;的不同点在于&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__str__" title="object.__str__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__str__()</span></code></a>&nbsp;并不预期返回一个有效的 Python 表达式：可以使用更方便或更准确的描述信息。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">内置类型&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#object" title="object" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object</span></code></a>&nbsp;所定义的默认实现会调用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__repr__" title="object.__repr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object.__repr__()</span></code></a>。</p></div><h4 id="blogTitle89">object.__bytes__(self)<br></h4><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">通过&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#func-bytes" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;">bytes</a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;调用以生成一个对象的字节串表示。这应该返回一个&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#bytes" title="bytes" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">bytes</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;对象。</span><br></div><h4 id="blogTitle90">object.__format__(self, format_spec)<br></h4><div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">通过&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#format" title="format" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">format()</span></code></a>&nbsp;内置函数、扩展、<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/lexical_analysis.html#f-strings" style="color: rgb(99, 99, 187); text-decoration-line: none;">格式化字符串字面值</a>&nbsp;的求值以及&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#str.format" title="str.format" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">str.format()</span></code></a>&nbsp;方法调用以生成一个对象的“格式化”字符串表示。<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">format_spec</span></code>参数为包含所需格式选项描述的字符串。<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">format_spec</span></code>&nbsp;参数的解读是由实现&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__format__" title="object.__format__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__format__()</span></code></a>&nbsp;的类型决定的，不过大多数类或是将格式化委托给某个内置类型，或是使用相似的格式化语法。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">请参看&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/string.html#formatspec" style="color: rgb(99, 99, 187); text-decoration-line: none;">Format Specification Mini-Language</a>&nbsp;了解标准格式化语法的描述。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">返回值必须为一个字符串对象。</p><div class="versionchanged" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">在 3.4 版更改:&nbsp;</span><code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object</span></code>&nbsp;本身的 __format__ 方法如果被传入任何非空字符，将会引发一个&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError" title="TypeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">TypeError</span></code></a>。</p></div><div class="versionchanged" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">在 3.7 版更改:&nbsp;</span><code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object.__format__(x,</span>&nbsp;<span class="pre" style="hyphens: none;">'')</span></code>&nbsp;现在等同于&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">str(x)</span></code>&nbsp;而不再是&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">format(str(self),</span>&nbsp;<span class="pre" style="hyphens: none;">'')</span></code>。</p></div></div><h4 id="blogTitle91">object.__lt__(self, other)<br></h4><h4 id="blogTitle92">object.__le__(self, other)<br></h4><h4 id="blogTitle93">object.__eq__(self, other)<br></h4><h4 id="blogTitle94">object.__ne__(self, other)<br></h4><h4 id="blogTitle95">object.__gt__(self, other)<br></h4><h4 id="blogTitle96">object.__ge__(self, other)<br></h4><div><p id="index-75" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">以上这些被称为“富比较”方法。运算符号与方法名称的对应关系如下：<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x&lt;y</span></code>&nbsp;调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__lt__(y)</span></code>、<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x&lt;=y</span></code>&nbsp;调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__le__(y)</span></code>、<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x==y</span></code>&nbsp;调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__eq__(y)</span></code>、<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x!=y</span></code>调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__ne__(y)</span></code>、<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x&gt;y</span></code>&nbsp;调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__gt__(y)</span></code>、<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x&gt;=y</span></code>&nbsp;调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__ge__(y)</span></code>。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">如果指定的参数对没有相应的实现，富比较方法可能会返回单例对象&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">NotImplemented</span></code>。按照惯例，成功的比较会返回&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">False</span></code>&nbsp;或&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">True</span></code>。不过实际上这些方法可以返回任意值，因此如果比较运算符是要用于布尔值判断（例如作为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">if</span></code>&nbsp;语句的条件），Python 会对返回值调用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#bool" title="bool" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">bool()</span></code></a>&nbsp;以确定结果为真还是假。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">在默认情况下&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__ne__" title="object.__ne__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__ne__()</span></code></a>&nbsp;会委托给&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__eq__" title="object.__eq__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__eq__()</span></code></a>&nbsp;并将结果取反，除非结果为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">NotImplemented</span></code>。比较运算符之间没有其他隐含关系，例如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">(x&lt;y</span>&nbsp;<span class="pre" style="hyphens: none;">or</span>&nbsp;<span class="pre" style="hyphens: none;">x==y)</span></code>为真并不意味着&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x&lt;=y</span></code>。要根据单根运算自动生成排序操作，请参看&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functools.html#functools.total_ordering" title="functools.total_ordering" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">functools.total_ordering()</span></code></a>。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">请查看&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>&nbsp;的相关段落，了解创建可支持自定义比较运算并可用作字典键的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-hashable" style="color: rgb(99, 99, 187); text-decoration-line: none;">hashable</a>&nbsp;对象时要注意的一些事项。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">这些方法并没有对调参数版本（在左边参数不支持该操作但右边参数支持时使用）；而是&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__lt__" title="object.__lt__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__lt__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__gt__" title="object.__gt__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__gt__()</span></code></a>&nbsp;互为对方的反射，&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__le__" title="object.__le__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__le__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__ge__" title="object.__ge__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__ge__()</span></code></a>&nbsp;互为对方的反射，而&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__eq__" title="object.__eq__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__eq__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__ne__" title="object.__ne__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__ne__()</span></code></a>&nbsp;则是它们自己的反射。如果两个操作数的类型不同，且右操作数类型是左操作数类型的直接或间接子类，则优先选择右操作数的反射方法，否则优先选择左操作数的方法。虚拟子类不会被考虑。</p></div><h4 id="blogTitle97">object.__hash__(self)<br></h4><div><p id="index-76" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">通过内置函数&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#hash" title="hash" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">hash()</span></code></a>&nbsp;调用以对哈希集的成员进行操作，属于哈希集的类型包括&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#set" title="set" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">set</span></code></a>、<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#frozenset" title="frozenset" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">frozenset</span></code></a>&nbsp;以及&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#dict" title="dict" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">dict</span></code></a>。<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>&nbsp;应该返回一个整数。对象比较结果相同所需的唯一特征属性是其具有相同的哈希值；建议的做法是把参与比较的对象全部组件的哈希值混在一起，即将它们打包为一个元组并对该元组做哈希运算。例如:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__hash__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="nb" style="color: rgb(0, 112, 32);">hash</span><span class="p">((</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">name</span><span class="p">,</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">nick</span><span class="p">,</span> <span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">color</span><span class="p">))</span>
</pre></div></div><div class="admonition note" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 3px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; line-height: 22.4px;">注解</p>&nbsp;<p class="last" style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px; display: inline;"><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#hash" title="hash" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">hash()</span></code></a>&nbsp;会从一个对象自定义的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>&nbsp;方法返回值中截断为&nbsp;<code class="xref c c-type docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">Py_ssize_t</span></code>&nbsp;的大小。通常对 64 位构建为 8 字节，对 32 位构建为 4 字节。如果一个对象的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>&nbsp;必须在不同位大小的构建上进行互操作，请确保检查全部所支持构建的宽度。做到这一点的简单方法是使用&nbsp;<code class="docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">python</span>&nbsp;<span class="pre" style="hyphens: none;">-c</span><span class="pre" style="hyphens: none;">"import</span>&nbsp;<span class="pre" style="hyphens: none;">sys;</span>&nbsp;<span class="pre" style="hyphens: none;">print(sys.hash_info.width)"</span></code>。</p></div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">如果一个类没有定义&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__eq__" title="object.__eq__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__eq__()</span></code></a>&nbsp;方法，那么也不应该定义&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>&nbsp;操作；如果它定义了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__eq__" title="object.__eq__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__eq__()</span></code></a>&nbsp;但没有定义&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>，则其实例将不可被用作可哈希集的项。如果一个类定义了可变对象并实现了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__eq__" title="object.__eq__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__eq__()</span></code></a>&nbsp;方法，则不应该实现&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>，因为可哈希集的实现要求键的哈希集是不可变的（如果对象的哈希值发生改变，它将处于错误的哈希桶中）。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">用户定义的类默认带有&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__eq__" title="object.__eq__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__eq__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>&nbsp;方法；使用它们与任何对象（自己除外）比较必定不相等，并且&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__hash__()</span></code>&nbsp;会返回一个恰当的值以确保&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span>&nbsp;<span class="pre" style="hyphens: none;">==</span>&nbsp;<span class="pre" style="hyphens: none;">y</span></code>&nbsp;同时意味着&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span>&nbsp;<span class="pre" style="hyphens: none;">is</span>&nbsp;<span class="pre" style="hyphens: none;">y</span></code>&nbsp;且&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">hash(x)</span>&nbsp;<span class="pre" style="hyphens: none;">==</span>&nbsp;<span class="pre" style="hyphens: none;">hash(y)</span></code>。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">一个类如果重载了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__eq__" title="object.__eq__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__eq__()</span></code></a>&nbsp;且没有定义&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>&nbsp;则会将其&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>隐式地设为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>。当一个类的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>&nbsp;方法为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>&nbsp;时，该类的实例将在一个程序尝试获取其哈希值时正确地引发&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError" title="TypeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">TypeError</span></code></a>，并会在检测&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">isinstance(obj,</span>&nbsp;<span class="pre" style="hyphens: none;">collections.abc.Hashable)</span></code>&nbsp;时被正确地识别为不可哈希对象。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">如果一个重载了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__eq__" title="object.__eq__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__eq__()</span></code></a>&nbsp;的类需要保留来自父类的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>&nbsp;实现，则必须通过设置&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__</span>&nbsp;<span class="pre" style="hyphens: none;">=</span>&nbsp;<span class="pre" style="hyphens: none;">&lt;ParentClass&gt;.__hash__</span></code>&nbsp;来显式地告知解释器。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">如果一个没有重载&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__eq__" title="object.__eq__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__eq__()</span></code></a>&nbsp;的类需要去掉哈希支持，则应该在类定义中包含&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__</span>&nbsp;<span class="pre" style="hyphens: none;">=</span>&nbsp;<span class="pre" style="hyphens: none;">None</span></code>。一个自定义了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>&nbsp;以显式地引发&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError" title="TypeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">TypeError</span></code></a>&nbsp;的类会被&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">isinstance(obj,</span>&nbsp;<span class="pre" style="hyphens: none;">collections.abc.Hashable)</span></code>&nbsp;调用错误地识别为可哈希对象。</p><div class="admonition note" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 3px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; line-height: 22.4px;">注解</p>&nbsp;<p style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px; display: inline;">在默认情况下，str、bytes 和 datetime 对象的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>&nbsp;值会使用一个不可预知的随机值“加盐”。虽然它们会在一个单独 Python 进程中保持不变，它们的哈希值在重复运行的 Python 之间是不可预测的。</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px;">这种做法是为了防止以下形式的拒绝服务攻击：通过仔细选择输入来利用字典插入操作在最坏情况下的执行效率即 O(n^2) 复杂度。详情见&nbsp;<a class="reference external" href="http://www.ocert.org/advisories/ocert-2011-003.html" style="color: rgb(99, 99, 187); text-decoration-line: none;">http://www.ocert.org/advisories/ocert-2011-003.html</a></p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px;">改变哈希值会影响集合的迭代次序。Python 也从不保证这个次序不会被改变（通常它在 32 位和 64 位构建上是不一致的）。</p><p class="last" style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px;">另见&nbsp;<span class="target" id="index-113"></span><a class="reference internal" href="https://docs.python.org/zh-cn/3/using/cmdline.html#envvar-PYTHONHASHSEED" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-envvar docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">PYTHONHASHSEED</span></code></a>.</p></div><div class="versionchanged" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">在 3.3 版更改:&nbsp;</span>默认启用哈希随机化。</p></div></div><h4 id="blogTitle98">object.__bool__(self)<br></h4><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">调用此方法以实现真值检测以及内置的&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">bool()</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;操作；应该返回&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">False</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;或&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">True</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">。如果未定义此方法，则会查找并调用&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__len__" title="object.__len__" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__len__()</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;并在其返回非零值时视对象的逻辑值为真。如果一个类既未定义&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__len__" title="object.__len__" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__len__()</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;也未定义&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__bool__" title="object.__bool__" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__bool__()</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;则视其所有实例的逻辑值为真。</span></div><h3 id="blogTitle99">自定义属性访问</h3><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">可以定义下列方法来自定义对类实例属性访问（<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.name</span></code>&nbsp;的使用、赋值或删除）的具体含义.</p><h4 id="blogTitle100" style="hyphens: auto; line-height: 22.4px;">object.__getattr__(self, name)</h4><div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">当默认属性访问因引发&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>&nbsp;而失败时被调用 (可能是调用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getattribute__" title="object.__getattribute__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattribute__()</span></code></a>&nbsp;时由于&nbsp;<em>name</em>&nbsp;不是一个实例属性或&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self</span></code>&nbsp;的类关系树中的属性而引发了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>；或者是对&nbsp;<em>name</em>&nbsp;特性属性调用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__get__" title="object.__get__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__get__()</span></code></a>时引发了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>)。此方法应当返回（找到的）属性值或是引发一个&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>&nbsp;异常。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">请注意如果属性是通过正常机制找到的，<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getattr__" title="object.__getattr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattr__()</span></code></a>&nbsp;就不会被调用。（这是在&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getattr__" title="object.__getattr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattr__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__setattr__" title="object.__setattr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__setattr__()</span></code></a>&nbsp;之间故意设置的不对称性。）这既是出于效率理由也是因为不这样设置的话&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getattr__" title="object.__getattr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattr__()</span></code></a>&nbsp;将无法访问实例的其他属性。要注意至少对于实例变量来说，你不必在实例属性字典中插入任何值（而是通过插入到其他对象）就可以模拟对它的完全控制。请参阅下面的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getattribute__" title="object.__getattribute__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattribute__()</span></code></a>&nbsp;方法了解真正获取对属性访问的完全控制权的办法。</p></div><h4 id="blogTitle101" style="hyphens: auto; line-height: 22.4px;">object.__getattribute__(self, name)<br></h4><div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">此方法会无条件地被调用以实现对类实例属性的访问。如果类还定义了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getattr__" title="object.__getattr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattr__()</span></code></a>，则后者不会被调用，除非&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getattribute__" title="object.__getattribute__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattribute__()</span></code></a>&nbsp;显式地调用它或是引发了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>。此方法应当返回（找到的）属性值或是引发一个&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>&nbsp;异常。为了避免此方法中的无限递归，其实现应该总是调用具有相同名称的基类方法来访问它所需要的任何属性，例如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object.__getattribute__(self,</span>&nbsp;<span class="pre" style="hyphens: none;">name)</span></code>。</p><div class="admonition note" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 3px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; line-height: 22.4px;">注解</p>&nbsp;<p class="last" style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px; display: inline;">此方法在作为通过特定语法或内置函数隐式地调用的结果的情况下查找特殊方法时仍可能会被跳过。参见&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#special-lookup" style="color: rgb(99, 99, 187); text-decoration-line: none;"><span class="std std-ref">Special method lookup</span></a>。</p></div></div><h4 id="blogTitle102" style="hyphens: auto; line-height: 22.4px;">object.__setattr__(self, name, value)<br></h4><div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">此方法在一个属性被尝试赋值时被调用。这个调用会取代正常机制（即将值保存到实例字典）。&nbsp;<em>name</em>&nbsp;为属性名称，&nbsp;<em>value</em>&nbsp;为要赋给属性的值。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">如果&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__setattr__" title="object.__setattr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__setattr__()</span></code></a>&nbsp;想要赋值给一个实例属性，它应该调用同名的基类方法，例如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object.__setattr__(self,</span>&nbsp;<span class="pre" style="hyphens: none;">name,</span>&nbsp;<span class="pre" style="hyphens: none;">value)</span></code>。</p></div><h4 id="blogTitle103" style="hyphens: auto; line-height: 22.4px;">object.__delattr__(self, name)<br></h4><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">类似于&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__setattr__" title="object.__setattr__" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__setattr__()</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;但其作用为删除而非赋值。此方法应该仅在&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">del&nbsp;</span><span class="pre" style="hyphens: none;">obj.name</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;对于该对象有意义时才被实现。</span><br></div><h4 id="blogTitle104" style="hyphens: auto; line-height: 22.4px;">object.__dir__(self)<br></h4><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">此方法会在对相应对象调用&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#dir" title="dir" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">dir()</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;时被调用。返回值必须为一个序列。&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#dir" title="dir" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">dir()</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">会把返回的序列转换为列表并对其排序。</span></div><h4 id="blogTitle105">自定义模块属性访问</h4><p id="index-79" style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">特殊名称&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattr__</span></code>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dir__</span></code>&nbsp;还可被用来自定义对模块属性的访问。模块层级的&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattr__</span></code>&nbsp;函数应当接受一个参数，其名称为一个属性名，并返回计算结果值或引发一个&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>。如果通过正常查找即&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getattribute__" title="object.__getattribute__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">object.__getattribute__()</span></code></a>&nbsp;未在模块对象中找到某个属性，则&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattr__</span></code>会在模块的&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code>&nbsp;中查找，未找到时会引发一个&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>。如果找到，它会以属性名被调用并返回结果值。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dir__</span></code>&nbsp;函数应该不接受参数，返回值为一个表示模块中可访问名称的字符串列表。此函数如果存在，将会重载一个模块中的标准&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#dir" title="dir" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">dir()</span></code></a>&nbsp;查找。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">想要更细致地自定义模块的行为（设置属性和特性属性等待），可以将模块对象的&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__class__</span></code>&nbsp;属性设置为一个&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/types.html#types.ModuleType" title="types.ModuleType" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">types.ModuleType</span></code></a>&nbsp;的子类。例如:</p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="kn" style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="nn" style="color: rgb(14, 132, 181); font-weight: bold;">sys</span>
<span class="kn" style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span class="nn" style="color: rgb(14, 132, 181); font-weight: bold;">types</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span class="n">ModuleType</span>

<span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">VerboseModule</span><span class="p">(</span><span class="n">ModuleType</span><span class="p">):</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__repr__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="n">f</span><span class="s1" style="color: rgb(64, 112, 160);">'Verbose </span><span class="si" style="color: rgb(112, 160, 208); font-style: italic;">{self.__name__}</span><span class="s1" style="color: rgb(64, 112, 160);">'</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__setattr__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="n">f</span><span class="s1" style="color: rgb(64, 112, 160);">'Setting </span><span class="si" style="color: rgb(112, 160, 208); font-style: italic;">{attr}</span><span class="s1" style="color: rgb(64, 112, 160);">...'</span><span class="p">)</span>
        <span class="nb" style="color: rgb(0, 112, 32);">super</span><span class="p">()</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="fm" style="color: rgb(6, 40, 126);">__setattr__</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

<span class="n">sys</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">modules</span><span class="p">[</span><span class="vm" style="color: rgb(187, 96, 213);">__name__</span><span class="p">]</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="vm" style="color: rgb(187, 96, 213);">__class__</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">VerboseModule</span>
</pre></div></div><div class="admonition note" style="font-size: 16px; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; text-align: justify; line-height: 22.4px;">注解</p>&nbsp;<p class="last" style="hyphens: auto; text-align: justify; line-height: 22.4px; margin-bottom: 5px; display: inline;">定义模块的&nbsp;<code class="docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattr__</span></code>&nbsp;和设置模块的&nbsp;<code class="docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__class__</span></code>&nbsp;只会影响使用属性访问语法进行的查找 – 直接访问模块全局变量（不论是通过模块内的代码还是通过对模块全局字典的引用）是不受影响的。</p></div><div class="versionchanged" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><p style="hyphens: auto; text-align: justify; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">在 3.5 版更改:&nbsp;</span><code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__class__</span></code>&nbsp;模块属性改为可写。</p></div><div class="versionadded" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><p style="hyphens: auto; text-align: justify; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">3.7 新版功能:&nbsp;</span><code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattr__</span></code>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dir__</span></code>&nbsp;模块属性。</p></div><div class="admonition seealso" style="font-size: 16px; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(255, 255, 204); border: 1px solid rgb(221, 221, 102); border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; text-align: justify; line-height: 22.4px;">参见</p><dl class="last docutils" style="margin-bottom: 0px;"><dt style="font-weight: bold;"><span class="target" id="index-114"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0562" style="color: rgb(99, 99, 187); text-decoration-line: none;">PEP 562</a>&nbsp;- 模块 __getattr__ 和 __dir__</dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;">描述用于模块的&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattr__</span></code>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dir__</span></code>&nbsp;函数。</dd></dl></div><h4 id="blogTitle106">实现描述器</h4><p></p><div class="section" id="invoking-descriptors"><span id="descriptor-invocation" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"></span></div><p></p><div class="section" id="implementing-descriptors"><p style="hyphens: auto; text-align: justify; line-height: 22.4px;">以下方法仅当一个包含该方法的类（称为&nbsp;<em>描述器</em>&nbsp;类）的实例出现于一个&nbsp;<em>所有者</em>&nbsp;类中的时候才会起作用（该描述器必须在所有者类或其某个上级类的字典中）。在以下示例中，“属性”指的是名称为所有者类&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#object.__dict__" title="object.__dict__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__dict__</span></code></a>&nbsp;中的特征属性的键名的属性。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px;">属性&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__objclass__</span></code>&nbsp;会被&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects." style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">inspect</span></code></a>&nbsp;模块解读为指定此对象定义所在的类（正确设置此属性有助于动态类属性的运行时内省）。对于可调用对象来说，它可以指明预期或要求提供一个特定类型（或子类）的实例作为第一个位置参数（例如，CPython 会为实现于 C 中的未绑定方法设置此属性）。<br></p><h5 id="blogTitle107" style="hyphens: auto; text-align: justify; line-height: 22.4px;">object.__get__(self, instance, owner)</h5><div><span style="text-align: justify;">调用此方法以获取所有者类的属性（类属性访问）或该类的实例的属性（实例属性访问）。</span><em style="text-align: justify;">所有者</em><span style="text-align: justify;">&nbsp;</span><span style="text-align: justify;">是指所有者类，而</span><span style="text-align: justify;">&nbsp;</span><em style="text-align: justify;">实例</em><span style="text-align: justify;">&nbsp;</span><span style="text-align: justify;">是指被用来访问属性的实例，如果是</span><span style="text-align: justify;">&nbsp;</span><em style="text-align: justify;">所有者</em><span style="text-align: justify;">&nbsp;</span><span style="text-align: justify;">被用来访问属性时则为</span><span style="text-align: justify;">&nbsp;</span><code class="docutils literal notranslate" style="text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code><span style="text-align: justify;">。此方法应当返回（计算出的）属性值或是引发一个</span><span style="text-align: justify;">&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="text-align: justify; color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a><span style="text-align: justify;">&nbsp;</span><span style="text-align: justify;">异常。</span><br></div><h5 id="blogTitle108" style="hyphens: auto; text-align: justify; line-height: 22.4px;">object.__set__(self, instance, value)<br></h5><div><span style="text-align: justify;">调用此方法以设置</span><span style="text-align: justify;">&nbsp;</span><em style="text-align: justify;">instance</em><span style="text-align: justify;">&nbsp;</span><span style="text-align: justify;">指定的所有者类的实例的属性为新值</span><span style="text-align: justify;">&nbsp;</span><em style="text-align: justify;">value</em><span style="text-align: justify;">。</span><br></div><h5 id="blogTitle109" style="hyphens: auto; text-align: justify; line-height: 22.4px;">object.__delete__(self, instance)<br></h5><div><span style="text-align: justify;">调用此方法以删除</span><span style="text-align: justify;">&nbsp;</span><em style="text-align: justify;">instance</em><span style="text-align: justify;">&nbsp;</span><span style="text-align: justify;">指定的所有者类的实例的属性。</span><br></div><h5 id="blogTitle110" style="hyphens: auto; text-align: justify; line-height: 22.4px;">object.__set_name__(self, owner, name)<br></h5><div><p style="text-align: justify; margin-top: 0px; hyphens: auto; line-height: 22.4px;">在所有者类&nbsp;<em>owner</em>&nbsp;创建时被调用。描述器会被赋值给&nbsp;<em>name</em>。</p><div class="versionadded" style="text-align: justify;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">3.6 新版功能</span></p></div></div></div><h4 id="blogTitle111">发起调用描述器</h4><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">总的说来，描述器就是具有“绑定行为”的对象属性，其属性访问已被描述器协议中的方法所重载，包括&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__get__" title="object.__get__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__get__()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__set__" title="object.__set__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__set__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__delete__" title="object.__delete__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__delete__()</span></code></a>。如果一个对象定义了以上方法中的任意一个，它就被称为描述器。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">属性访问的默认行为是从一个对象的字典中获取、设置或删除属性。例如，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">a.x</span></code>&nbsp;的查找顺序会从&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">a.__dict__['x']</span></code>&nbsp;开始，然后是&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type(a).__dict__['x']</span></code>，接下来依次查找&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type(a)</span></code>&nbsp;的上级基类，不包括元类。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">但是，如果找到的值是定义了某个描述器方法的对象，则 Python 可能会重载默认行为并转而发起调用描述器方法。这具体发生在优先级链的哪个环节则要根据所定义的描述器方法及其被调用的方式来决定。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">描述器发起调用的开始点是一个绑定&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">a.x</span></code>。参数的组合方式依&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">a</span></code>&nbsp;而定:</p><h5 id="blogTitle112" style="hyphens: auto; line-height: 22.4px;">直接调用</h5><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">最简单但最不常见的调用方式是用户代码直接发起调用一个描述器方法:</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__get__(a)</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">。</span><br></div><h5 id="blogTitle113" style="hyphens: auto; line-height: 22.4px;">实例绑定<br></h5><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">如果绑定到一个对象实例，</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">a.x</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;会被转换为调用:&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">type(a).__dict__['x'].__get__(a,</span>&nbsp;<span class="pre" style="hyphens: none;">type(a))</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">。</span></div><div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">对于实例绑定，发起描述器调用的优先级取决于定义了哪些描述器方法。一个描述器可以定义&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__get__" title="object.__get__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__get__()</span></code></a>、<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__set__" title="object.__set__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__set__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__delete__" title="object.__delete__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__delete__()</span></code></a>&nbsp;的任意组合。如果它没有定义&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__get__" title="object.__get__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__get__()</span></code></a>，则访问属性会返回描述器对象自身，除非对象的实例字典中有相应属性值。如果描述器定义了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__set__" title="object.__set__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__set__()</span></code></a>&nbsp;和/或&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__delete__" title="object.__delete__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__delete__()</span></code></a>，则它是一个数据描述器；如果以上两个都未定义，则它是一个非数据描述器。通常，数据描述器会同时定义&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__get__" title="object.__get__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__get__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__set__" title="object.__set__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__set__()</span></code></a>，而非数据描述器只有&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__get__" title="object.__get__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__get__()</span></code></a>&nbsp;方法。定义了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__set__" title="object.__set__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__set__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__get__" title="object.__get__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__get__()</span></code></a>&nbsp;的数据描述器总是会重载实例字典中的定义。与之相对的，非数据描述器可被实例所重载。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">Python 方法 (包括&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#staticmethod" title="staticmethod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">staticmethod()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#classmethod" title="classmethod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">classmethod()</span></code></a>) 都是作为非描述器来实现的。因此实例可以重定义并重载方法。这允许单个实例获得与相同类的其他实例不一样的行为。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#property" title="property" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">property()</span></code></a>&nbsp;函数是作为数据描述器来实现的。因此实例不能重载特性属性的行为。</p></div><h5 id="blogTitle114" style="hyphens: auto; line-height: 22.4px;">类绑定<br></h5><div>如果绑定到一个类，A.x 会被转换为调用: A.__dict__['x'].__get__(None,A)。<br></div><h5 id="blogTitle115" style="hyphens: auto; line-height: 22.4px;">超绑定<br></h5><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">如果&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">a</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;是&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#super" title="super" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;的一个实例，则绑定&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">super(B,</span>&nbsp;<span class="pre" style="hyphens: none;">obj).m()</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;会在&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">obj.__class__.__mro__</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;中搜索&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">B</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;的直接上级基类&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">A</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;然后通过以下调用发起调用描述器:&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">A.__dict__['m'].__get__(obj,</span>&nbsp;<span class="pre" style="hyphens: none;">obj.__class__)</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">。</span></div><h4 id="blogTitle116">__slots__</h4><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><em>__slots__</em>&nbsp;允许我们显式地声明数据成员（例如特征属性）并禁止创建&nbsp;<em>__dict__</em>&nbsp;和&nbsp;<em>__weakref__</em>&nbsp;(除非是在&nbsp;<em>__slots__</em>&nbsp;中显式地声明或是在父类中可用。)</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">相比使用&nbsp;<em>__dict__</em>&nbsp;此方式可以显著地节省空间。</p><dl class="data" style="font-size: 16px; margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><dt id="object.__slots__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__slots__</code><a class="headerlink" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__slots__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">这个类变量可赋值为字符串、可迭代对象或由实例使用的变量名构成的字符串序列。&nbsp;<em>__slots__</em>&nbsp;会为已声明的变量保留空间，并阻止自动为每个实际创建&nbsp;<em>__dict__</em>&nbsp;和&nbsp;<em>__weakref__</em>。</p></dd></dl><h5 id="blogTitle117">使用 __slots__ 的注意事项</h5><p></p><div class="section" id="customizing-class-creation"><span id="class-customization" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"></span></div><p></p><div class="section" id="customizing-attribute-access"><div class="section" id="slots"><div class="section" id="notes-on-using-slots"><ul class="simple"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">当继承自一个未定义&nbsp;<em>__slots__</em>&nbsp;的类时，实例的&nbsp;<em>__dict__</em>&nbsp;和&nbsp;<em>__weakref__</em>&nbsp;属性将总是可访问。</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">没有&nbsp;<em>__dict__</em>&nbsp;变量，实例就不能给未在&nbsp;<em>__slots__</em>&nbsp;定义中列出的新变量赋值。尝试给一个未列出的变量名赋值将引发&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AttributeError" title="AttributeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">AttributeError</span></code></a>。新变量需要动态赋值，就要将&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">'__dict__'</span></code>&nbsp;加入到&nbsp;<em>__slots__</em>&nbsp;声明的字符串序列中。</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">如果未给每个实例设置&nbsp;<em>__weakref__</em>&nbsp;变量，定义了&nbsp;<em>__slots__</em>&nbsp;的类就不支持对其实际的弱引用。如果需要弱引用支持，就要将&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">'__weakref__'</span></code>&nbsp;加入到&nbsp;<em>__slots__</em>&nbsp;声明的字符串序列中。</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><em>__slots__</em>&nbsp;是通过为每个变量名创建描述器 (<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#descriptors" style="color: rgb(99, 99, 187); text-decoration-line: none;">实现描述器</a>) 在类层级上实现的。因此，类属性不能被用来为通过&nbsp;<em>__slots__</em>&nbsp;定义的实例变量设置默认值；否则，类属性就会覆盖描述器赋值。</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><em>__slots__</em>&nbsp;声明的作用不只限于定义它的类。在父类中声明的&nbsp;<em>__slots__</em>&nbsp;在其子类中同样可用。不过，子类将会获得&nbsp;<em>__dict__</em>&nbsp;和&nbsp;<em>__weakref__</em>&nbsp;除非它们也定义了&nbsp;<em>__slots__</em>&nbsp;(其中应该仅包含对任何&nbsp;<em>额外</em>&nbsp;名称的声明位置)。</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">如果一个类定义的位置在某个基类中也有定义，则由基类位置定义的实例变量将不可访问（除非通过直接从基类获取其描述器的方式）。这会使得程序的含义变成未定义。未来可能会添加一个防止此情况的检查。</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">非空的&nbsp;<em>__slots__</em>&nbsp;不适用于派生自“可变长度”内置类型例如&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#int" title="int" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">int</span></code></a>、<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#bytes" title="bytes" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">bytes</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#tuple" title="tuple" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">tuple</span></code></a>&nbsp;的派生类。</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">任何非字符串可迭代对象都可以被赋值给&nbsp;<em>__slots__</em>。映射也可以被使用；不过，未来可能会分别赋给每个键具有特殊含义的值。</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;"><em>__class__</em>&nbsp;赋值仅在两个类具有相同的&nbsp;<em>__slots__</em>&nbsp;时才会起作用。</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">带有多个父类声明位置的多重继承也是可用的，但仅允许一个父类具有由声明位置创建的属性（其他基类必须具有空的位置布局） —— 违反规则将引发&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError" title="TypeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">TypeError</span></code></a>。</li></ul></div></div></div><h3 id="blogTitle118">自定义实例及子类检查</h3><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">以下方法被用来重载&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#isinstance" title="isinstance" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">isinstance()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#issubclass" title="issubclass" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">issubclass()</span></code></a>&nbsp;内置函数的默认行为。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">特别地，元类&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/abc.html#abc.ABCMeta" title="abc.ABCMeta" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">abc.ABCMeta</span></code></a>&nbsp;实现了这些方法以便允许将抽象基类（ABC）作为“虚拟基类”添加到任何类或类型（包括内置类型），包括其他 ABC 之中。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">请注意这些方法的查找是基于类的类型（元类）。它们不能作为类方法在实际的类中被定义。这与基于实例被调用的特殊方法的查找是一致的，只有在此情况下实例本身被当作是类。</p><div class="admonition seealso" style="font-size: 16px; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(255, 255, 204); border: 1px solid rgb(221, 221, 102); border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; text-align: justify; line-height: 22.4px;">参见</p><dl class="last docutils" style="margin-bottom: 0px;"><dt style="font-weight: bold;"><span class="target" id="index-118"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3119" style="color: rgb(99, 99, 187); text-decoration-line: none;">PEP 3119</a>&nbsp;- 引入抽象基类</dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;">新增功能描述，通过&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#class.__instancecheck__" title="class.__instancecheck__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__instancecheck__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#class.__subclasscheck__" title="class.__subclasscheck__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__subclasscheck__()</span></code></a>&nbsp;来定制&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#isinstance" title="isinstance" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">isinstance()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#issubclass" title="issubclass" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">issubclass()</span></code></a>&nbsp;行为，加入此功能的动机是出于向该语言添加抽象基类的内容（参见&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/abc.html#module-abc" title="abc: Abstract base classes according to PEP 3119." style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">abc</span></code></a>&nbsp;模块）。</dd></dl></div><h4 id="blogTitle119" style="hyphens: auto; line-height: 22.4px;">class.__instancecheck__(self, instance)</h4><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">如果&nbsp;</span><em style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">instance</em><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;应被视为&nbsp;</span><em style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">class</em><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;的一个（直接或间接）实例则返回真值。如果定义了此方法，则会被调用以实现&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">isinstance(instance,</span>&nbsp;<span class="pre" style="hyphens: none;">class)</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">。</span></div><h4 id="blogTitle120"><span style="text-align: justify;">class.__subclasscheck__(self, subclass)</span></h4><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">Return true 如果&nbsp;</span><em style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">subclass</em><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;应被视为&nbsp;</span><em style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">class</em><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;的一个（直接或间接）子类则返回真值。如果定义了此方法，则会被调用以实现&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">issubclass(subclass,&nbsp;</span><span class="pre" style="hyphens: none;">class)</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">。</span></div><h3 id="blogTitle121">模拟泛型类型</h3><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">通过定义一个特殊方法，可以实现由&nbsp;<span class="target" id="index-119"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0484" style="color: rgb(99, 99, 187); text-decoration-line: none;"><strong>PEP 484</strong></a>&nbsp;所规定的泛型类语法 (例如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">List[int]</span></code>)</p><h4 id="blogTitle122" style="hyphens: auto; line-height: 22.4px;"><i>classmethod</i>&nbsp;object.__class_getitem__(cls, key)</h4><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">按照&nbsp;</span><em style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">key</em><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;参数指定的类型返回一个表示泛型类的专门化对象。</span><br></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">此方法的查找会基于对象自身，并且当定义于类体内部时，此方法将隐式地成为类方法。请注意，此机制主要是被保留用于静态类型提示，不鼓励在其他场合使用。</p><div class="admonition seealso" style="font-size: 16px; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(255, 255, 204); border: 1px solid rgb(221, 221, 102); border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; text-align: justify; line-height: 22.4px;">参见</p>&nbsp;<p class="last" style="hyphens: auto; text-align: justify; line-height: 22.4px; margin-bottom: 5px; display: inline;"><span class="target" id="index-120"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0560" style="color: rgb(99, 99, 187); text-decoration-line: none;"><strong>PEP 560</strong></a>&nbsp;- 对类型模块和泛型类型的核心支持</p></div><h3 id="blogTitle123">模拟可调用对象</h3><h4 id="blogTitle124">object.__call__(self[, args...])</h4><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">此方法会在实例作为一个函数被“调用”时被调用；如果定义了此方法，则&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x(arg1,</span>&nbsp;<span class="pre" style="hyphens: none;">arg2,</span>&nbsp;<span class="pre" style="hyphens: none;">...)</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;就相当于&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__call__(arg1,</span>&nbsp;<span class="pre" style="hyphens: none;">arg2,</span>&nbsp;<span class="pre" style="hyphens: none;">...)</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;的快捷方式。</span><br></div><h3 id="blogTitle125">模拟容器类型</h3><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">可以定义以下方法来实现容器对象。容器通常属于序列（如列表或元组）或映射（如字典），但也存在其他形式的容器。前几个方法集被用于模拟序列或是模拟映射；两者的不同之处在于序列允许的键应为整数&nbsp;<em>k</em>&nbsp;且&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">0</span>&nbsp;<span class="pre" style="hyphens: none;">&lt;=</span>&nbsp;<span class="pre" style="hyphens: none;">k</span>&nbsp;<span class="pre" style="hyphens: none;">&lt;</span>&nbsp;<span class="pre" style="hyphens: none;">N</span></code>&nbsp;其中&nbsp;<em>N</em>&nbsp;是序列或定义指定区间的项的切片对象的长度。此外还建议让映射提供&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">keys()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">values()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">items()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">get()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">clear()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">setdefault()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">pop()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">popitem()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">copy()</span></code>&nbsp;以及&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">update()</span></code>&nbsp;等方法，它们的行为应与 Python 标准字典对象相应方法类似。此外&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/collections.abc.html#module-collections.abc" title="collections.abc: Abstract base classes for containers" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">collections.abc</span></code></a>&nbsp;模块提供了一个&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/collections.abc.html#collections.abc.MutableMapping" title="collections.abc.MutableMapping" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">MutableMapping</span></code></a>&nbsp;抽象基类，以更方便地根据一个基本集&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getitem__" title="object.__getitem__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getitem__()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__setitem__" title="object.__setitem__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__setitem__()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__delitem__" title="object.__delitem__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__delitem__()</span></code></a>&nbsp;和&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">keys()</span></code>&nbsp;来创建所需方法。可变序列还应该如 Python 标准列表对象那样提供&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">append()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">count()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">index()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">extend()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">insert()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">pop()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">remove()</span></code>,&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">reverse()</span></code>&nbsp;和&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sort()</span></code>&nbsp;等方法。最后，序列类型还应该通过定义下文描述的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__add__" title="object.__add__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__add__()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__radd__" title="object.__radd__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__radd__()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__iadd__" title="object.__iadd__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__iadd__()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__mul__" title="object.__mul__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__mul__()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__rmul__" title="object.__rmul__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__rmul__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__imul__" title="object.__imul__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__imul__()</span></code></a>&nbsp;等方法来实现加法（指拼接）和乘法（指重复）；它们不应定义其他数值运算符。此外也建议映射和序列都实现&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__contains__" title="object.__contains__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__contains__()</span></code></a>&nbsp;方法以允许高效地使用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">in</span></code>&nbsp;运算符；对于映射，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">in</span></code>&nbsp;应该搜索映射的键；对于序列，则应该搜索其中的值。此外还建议映射和序列都实现&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__iter__" title="object.__iter__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__iter__()</span></code></a>&nbsp;方法以允许高效地对容器中的条目进行迭代；对于映射，<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__iter__" title="object.__iter__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__iter__()</span></code></a>&nbsp;应与&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">keys()</span></code>&nbsp;相同；对于序列，则应该迭代其中的值。</p><h4 id="blogTitle126" style="hyphens: auto; line-height: 22.4px;">object.__len__(self)</h4><div><p id="index-93" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">调用此方法以实现内置函数&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#len" title="len" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">len()</span></code></a>。应该返回对象的长度，以一个&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">&gt;=</span></code>&nbsp;0 的整数表示。此外，如果一个对象未定义&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__bool__" title="object.__bool__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__bool__()</span></code></a>&nbsp;方法而其&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__len__" title="object.__len__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__len__()</span></code></a>&nbsp;方法返回值为零，则在布尔运算中会被视为假值。</p><div class="impl-detail compound" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); border-radius: 3px;"><p style="margin: 0px; hyphens: auto; line-height: 22.4px;"><strong>CPython implementation detail:</strong>&nbsp;在 CPython 中，要求长度最大为&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/sys.html#sys.maxsize" title="sys.maxsize" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sys.maxsize</span></code></a>。如果长度大于&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">sys.maxsize</span></code>&nbsp;则某些特性 (例如&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#len" title="len" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">len()</span></code></a>) 可能会引发&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#OverflowError" title="OverflowError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">OverflowError</span></code></a>。要通过真值检测来防止引发&nbsp;<code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">OverflowError</span></code>，对象必须定义&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__bool__" title="object.__bool__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__bool__()</span></code></a>&nbsp;方法。</p></div></div><h4 id="blogTitle127" style="hyphens: auto; line-height: 22.4px;">object.__length_hint__(self)<br></h4><div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">调用此方法以实现&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/operator.html#operator.length_hint" title="operator.length_hint" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">operator.length_hint()</span></code></a>。应该返回对象长度的估计值（可能大于或小于实际长度）。此长度应为一个&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">&gt;=</span></code>&nbsp;的整数。此方法纯粹是为了优化性能，并不要求正确无误。</p><div class="versionadded" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">3.4 新版功能.</span></p></div></div><h4 id="blogTitle128" style="hyphens: auto; line-height: 22.4px;">object.__getitem__(self, key)<br></h4><div><p id="index-94" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">调用此方法以实现&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self[key]</span></code>&nbsp;的求值。对于序列类型，接受的键应为整数和切片对象。请注意负数索引（如果类想要模拟序列类型）的特殊解读是取决于&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getitem__" title="object.__getitem__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getitem__()</span></code></a>&nbsp;方法。如果&nbsp;<em>key</em>&nbsp;的类型不正确则会引发&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError" title="TypeError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">TypeError</span></code></a>&nbsp;异常；如果为序列索引集范围以外的值（在进行任何负数索引的特殊解读之后）则应引发&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#IndexError" title="IndexError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">IndexError</span></code></a>&nbsp;异常。对于映射类型，如果&nbsp;<em>key</em>&nbsp;找不到（不在容器中）则应引发&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#KeyError" title="KeyError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">KeyError</span></code></a>&nbsp;异常。</p><div class="admonition note" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 3px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; line-height: 22.4px;">注解</p>&nbsp;<p class="last" style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px; display: inline;"><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#for" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">for</span></code></a>&nbsp;循环在有不合法索引时会期待捕获&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/exceptions.html#IndexError" title="IndexError" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-exc docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">IndexError</span></code></a>&nbsp;以便正确地检测到序列的结束。</p></div></div><h4 id="blogTitle129" style="hyphens: auto; line-height: 22.4px;">object.__missing__(self, key)<br></h4><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">此方法由&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#dict" title="dict" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">dict</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">.</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getitem__" title="object.__getitem__" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getitem__()</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;在找不到字典中的键时调用以实现 dict 子类的&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self[key]</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">。</span><br></div><h4 id="blogTitle130" style="hyphens: auto; line-height: 22.4px;">object.__setitem__(self, key, value)<br></h4><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">调用此方法以实现向&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self[key]</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;赋值。注意事项与&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getitem__" title="object.__getitem__" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getitem__()</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;相同。为对象实现此方法应该仅限于需要映射允许基于键修改值或添加键，或是序列允许元素被替换时。不正确的&nbsp;</span><em style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">key</em><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;值所引发的异常应与&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getitem__" title="object.__getitem__" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getitem__()</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;方法的情况相同。</span><br></div><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><br></span></div><div><p class="first admonition-title" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; text-align: justify; line-height: 22.4px;">注解</p><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(238, 238, 238);">&nbsp;</span><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; margin-bottom: 5px; display: inline;">切片是通过上述三个专门方法完成的。以下形式的调用</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153); margin-bottom: 5px;"><span class="n">a</span><span class="p">[</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">:</span><span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">]</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">b</span>
</pre></div></div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; margin-bottom: 5px;">会为转写为</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153); margin-bottom: 5px;"><span class="n">a</span><span class="p">[</span><span class="nb" style="color: rgb(0, 112, 32);">slice</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">,</span> <span class="mi" style="color: rgb(32, 128, 80);">2</span><span class="p">,</span> <span class="kc" style="color: rgb(0, 112, 32); font-weight: bold;">None</span><span class="p">)]</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">b</span>
</pre></div></div><p class="last" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; margin-bottom: 5px;">其他形式以此类推。略去的切片项总是以&nbsp;<code class="docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code>&nbsp;补全。</p></div><h4 id="blogTitle131" style="hyphens: auto; line-height: 22.4px;">object.__delitem__(self, key)<br></h4><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">调用此方法以实现&nbsp;</span><code class="docutils literal notranslate" style="color: rgb(34, 34, 34); text-align: justify; background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">self[key]</span></code><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;的删除。注意事项与&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getitem__" title="object.__getitem__" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getitem__()</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;相同。为对象实现此方法应该权限于需要映射允许移除键，或是序列允许移除元素时。不正确的&nbsp;</span><em style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">key</em><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;值所引发的异常应与&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getitem__" title="object.__getitem__" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getitem__()</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;方法的情况相同。</span><br></div><h4 id="blogTitle132" style="hyphens: auto; line-height: 22.4px;">object.__iter__(self)<br></h4><div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">此方法在需要为容器创建迭代器时被调用。此方法应该返回一个新的迭代器对象，它能够逐个迭代容器中的所有对象。对于映射，它应该逐个迭代容器中的键。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">迭代器对象也需要实现此方法；它们需要返回对象自身。有关迭代器对象的详情请参看&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html#typeiter" style="color: rgb(99, 99, 187); text-decoration-line: none;">Iterator Types</a>&nbsp;一节。</p></div><h4 id="blogTitle133" style="hyphens: auto; line-height: 22.4px;">object.__reversed__(self)<br></h4><div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">此方法（如果存在）会被&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#reversed" title="reversed" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">reversed()</span></code></a>&nbsp;内置函数调用以实现逆向迭代。它应当返回一个新的以逆序逐个迭代容器内所有对象的迭代器对象。</p><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">如果未提供&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__reversed__" title="object.__reversed__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__reversed__()</span></code></a>&nbsp;方法，则&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#reversed" title="reversed" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">reversed()</span></code></a>&nbsp;内置函数将回退到使用序列协议 (<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__len__" title="object.__len__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__len__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__getitem__" title="object.__getitem__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getitem__()</span></code></a>)。支持序列协议的对象应当仅在能够提供比&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#reversed" title="reversed" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">reversed()</span></code></a>&nbsp;所提供的实现更高效的实现时才提供&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/datamodel.html#object.__reversed__" title="object.__reversed__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__reversed__()</span></code></a>&nbsp;方法。</p></div><h4 id="blogTitle134" style="hyphens: auto; line-height: 22.4px;">object.__contains__(self, item)<br></h4><div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">成员检测运算符 (<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/expressions.html#in" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">in</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/expressions.html#not-in" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">not</span>&nbsp;<span class="pre" style="hyphens: none;">in</span></code></a>) 通常以在序列中逐个迭代的方式来实现。不过，容器对象可以提供该特殊方法并采用更有效率的实现，这样也不要求对象必须属于序列。<br></p><dl class="method" style="font-size: 16px; margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"></dl></div><div><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">调用此方法以实现成员检测运算符。如果&nbsp;<em>item</em>&nbsp;是&nbsp;<em>self</em>&nbsp;的成员则应返回真，否则返回假。对于映射类型，此检测应基于映射的键而不是值或者键值对。</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">对于未定义&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__contains__" title="object.__contains__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__contains__()</span></code></a>&nbsp;的对象，成员检测将首先尝试通过&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__iter__" title="object.__iter__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__iter__()</span></code></a>&nbsp;进行迭代，然后再使用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__getitem__" title="object.__getitem__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getitem__()</span></code></a>&nbsp;的旧式序列迭代协议，参看&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/expressions.html#membership-test-details" style="color: rgb(99, 99, 187); text-decoration-line: none;">语言参考中的相应部分</a>。</p></div><h3 id="blogTitle135">模拟数字类型</h3><p>Emulating numeric types</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">定义以下方法即可模拟数字类型。特定种类的数字不支持的运算（例如非整数不能进行位运算）所对应的方法应当保持未定义状态。<br></p><dl class="method" style="font-size: 16px; margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><dt id="object.__add__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__add__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__add__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__sub__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__sub__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__sub__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__mul__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__mul__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__mul__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__matmul__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__matmul__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__matmul__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__truediv__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__truediv__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__truediv__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__floordiv__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__floordiv__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__floordiv__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__mod__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__mod__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__mod__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__divmod__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__divmod__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__divmod__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__pow__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__pow__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="optional" style="font-size: 1.3em;">[</span>,&nbsp;<em>modulo</em><span class="optional" style="font-size: 1.3em;">]</span><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__pow__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__lshift__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__lshift__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__lshift__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rshift__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rshift__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rshift__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__and__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__and__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__and__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__xor__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__xor__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__xor__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__or__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__or__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__or__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p id="index-95" style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">调用这些方法来实现二进制算术运算 (<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">+</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">-</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">@</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">/</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">//</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">%</span></code>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#divmod" title="divmod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">divmod()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#pow" title="pow" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">pow()</span></code></a>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">**</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">&lt;&lt;</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">&gt;&gt;</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">&amp;</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">^</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">|</span></code>)。例如，求表达式&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span>&nbsp;<span class="pre" style="hyphens: none;">+</span>&nbsp;<span class="pre" style="hyphens: none;">y</span></code>&nbsp;的值，其中&nbsp;<em>x</em>&nbsp;是具有&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__add__" title="object.__add__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__add__()</span></code></a>&nbsp;方法的类的一个实例，则会调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__add__(y)</span></code>。<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__divmod__" title="object.__divmod__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__divmod__()</span></code></a>&nbsp;方法应该等价于使用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__floordiv__" title="object.__floordiv__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__floordiv__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__mod__" title="object.__mod__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__mod__()</span></code></a>，它不应该被关联到&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__truediv__" title="object.__truediv__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__truediv__()</span></code></a>。请注意如果要支持三元版本的内置&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#pow" title="pow" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">pow()</span></code></a>&nbsp;函数，则&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__pow__" title="object.__pow__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__pow__()</span></code></a>&nbsp;的定义应该接受可选的第三个参数。</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">如果这些方法中的某一个不支持与所提供参数进行运算，它应该返回&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">NotImplemented</span></code>。</p></dd></dl><dl class="method" style="font-size: 16px; margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><dt id="object.__radd__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__radd__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__radd__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rsub__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rsub__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rsub__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rmul__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rmul__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rmul__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rmatmul__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rmatmul__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rmatmul__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rtruediv__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rtruediv__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rtruediv__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rfloordiv__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rfloordiv__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rfloordiv__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rmod__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rmod__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rmod__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rdivmod__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rdivmod__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rdivmod__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rpow__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rpow__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rpow__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rlshift__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rlshift__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rlshift__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rrshift__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rrshift__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rrshift__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rand__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rand__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rand__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__rxor__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__rxor__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rxor__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__ror__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__ror__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__ror__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p id="index-96" style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">调用这些方法来实现具有反射（交换）操作数的二进制算术运算 (<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">+</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">-</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">@</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">/</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">//</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">%</span></code>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#divmod" title="divmod" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">divmod()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#pow" title="pow" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">pow()</span></code></a>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">**</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">&lt;&lt;</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">&gt;&gt;</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">&amp;</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">^</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">|</span></code>)。这些成员函数仅会在左操作数不支持相应运算&nbsp;<a class="footnote-reference" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#id10" id="id5" style="color: rgb(99, 99, 187); text-decoration-line: none;">[3]</a>&nbsp;且两个操作数类型不同时被调用。<a class="footnote-reference" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#id11" id="id6" style="color: rgb(99, 99, 187); text-decoration-line: none;">[4]</a>&nbsp;例如，求表达式&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span>&nbsp;<span class="pre" style="hyphens: none;">-</span>&nbsp;<span class="pre" style="hyphens: none;">y</span></code>&nbsp;的值，其中&nbsp;<em>y</em>是具有&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rsub__" title="object.__rsub__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__rsub__()</span></code></a>&nbsp;方法的类的一个实例，则当&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__sub__(y)</span></code>&nbsp;返回&nbsp;<em>NotImplemented</em>&nbsp;时会调用&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">y.__rsub__(x)</span></code>。</p><p id="index-97" style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">请注意三元版的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#pow" title="pow" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">pow()</span></code></a>&nbsp;并不会尝试调用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__rpow__" title="object.__rpow__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__rpow__()</span></code></a>&nbsp;(因为强制转换规则会太过复杂)。</p><div class="admonition note" style="margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 3px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; line-height: 22.4px;">注解</p>&nbsp;<p class="last" style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px; display: inline;">如果右操作数类型为左操作数类型的一个子类，且该子类提供了指定运算的反射方法，则此方法会先于左操作数的非反射方法被调用。此行为可允许子类重载其祖先类的运算符。</p></div></dd></dl><dl class="method" style="font-size: 16px; margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><dt id="object.__iadd__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__iadd__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__iadd__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__isub__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__isub__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__isub__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__imul__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__imul__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__imul__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__imatmul__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__imatmul__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__imatmul__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__itruediv__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__itruediv__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__itruediv__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__ifloordiv__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__ifloordiv__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__ifloordiv__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__imod__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__imod__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__imod__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__ipow__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__ipow__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="optional" style="font-size: 1.3em;">[</span>,&nbsp;<em>modulo</em><span class="optional" style="font-size: 1.3em;">]</span><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__ipow__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__ilshift__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__ilshift__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__ilshift__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__irshift__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__irshift__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__irshift__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__iand__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__iand__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__iand__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__ixor__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__ixor__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__ixor__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__ior__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__ior__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em>,&nbsp;<em>other</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__ior__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">调用这些方法来实现扩展算术赋值 (<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">+=</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">-=</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">*=</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">@=</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">/=</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">//=</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">%=</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">**=</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">&lt;&lt;=</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">&gt;&gt;=</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">&amp;=</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">^=</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">|=</span></code>)。这些方法应该尝试进行自身操作 (修改&nbsp;<em>self</em>) 并返回结果 (结果应该但并非必须为&nbsp;<em>self</em>)。如果某个方法未被定义，相应的扩展算术赋值将回退到普通方法。例如，如果&nbsp;<em>x</em>&nbsp;是具有&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__iadd__" title="object.__iadd__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__iadd__()</span></code></a>&nbsp;方法的类的一个实例，则&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span>&nbsp;<span class="pre" style="hyphens: none;">+=</span>&nbsp;<span class="pre" style="hyphens: none;">y</span></code>&nbsp;就等价于&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span>&nbsp;<span class="pre" style="hyphens: none;">=</span><span class="pre" style="hyphens: none;">x.__iadd__(y)</span></code>。否则就如&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span>&nbsp;<span class="pre" style="hyphens: none;">+</span>&nbsp;<span class="pre" style="hyphens: none;">y</span></code>&nbsp;的求值一样选择&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x.__add__(y)</span></code>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">y.__radd__(x)</span></code>。在某些情况下，扩展赋值可导致未预期的错误 (参见&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/faq/programming.html#faq-augmented-assignment-tuple-error" style="color: rgb(99, 99, 187); text-decoration-line: none;">Why does a_tuple[i] += [‘item’] raise an exception when the addition works?</a>)，但此行为实际上是数据模型的一个组成部分。</p></dd></dl><dl class="method" style="font-size: 16px; margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><dt id="object.__neg__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__neg__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__neg__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__pos__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__pos__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__pos__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__abs__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__abs__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__abs__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__invert__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__invert__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__invert__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p id="index-98" style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">调用此方法以实现一元算术运算 (<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">-</span></code>,&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">+</span></code>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#abs" title="abs" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">abs()</span></code></a>&nbsp;和&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">~</span></code>)。</p></dd></dl><dl class="method" style="font-size: 16px; margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><dt id="object.__complex__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__complex__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__complex__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__int__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__int__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__int__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__float__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__float__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__float__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p id="index-99" style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">调用这些方法以实现内置函数&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#complex" title="complex" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">complex()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#int" title="int" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">int()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#float" title="float" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">float()</span></code></a>。应当返回一个相应类型的值。</p></dd></dl><dl class="method" style="font-size: 16px; margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><dt id="object.__index__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__index__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__index__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">调用此方法以实现&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/operator.html#operator.index" title="operator.index" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">operator.index()</span></code></a>&nbsp;以及 Python 需要无损地将数字对象转换为整数对象的场合（例如切片或是内置的&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#bin" title="bin" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">bin()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#hex" title="hex" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">hex()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#oct" title="oct" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">oct()</span></code></a>&nbsp;函数)。 存在此方法表明数字对象属于整数类型。 必须返回一个整数。</p><div class="admonition note" style="margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 3px;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; line-height: 22.4px;">注解</p>&nbsp;<p class="last" style="margin-top: 0px; hyphens: auto; line-height: 22.4px; margin-bottom: 5px; display: inline;">为了具有一致的整数类型类，当定义了&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__index__" title="object.__index__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__index__()</span></code></a>&nbsp;的时候也应当定义<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__int__" title="object.__int__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background: rgb(214, 214, 214); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__int__()</span></code></a>，两者应当返回相同的值。</p></div></dd></dl><dl class="method" style="font-size: 16px; margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><dt id="object.__round__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__round__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em><span class="optional" style="font-size: 1.3em;">[</span>,&nbsp;<em>ndigits</em><span class="optional" style="font-size: 1.3em;">]</span><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__round__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__trunc__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__trunc__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__trunc__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__floor__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__floor__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__floor__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dt id="object.__ceil__"><code class="descclassname" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;">object.</code><code class="descname" style="background-color: transparent; padding: 0px 1px; font-size: 19.2px; font-family: monospace, sans-serif; font-weight: bold; border-radius: 3px;">__ceil__</code><span class="sig-paren" style="font-size: larger;">(</span><em>self</em><span class="sig-paren" style="font-size: larger;">)</span><a class="headerlink" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__ceil__" title="永久链接至目标" style="color: rgb(99, 99, 187); text-decoration-line: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;"></a></dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;"><p id="index-100" style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">调用这些方法以实现内置函数&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#round" title="round" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">round()</span></code></a>&nbsp;以及&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/math.html#module-math" title="math: Mathematical functions (sin() etc.)." style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">math</span></code></a>&nbsp;函数&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/math.html#math.trunc" title="math.trunc" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">trunc()</span></code></a>,&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/math.html#math.floor" title="math.floor" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">floor()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/math.html#math.ceil" title="math.ceil" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">ceil()</span></code></a>。 除了将&nbsp;<em>ndigits</em>&nbsp;传给&nbsp;<code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__round__()</span></code>&nbsp;的情况之外这些方法的返回值都应当是原对象截断为&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/numbers.html#numbers.Integral" title="numbers.Integral" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">Integral</span></code></a>&nbsp;(通常为&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#int" title="int" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-class docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">int</span></code></a>)。</p><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;">如果未定义&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__int__" title="object.__int__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__int__()</span></code></a>&nbsp;则内置函数&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/functions.html#int" title="int" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">int()</span></code></a>&nbsp;会回退到&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__trunc__" title="object.__trunc__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__trunc__()</span></code></a>。</p></dd></dl><h4 id="blogTitle136" style="hyphens: auto; line-height: 22.4px;">object.__add__(self, other)</h4><h4 id="blogTitle137" style="hyphens: auto; line-height: 22.4px;">object.__sub__(self, other)</h4><h4 id="blogTitle138" style="hyphens: auto; line-height: 22.4px;">object.__mul__(self, other)</h4><h4 id="blogTitle139" style="hyphens: auto; line-height: 22.4px;">object.__matmul__(self, other)</h4><h4 id="blogTitle140" style="hyphens: auto; line-height: 22.4px;">object.__truediv__(self, other)</h4><h4 id="blogTitle141" style="hyphens: auto; line-height: 22.4px;">object.__floordiv__(self, other)</h4><h4 id="blogTitle142" style="hyphens: auto; line-height: 22.4px;">object.__mod__(self, other)</h4><h4 id="blogTitle143" style="hyphens: auto; line-height: 22.4px;">object.__divmod__(self, other)</h4><h4 id="blogTitle144" style="hyphens: auto; line-height: 22.4px;">object.__pow__(self, other[, modulo])</h4><h4 id="blogTitle145" style="hyphens: auto; line-height: 22.4px;">object.__lshift__(self, other)</h4><h4 id="blogTitle146" style="hyphens: auto; line-height: 22.4px;">object.__rshift__(self, other)</h4><h4 id="blogTitle147" style="hyphens: auto; line-height: 22.4px;">object.__and__(self, other)</h4><h4 id="blogTitle148" style="hyphens: auto; line-height: 22.4px;">object.__xor__(self, other)</h4><h4 id="blogTitle149" style="hyphens: auto; line-height: 22.4px;">object.__or__(self, other)&nbsp;</h4><h4 id="blogTitle150" style="hyphens: auto; line-height: 22.4px;">object.__radd__(self, other)</h4><h4 id="blogTitle151" style="hyphens: auto; line-height: 22.4px;">object.__rsub__(self, other)</h4><h4 id="blogTitle152" style="hyphens: auto; line-height: 22.4px;">object.__rmul__(self, other)</h4><h4 id="blogTitle153" style="hyphens: auto; line-height: 22.4px;">object.__rmatmul__(self, other)</h4><h4 id="blogTitle154" style="hyphens: auto; line-height: 22.4px;">object.__rtruediv__(self, other)</h4><h4 id="blogTitle155" style="hyphens: auto; line-height: 22.4px;">object.__rfloordiv__(self, other)</h4><h4 id="blogTitle156" style="hyphens: auto; line-height: 22.4px;">object.__rmod__(self, other)</h4><h4 id="blogTitle157" style="hyphens: auto; line-height: 22.4px;">object.__rdivmod__(self, other)</h4><h4 id="blogTitle158" style="hyphens: auto; line-height: 22.4px;">object.__rpow__(self, other)</h4><h4 id="blogTitle159" style="hyphens: auto; line-height: 22.4px;">object.__rlshift__(self, other)</h4><h4 id="blogTitle160" style="hyphens: auto; line-height: 22.4px;">object.__rrshift__(self, other)</h4><h4 id="blogTitle161" style="hyphens: auto; line-height: 22.4px;">object.__rand__(self, other)</h4><h4 id="blogTitle162" style="hyphens: auto; line-height: 22.4px;">object.__rxor__(self, other)</h4><h4 id="blogTitle163" style="hyphens: auto; line-height: 22.4px;">object.__ror__(self, other)&nbsp;</h4><h4 id="blogTitle164" style="hyphens: auto; line-height: 22.4px;">object.__iadd__(self, other)</h4><h4 id="blogTitle165" style="hyphens: auto; line-height: 22.4px;">object.__isub__(self, other)</h4><h4 id="blogTitle166" style="hyphens: auto; line-height: 22.4px;">object.__imul__(self, other)</h4><h4 id="blogTitle167" style="hyphens: auto; line-height: 22.4px;">object.__imatmul__(self, other)</h4><h4 id="blogTitle168" style="hyphens: auto; line-height: 22.4px;">object.__itruediv__(self, other)</h4><h4 id="blogTitle169" style="hyphens: auto; line-height: 22.4px;">object.__ifloordiv__(self, other)</h4><h4 id="blogTitle170" style="hyphens: auto; line-height: 22.4px;">object.__imod__(self, other)</h4><h4 id="blogTitle171" style="hyphens: auto; line-height: 22.4px;">object.__ipow__(self, other[, modulo])</h4><h4 id="blogTitle172" style="hyphens: auto; line-height: 22.4px;">object.__ilshift__(self, other)</h4><h4 id="blogTitle173" style="hyphens: auto; line-height: 22.4px;">object.__irshift__(self, other)</h4><h4 id="blogTitle174" style="hyphens: auto; line-height: 22.4px;">object.__iand__(self, other)</h4><h4 id="blogTitle175" style="hyphens: auto; line-height: 22.4px;">object.__ixor__(self, other)</h4><h4 id="blogTitle176" style="hyphens: auto; line-height: 22.4px;">object.__ior__(self, other)</h4><h4 id="blogTitle177" style="hyphens: auto; line-height: 22.4px;">object.__neg__(self)</h4><h4 id="blogTitle178" style="hyphens: auto; line-height: 22.4px;">object.__pos__(self)</h4><h4 id="blogTitle179" style="hyphens: auto; line-height: 22.4px;">object.__abs__(self)</h4><h4 id="blogTitle180" style="hyphens: auto; line-height: 22.4px;">object.__invert__(self)</h4><h4 id="blogTitle181" style="hyphens: auto; line-height: 22.4px;">object.__complex__(self)</h4><h4 id="blogTitle182" style="hyphens: auto; line-height: 22.4px;">object.__int__(self)</h4><h4 id="blogTitle183" style="hyphens: auto; line-height: 22.4px;">object.__float__(self)</h4><h4 id="blogTitle184" style="hyphens: auto; line-height: 22.4px;">object.__index__(self)<br></h4><h4 id="blogTitle185" style="hyphens: auto; line-height: 22.4px;">object.__round__(self[, ndigits])</h4><h4 id="blogTitle186" style="hyphens: auto; line-height: 22.4px;">object.__trunc__(self)</h4><h4 id="blogTitle187" style="hyphens: auto; line-height: 22.4px;">object.__floor__(self)</h4><h4 id="blogTitle188" style="hyphens: auto; line-height: 22.4px;">object.__ceil__(self)&nbsp;</h4><h3 id="blogTitle189">with 语句上下文管理器</h3><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><em class="dfn">上下文管理器</em>&nbsp;是一种对象，它定义了在执行&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/compound_stmts.html#with" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">with</span></code></a>&nbsp;语句时所要创建的运行时上下文。 上下文管理器负责处理所需运行时上下文的入口和出口以供代码块执行使用。 上下文管理器通常使用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/compound_stmts.html#with" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">with</span></code></a>&nbsp;语句 (详见&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/compound_stmts.html#with" style="color: rgb(99, 99, 187); text-decoration-line: none;">The with statement</a>&nbsp;一节) 来发起调用，但也可以通过直接发起调用它们的方法来使用。</p><p id="index-101" style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">上下文管理器的典型用法包括保存和恢复各种全局状态，锁定和解锁资源，关闭打开的文件等等。</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">要了解上下文管理器的更多信息，请参阅&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/stdtypes.html#typecontextmanager" style="color: rgb(99, 99, 187); text-decoration-line: none;">Context Manager Types</a>。</p><h4 id="blogTitle190" style="hyphens: auto; line-height: 22.4px;">object.__enter__(self)</h4><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">进入关联到此对象的运行时上下文。&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/compound_stmts.html#with" style="color: rgb(99, 99, 187); text-decoration-line: none; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">with</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;语句会将此方法的返回值绑定到&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/compound_stmts.html#as" style="color: rgb(99, 99, 187); text-decoration-line: none; font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">as</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;子句所指定的目标（如果有的话）。</span><br></div><h4 id="blogTitle191" style="hyphens: auto; line-height: 22.4px;">object.__exit__(self, exc_type, exc_value, traceback)</h4><dl class="method" style="font-size: 16px; margin-bottom: 15px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);"><dt id="object.__enter__"><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px;">退出关联到此对象的运行时上下文。 各个参数描述了导致上下文退出的异常。 如果上下文是无异常地退出的，三个参数都将为&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/library/constants.html#None" title="None" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-const docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">None</span></code></a>。</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px;">如果提供了异常，并且希望方法屏蔽此异常（即避免其被传播），则应当返回真值。 否则的话，异常将在退出此方法时按正常流程处理。</p><p style="margin-top: 0px; hyphens: auto; text-align: justify; line-height: 22.4px;">请注意&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__exit__" title="object.__exit__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__exit__()</span></code></a>&nbsp;方法不应该重新引发被传入的异常，这是调用者的责任。</p></dt></dl><div class="admonition seealso" style="font-size: 16px; margin-top: 10px; margin-bottom: 10px; padding: 7px; background-color: rgb(255, 255, 204); border: 1px solid rgb(221, 221, 102); border-radius: 3px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif;"><p class="first admonition-title" style="margin: 0px 10px 5px 0px; font-weight: bold; display: inline; hyphens: auto; text-align: justify; line-height: 22.4px;">参见</p><dl class="last docutils" style="margin-bottom: 0px;"><dt style="font-weight: bold;"><span class="target" id="index-102"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0343" style="color: rgb(99, 99, 187); text-decoration-line: none;">PEP 343</a>&nbsp;- The “with” statement</dt><dd style="margin-top: 3px; margin-bottom: 10px; margin-left: 30px; hyphens: auto; text-align: justify; line-height: 20.8px;">The specification, background, and examples for the Python&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#with" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">with</span></code></a>statement.</dd></dl></div><h3 id="blogTitle192">特殊方法查找</h3><p>Special method lookup</p><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">对于自定义类来说，特殊方法的隐式发起调用仅保证在其定义于对象类型中时能正确地发挥作用，而不能定义在对象实例字典中。 该行为就是以下代码会引发异常的原因。:</p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">C</span><span class="p">:</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">pass</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">C</span><span class="p">()</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">c</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="fm" style="color: rgb(6, 40, 126);">__len__</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">lambda</span><span class="p">:</span> <span class="mi" style="color: rgb(32, 128, 80);">5</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="gt" style="color: rgb(0, 68, 221);">Traceback (most recent call last):</span>
  File <span class="nb" style="color: rgb(0, 112, 32);">"&lt;stdin&gt;"</span>, line <span class="m" style="color: rgb(32, 128, 80);">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr" style="color: rgb(255, 0, 0);">TypeError</span>: <span class="n">object of type 'C' has no len()</span>
</pre></div></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">此行为背后的原理在于包括类型对象在内的所有对象都会实现的几个特殊方法，例如&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__hash__" title="object.__hash__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__hash__()</span></code></a>&nbsp;和&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__repr__" title="object.__repr__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__repr__()</span></code></a>。 如果这些方法的隐式查找使用了传统的查找过程，它们会在对类型对象本身发起调用时失败:</p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="mi" style="color: rgb(32, 128, 80);">1</span> <span class="o" style="color: rgb(102, 102, 102);">.</span><span class="fm" style="color: rgb(6, 40, 126);">__hash__</span><span class="p">()</span> <span class="o" style="color: rgb(102, 102, 102);">==</span> <span class="nb" style="color: rgb(0, 112, 32);">hash</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">int</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="fm" style="color: rgb(6, 40, 126);">__hash__</span><span class="p">()</span> <span class="o" style="color: rgb(102, 102, 102);">==</span> <span class="nb" style="color: rgb(0, 112, 32);">hash</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">int</span><span class="p">)</span>
<span class="gt" style="color: rgb(0, 68, 221);">Traceback (most recent call last):</span>
  File <span class="nb" style="color: rgb(0, 112, 32);">"&lt;stdin&gt;"</span>, line <span class="m" style="color: rgb(32, 128, 80);">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr" style="color: rgb(255, 0, 0);">TypeError</span>: <span class="n">descriptor '__hash__' of 'int' object needs an argument</span>
</pre></div></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">以这种方式不正确地尝试发起调用一个类的未绑定方法有时被称为‘元类混淆’，可以通过在查找特殊方法时绕过实例的方式来避免:</p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">type</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">)</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="fm" style="color: rgb(6, 40, 126);">__hash__</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">)</span> <span class="o" style="color: rgb(102, 102, 102);">==</span> <span class="nb" style="color: rgb(0, 112, 32);">hash</span><span class="p">(</span><span class="mi" style="color: rgb(32, 128, 80);">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">type</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">int</span><span class="p">)</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="fm" style="color: rgb(6, 40, 126);">__hash__</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">int</span><span class="p">)</span> <span class="o" style="color: rgb(102, 102, 102);">==</span> <span class="nb" style="color: rgb(0, 112, 32);">hash</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">int</span><span class="p">)</span>
<span class="go">True</span>
</pre></div></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">除了为了正确性而绕过任何实例属性之外，隐式特殊方法查找通常也会绕过&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__getattribute__" title="object.__getattribute__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattribute__()</span></code></a>&nbsp;方法，甚至包括对象的元类:</p><div class="highlight-python3 notranslate" style="font-size: 16px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">Meta</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">type</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__getattribute__</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Metaclass getattribute invoked"</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="nb" style="color: rgb(0, 112, 32);">type</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="fm" style="color: rgb(6, 40, 126);">__getattribute__</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">class</span> <span class="nc" style="color: rgb(14, 132, 181); font-weight: bold;">C</span><span class="p">(</span><span class="nb" style="color: rgb(0, 112, 32);">object</span><span class="p">,</span> <span class="n">metaclass</span><span class="o" style="color: rgb(102, 102, 102);">=</span><span class="n">Meta</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__len__</span><span class="p">(</span><span class="bp" style="color: rgb(0, 112, 32);">self</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="mi" style="color: rgb(32, 128, 80);">10</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">__getattribute__</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">):</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"Class getattribute invoked"</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">... </span>        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">return</span> <span class="nb" style="color: rgb(0, 112, 32);">object</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="fm" style="color: rgb(6, 40, 126);">__getattribute__</span><span class="p">(</span><span class="o" style="color: rgb(102, 102, 102);">*</span><span class="n">args</span><span class="p">)</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">...</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="n">C</span><span class="p">()</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="n">c</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="fm" style="color: rgb(6, 40, 126);">__len__</span><span class="p">()</span>                 <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># Explicit lookup via instance</span>
<span class="go">Class getattribute invoked</span>
<span class="go">10</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="fm" style="color: rgb(6, 40, 126);">__len__</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>          <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># Explicit lookup via type</span>
<span class="go">Metaclass getattribute invoked</span>
<span class="go">10</span>
<span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>                      <span class="c1" style="color: rgb(64, 128, 144); font-style: italic;"># Implicit lookup</span>
<span class="go">10</span>
</pre></div></div><p style="font-size: 16px; hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; background-color: rgb(255, 255, 255);">以这种方式绕过&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3.7/reference/datamodel.html#object.__getattribute__" title="object.__getattribute__" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-meth docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__getattribute__()</span></code></a>&nbsp;机制为解析器内部的速度优化提供了显著的空间，其代价则是牺牲了处理特殊方法时的一些灵活性（特殊方法&nbsp;<em>必须</em>&nbsp;设置在类对象本身上以便始终一致地由解释器发起调用）。</p></div><div><br></div><h2 id="blogTitle193">特殊属性名称</h2><div><h3 id="blogTitle194">object.__dict__</h3><div>A dictionary or other mapping object used to store an object’s (writable) attributes.</div></div><div><br></div><h3 id="blogTitle195">instance.__class__</h3><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">The class to which a class instance belongs.</span><br></div><h3 id="blogTitle196">class.__bases__</h3><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">The tuple of base classes of a class object.</span><br></div><h3 id="blogTitle197">definition.__name__<br></h3><div>The name of the class, function, method, descriptor, or generator instance.<br></div><h3 id="blogTitle198">definition.__qualname__<br></h3><div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">The&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/glossary.html#term-qualified-name" style="color: rgb(99, 99, 187); text-decoration-line: none;">qualified name</a>&nbsp;of the class, function, method, descriptor, or generator instance.</p><div class="versionadded" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);"><p style="margin-top: 0px; hyphens: auto; line-height: 22.4px;"><span class="versionmodified" style="font-style: italic;">3.3 新版功能.</span></p></div></div><h3 id="blogTitle199">class.__mro__<br></h3><div>This attribute is a tuple of classes that are considered when looking for base classes during method resolution.<br></div><h3 id="blogTitle200">class.mro()<br></h3><div><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">This method can be overridden by a metaclass to customize the method resolution order for its instances. It is called at class instantiation, and its result is stored in</span><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;</span><a class="reference internal" href="https://docs.python.org/zh-cn/3/library/stdtypes.html?highlight=__dict__#class.__mro__" title="class.__mro__" style="font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__mro__</span></code></a><span style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255);">.</span><br></div><h3 id="blogTitle201">class.__subclasses__()<br></h3><div><p style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); margin-top: 0px; hyphens: auto; line-height: 22.4px;">Each class keeps a list of weak references to its immediate subclasses. This method returns a list of all those references still alive. Example:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; text-align: justify; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><span class="copybutton" title="Hide the prompts and output" style="cursor: pointer; position: absolute; top: 0px; right: 0px; border-color: rgb(170, 204, 153); border-style: solid; border-width: 1px; color: rgb(170, 204, 153); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;">&gt;&gt;&gt;</span><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="gp" style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span class="nb" style="color: rgb(0, 112, 32);">int</span><span class="o" style="color: rgb(102, 102, 102);">.</span><span class="n">__subclasses__</span><span class="p">()</span>
<span class="go">[&lt;class 'bool'&gt;]</span></pre></div></div></div><div><br></div><div><br></div><div><br></div><div><br></div><h2 id="blogTitle202">Python 作用域和命名空间</h2><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">在介绍类之前，我首先要告诉你一些 Python 的作用域规则。类定义对命名空间有一些巧妙的技巧，你需要知道作用域和命名空间如何工作才能完全理解正在发生的事情。顺便说一下，关于这个主题的知识对任何高级 Python 程序员都很有用。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">让我们从一些定义开始。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><em>namespace</em>&nbsp;是一个从名字到对象的映射。大部分命名空间当前都由 Python 字典实现，但一般情况下基本不会去关注它们（除了要面对性能问题时），而且也有可能在将来更改。下面是几个命名空间的例子：</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"></p><ul><li>存放内置函数的集合（包含&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/functions.html#abs" title="abs" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-func docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">abs()</span></code></a>&nbsp;这样的函数，和内建的异常等）；<br></li><li>模块中的全局名称；<br></li><li>函数调用中的本地名称。<br></li><li>从某种意义上说，对象的属性集合也是一种命名空间的形式。<br></li></ul><p></p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">关于命名空间的重要一点是，不同命名空间中的名称之间绝对没有关系；例如，两个不同的模块都可以定义函数“<span style="font-family: monospace, sans-serif; font-size: 15.44px; background-color: rgb(236, 240, 243);">&nbsp;maximize</span>”而不会产生混淆 - 模块的用户必须在其前面加上模块名称。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">顺便说明一下，我把任何跟在一个点号之后的名称都称为&nbsp;<em>属性</em>&nbsp;— 例如，在表达式&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">z.real</span></code>&nbsp;中，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">real</span></code>&nbsp;是对象&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">z</span></code>&nbsp;的一个属性。按严格的说法，对模块中名称的引用属于属性引用：在表达式&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">modname.funcname</span></code>&nbsp;中，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">modname</span></code>&nbsp;是一个模块对象而&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">funcname</span></code>&nbsp;是它的一个属性。在此情况下在模块的属性和模块中定义的全局名称之间正好存在一个直观的映射：它们共享相同的命名空间！&nbsp;<a class="footnote-reference" href="https://docs.python.org/zh-cn/3/tutorial/classes.html#id2" id="id1" style="color: rgb(99, 99, 187); text-decoration-line: none;">[1]</a></p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">属性可以是只读或者可写的。如果为后者，那么对属性的赋值是可行的。模块属性是可以写，你可以写出&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">modname.the_answer</span>&nbsp;<span class="pre" style="hyphens: none;">=</span>&nbsp;<span class="pre" style="hyphens: none;">42</span></code>&nbsp;。可写的属性同样可以用&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#del" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">del</span></code></a>&nbsp;语句删除。例如，<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">del</span><span class="pre" style="hyphens: none;">modname.the_answer</span></code>&nbsp;将会从名为&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">modname</span></code>&nbsp;的对象中移除&nbsp;<code class="xref py py-attr docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">the_answer</span></code>&nbsp;属性。</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Namespaces are created at different moments and have different lifetimes. The namespace containing the built-in names is created when the Python interpreter starts up, and is never deleted. The global namespace for a module is created when the module definition is read in; normally, module namespaces also last until the interpreter quits. The statements executed by the top-level invocation of the interpreter, either read from a script file or interactively, are considered part of a module called&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/__main__.html#module-__main__" title="__main__: The environment where the top-level script is run." style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">__main__</span></code></a>, so they have their own global namespace. (The built-in names actually also live in a module; this is called&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/library/builtins.html#module-builtins" title="builtins: The module that provides the built-in namespace." style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref py py-mod docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">builtins</span></code></a>.)</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The local namespace for a function is created when the function is called, and deleted when the function returns or raises an exception that is not handled within the function. (Actually, forgetting would be a better way to describe what actually happens.) Of course, recursive invocations each have their own local namespace.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">A&nbsp;<em>scope</em>&nbsp;is a textual region of a Python program where a namespace is directly accessible. “Directly accessible” here means that an unqualified reference to a name attempts to find the name in the namespace.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Although scopes are determined statically, they are used dynamically. At any time during execution, there are at least three nested scopes whose namespaces are directly accessible:</p><ul class="simple" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">最先搜索的最内部作用域包含局部名称</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">从最近的封闭作用域开始搜索的任何封闭函数的范围包含非局部名称，也包括非全局名称</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">倒数第二个作用域包含当前模块的全局名称</li><li style="hyphens: auto; text-align: justify; line-height: 20.8px;">最外面的范围（最后搜索）是包含内置名称的命名空间</li></ul><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">If a name is declared global, then all references and assignments go directly to the middle scope containing the module’s global names. To rebind variables found outside of the innermost scope, the&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#nonlocal" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">nonlocal</span></code></a>&nbsp;statement can be used; if not declared nonlocal, those variables are read-only (an attempt to write to such a variable will simply create a&nbsp;<em>new</em>&nbsp;local variable in the innermost scope, leaving the identically named outer variable unchanged).</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Usually, the local scope references the local names of the (textually) current function. Outside functions, the local scope references the same namespace as the global scope: the module’s namespace. Class definitions place yet another namespace in the local scope.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">It is important to realize that scopes are determined textually: the global scope of a function defined in a module is that module’s namespace, no matter from where or by what alias the function is called. On the other hand, the actual search for names is done dynamically, at run time — however, the language definition is evolving towards static name resolution, at “compile” time, so don’t rely on dynamic name resolution! (In fact, local variables are already determined statically.)</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">A special quirk of Python is that – if no&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#global" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">global</span></code></a>&nbsp;statement is in effect – assignments to names always go into the innermost scope. Assignments do not copy data — they just bind names to objects. The same is true for deletions: the statement&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">del</span>&nbsp;<span class="pre" style="hyphens: none;">x</span></code>&nbsp;removes the binding of&nbsp;<code class="docutils literal notranslate" style="background-color: rgb(236, 240, 243); padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">x</span></code>&nbsp;from the namespace referenced by the local scope. In fact, all operations that introduce new names use the local scope: in particular,&nbsp;<code class="xref std std-keyword docutils literal notranslate" style="color: rgb(99, 99, 187); text-decoration-line: none; background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;"><a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#import" style="color: rgb(99, 99, 187); text-decoration-line: none;">import</a>&nbsp;</span></code>statements and function definitions bind the module or function name in the local scope.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">The&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#global" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">global</span></code></a>&nbsp;statement can be used to indicate that particular variables live in the global scope and should be rebound there; the&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#nonlocal" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">nonlocal</span></code></a>&nbsp;statement indicates that particular variables live in an enclosing scope and should be rebound there.</p></div><h3 id="blogTitle203">作用域和命名空间示例</h3><div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">This is an example demonstrating how to reference the different scopes and namespaces, and how&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#global" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">global</span></code></a>&nbsp;and&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#nonlocal" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">nonlocal</span></code></a>&nbsp;affect variable binding:</p><div class="highlight-python3 notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255); position: relative;"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);"><span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">scope_test</span><span class="p">():</span>
    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">do_local</span><span class="p">():</span>
        <span class="n">spam</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="s2" style="color: rgb(64, 112, 160);">"local spam"</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">do_nonlocal</span><span class="p">():</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">nonlocal</span> <span class="n">spam</span>
        <span class="n">spam</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="s2" style="color: rgb(64, 112, 160);">"nonlocal spam"</span>

    <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span class="nf" style="color: rgb(6, 40, 126);">do_global</span><span class="p">():</span>
        <span class="k" style="color: rgb(0, 112, 32); font-weight: bold;">global</span> <span class="n">spam</span>
        <span class="n">spam</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="s2" style="color: rgb(64, 112, 160);">"global spam"</span>

    <span class="n">spam</span> <span class="o" style="color: rgb(102, 102, 102);">=</span> <span class="s2" style="color: rgb(64, 112, 160);">"test spam"</span>
    <span class="n">do_local</span><span class="p">()</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"After local assignment:"</span><span class="p">,</span> <span class="n">spam</span><span class="p">)</span>
    <span class="n">do_nonlocal</span><span class="p">()</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"After nonlocal assignment:"</span><span class="p">,</span> <span class="n">spam</span><span class="p">)</span>
    <span class="n">do_global</span><span class="p">()</span>
    <span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"After global assignment:"</span><span class="p">,</span> <span class="n">spam</span><span class="p">)</span>

<span class="n">scope_test</span><span class="p">()</span>
<span class="nb" style="color: rgb(0, 112, 32);">print</span><span class="p">(</span><span class="s2" style="color: rgb(64, 112, 160);">"In global scope:"</span><span class="p">,</span> <span class="n">spam</span><span class="p">)</span>
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">示例代码的输出是：</p><div class="highlight-none notranslate" style="color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><div class="highlight" style="background: rgb(238, 255, 204);"><pre style="padding: 5px; overflow-y: hidden; background-color: rgb(238, 255, 204); font-size: 15.44px; font-family: monospace, sans-serif; line-height: 18.528px; color: rgb(51, 51, 51); border: 1px solid rgb(170, 204, 153);">After local assignment: test spam
After nonlocal assignment: nonlocal spam
After global assignment: nonlocal spam
In global scope: global spam
</pre></div></div><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">Note how the&nbsp;<em>local</em>&nbsp;assignment (which is default) didn’t change&nbsp;<em>scope_test</em>’s binding of&nbsp;<em>spam</em>. The&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#nonlocal" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">nonlocal</span></code></a>&nbsp;assignment changed&nbsp;<em>scope_test</em>’s binding of&nbsp;<em>spam</em>, and the&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#global" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">global</span></code></a>&nbsp;assignment changed the module-level binding.</p><p style="hyphens: auto; text-align: justify; line-height: 22.4px; color: rgb(34, 34, 34); font-family: &quot;Lucida Grande&quot;, Arial, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);">您还可以在&nbsp;<a class="reference internal" href="https://docs.python.org/zh-cn/3/reference/simple_stmts.html#global" style="color: rgb(99, 99, 187); text-decoration-line: none;"><code class="xref std std-keyword docutils literal notranslate" style="background-color: transparent; padding: 0px 1px; font-size: 15.44px; font-family: monospace, sans-serif; border-radius: 3px;"><span class="pre" style="hyphens: none;">global</span></code></a>&nbsp;赋值之前看到之前没有&nbsp;<em>spam</em>&nbsp;的绑定。</p></div><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p>
</article>
{% endblock point1 %}
