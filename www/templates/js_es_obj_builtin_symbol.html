{% extends 'c-word.html' %}

{% block title %} Web - JS | ES | obj | built-in | symbol {% endblock title %}

{% block point1 %}
<article contenteditable="true">
    <h3 id="blogTitle0"><span style="font-weight: 700; background-color: yellow;">计算机 | 全栈 | 前端 | JS | ES | Obj | Built-in | Symbol</span></h3><div><h1 id="blogTitle1" style="margin-top: 25px;"><b>symbol</b></h1><div><p style="margin-bottom: 24px; padding: 0px; border: 0px;"><span style="border-style: initial; border-color: initial; border-image: initial;">Symbol&nbsp;</span>是一种特殊的、不可变的数据类型，可以作为对象属性的标识符使用。Symbol 对象是一个 symbol&nbsp;<a href="https://developer.mozilla.org/en-US/docs/Glossary/Primitive" class="glossaryLink" title="primitive data type: A primitive (primitive value, primitive data type) is data that is not an object and has no methods. In JavaScript, there are 6 primitive data types: string, number, boolean, null, undefined, symbol (new in ECMAScript 2015)." style="cursor: help; margin: 0px; padding: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom-style: dashed; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: rgb(170, 170, 170); border-left-color: initial; border-image: initial;">primitive data type</a>&nbsp;的隐式对象包装器。</p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"><span style="border-style: initial; border-color: initial; border-image: initial;">symbol</span>&nbsp;数据类型是一个&nbsp;<a href="https://developer.mozilla.org/en-US/docs/Glossary/Primitive" class="glossaryLink" title="primitive data type: A primitive (primitive value, primitive data type) is data that is not an object and has no methods. In JavaScript, there are 6 primitive data types: string, number, boolean, null, undefined, symbol (new in ECMAScript 2015)." style="cursor: help; margin: 0px; padding: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom-style: dashed; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: rgb(170, 170, 170); border-left-color: initial; border-image: initial;">primitive data type</a>。</p><h2 id="blogTitle2" style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"><span style="font-weight: 700;">概述</span></h2><h3 id="blogTitle3"><b>为什么引入 symbol 数据类型</b></h3><div>在<font color="#333333" face="Menlo, Monaco, Consolas, Courier New, monospace"><span style="box-sizing: border-box; padding-top: 2px; padding-bottom: 2px; border-radius: 4px; background-color: rgb(249, 242, 244);">ECMAScript 6</span></font>之前，对象中的方法和属性都是字符串形式，如果有同名的方法或属性就会被覆盖。为了解决这一问题，<font color="#333333" face="Menlo, Monaco, Consolas, Courier New, monospace"><span style="box-sizing: border-box; padding-top: 2px; padding-bottom: 2px; border-radius: 4px; background-color: rgb(249, 242, 244);">ES6</span></font>中新增了<font color="#333333" face="Menlo, Monaco, Consolas, Courier New, monospace"><span style="box-sizing: border-box; padding-top: 2px; padding-bottom: 2px; border-radius: 4px; background-color: rgb(249, 242, 244);">Symbol</span></font>类型，用<font color="#333333" face="Menlo, Monaco, Consolas, Courier New, monospace"><span style="box-sizing: border-box; padding-top: 2px; padding-bottom: 2px; border-radius: 4px; background-color: rgb(249, 242, 244);">Symbol</span></font>类型创建的标识符都是独一无二的。<b><br></b></div><div><br></div><div><b>引入 symbol 的目的是为了保证每个对象属性名的唯一性，从根本上防止属性名的冲突。</b></div><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">ES5 的对象属性名都是字符串，这容易造成属性名的冲突。比如，你使用了一个他人提供的对象，但又想为这个对象添加新的方法（mixin 模式），新方法的名字就有可能与现有方法产生冲突。如果有一种机制，保证每个属性的名字都是独一无二的就好了，这样就从根本上防止属性名的冲突。这就是 ES6 引入<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol</code>的原因。</p><h3 style="" id="blogTitle4"><b>symbol 是 ES 中新增的一种原始数据类型</b></h3><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">ES6 引入了一种新的原始数据类型<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol</code>，表示独一无二的值。它是 JavaScript 语言的第七种数据类型，前六种是：<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">undefined</code>、<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">null</code>、布尔值（Boolean）、字符串（String）、数值（Number）、对象（Object）。</p><h3 style="" id="blogTitle5"><b>对象的属性名现在可以有两种类型</b></h3><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">Symbol 值通过<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol</code>函数生成。这就是说，对象的属性名现在可以有两种类型，一种是原来就有的字符串，另一种就是新增的 Symbol 类型。凡是属性名属于 Symbol 类型，就都是独一无二的，可以保证不会与其他属性名产生冲突。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let s = Symbol();

typeof s
// "symbol"</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，变量<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s</code>就是一个独一无二的值。<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">typeof</code>运算符的结果，表明变量<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s</code>是 Symbol 数据类型，而不是字符串之类的其他类型。</p><h3 style="" id="blogTitle6"><b>使用 Symbol 时的注意事项</b></h3><p style="font-family: Verdana, Arial; font-size: 14.336px;"><font color="#333333">注意，</font><font color="#000000" style="background-color: green;"><code style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol</code>函数前不能使用<code style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; border-radius: 2px; padding-left: 3px; padding-right: 3px;">new</code>命令</font><font color="#333333">，否则会报错。这是因为生成的 Symbol 是一个原始类型的值，不是对象。也就是说，由于 Symbol 值不是对象，所以不能添加属性。基本上，它是一种类似于字符串的数据类型。</font></p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol</code>函数可以接受一个字符串作为参数，表示对 Symbol 实例的描述，主要是为了在控制台显示，或者转为字符串时，比较容易区分。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let s1 = Symbol('foo');
let s2 = Symbol('bar');

s1 // Symbol(foo)
s2 // Symbol(bar)

s1.toString() // "Symbol(foo)"
s2.toString() // "Symbol(bar)"</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s1</code>和<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s2</code>是两个 Symbol 值。如果不加参数，它们在控制台的输出都是<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol()</code>，不利于区分。有了参数以后，就等于为它们加上了描述，输出的时候就能够分清，到底是哪一个值。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">如果 Symbol 的参数是一个对象，就会调用该对象的<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">toString</code>方法，将其转为字符串，然后才生成一个 Symbol 值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const obj = {
  toString() {
    return 'abc';
  }
};
const sym = Symbol(obj);
sym // Symbol(abc)</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol</code>函数的参数只是表示对当前 Symbol 值的描述，因此<span style="background-color: red;">相同参数的<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol</code>函数的返回值是不相等的</span>。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">// 没有参数的情况
let s1 = Symbol();
let s2 = Symbol();

s1 === s2 // false

// 有参数的情况
let s1 = Symbol('foo');
let s2 = Symbol('foo');

s1 === s2 // false</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s1</code>和<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s2</code>都是<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol</code>函数的返回值，而且参数相同，但是它们是不相等的。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><span style="background-color: red;">Symbol 值不能与其他类型的值进行运算</span>，会报错。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let sym = Symbol('My symbol');

"your symbol is " + sym
// TypeError: can't convert symbol to string
`your symbol is ${sym}`
// TypeError: can't convert symbol to string</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">但是，Symbol 值可以显式转为字符串。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let sym = Symbol('My symbol');

String(sym) // 'Symbol(My symbol)'
sym.toString() // 'Symbol(My symbol)'</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">另外，Symbol 值也可以转为布尔值，但是不能转为数值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let sym = Symbol();
Boolean(sym) // true
!sym  // false

if (sym) {
  // ...
}

Number(sym) // TypeError
sym + 2 // TypeError</code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"><br></p><h3 id="blogTitle7" style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"><span style="font-weight: 700;">作为属性名的 Symbol</span></h3><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">由于每一个 Symbol 值都是不相等的，这意味着 Symbol 值可以作为标识符，用于对象的属性名，就能保证不会出现同名的属性。这对于一个对象由多个模块构成的情况非常有用，能防止某一个键被不小心改写或覆盖。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let mySymbol = Symbol();

// 第一种写法
let a = {};
a[mySymbol] = 'Hello!';

// 第二种写法
let a = {
  [mySymbol]: 'Hello!'
};

// 第三种写法
let a = {};
Object.defineProperty(a, mySymbol, { value: 'Hello!' });

// 以上写法都得到同样结果
a[mySymbol] // "Hello!"</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码通过方括号结构和<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.defineProperty</code>，将对象的属性名指定为一个 Symbol 值。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">注意，<span style="background-color: red;">Symbol 值作为对象属性名时，不能用点运算符</span>。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const mySymbol = Symbol();
const a = {};

a.mySymbol = 'Hello!';
a[mySymbol] // undefined
a['mySymbol'] // "Hello!"</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，因为点运算符后面总是字符串，所以不会读取<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">mySymbol</code>作为标识名所指代的那个值，导致<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">a</code>的属性名实际上是一个字符串，而不是一个 Symbol 值。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">同理，在对象的内部，使用 Symbol 值定义属性时，Symbol 值必须放在方括号之中。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let s = Symbol();

let obj = {
  [s]: function (arg) { ... }
};

obj[s](123);</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，如果<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s</code>不放在方括号中，该属性的键名就是字符串<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s</code>，而不是<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s</code>所代表的那个 Symbol 值。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">采用增强的对象写法，上面代码的<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">obj</code>对象可以写得更简洁一些。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let obj = {
  [s](arg) { ... }
};</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">Symbol 类型还可以用于定义一组常量，保证这组常量的值都是不相等的。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">log.levels = {
  DEBUG: Symbol('debug'),
  INFO: Symbol('info'),
  WARN: Symbol('warn')
};
log(log.levels.DEBUG, 'debug message');
log(log.levels.INFO, 'info message');</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是另外一个例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const COLOR_RED    = Symbol();
const COLOR_GREEN  = Symbol();

function getComplement(color) {
  switch (color) {
    case COLOR_RED:
      return COLOR_GREEN;
    case COLOR_GREEN:
      return COLOR_RED;
    default:
      throw new Error('Undefined color');
    }
}</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">常量使用 Symbol 值最大的好处，就是其他任何值都不可能有相同的值了，因此可以保证上面的<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">switch</code>语句会按设计的方式工作。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">还有一点需要注意，<span style="background-color: red;">Symbol 值作为属性名时，该属性还是公开属性，不是私有属性</span>。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><br></p><h3 id="blogTitle8"><span style="font-weight: 700;">实例：消除魔术字符串</span></h3><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">魔术字符串指的是，在代码之中多次出现、与代码形成强耦合的某一个具体的字符串或者数值。风格良好的代码，应该尽量消除魔术字符串，改由含义清晰的变量代替。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">function getArea(shape, options) {
  let area = 0;

  switch (shape) {
    case 'Triangle': // 魔术字符串
      area = .5 * options.width * options.height;
      break;
    /* ... more code ... */
  }

  return area;
}

getArea('Triangle', { width: 100, height: 100 }); // 魔术字符串</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，字符串<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Triangle</code>就是一个魔术字符串。它多次出现，与代码形成“强耦合”，不利于将来的修改和维护。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">常用的消除魔术字符串的方法，就是把它写成一个变量。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const shapeType = {
  triangle: 'Triangle'
};

function getArea(shape, options) {
  let area = 0;
  switch (shape) {
    case shapeType.triangle:
      area = .5 * options.width * options.height;
      break;
  }
  return area;
}

getArea(shapeType.triangle, { width: 100, height: 100 });</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，我们把<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Triangle</code>写成<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">shapeType</code>对象的<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">triangle</code>属性，这样就消除了强耦合。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">如果仔细分析，可以发现<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">shapeType.triangle</code>等于哪个值并不重要，只要确保不会跟其他<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">shapeType</code>属性的值冲突即可。因此，这里就很适合改用 Symbol 值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const shapeType = {
  triangle: Symbol()
};</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，除了将<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">shapeType.triangle</code>的值设为一个 Symbol，其他地方都不用修改。</p><h3 id="blogTitle9" style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"><span style="font-weight: 700;">属性名的遍历</span></h3><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">Symbol 作为属性名，该属性不会出现在<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">for...in</code>、<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">for...of</code>循环中，也不会被<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.keys()</code>、<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertyNames()</code>、<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">JSON.stringify()</code>返回。但是，它也不是私有属性，有一个<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertySymbols</code>方法，可以获取指定对象的所有 Symbol 属性名。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertySymbols</code>方法返回一个数组，成员是当前对象的所有用作属性名的 Symbol 值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const obj = {};
let a = Symbol('a');
let b = Symbol('b');

obj[a] = 'Hello';
obj[b] = 'World';

const objectSymbols = Object.getOwnPropertySymbols(obj);

objectSymbols
// [Symbol(a), Symbol(b)]</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是另一个例子，<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertySymbols</code>方法与<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">for...in</code>循环、<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertyNames</code>方法进行对比的例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const obj = {};

let foo = Symbol("foo");

Object.defineProperty(obj, foo, {
  value: "foobar",
});

for (let i in obj) {
  console.log(i); // 无输出
}

Object.getOwnPropertyNames(obj)
// []

Object.getOwnPropertySymbols(obj)
// [Symbol(foo)]</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，使用<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertyNames</code>方法得不到<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol</code>属性名，需要使用<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertySymbols</code>方法。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">另一个新的 API，<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Reflect.ownKeys</code>方法可以返回所有类型的键名，包括常规键名和 Symbol 键名。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let obj = {
  [Symbol('my_key')]: 1,
  enum: 2,
  nonEnum: 3
};

Reflect.ownKeys(obj)
//  ["enum", "nonEnum", Symbol(my_key)]</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">由于以 Symbol 值作为名称的属性，不会被常规方法遍历得到。我们可以利用这个特性，为对象定义一些非私有的、但又希望只用于内部的方法。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let size = Symbol('size');

class Collection {
  constructor() {
    this[size] = 0;
  }

  add(item) {
    this[this[size]] = item;
    this[size]++;
  }

  static sizeOf(instance) {
    return instance[size];
  }
}

let x = new Collection();
Collection.sizeOf(x) // 0

x.add('foo');
Collection.sizeOf(x) // 1

Object.keys(x) // ['0']
Object.getOwnPropertyNames(x) // ['0']
Object.getOwnPropertySymbols(x) // [Symbol(size)]</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，对象<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">x</code>的<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">size</code>属性是一个 Symbol 值，所以<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.keys(x)</code>、<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.getOwnPropertyNames(x)</code>都无法获取它。这就造成了一种非私有的内部方法的效果。</p><h3 id="blogTitle10" style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"><span style="font-weight: 700;">Symbol.for()，Symbol.keyFor()</span></h3><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">有时，我们希望重新使用同一个 Symbol 值，<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for</code>方法可以做到这一点。它接受一个字符串作为参数，然后搜索有没有以该参数作为名称的 Symbol 值。如果有，就返回这个 Symbol 值，否则就新建并返回一个以该字符串为名称的 Symbol 值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let s1 = Symbol.for('foo');
let s2 = Symbol.for('foo');

s1 === s2 // true</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s1</code>和<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s2</code>都是 Symbol 值，但是它们都是同样参数的<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for</code>方法生成的，所以实际上是同一个值。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for()</code>与<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol()</code>这两种写法，都会生成新的 Symbol。它们的区别是，前者会被登记在全局环境中供搜索，后者不会。<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for()</code>不会每次调用就返回一个新的 Symbol 类型的值，而是会先检查给定的<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">key</code>是否已经存在，如果不存在才会新建一个值。比如，如果你调用<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for("cat")</code>30 次，每次都会返回同一个 Symbol 值，但是调用<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol("cat")</code>30 次，会返回 30 个不同的 Symbol 值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">Symbol.for("bar") === Symbol.for("bar")
// true

Symbol("bar") === Symbol("bar")
// false</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，由于<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol()</code>写法没有登记机制，所以每次调用都会返回一个不同的值。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.keyFor</code>方法返回一个已登记的 Symbol 类型值的<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">key</code>。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let s1 = Symbol.for("foo");
Symbol.keyFor(s1) // "foo"

let s2 = Symbol("foo");
Symbol.keyFor(s2) // undefined</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，变量<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s2</code>属于未登记的 Symbol 值，所以返回<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">undefined</code>。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">需要注意的是，<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for</code>为 Symbol 值登记的名字，是全局环境的，可以在不同的 iframe 或 service worker 中取到同一个值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">iframe = document.createElement('iframe');
iframe.src = String(window.location);
document.body.appendChild(iframe);

iframe.contentWindow.Symbol.for('foo') === Symbol.for('foo')
// true</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，iframe 窗口生成的 Symbol 值，可以在主页面得到。</p><h3 id="blogTitle11" style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"><span style="font-weight: 700;">实例：模块的 Singleton 模式</span></h3><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">Singleton 模式指的是调用一个类，任何时候返回的都是同一个实例。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">对于 Node 来说，模块文件可以看成是一个类。怎么保证每次执行这个模块文件，返回的都是同一个实例呢？</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">很容易想到，可以把实例放到顶层对象<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">global</code>。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">// mod.js
function A() {
  this.foo = 'hello';
}

if (!global._foo) {
  global._foo = new A();
}

module.exports = global._foo;</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">然后，加载上面的<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">mod.js</code>。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const a = require('./mod.js');
console.log(a.foo);</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，变量<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">a</code>任何时候加载的都是<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">A</code>的同一个实例。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">但是，这里有一个问题，全局变量<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">global._foo</code>是可写的，任何文件都可以修改。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const a = require('./mod.js');
global._foo = 123;</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面的代码，会使得别的脚本加载<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">mod.js</code>都失真。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">为了防止这种情况出现，我们就可以使用 Symbol。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">// mod.js
const FOO_KEY = Symbol.for('foo');

function A() {
  this.foo = 'hello';
}

if (!global[FOO_KEY]) {
  global[FOO_KEY] = new A();
}

module.exports = global[FOO_KEY];</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，可以保证<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">global[FOO_KEY]</code>不会被无意间覆盖，但还是可以被改写。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const a = require('./mod.js');
global[Symbol.for('foo')] = 123;</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">如果键名使用<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol</code>方法生成，那么外部将无法引用这个值，当然也就无法改写。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">// mod.js
const FOO_KEY = Symbol('foo');

// 后面代码相同 ……</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码将导致其他脚本都无法引用<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">FOO_KEY</code>。但这样也有一个问题，就是如果多次执行这个脚本，每次得到的<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">FOO_KEY</code>都是不一样的。虽然 Node 会将脚本的执行结果缓存，一般情况下，不会多次执行同一个脚本，但是用户可以手动清除缓存，所以也不是完全可靠。</p><h3 id="blogTitle12" style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"><span style="font-weight: 700;">内置的 Symbol 值</span></h3><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">除了定义自己使用的 Symbol 值以外，ES6 还提供了 11 个内置的 Symbol 值，指向语言内部使用的方法。</span></p><h1 style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;" id="blogTitle13"><b>Symbol 对象</b></h1><h2 id="blogTitle14" style="margin-top: 0px; margin-bottom: 12px; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;"><span style="font-weight: 700;">语法</span></h2><pre class="syntaxbox" style="margin-top: 0px; margin-bottom: 20px; padding: 15px; background-color: rgb(221, 228, 233); font-size: 15px; line-height: 19px; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; color: rgb(59, 60, 64); border-width: 0px 0px 0px 5px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: rgb(85, 138, 187); direction: ltr; hyphens: none; white-space: pre-wrap;"><code class="css" style="word-wrap: break-word; margin: 0px; padding: 0px; border: 0px; font-weight: inherit; font-family: inherit;">Symbol([description])</code></pre><h4 style="margin-top: 0px; margin-bottom: 12px; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;" id="blogTitle15"><span style="font-weight: 700;">参数</span></h4><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px;"><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">description</span></font>&nbsp;<span class="inlineIndicator optional optionalInline" style="margin: 0px 0px 0px 10px; padding: 0.45em 0.35em 0.3em; border-width: 0px 0px 0px 4px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-left-style: solid; border-color: rgb(224, 227, 228); border-image: initial; display: inline-block; min-width: 20px; vertical-align: baseline; border-radius: 2px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; line-height: normal;">可选</span></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><span class="copied" id="tran_0" style="margin: 0px; padding: 0px; border: 0px; line-height: 24px; outline: 0px; text-align: justify;">可选的，字符串。</span>可用于调试但不能访问符号本身的符号描述。</dd></dl><h2 style="margin-top: 0px; margin-bottom: 12px; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;" id="blogTitle16"><span style="font-weight: 700;">描述</span></h2><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">要创建一个新的基本&nbsp;symbol，你可以使用一个可选的字符串作为其描述,写<font color="#3b3c40" face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; background-color: rgb(255, 255, 255); font-weight: inherit; font-style: inherit;">Symbol()</span></font>.</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 1em 1em 1em 3.8em; background-image: url(&quot;../../img/blueprint-dark.fd85a7a074ae.png&quot;); background-position: center top; background-color: rgb(250, 251, 252); font-size: 15px; line-height: 1.5; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; color: rgb(59, 60, 64); border-width: 0px 0px 0px 5px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: rgb(85, 138, 187); text-shadow: none; direction: ltr; word-break: normal; word-wrap: normal; hyphens: none; position: relative; counter-reset: linenumber 0;"><code class=" language-js javascript" style="word-wrap: normal; margin: 0px; padding: 0px; border: 0px; font-weight: inherit; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">var sym0 = Symbol();
var sym1 = Symbol("symbol1");
var sym2 = Symbol("symbol2");
var sym3 = Symbol("symbol2");</code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">上面的代码创建三个新的symbols。 注意，<font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol("</span></font>symbol2<font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">")</span></font>&nbsp;不会强制字符串 “symbol2” 成为一个 symbol。它每次都会创建一个新的 symbol：</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 1em 1em 1em 3.8em; background-image: url(&quot;../../img/blueprint-dark.fd85a7a074ae.png&quot;); background-position: center top; background-color: rgb(250, 251, 252); font-size: 15px; line-height: 1.5; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; color: rgb(59, 60, 64); border-width: 0px 0px 0px 5px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: rgb(85, 138, 187); text-shadow: none; direction: ltr; word-break: normal; word-wrap: normal; hyphens: none; position: relative; counter-reset: linenumber 0;"><code class=" language-js ruby" style="word-wrap: normal; margin: 0px; padding: 0px; border: 0px; font-weight: inherit; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Symbol("symbol2") === Symbol("symbol2"); // false</code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">下面使用&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new" title="(new&nbsp;operator) 新运算符创建一个用户定义的对象类型的实例或具有构造函数的内置对象类型之一。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">new</span></font></a>&nbsp;运算符的语法将会抛出一个&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">TypeError</span></font></a>&nbsp;错误：</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 1em 1em 1em 3.8em; background-image: url(&quot;../../img/blueprint-dark.fd85a7a074ae.png&quot;); background-position: center top; background-color: rgb(250, 251, 252); font-size: 15px; line-height: 1.5; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; color: rgb(59, 60, 64); border-width: 0px 0px 0px 5px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: rgb(85, 138, 187); text-shadow: none; direction: ltr; word-break: normal; word-wrap: normal; hyphens: none; position: relative; counter-reset: linenumber 0;"><code class=" language-js javascript" style="word-wrap: normal; margin: 0px; padding: 0px; border: 0px; font-weight: inherit; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">var sym = new Symbol(); // TypeError</code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">这会阻止创建一个显式的 Symbol 包装器对象而不是一个 Symbol 值。围绕原始数据类型创建一个显式包装器对象从 ECMAScript 6 开始不再被支持。 然而，现有的原始包装器对象，如&nbsp;<font color="#3b3c40" face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; background-color: rgb(255, 255, 255); font-weight: inherit;">new Boolean、</span></font>&nbsp;<font color="#3b3c40" face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; background-color: rgb(255, 255, 255); font-weight: inherit;">new String</span></font>以及<span style="margin: 0px; padding: 0px; border: 0px;">new Number因为遗留原因仍可被创建。</span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">如果你真地想创建一个 Symbol 包装对象(<font color="#3b3c40" face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; background-color: rgb(255, 255, 255); font-weight: inherit; font-style: inherit;">Symbol</span></font>&nbsp;wrapper object)，你可以使用 Object() 函数：</p><pre style="margin-top: 0px; margin-bottom: 20px; padding: 15px; background-color: rgb(244, 247, 248); font-size: 15px; line-height: 19px; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; color: rgb(59, 60, 64); border-width: 0px; border-style: initial; border-color: initial;"><code class="javascript" style="word-wrap: break-word; margin: 0px; padding: 0px; border: 0px; font-weight: inherit; font-family: inherit;">var sym = Symbol("foo");
typeof sym;     // "symbol"
var symObj = Object(sym);
typeof symObj;  // "object"</code></pre><h3 style="margin-top: 0px; margin-bottom: 12px; word-wrap: break-word; padding: 0px; border: 0px; line-height: 1;" id="blogTitle17"><span style="font-weight: 700;">全局共享的 Symbol</span></h3><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">上面的语法使用<font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol()</span></font>&nbsp;函数&nbsp;不会在你的整个代码库中创建一个可用的全局符号。 要创建跨文件可用的symbols，甚至跨域（每个都有它自己的全局作用域）&nbsp;, 使用这个方法<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/for" title="Symbol.for(key) 方法会根据给定的键 key，来从运行时的&nbsp;symbol 注册表中找到对应的 symbol，如果找到了，则返回它，否则，新建一个与该键关联的 symbol，并放入全局&nbsp;symbol 注册表中。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol.for()</span></font></a>&nbsp;和&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/keyFor" title="Symbol.keyFor(sym) 方法用来获取 symbol 注册表中与某个 symbol 关联的键。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol.keyFor()</span></font></a>从全局symbol的注册处设置和取得symbols。</p><h3 style="margin-top: 0px; margin-bottom: 12px; word-wrap: break-word; padding: 0px; border: 0px; line-height: 1;" id="blogTitle18"><span style="font-weight: 700;">在对象中查找 Symbol 属性</span></h3><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">方法<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols" title="Object.getOwnPropertySymbols() 方法会返回一个数组，该数组包含了指定对象自身的（非继承的）所有 symbol 属性键。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Object.getOwnPropertySymbols()</span></font></a>&nbsp;让你在查找一个给定对象的符号属性时返回一个符号类型的数组。注意，每个初始化的对象都是没有自己的符号属性的，因此这个数组可能为空。除非你已经在对象上设置了符号属性。</p><h2 style="margin-top: 0px; margin-bottom: 12px; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;" id="blogTitle19"><span style="font-weight: 700;">静态属性</span></h2><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px;"><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol.length</span></font></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">长度属性值为0。</dd><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/prototype" title="Technical review completed. Editorial review completed." style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol.prototype</span></font></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">描述符号构造函数的原型。</dd></dl><p style="margin-top: 0px; margin-bottom: 12px; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;"><b>众所周知的符号</b></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">除了你自己的符号，JavaScript还内建了一些在ECMAScript 5 之前没有暴露给开发者的符号，它们代表了内部语言行为。这些符号可以使用以下属性访问：</p><h3 style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;" id="blogTitle20"><b>迭代 symbols</b></h3><div><table style="width: 674px;"><caption>table 1.1 heading</caption><tbody><tr><th>title</th><th>title</th></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator" title="Symbol.iterator&nbsp;为每一个对象定义了默认的迭代器。该迭代器可以被 for...of 循环结构使用。" style="background-color: rgb(187, 187, 187); font-weight: bold; margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">iterator</span></font></a><br></td><td><span style="font-weight: 700; margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">Symbol.iterator&nbsp;</span><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">为每一个对象定义了默认的迭代器。该迭代器可以被&nbsp;</span><code style="font-size: medium; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; color: rgb(51, 51, 51); white-space: normal; margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; word-wrap: break-word;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...of" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;">for...of</a></code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;循环使用。</span><br><br>对象的<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.iterator</code><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">属性，指向该对象的默认遍历器方法。<br></span><pre class=" language-javascript" style="margin: 0.5em auto; padding-right: 1em; padding-left: 0.7rem; background-color: rgb(17, 17, 17); font-size: 14.336px; line-height: 1.2; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; border-radius: 5px;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const myIterable = {};
myIterable[Symbol.iterator] = function* () {
  yield 1;
  yield 2;
  yield 3;
};

[...myIterable] // [1, 2, 3]</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">对象进行<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">for...of</code>循环时，会调用<code style="font-size: 0.7rem; font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.iterator</code>方法，返回该对象的默认遍历器，详细介绍参见《Iterator 和 for...of 循环》一章。</p><pre class=" language-javascript" style="margin: 0.5em auto; padding-right: 1em; padding-left: 0.7rem; background-color: rgb(17, 17, 17); font-size: 14.336px; line-height: 1.2; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; border-radius: 5px;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">class Collection {
  *[Symbol.iterator]() {
    let i = 0;
    while(this[i] !== undefined) {
      yield this[i];
      ++i;
    }
  }
}

let myCollection = new Collection();
myCollection[0] = 1;
myCollection[1] = 2;

for(let value of myCollection) {
  console.log(value);
}
// 1
// 2</code></pre><br><span style="font-weight: 700;">描述<br></span><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">当需要对一个对象进行迭代时（比如开始用于一个<code style="font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; word-wrap: break-word;">for..of</code>循环中），它的<code style="font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; word-wrap: break-word;">@@iterator</code>方法都会在不传参情况下被调用，返回的<span style="font-weight: 700; margin: 0px; padding: 0px; border: 0px;">迭代器</span>用于获取要迭代的值。</p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">一些内置类型拥有默认的迭代器行为，其他类型（如&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object" title="Object 构造函数创建一个对象包装器。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; word-wrap: break-word;">Object</code></a>）则没有。下表中的内置类型拥有默认的<span style="margin: 0px; padding: 0px; border: 0px; font-family: consolas, monaco, &quot;andale mono&quot;, monospace;"><code style="font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; word-wrap: break-word;">@@iterator</code></span>方法：</p><ul style="margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; list-style-position: initial; list-style-image: initial; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/@@iterator" title="@@iterator属性和 values() 属性的初始值均为同一个函数对象" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; word-wrap: break-word;">Array.prototype[@@iterator]()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/@@iterator" title="@@iterator 的初始值是和 values 属性的初始值相同的对象。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; word-wrap: break-word;">TypedArray.prototype[@@iterator]()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/@@iterator" title="[@@iterator]()&nbsp;方法返回一个新的Iterator对象，它遍历字符串的代码点，返回每一个代码点的字符串值。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; word-wrap: break-word;">String.prototype[@@iterator]()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Map/@@iterator" title="此页面仍未被本地化, 期待您的翻译!" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; word-wrap: break-word;">Map.prototype[@@iterator]()</code></a></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set/@@iterator" title="The initial value of the @@iterator property is the same function object as the initial value of the values property." style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; word-wrap: break-word;">Set.prototype[@@iterator]()</code></a></li></ul><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">更多信息请参见<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;">迭代协议</a>。</p><span style="font-weight: 700;">示例<br></span><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span style="font-weight: 700;">自定义迭代器</span></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">我们可以像下面这样创建自定义的迭代器：</p><pre class="brush: js line-numbers  language-js"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">var myIterable = {}
myIterable[Symbol.iterator] = function* () {
    yield 1;
    yield 2;
    yield 3;
};
[...myIterable] // [1, 2, 3]</code></pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span style="font-weight: 700;">不符合标准的迭代器</span></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">如果一个迭代器&nbsp;<code style="font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; word-wrap: break-word;">@@iterator</code>&nbsp;没有返回一个迭代器对象，那么它就是一个不符合标准的迭代器，这样的迭代器将会在运行期抛出异常，甚至非常诡异的 Bug。</p><pre class="brush: js line-numbers  language-js"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">var nonWellFormedIterable = {}
nonWellFormedIterable[Symbol.iterator] = () =&gt; 1
[...nonWellFormedIterable] // TypeError: [] is not a function</code></pre></td></tr></tbody></table></div><h3 id="blogTitle21"><b>正则表达式 symbols</b></h3><div><table><caption>table 1.1 heading</caption><tbody><tr><th>title</th><th>title</th></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/match" title="Symbol.match&nbsp;指定了匹配的是正则表达式而不是字符串。String.prototype.match() 方法会调用此函数。" style="margin: 0px; padding: 0px; border: 0px;"><span style="border-style: initial; border-color: initial;">match</span></a><br></td><td><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;"><strong style="margin: 0px; padding: 0px; border: 0px;">Symbol.match&nbsp;</strong></code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">指定了匹配的是正则表达式而不是字符串。</span><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/match" title="当一个字符串与一个正则表达式匹配时，&nbsp;match()方法检索匹配项。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">String.prototype.match()</code></a><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;方法会调用此函数。</span><br><br><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.match</code>属性，指向一个函数。当执行<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">str.match(myObject)</code>时，如果该属性存在，会调用它，返回该方法的返回值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">String.prototype.match(regexp)
// 等同于
regexp[Symbol.match](this)

class MyMatcher {
  [Symbol.match](string) {
    return 'hello world'.indexOf(string);
  }
}

'e'.match(new MyMatcher()) // 1</code></pre><br><b>描述<br></b>此函数还用于标识对象是否具有正则表达式的行为。比如，&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith" title="startsWith()方法用来判断当前字符串是否是以另外一个给定的子字符串“开头”的，根据判断结果返回 true 或 false。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">String.prototype.startsWith()</code></a><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">，</span><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith" title="endsWith()方法用来判断当前字符串是否是以另外一个给定的子字符串“结尾”的，根据判断结果返回 true 或 false。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">String.prototype.endsWith()</code></a><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;和<br>&nbsp;</span><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/includes" title="includes() 方法用于判断一个字符串是否包含在另一个字符串中，根据情况返回true或false。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">String.prototype.includes()</code></a><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;这些方法会检查其第一个参数是否是正则表达式，是正则表达式就抛出一个</span><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">。现在，如果&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;">match</code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;symbol 设置为&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;">false</code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">（或者一个&nbsp;</span><a href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" title="假值: A falsy&nbsp;value is a&nbsp;value that&nbsp;translates to false when evaluated in a Boolean context." class="glossaryLink" style="color: inherit; margin: 0px; padding: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-bottom-style: dashed; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: rgb(170, 170, 170); border-left-color: initial; border-image: initial; cursor: help; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">假值</a><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">），就表示该对象不打算用作正则表达式对象。</span><br><br><b>示例</b><br><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>禁止表达式检查</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下面代码会抛出一个&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code></a>：</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">"/bar/".startsWith(/bar/);

// Throws TypeError, 因为 /bar/ 是一个正则表达式
// 且 Symbol.match 没有修改。</code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">但是，如果你将&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol.match</code>&nbsp;置为&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">false，使用 match 属性的</code>表达式检查会认为该象不是正则表达式对象。<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">startsWith</code>&nbsp;和&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">endsWith</code>&nbsp;方法将不会抛出&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">TypeError</code>。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">var re = /foo/;
re[Symbol.match] = false;
"/foo/".startsWith(re); // true
"/baz/".endsWith(re);   // false</code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/replace" title="Symbol.replace&nbsp;这个属性指定了当一个字符串替换所匹配字符串时所调用的方法。String.prototype.replace() 方法会调用此方法。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">replace</span></a><br></td><td><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;"><strong style="margin: 0px; padding: 0px; border: 0px;">Symbol.replace</strong></code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;这个属性指定了当一个字符串替换所匹配字符串时所调用的方法。</span><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace" title="replace()&nbsp;方法返回一个由替换值替换一些或所有匹配的模式后的新字符串。模式可以是一个字符串或者一个正则表达式, 替换值可以是一个字符串或者一个每次匹配都要调用的函数。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">String.prototype.replace()</code></a><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;方法会调用此方法。</span><br><br><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.replace</code>属性，指向一个方法，当该对象被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">String.prototype.replace</code>方法调用时，会返回该方法的返回值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">String.prototype.replace(searchValue, replaceValue)
// 等同于
searchValue[Symbol.replace](this, replaceValue)</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是一个例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">const x = {};
x[Symbol.replace] = (...s) =&gt; console.log(s);

'Hello'.replace(x, 'World') // ["Hello", "World"]</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.replace</code>方法会收到两个参数，第一个参数是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">replace</code>方法正在作用的对象，上面例子是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Hello</code>，第二个参数是替换后的值，上面例子是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">World</code>。</p></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/search" title="Symbol.search 指定了一个搜索方法，这个方法接受用户输入的正则表达式，返回该正则表达式在字符串中匹配到的下标，这个方法由以下的方法来调用&nbsp;String.prototype.search()。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">search</span></a><br></td><td><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Symbol.search 指定了一个搜索方法，这个方法接受用户输入的正则表达式，返回该正则表达式在字符串中匹配到的下标，这个方法由以下的方法来调用&nbsp;</span><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/search" title="search()&nbsp;方法执行正则表达式和 String对象之间的一个搜索匹配。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">String.prototype.search()</span></a>。</p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">更多信息请参见&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/@@search" title="[@@search]()&nbsp;方法执行了一个在给定字符串中的一个搜索以取得匹配正则模式的项。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">RegExp.prototype[@@search]()</code></a>&nbsp;和<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/search" title="search()&nbsp;方法执行正则表达式和 String对象之间的一个搜索匹配。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">String.prototype.search()</code></a>.</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.search</code>属性，指向一个方法，当该对象被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">String.prototype.search</code>方法调用时，会返回该方法的返回值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">String.prototype.search(regexp)
// 等同于
regexp[Symbol.search](this)

class MySearch {
  constructor(value) {
    this.value = value;
  }
  [Symbol.search](string) {
    return string.indexOf(this.value);
  }
}
'foobar'.search(new MySearch('foo')) // 0</code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/split" title="Symbol.split&nbsp;指向&nbsp;一个正则表达式的索引处分割字符串的方法。&nbsp;这个方法通过 String.prototype.split() 调用。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">split</span></a><br></td><td><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;"><strong style="margin: 0px; padding: 0px; border: 0px;">Symbol.split</strong></code>&nbsp;指向&nbsp;一个正则表达式的索引处分割字符串的方法。&nbsp;这个方法通过&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/split" title="split()&nbsp;方法使用指定的分隔符字符串将一个String对象分割成字符串数组，以将字符串分隔为子字符串，以确定每个拆分的位置。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">String.prototype.split()</code></a>&nbsp;调用。</p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">详情请参阅<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/@@split" title="[@@split]()&nbsp;方法切割 String 对象为一个其子字符串的数组&nbsp;。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">RegExp.prototype[@@split]()</code></a>&nbsp;和<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/split" title="split()&nbsp;方法使用指定的分隔符字符串将一个String对象分割成字符串数组，以将字符串分隔为子字符串，以确定每个拆分的位置。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">String.prototype.split()</code></a>.</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.split</code>属性，指向一个方法，当该对象被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">String.prototype.split</code>方法调用时，会返回该方法的返回值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">String.prototype.split(separator, limit)
// 等同于
separator[Symbol.split](this, limit)</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是一个例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">class MySplitter {
  constructor(value) {
    this.value = value;
  }
  [Symbol.split](string) {
    let index = string.indexOf(this.value);
    if (index === -1) {
      return string;
    }
    return [
      string.substr(0, index),
      string.substr(index + this.value.length)
    ];
  }
}

'foobar'.split(new MySplitter('foo'))
// ['', 'bar']

'foobar'.split(new MySplitter('bar'))
// ['foo', '']

'foobar'.split(new MySplitter('baz'))
// 'foobar'</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面方法使用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.split</code>方法，重新定义了字符串对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">split</code>方法的行为</p></td></tr></tbody></table></div><h3 id="blogTitle22"><b>其他 symbols</b></h3><div><table><caption>table 1.1 heading</caption><tbody><tr><th>title</th><th>title</th></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/hasInstance" title="Symbol.hasInstance 用于判断某对象是否为某构造器的实例。&nbsp;因此你可以用它自定义 instanceof 操作符在某个类上的行为。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">hasInstance</span></a><br></td><td><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Symbol.hasInstance 用于判断某对象是否为某构造器的实例。</span>&nbsp;因此你可以用它自定义&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof" title="instanceof 运算符用来测试一个对象在其原型链中是否存在一个构造函数的&nbsp;prototype&nbsp;属性。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">instanceof</span></a>&nbsp;操作符在某个类上的行为。<br><br><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.hasInstance</code>属性，指向一个内部方法。当其他对象使用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">instanceof</code>运算符，判断是否为该对象的实例时，会调用这个方法。比如，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">foo instanceof Foo</code>在语言内部，实际调用的是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Foo[Symbol.hasInstance](foo)</code>。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">class MyClass {
  [Symbol.hasInstance](foo) {
    return foo instanceof Array;
  }
}

[1, 2, 3] instanceof new MyClass() // true</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">MyClass</code>是一个类，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">new MyClass()</code>会返回一个实例。该实例的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.hasInstance</code>方法，会在进行<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">instanceof</code>运算时自动调用，判断左侧的运算子是否为<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Array</code>的实例。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是另一个例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">class Even {
  static [Symbol.hasInstance](obj) {
    return Number(obj) % 2 === 0;
  }
}

// 等同于
const Even = {
  [Symbol.hasInstance](obj) {
    return Number(obj) % 2 === 0;
  }
};

1 instanceof Even // false
2 instanceof Even // true
12345 instanceof Even // false</code></pre><br><b>示例<br></b><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">例如，你可以这样来自定义&nbsp;</span>MyArray 的&nbsp;<span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">instanceof&nbsp;</span>行为:</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">class MyArray {
  static [Symbol.hasInstance](instance) {
    return Array.isArray(instance);
  }
}
console.log([] instanceof MyArray); // true</code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/isConcatSpreadable" title="内置的Symbol.isConcatSpreadable符号用于配置某对象作为Array.prototype.concat()方法的参数时是否展开其数组元素。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">isConcatSpreadable</span></a><br></td><td>内置的<span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Symbol.isConcatSpreadable</span><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">符号用于配置某对象作为</span><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" title="concat()&nbsp;方法用于合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">Array.prototype.concat()</span></a><span style="margin: 0px; padding: 0px; border: 0px;">方法的参数时是否展开其数组元素。</span><br><br><p style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px; background-color: rgb(255, 255, 255);">对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.isConcatSpreadable</code>属性等于一个布尔值，表示该对象用于<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Array.prototype.concat()</code>时，是否可以展开。</p><pre class=" language-javascript" style="margin: 0.5em auto; padding: 0px 1em 0px 0.7rem; border: 0px; color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; background-color: rgb(17, 17, 17); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; border-radius: 5px; line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let arr1 = ['c', 'd'];
['a', 'b'].concat(arr1, 'e') // ['a', 'b', 'c', 'd', 'e']
arr1[Symbol.isConcatSpreadable] // undefined

let arr2 = ['c', 'd'];
arr2[Symbol.isConcatSpreadable] = false;
['a', 'b'].concat(arr2, 'e') // ['a', 'b', ['c','d'], 'e']</code></pre><p style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px; background-color: rgb(255, 255, 255);">上面代码说明，数组的默认行为是可以展开，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.isConcatSpreadable</code>默认等于<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">undefined</code>。该属性等于<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">true</code>时，也有展开的效果。</p><p style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px; background-color: rgb(255, 255, 255);">类似数组的对象正好相反，默认不展开。它的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.isConcatSpreadable</code>属性设为<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">true</code>，才可以展开。</p><pre class=" language-javascript" style="margin: 0.5em auto; padding: 0px 1em 0px 0.7rem; border: 0px; color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; background-color: rgb(17, 17, 17); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; border-radius: 5px; line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let obj = {length: 2, 0: 'c', 1: 'd'};
['a', 'b'].concat(obj, 'e') // ['a', 'b', obj, 'e']

obj[Symbol.isConcatSpreadable] = true;
['a', 'b'].concat(obj, 'e') // ['a', 'b', 'c', 'd', 'e']</code></pre><p style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px; background-color: rgb(255, 255, 255);"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.isConcatSpreadable</code>属性也可以定义在类里面。</p><pre class=" language-javascript" style="margin: 0.5em auto; padding: 0px 1em 0px 0.7rem; border: 0px; color: rgb(255, 255, 255); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; background-color: rgb(17, 17, 17); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; border-radius: 5px; line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">class A1 extends Array {
  constructor(args) {
    super(args);
    this[Symbol.isConcatSpreadable] = true;
  }
}
class A2 extends Array {
  constructor(args) {
    super(args);
  }
  get [Symbol.isConcatSpreadable] () {
    return false;
  }
}
let a1 = new A1();
a1[0] = 3;
a1[1] = 4;
let a2 = new A2();
a2[0] = 5;
a2[1] = 6;
[1, 2].concat(a1).concat(a2)
// [1, 2, 3, 4, [5, 6]]</code></pre><p style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px; background-color: rgb(255, 255, 255);">上面代码中，类<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">A1</code>是可展开的，类<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">A2</code>是不可展开的，所以使用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">concat</code>时有不一样的结果。</p><p style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px; background-color: rgb(255, 255, 255);">注意，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.isConcatSpreadable</code>的位置差异，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">A1</code>是定义在实例上，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">A2</code>是定义在类本身，效果相同。</p><br><b style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">描述</b><br><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255); box-sizing: border-box; max-width: 42rem;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">@@isConcatSpreadable</code>&nbsp;符号&nbsp;(<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol.isConcatSpreadable</code>) 可以直接定义为对象属性或继承而来，它是布尔类型。它可以控制数组或类似数组（array-like）的对象的行为：</p><ul style="margin: 0px 0px 24px; padding: 0px 0px 0px 40px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255); list-style-position: initial; list-style-image: initial; box-sizing: border-box; max-width: 42rem;"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">对于数组对象，默认情况下，用于concat时，会按数组元素展开然后进行连接（数组元素作为新数组的元素）。重置<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol.isConcatSpreadable</code>可以改变默认行为。</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">对于类似数组的对象，用于concat时，该对象整体作为新数组的元素，重置<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol.isConcatSpreadable</code>可改变默认行为。</li></ul><p><span style="border-style: initial; border-color: initial; border-image: initial;"><b>示例</b></span></p><p style="margin: 20px 0px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>数组</b></span></p><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255); box-sizing: border-box; max-width: 42rem;">默认情况下，<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" title="concat()&nbsp;方法用于合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Array.prototype.concat()</code></a>&nbsp;展开其元素连接到结果中：</p><pre class="brush: js line-numbers  language-js" style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">var alpha = ['a', 'b', 'c'],
    numeric = [1, 2, 3];

var alphaNumeric = alpha.concat(numeric);

console.log(alphaNumeric); // 结果: ['a', 'b', 'c', 1, 2, 3]</code></pre><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255); box-sizing: border-box; max-width: 42rem;">设置<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol.isConcatSpreadable</code>为<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">false</code>：</p><pre class="brush: js line-numbers  language-js" style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">var alpha = ['a', 'b', 'c'],
    numeric = [1, 2, 3];

numeric[Symbol.isConcatSpreadable] = false;
var alphaNumeric = alpha.concat(numeric);

console.log(alphaNumeric);
// 结果: ['a', 'b', 'c', [1, 2, 3] ]</code></pre><p style="margin: 20px 0px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>Array-like 对象</b></span></p><p style="margin: 0px 0px 24px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255); box-sizing: border-box; max-width: 42rem;">对于类数组 (array-like)对象，默认不展开。期望展开其元素用于连接，需要设置&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol.isConcatSpreadable</code>&nbsp;为true：</p><pre class="brush: js line-numbers  language-js" style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">var x = [1, 2, 3];

var fakeArray = {
  [Symbol.isConcatSpreadable]: true,
  length: 2,
  0: "hello",
  1: "world"
}

x.concat(fakeArray); // [1, 2, 3, "hello", "world"]</code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/unscopables" title="Symbol.unscopables&nbsp;指用于指定对象值，其对象自身和继承的从关联对象的 with 环境绑定中排除的属性名称。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">unscopables</span></a><br></td><td><strong style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol.unscopables&nbsp;</code></strong><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">指用于指定对象值，其对象自身和继承的从关联对象的 with 环境绑定中排除的属性名称。</span><br><br><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.unscopables</code>属性，指向一个对象。该对象指定了使用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">with</code>关键字时，哪些属性会被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">with</code>环境排除。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">Array.prototype[Symbol.unscopables]
// {
//   copyWithin: true,
//   entries: true,
//   fill: true,
//   find: true,
//   findIndex: true,
//   includes: true,
//   keys: true
// }

Object.keys(Array.prototype[Symbol.unscopables])
// ['copyWithin', 'entries', 'fill', 'find', 'findIndex', 'includes', 'keys']</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码说明，数组有 7 个属性，会被<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">with</code>命令排除。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">// 没有 unscopables 时
class MyClass {
  foo() { return 1; }
}

var foo = function () { return 2; };

with (MyClass.prototype) {
  foo(); // 1
}

// 有 unscopables 时
class MyClass {
  foo() { return 1; }
  get [Symbol.unscopables]() {
    return { foo: true };
  }
}

var foo = function () { return 2; };

with (MyClass.prototype) {
  foo(); // 2
}</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码通过指定<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.unscopables</code>属性，使得<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">with</code>语法块不会在当前作用域寻找<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">foo</code>属性，即<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">foo</code>将指向外层作用域的变量。</p><br><b>描述<br></b><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">可以在任何对象上定义&nbsp;@@unscopables</span>&nbsp;symbol (<font color="#333333" face="consolas, Liberation Mono, courier, monospace" size="3"><span style="background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">Symbol.unscopables</span></font>)<font color="#333333" face="consolas, Liberation Mono, courier, monospace" size="3"><span style="background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">，用于排除属性名称并与 with 环境绑定在一起作为词法变量公开。 请注意，如果使用&nbsp;</span></font><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode" style="margin: 0px; padding: 0px; border: 0px;">Strict mode</a><font color="#333333" face="consolas, Liberation Mono, courier, monospace" size="3"><span style="background-color: rgba(220, 220, 220, 0.5); font-style: inherit; padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; font-weight: inherit; border-radius: 2px;">，语句将不可用，并且可能也不需要 symbol。</span></font></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">unscopables</code>&nbsp;对象上设置属性为 true，将使其&nbsp;<span style="margin: 0px; padding: 0px; border: 0px;">unscopable</span>&nbsp;并且因此该属性也将不会在词法环境变量中出现。 如果设置属性为&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">false</code>&nbsp;，则将使其可&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">scopable</code>&nbsp;并且该属性会出现在词法环境变量中。</p><b>示例<br></b><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下列的代码可兼容 ES5 及以下版本。然而，在&nbsp;ECMAScript 2015 (ES6) 或其后续版本中，<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/keys" title="keys()&nbsp;方法返回一个新的Array迭代器，它包含数组中每个索引的键。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Array.prototype.keys()</code></a>&nbsp;方法才会出现。意味着内部&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">with</code>&nbsp;环境“关键字” 存在该方法，但变量中不会存在。 也就是说，当&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">unscopable</code>s symbol 被展示时，内置的<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">unscopables&nbsp;</code>设置是由&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/@@unscopables" title="Symbol属性 @@unscopable 包含了所有&nbsp;ES2015 (ES6) 中新定义的且并未被更早的&nbsp;ECMAScript 标准收纳的属性名。这些属性并不包含在&nbsp;with&nbsp;语句绑定的环境中" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Array.prototype[@@unscopables]</code></a>&nbsp;展示并实现的，&nbsp;一些 Array 的方法 将作为&nbsp;scoped&nbsp;放入&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">with</code>&nbsp;语句中。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">var keys = [];

with(Array.prototype) {
  keys.push("something");
}

Object.keys(Array.prototype[Symbol.unscopables]);
// ["copyWithin", "entries", "fill", "find", "findIndex",
//  "includes", "keys", "values"]</code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">你也可以为你自己的对象设置&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">unscopables</code>&nbsp;。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">var obj = {
  foo: 1,
  bar: 2
};

obj[Symbol.unscopables] = {
  foo: false,
  bar: true
};

with(obj) {
  console.log(foo); // 1
  console.log(bar); // ReferenceError: bar is not defined
}</code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/species" title="Symbol.species&nbsp;是指定一个构造函数创建派生对象的函数值属性。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">species</span></a><br></td><td><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;"><strong style="margin: 0px; padding: 0px; border: 0px;">Symbol.species</strong></code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;是指定一个构造函数创建派生对象的函数值属性。<br></span><br><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.species</code>属性，指向当前对象的构造函数。创造实例时，默认会调用这个方法，即使用这个属性返回的函数当作构造函数，来创造新的实例对象。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">class MyArray extends Array {
  // 覆盖父类 Array 的构造函数
  static get [Symbol.species]() { return Array; }
}</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，子类<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">MyArray</code>继承了父类<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Array</code>。创建<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">MyArray</code>的实例对象时，本来会调用它自己的构造函数（本例中被省略了），但是由于定义了<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.species</code>属性，所以会使用这个属性返回的的函数，创建<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">MyArray</code>的实例。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">这个例子也说明，定义<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.species</code>属性要采用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">get</code>读取器。默认的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.species</code>属性等同于下面的写法。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">static get [Symbol.species]() {
  return this;
}</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">下面是一个例子。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">class MyArray extends Array {
  static get [Symbol.species]() { return Array; }
}
let a = new MyArray(1,2,3);
let mapped = a.map(x =&gt; x * x);

a instanceof MyArray // true
a instanceof Array // true

mapped instanceof MyArray // false
mapped instanceof Array // true</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">a</code>是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">MyArray</code>的实例，所以<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">a instanceof MyArray</code>返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">true</code>。由于构造函数被替换成了<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Array</code>，所以<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">a</code>实际上也是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Array</code>的实例，于是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">a instanceof Array</code>也返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">true</code>。而<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">mapped</code>是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Array.prototype.map</code>运算的结果，已经是真正的数组，它是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Array</code>的实例，而不是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">MyArray</code>的实例，于是<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">mapped instanceof Array</code>返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">true</code>，而<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">mapped instanceof MyArray</code>返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">false</code>。</p><br><b>描述<br></b>species 访问器属性允许子类覆盖对象的默认构造函数。<br><br><b>示例</b><br><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">你可能想在扩展数组类&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">MyArray&nbsp;</code>上返回&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Array" title="entries() 方法返回一个新的Array Iterator对象，该对象包含数组中每个索引的键/值对。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Array</code></a>&nbsp;对象。&nbsp;例如，当使用例如&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map" title="map() 方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">map()</code></a>&nbsp;这样的方法返回默认的构造函数时，你希望这些方法能够返回父级的 Array 对象，以取代&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">MyArray 对象。Symbol.</code>species 允许你这么做：</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">class MyArray extends Array {
  // 覆盖 species 到父级的 Array 构造函数上
  static get [Symbol.species]() { return Array; }
}
var a = new MyArray(1,2,3);
var mapped = a.map(x =&gt; x * x);

console.log(mapped instanceof MyArray); // false
console.log(mapped instanceof Array);   // true</code></pre></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toPrimitive" title="Symbol.toPrimitive&nbsp;指将被调用的指定函数值的属性转换为相对应的原始值。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">toPrimitive</span></a><br></td><td><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;"><strong style="margin: 0px; padding: 0px; border: 0px;">Symbol.toPrimitive</strong></code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;指将被调用的指定函数值的属性转换为相对应的原始值。<br></span><br><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.toPrimitive</code>属性，指向一个方法。该对象被转为原始类型的值时，会调用这个方法，返回该对象对应的原始类型值。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.toPrimitive</code>被调用时，会接受一个字符串参数，表示当前运算的模式，一共有三种模式。</p><ul style="list-style-type: none; padding-top: 0.5rem; padding-bottom: 0.5rem; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><li style="text-indent: -5px; font-size: 0.8rem;">Number：该场合需要转成数值</li><li style="text-indent: -5px; font-size: 0.8rem;">String：该场合需要转成字符串</li><li style="text-indent: -5px; font-size: 0.8rem;">Default：该场合可以转成数值，也可以转成字符串</li></ul><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let obj = {
  [Symbol.toPrimitive](hint) {
    switch (hint) {
      case 'number':
        return 123;
      case 'string':
        return 'str';
      case 'default':
        return 'default';
      default:
        throw new Error();
     }
   }
};

2 * obj // 246
3 + obj // '3default'
obj == 'default' // true
String(obj) // 'str'</code></pre><br><b>描述<br></b>在&nbsp;<code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;">Symbol.toPrimitive</code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;属性(用作函数值)的帮助下，一个对象可被转换为原始值。</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;">该函数由字符串参数 hint 调用，</code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">目的是指定原始值转换结果的首选类型。&nbsp;hint&nbsp;参数可以是</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;">"number"、</code><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;">"string"&nbsp;</code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">和&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;">"default" 中的一种。</code><br><br><b>示例</b><br><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">下列的例子展示了&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol.toPrimitive</code>&nbsp;属性如何将对象转换为原始值。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">// 没有 Symbol.toPrimitive 属性的对象
var obj1 = {};
console.log(+obj1);     // NaN
console.log(`${obj1}`); // "[object Object]"
console.log(obj1 + ""); // "[object Object]"

// 拥有 Symbol.toPrimitive 属性的对象
var obj2 = {
  [Symbol.toPrimitive](hint) {
    if (hint == "number") {
      return 10;
    }
    if (hint == "string") {
      return "hello";
    }
    return true;
  }
};
console.log(+obj2);     // 10      -- hint is "number"
console.log(`${obj2}`); // "hello" -- hint is "string"
console.log(obj2 + ""); // "true"  -- hint is "default"</code></pre><br></td></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag" title="Symbol.toStringTag&nbsp;是一个内置 symbol，它通常作为对象的属性键使用，对应的属性值应该为字符串类型，这个字符串用来表示该对象的自定义类型标签，通常只有内置的&nbsp;Object.prototype.toString() 方法会去读取这个标签并把它包含在自己的返回值里。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">toStringTag</span></a><br></td><td><strong style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol.toStringTag</code></strong><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;是一个内置 symbol，它通常作为对象的属性键使用，对应的属性值应该为字符串类型，这个字符串用来表示该对象的自定义类型标签，通常只有内置的&nbsp;</span><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString" title="toString() 方法返回一个表示该对象的字符串。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px; font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.prototype.toString()</code></a><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;方法会去读取这个标签并把它包含在自己的返回值里。</span><br><br><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.toStringTag</code>属性，指向一个方法。在该对象上面调用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Object.prototype.toString</code>方法时，如果这个属性存在，它的返回值会出现在<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">toString</code>方法返回的字符串之中，表示对象的类型。也就是说，这个属性可以用来定制<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">[object Object]</code>或<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">[object Array]</code>中<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">object</code>后面的那个字符串。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">// 例一
({[Symbol.toStringTag]: 'Foo'}.toString())
// "[object Foo]"

// 例二
class Collection {
  get [Symbol.toStringTag]() {
    return 'xxx';
  }
}
let x = new Collection();
Object.prototype.toString.call(x) // "[object xxx]"</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">ES6 新增内置对象的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.toStringTag</code>属性值如下。</p><ul style="list-style-type: none; padding-top: 0.5rem; padding-bottom: 0.5rem; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">JSON[Symbol.toStringTag]</code>：'JSON'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Math[Symbol.toStringTag]</code>：'Math'</li><li style="text-indent: -5px; font-size: 0.8rem;">Module 对象<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">M[Symbol.toStringTag]</code>：'Module'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">ArrayBuffer.prototype[Symbol.toStringTag]</code>：'ArrayBuffer'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">DataView.prototype[Symbol.toStringTag]</code>：'DataView'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Map.prototype[Symbol.toStringTag]</code>：'Map'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Promise.prototype[Symbol.toStringTag]</code>：'Promise'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Set.prototype[Symbol.toStringTag]</code>：'Set'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">%TypedArray%.prototype[Symbol.toStringTag]</code>：'Uint8Array'等</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">WeakMap.prototype[Symbol.toStringTag]</code>：'WeakMap'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">WeakSet.prototype[Symbol.toStringTag]</code>：'WeakSet'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">%MapIteratorPrototype%[Symbol.toStringTag]</code>：'Map Iterator'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">%SetIteratorPrototype%[Symbol.toStringTag]</code>：'Set Iterator'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">%StringIteratorPrototype%[Symbol.toStringTag]</code>：'String Iterator'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.prototype[Symbol.toStringTag]</code>：'Symbol'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Generator.prototype[Symbol.toStringTag]</code>：'Generator'</li><li style="text-indent: -5px; font-size: 0.8rem;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">GeneratorFunction.prototype[Symbol.toStringTag]</code>：'GeneratorFunction'</li></ul><br><b>描述</b><br><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">许多内置的 JavaScript 对象类型即便没有&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">toStringTag</code>&nbsp;属性，也能被&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">toString()</code>&nbsp;方法识别并返回特定的类型标签，比如：</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Object.prototype.toString.call('foo');     // "[object String]"
Object.prototype.toString.call([1, 2]);    // "[object Array]"
Object.prototype.toString.call(3);         // "[object Number]"
Object.prototype.toString.call(true);      // "[object Boolean]"
Object.prototype.toString.call(undefined); // "[object Undefined]"
Object.prototype.toString.call(null);      // "[object Null]"
// ... and more</code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">另外一些对象类型则不然，<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">toString()</code>&nbsp;方法能识别它们是因为引擎为它们设置好了&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">toStringTag</code>&nbsp;标签：</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Object.prototype.toString.call(new Map());       // "[object Map]"
Object.prototype.toString.call(function* () {}); // "[object GeneratorFunction]"
Object.prototype.toString.call(Promise.resolve()); // "[object Promise]"
// ... and more</code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">但你自己创建的类不会有这份特殊待遇，<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">toString()&nbsp;</code>找不到&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">toStringTag</code>&nbsp;属性时只好返回默认的&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object</code>&nbsp;标签：</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">class ValidatorClass {}

Object.prototype.toString.call(new ValidatorClass()); // "[object Object]"</code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">加上&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">toStringTag</code>&nbsp;属性，你的类也会有自定义的类型标签了：</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">class ValidatorClass {
  get [Symbol.toStringTag]() {
    return "Validator";
  }
}

Object.prototype.toString.call(new ValidatorClass());
// "[object Validator]"</code></pre></td></tr></tbody></table></div><div><br></div><div><br></div><h2 style="margin-top: 0px; margin-bottom: 12px; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;" id="blogTitle23"><span style="font-weight: 700;">静态方法</span></h2><div><table><caption>table 1.1 heading</caption><tbody><tr><th>title</th><th>title</th></tr><tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/for" title="Symbol.for(key) 方法会根据给定的键 key，来从运行时的&nbsp;symbol 注册表中找到对应的 symbol，如果找到了，则返回它，否则，新建一个与该键关联的 symbol，并放入全局&nbsp;symbol 注册表中。" style="margin: 0px; padding: 0px; border: 0px;"><span style="padding-right: 2px; padding-left: 2px; border-style: initial; border-color: initial; border-image: initial; border-radius: 2px;">for(key)</span></a><br></td><td><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;"><strong style="margin: 0px; padding: 0px; border: 0px;">Symbol.for(key)</strong></code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;方法会根据给定的键&nbsp;</span><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;">key</code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">，来从运行时的&nbsp;symbol 注册表中找到对应的 symbol，如果找到了，则返回它，否则，新建一个与该键关联的 symbol，并放入全局&nbsp;symbol 注册表中。<br></span><br><pre class="syntaxbox" style=""><var style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit;">Symbol.for(key)</var>;</pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;">key</dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">一个字符串，作为 symbol 注册表中与某 symbol 关联的键（同时也会作为该 symbol 的描述）。</dd></dl><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">返回由给定的 key 找到的 symbol，否则就是返回新创建的 symbol。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">有时，我们希望重新使用同一个 Symbol 值，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for</code>方法可以做到这一点。它接受一个字符串作为参数，然后搜索有没有以该参数作为名称的 Symbol 值。如果有，就返回这个 Symbol 值，否则就新建并返回一个以该字符串为名称的 Symbol 值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let s1 = Symbol.for('foo');
let s2 = Symbol.for('foo');

s1 === s2 // true</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s1</code>和<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s2</code>都是 Symbol 值，但是它们都是同样参数的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for</code>方法生成的，所以实际上是同一个值。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for()</code>与<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol()</code>这两种写法，都会生成新的 Symbol。它们的区别是，前者会被登记在全局环境中供搜索，后者不会。<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for()</code>不会每次调用就返回一个新的 Symbol 类型的值，而是会先检查给定的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">key</code>是否已经存在，如果不存在才会新建一个值。比如，如果你调用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for("cat")</code>30 次，每次都会返回同一个 Symbol 值，但是调用<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol("cat")</code>30 次，会返回 30 个不同的 Symbol 值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">Symbol.for("bar") === Symbol.for("bar")
// true

Symbol("bar") === Symbol("bar")
// false</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，由于<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol()</code>写法没有登记机制，所以每次调用都会返回一个不同的值。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;"><code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.keyFor</code>方法返回一个已登记的 Symbol 类型值的<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">key</code>。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">let s1 = Symbol.for("foo");
Symbol.keyFor(s1) // "foo"

let s2 = Symbol("foo");
Symbol.keyFor(s2) // undefined</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，变量<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">s2</code>属于未登记的 Symbol 值，所以返回<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">undefined</code>。</p><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">需要注意的是，<code style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px; padding-left: 3px; padding-right: 3px;">Symbol.for</code>为 Symbol 值登记的名字，是全局环境的，可以在不同的 iframe 或 service worker 中取到同一个值。</p><pre class=" language-javascript" style="font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 14.336px; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-break: normal; hyphens: none; padding-right: 1em; padding-left: 0.7rem; margin: 0.5em auto; border-radius: 5px; background-color: rgb(17, 17, 17); line-height: 1.2;"><code class=" language-javascript" style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 2px;">iframe = document.createElement('iframe');
iframe.src = String(window.location);
document.body.appendChild(iframe);

iframe.contentWindow.Symbol.for('foo') === Symbol.for('foo')
// true</code></pre><p style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 14.336px;">上面代码中，iframe 窗口生成的 Symbol 值，可以在主页面得到。</p><b><br>描述<br></b><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">和&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol()</code>&nbsp;不同的是，用&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol.for()</code>&nbsp;方法创建的的 symbol 会被放入一个全局&nbsp;symbol 注册表中。<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol.for() 并不是每次都会创建一个新的 symbol</code>，它会首先检查给定的 key 是否已经在注册表中了。假如是，则会直接返回上次存储的那个。否则，它会再新建一个。</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>全局 symbol 注册表</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">symbol 注册表中的记录结构：</p><table class="standard-table" style=""><caption style="font-style: inherit; margin: 0px; padding: 0px; border: 0px; font-weight: 700; text-align: left;">全局 symbol 注册表中的一个记录</caption><tbody style="margin: 0px; padding: 0px; border: 0px;"><tr style="margin: 0px; padding: 0px; border: 0px;"><th style="font-style: inherit; margin: 0px; padding: 2px 8px 4px; border-width: 2px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-color: rgb(255, 255, 255) rgb(255, 255, 255) rgb(212, 221, 228); border-image: initial; background: rgba(212, 221, 228, 0.5); font-family: Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif;">字段名</th><th style="font-style: inherit; margin: 0px; padding: 2px 8px 4px; border-width: 2px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-color: rgb(255, 255, 255) rgb(255, 255, 255) rgb(212, 221, 228); border-image: initial; background: rgba(212, 221, 228, 0.5); font-family: Palatino, &quot;Palatino Linotype&quot;, x-locale-heading-secondary, serif;">字段值</th></tr><tr style="margin: 0px; padding: 0px; border: 0px;"><td style="margin: 0px; padding: 6px 8px; border-width: 2px; border-style: solid; border-color: rgb(255, 255, 255); background-color: rgba(212, 221, 228, 0.15); box-shadow: rgba(212, 221, 228, 0.5) 0px -1px 0px 0px inset;">[[key]]</td><td style="margin: 0px; padding: 6px 8px; border-width: 2px; border-style: solid; border-color: rgb(255, 255, 255); background-color: rgba(212, 221, 228, 0.15); box-shadow: rgba(212, 221, 228, 0.5) 0px -1px 0px 0px inset;">一个字符串，用来标识每个 symbol</td></tr><tr style="margin: 0px; padding: 0px; border: 0px;"><td style="margin: 0px; padding: 6px 8px; border-width: 2px; border-style: solid; border-color: rgb(255, 255, 255); background-color: rgba(212, 221, 228, 0.25); box-shadow: rgba(212, 221, 228, 0.5) 0px -1px 0px 0px inset;">[[symbol]]</td><td style="margin: 0px; padding: 6px 8px; border-width: 2px; border-style: solid; border-color: rgb(255, 255, 255); background-color: rgba(212, 221, 228, 0.25); box-shadow: rgba(212, 221, 228, 0.5) 0px -1px 0px 0px inset;">存储的 symbol 值</td></tr></tbody></table><b>示例</b><br><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Symbol.for("foo"); // 创建一个 symbol 并放入 symbol 注册表中，键为 "foo"
Symbol.for("foo"); // 从 symbol 注册表中读取键为"foo"的 symbol


Symbol.for("bar") === Symbol.for("bar"); // true，证明了上面说的
Symbol("bar") === Symbol("bar"); // false，Symbol() 函数每次都会返回新的一个 symbol


var sym = Symbol.for("mario");
sym.toString();
// "Symbol(mario)"，mario 既是该 symbol 在 symbol 注册表中的键名
// ，又是该 symbol 自身的描述字符串</code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">为了防止冲突，最好给你要放入 symbol 注册表中的 symbol 带上键前缀。</p><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Symbol.for("mdn.foo");
Symbol.for("mdn.bar");</code></pre><br></td></tr><tr><td><span style="margin: 0px; padding: 0px 2px; border: 0px; border-radius: 2px;">k<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/keyFor" title="Symbol.keyFor(sym) 方法用来获取 symbol 注册表中与某个 symbol 关联的键。" style="margin: 0px; padding: 0px; border: 0px;">eyFor(sym)</a></span><br></td><td><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;"><strong style="margin: 0px; padding: 0px; border: 0px;">Symbol.keyFor(sym)</strong></code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;方法用来获取 symbol 注册表中与某个 symbol 关联的键。<br></span><br><pre class="syntaxbox" style=""><var style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit;">Symbol.keyFor(sym)</var>;</pre><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>参数</b></span></p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><dt style="margin: 0px; padding: 0px; border: 0px;">sym</dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">存储在 symbol 注册表中的某个 symbol</dd></dl><b>示例</b><br><pre class="brush: js line-numbers  language-js" style=""><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">// 创建一个 symbol 并放入 Symbol 注册表，key 为 "foo"
var globalSym = Symbol.for("foo");
Symbol.keyFor(globalSym); // "foo"

// 创建一个 symbol，但不放入 symbol 注册表中
var localSym = Symbol();
Symbol.keyFor(localSym); // undefined，所以是找不到 key 的

// well-known symbol 们并不在 symbol 注册表中
Symbol.keyFor(Symbol.iterator) // undefined</code></pre></td></tr></tbody></table></div><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px;"><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><br></dt></dl><h1 style="margin-top: 0px; margin-bottom: 12px; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;" id="blogTitle24"><span style="font-weight: 700;">Symbol 原型对象</span></h1><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">所有 Symbol 继承自&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/prototype" title="Technical review completed. Editorial review completed." style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol.prototype</span></font></a>.</p><h2 style="margin-top: 0px; margin-bottom: 12px; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;" id="blogTitle25"><span style="font-weight: 700;">属性</span></h2><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"></p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px;"><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol.prototype.constructor</span></font></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">返回创建实例原型的函数. 默认为&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" title="符号是一种特殊的、不可变的数据类型，可以作为对象属性的标识符使用。符号对象是一个符号&nbsp;原始数据类型的隐式对象包装器。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol</span></font></a>&nbsp;函数。</dd></dl><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"></p><h2 style="margin-top: 0px; margin-bottom: 12px; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;" id="blogTitle26"><span style="font-weight: 700;">方法</span></h2><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"></p><dl style="margin-top: 0px; margin-bottom: 20px; padding: 0px; border: 0px;"><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toSource" title="toSource() 方法返回代表该对象源码的字符串。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol.prototype.toSource()</span></font></a>&nbsp;<span title="This API has not been standardized." style="margin: 0px; padding: 0px; border: 0px;"><span class="icon-warning-sign" style="margin: 0px; padding: 0px; border: 0px; display: inline-block; line-height: 1; -webkit-font-smoothing: antialiased; cursor: default;"></span></span></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">返回包含<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" title="符号是一种特殊的、不可变的数据类型，可以作为对象属性的标识符使用。符号对象是一个符号&nbsp;原始数据类型的隐式对象包装器。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol</span></font></a>&nbsp;对象源码的字符串。覆盖<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toSource" title="返回一个对象源代码的字符串表示." style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Object.prototype.toSource()</span></font></a>&nbsp;方法。</dd><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toString" title="toString() 方法返回当前 symbol 对象的字符串表示。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol.prototype.toString()</span></font></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">返回包含Symbol描述符的字符串。&nbsp;覆盖<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString" title="toString() 方法返回一个代表该对象的字符串。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Object.prototype.toString()</span></font></a>&nbsp;方法。</dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;"><strong style="margin: 0px; padding: 0px; border: 0px;">toString()</strong></code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;方法返回当前 symbol 对象的字符串表示。</span><br></dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><pre class="syntaxbox" style="margin-bottom: 20px; padding: 15px; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(228, 240, 245); color: rgb(51, 51, 51); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; white-space: pre-wrap; border-right-width: 0px !important; border-left-width: 5px !important;"><var style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit;">symbol.toString()</var>;</pre></dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" title="Symbol()函数会返回symbol类型的值，该类型具有静态属性和静态方法。它的静态属性会暴露几个内建的成员对象；它的静态方法会暴露全局的symbol注册，且类似于内建对象类，但作为构造函数来说它并不完整，因为它不支持语法：&quot;new Symbol()&quot;。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol</code></a>&nbsp;对象拥有自己的&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">toString</code>&nbsp;方法，因而遮蔽了原型链上的&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString" title="toString() 方法返回一个表示该对象的字符串。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Object.prototype.toString()</code></a>。</p><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>symbol 原始值不能转换为字符串</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">symbol 原始值不能转换为字符串，所以只能先转换成它的包装对象，再调用&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">toString()</code>&nbsp;方法：</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.5; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; text-shadow: none; word-break: normal; word-wrap: normal; counter-reset: linenumber 0; border-right-width: 0px !important; border-left-width: 5px !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Symbol("foo") + "bar";
// TypeError: Can't convert symbol to string
Symbol("foo").toString() + "bar"
// "Symbol(foo)bar"，就相当于下面的:
Object(Symbol("foo")).toString() + "bar"
// "Symbol(foo)bar"</code></pre></dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><b>示例</b></dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><pre class="brush: js line-numbers  language-js" style="margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.5; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; text-shadow: none; word-break: normal; word-wrap: normal; counter-reset: linenumber 0; border-right-width: 0px !important; border-left-width: 5px !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Symbol("desc").toString();   // "Symbol(desc)"

// well-known symbols
Symbol.iterator.toString();  // "Symbol(Symbol.iterator)

// global symbols
Symbol.for("foo").toString() // "Symbol(foo)"</code></pre></dd><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/valueOf" title="valueOf() 方法返回当前 symbol 对象所包含的 symbol 原始值。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol.prototype.valueOf()</span></font></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">返回&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" title="符号是一种特殊的、不可变的数据类型，可以作为对象属性的标识符使用。符号对象是一个符号&nbsp;原始数据类型的隐式对象包装器。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol</span></font></a>&nbsp;对象的初始值.。覆盖&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/valueOf" title="The&nbsp;valueOf()&nbsp;method returns the primitive value of the specified object." style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Object.prototype.valueOf()</span></font></a>&nbsp;方法。</dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;"><strong style="margin: 0px; padding: 0px; border: 0px;">valueOf()</strong></code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;方法返回当前 symbol 对象所包含的 symbol 原始值。</span><br></dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><pre class="syntaxbox" style="margin-bottom: 20px; padding: 15px; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(228, 240, 245); color: rgb(51, 51, 51); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; white-space: pre-wrap; border-right-width: 0px !important; border-left-width: 5px !important;"><var style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit;">symbol.valueOf();</var></pre></dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><b>描述</b></dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">在 JavaScript 中，虽然大多数类型的对象在某些操作下都会自动的隐式调用自身的&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">valueOf()</code>&nbsp;方法或者&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">toString()</code>&nbsp;方法来将自己转换成一个原始值，但 symbol 对象不会这么干，symbol 对象无法隐式转换成对应的原始值：</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 15px 15px 15px 3.8em; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(238, 238, 238); color: rgb(51, 51, 51); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1.5; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; text-shadow: none; word-break: normal; word-wrap: normal; counter-reset: linenumber 0; border-right-width: 0px !important; border-left-width: 5px !important;"><code class=" language-js" style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit; background-color: transparent; border-radius: 2px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; word-wrap: normal; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">Object(Symbol("foo")) + "bar";
// TypeError: can't convert symbol object to primitive
// 无法隐式的调用 valueOf() 方法

Object(Symbol("foo")).valueOf() + "bar";
// TypeError:  can't convert symbol to string
// 手动调用 valueOf() 方法，虽然转换成了原始值，但 symbol 原始值不能转换为字符串

Object(Symbol("foo")).toString() + "bar";
// "Symbol(foo)bar"，需要手动调用 toString() 方法才行</code></pre></dd><dt style="cursor: pointer; margin: 0px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/@@toPrimitive" title="此页面仍未被本地化, 期待您的翻译!" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol.prototype[@@toPrimitive]</span></font></a></dt><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;">&nbsp;返回<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" title="符号是一种特殊的、不可变的数据类型，可以作为对象属性的标识符使用。符号对象是一个符号&nbsp;原始数据类型的隐式对象包装器。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol</span></font></a>对象的初始值。</dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><code style="margin: 0px; padding: 0px 2px; border: 0px; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word; color: rgb(51, 51, 51); font-size: medium; white-space: normal;"><strong style="margin: 0px; padding: 0px; border: 0px;">[@@toPrimitive]()</strong></code><span style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">&nbsp;方法可将 Symbol 对象转换为原始值。</span><br></dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><pre class="syntaxbox" style="margin-bottom: 20px; padding: 15px; border-top: 0px solid rgb(63, 135, 166); border-bottom: 0px solid rgb(63, 135, 166); border-right-style: solid; border-left-style: solid; border-right-color: rgb(63, 135, 166); border-left-color: rgb(63, 135, 166); border-image: initial; box-sizing: border-box; position: relative; font-size: medium; background-color: rgb(228, 240, 245); color: rgb(51, 51, 51); font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; line-height: 1; direction: ltr; hyphens: none; width: 629.625px; max-width: 100%; white-space: pre-wrap; border-right-width: 0px !important; border-left-width: 5px !important;"><var style="margin: 0px; padding: 0px; border: 0px; font-weight: inherit;">Symbol()[Symbol.toPrimitive](hint);</var></pre></dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><p style="margin-top: 20px; margin-bottom: 20px; padding: 0px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><span class="highlight-span" style="margin: 0px; padding: 0px 4px 0px 40px; border: 0px; line-height: 1.25; -webkit-box-decoration-break: clone;"><b>返回值</b></span></p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">该原始值为指定的&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" title="Symbol()函数会返回symbol?类型的值，该类型具有静态属性和静态方法。它的静态属性会暴露几个内建的成员对象；它的静态方法会暴露全局的symbol注册，且类似于内建对象类，但作为构造函数来说它并不完整，因为它不支持语法：&quot;new Symbol()&quot;。" style="color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol</code></a>&nbsp;对象</p></dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><b>描述</b></dd><dd style="margin-top: 0px; margin-right: 0px; margin-bottom: 24px; padding: 0px 0px 0px 20px; border: 0px;"><p style="margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" title="Symbol()函数会返回symbol?类型的值，该类型具有静态属性和静态方法。它的静态属性会暴露几个内建的成员对象；它的静态方法会暴露全局的symbol注册，且类似于内建对象类，但作为构造函数来说它并不完整，因为它不支持语法：&quot;new Symbol()&quot;。" style="text-decoration-line: underline; color: rgb(63, 135, 166); margin: 0px; padding: 0px; border: 0px;"><code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">Symbol</code></a>&nbsp;的&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">[@@toPrimitive]() 方法</code>返回该&nbsp;Symbol 对象原始值作为&nbsp;Symbol 数据形式。&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">hint</code>&nbsp;参数未被使用。</p><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px; box-sizing: border-box; max-width: 42rem; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; background-color: rgb(255, 255, 255);">JavaScript 调用&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">[@@toPrimitive]()&nbsp;</code>方法将一个对象转换为原始值表示。你不需要自己调用&nbsp;<code style="font-style: inherit; margin: 0px; padding: 0px 2px; border: 0px; font-weight: inherit; background-color: rgba(220, 220, 220, 0.5); border-radius: 2px; font-family: consolas, &quot;Liberation Mono&quot;, courier, monospace; word-wrap: break-word;">[@@toPrimitive]()</code>&nbsp;方法；当对象需要被转换为原始值时，JavaScript 会自动地调用该方法。</p></dd></dl><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;"></p><h2 style="margin-top: 0px; margin-bottom: 12px; line-height: 1; word-wrap: break-word; padding: 0px; border: 0px;" id="blogTitle27"><span style="font-weight: 700;">示例</span></h2><h3 style="margin-top: 0px; margin-bottom: 12px; word-wrap: break-word; padding: 0px; border: 0px; line-height: 1;" id="blogTitle28"><span style="font-weight: 700;">对 symbol 使用 typeof 运算符</span></h3><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof" title="typeof操作符返回一个字符串,指示未经计算的操作数的类型。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">typeof</span></font></a>运算符能帮助你识别（标识）symbol</p><pre class="brush: js language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-image: url(&quot;../../img/blueprint-dark.fd85a7a074ae.png&quot;); background-position: center top; line-height: 1.5; border-width: 0px 0px 0px 5px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: rgb(85, 138, 187); text-shadow: none; direction: ltr; word-break: normal; word-wrap: normal; hyphens: none;"><code class=" language-js javascript" style="color: rgb(59, 60, 64); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 15px; background-color: rgb(250, 251, 252); word-wrap: normal; margin: 0px; padding: 0px; border: 0px; font-weight: inherit; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none;">typeof Symbol() === 'symbol'
typeof Symbol('foo') === 'symbol'
typeof Symbol.iterator === 'symbol'</code>
</pre><h3 style="margin-top: 0px; margin-bottom: 12px; word-wrap: break-word; padding: 0px; border: 0px; line-height: 1;" id="blogTitle29"><span style="font-weight: 700;">Symbol 类型转换</span></h3><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">当使用 symbol 值进行类型转换时需要注意一些事情：</p><ul style="margin-top: 0px; margin-bottom: 24px; padding: 0px 0px 0px 40px; list-style-position: initial; list-style-image: initial; border: 0px;"><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">尝试将一个 symbol 值转换为一个 number 值时，会抛出一个&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">TypeError</span></font></a>&nbsp;错误&nbsp; (e.g.&nbsp;<font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">+sym</span></font>&nbsp;or&nbsp;<font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">sym | 0</span></font>).</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">使用宽松相等时，&nbsp;<font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Object(sym) == sym</span></font>&nbsp;returns&nbsp;<font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">true.</span></font></li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;">这会阻止你从一个 symbol 值隐式地创建一个新的 string 类型的属性名。例如，<font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol("foo") + "bar" 将抛出一个</span></font>&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="TypeError（类型错误）&nbsp;对象用来表示值的类型非预期类型时发生的错误。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">TypeError</span></font></a>&nbsp;(can't convert symbol to string).</li><li style="margin: 0px 0px 6px; padding: 0px; border: 0px;"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#String_conversion" style="margin: 0px; padding: 0px; border: 0px;">"safer"&nbsp;<font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">String(sym)</span></font>&nbsp;conversion</a>&nbsp;works like a call to&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toString" title="toString() 方法返回当前 symbol 对象的字符串表示。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Symbol.prototype.toString()</span></font></a>&nbsp;with symbols，但是注意&nbsp;<font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">new String(sym)</span></font>&nbsp;将抛出异常。</li></ul><h3 style="margin-top: 0px; margin-bottom: 12px; word-wrap: break-word; padding: 0px; border: 0px; line-height: 1;" id="blogTitle30"><span style="font-weight: 700;">Symbols 与 for...in 迭代</span></h3><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">Symbols 在&nbsp;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">for...in</span></font></a>&nbsp;迭代中不可枚举。另外，<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames" title="Object.getOwnPropertyNames()方法返回一个由指定对象的所有自身属性的属性名（包括不可枚举属性）组成的数组。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Object.getOwnPropertyNames()</span></font></a>&nbsp;不会返回 symbol 对象的属性，但是你能使用&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols" title="Object.getOwnPropertySymbols() 方法会返回一个数组，该数组包含了指定对象自身的（非继承的）所有 symbol 属性键。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">Object.getOwnPropertySymbols()</span></font></a>&nbsp;得到它们。</p><pre class="brush: js line-numbers  language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 1em 1em 1em 3.8em; background-image: url(&quot;../../img/blueprint-dark.fd85a7a074ae.png&quot;); background-position: center top; background-color: rgb(250, 251, 252); font-size: 15px; line-height: 1.5; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; color: rgb(59, 60, 64); border-width: 0px 0px 0px 5px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: rgb(85, 138, 187); text-shadow: none; direction: ltr; word-break: normal; word-wrap: normal; hyphens: none; position: relative; counter-reset: linenumber 0;"><code class=" language-js javascript" style="word-wrap: normal; margin: 0px; padding: 0px; border: 0px; font-weight: inherit; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; position: relative;">var obj = {};

obj[Symbol("a")] = "a";
obj[Symbol.for("b")] = "b";
obj["c"] = "c";
obj.d = "d";

for (var i in obj) {
   console.log(i); // logs "c" and "d"
}</code></pre><h3 style="margin-top: 0px; margin-bottom: 12px; word-wrap: break-word; padding: 0px; border: 0px; line-height: 1;" id="blogTitle31"><span style="font-weight: 700;">Symbols 与 JSON.stringify()</span></h3><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">当使用 JSON.strIngify() 时以 symbol 值作为键的属性会被完全忽略：</p><pre class="brush: js language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-image: url(&quot;../../img/blueprint-dark.fd85a7a074ae.png&quot;); background-position: center top; background-color: rgb(250, 251, 252); font-size: 15px; line-height: 1.5; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; color: rgb(59, 60, 64); border-width: 0px 0px 0px 5px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: rgb(85, 138, 187); text-shadow: none; direction: ltr; word-break: normal; word-wrap: normal; hyphens: none;"><code class=" language-js ruby" style="word-wrap: normal; margin: 0px; padding: 0px; border: 0px; font-weight: inherit; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none;">JSON.stringify({[Symbol("foo")]: "foo"});
// '{}'</code></pre><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">更多细节，请看&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify" title="JSON.stringify() 方法将一个JavaScript值转换为一个JSON字符串，如果指定了一个replacer函数，则可以替换值，或者如果指定了一个replacer数组，可选地仅包括指定的属性。" style="margin: 0px; padding: 0px; border: 0px;"><font face="consolas, Liberation Mono, courier, monospace"><span style="border-style: initial; border-color: initial; font-weight: inherit; font-style: inherit;">JSON.stringify()</span></font></a>。</p><h3 style="margin-top: 0px; margin-bottom: 12px; word-wrap: break-word; padding: 0px; border: 0px; line-height: 1;" id="blogTitle32"><span style="font-weight: 700;">Symbol 包装器对象作为属性的键</span></h3><p style="margin-top: 0px; margin-bottom: 24px; padding: 0px; border: 0px;">当一个 Symbol 包装器对象作为一个属性的键时，这个对象将被强制转换为它的包装过的 symbol 值：</p><pre class="brush: js language-js" style="margin-top: 0px; margin-bottom: 20px; padding: 1em; background-image: url(&quot;../../img/blueprint-dark.fd85a7a074ae.png&quot;); background-position: center top; background-color: rgb(250, 251, 252); font-size: 15px; line-height: 1.5; font-family: consolas, monaco, &quot;Andale Mono&quot;, monospace; color: rgb(59, 60, 64); border-width: 0px 0px 0px 5px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-top-color: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: rgb(85, 138, 187); text-shadow: none; direction: ltr; word-break: normal; word-wrap: normal; hyphens: none;"><code class=" language-js javascript" style="word-wrap: normal; margin: 0px; padding: 0px; border: 0px; font-weight: inherit; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; text-shadow: none; direction: ltr; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none;">var sym = Symbol("foo");
var obj = {[sym]: 1};
obj[sym];            // 1
obj[Object(sym)];    // still 1</code></pre></div></div><div><br></div><div><br></div>

  </article>
{% endblock point1 %}
