{% extends 'c-word.html' %}

{% block title %} Permission - OS | Linux {% endblock title %}

{% block point1 %}
<article contenteditable="true">
  <p><b style="background-color: yellow;">Category: 计算机 | 软件 | 系统软件 | OS | Linux | Permission</b></p>
  <h1 id="blogTitle0">Permission</h1><div><h2 id="blogTitle147">权限管理</h2><div>permission = mode(rwxrwxrwx) + ownership</div><div><br></div><h3 id="blogTitle148">ownership</h3><div>文件的权限管理主要针对三类对象进行定义：</div><div><ul><li>owner：属主，u<br></li><li>group：属组，g<br></li><li>other：其他，o<br></li></ul></div><h3 id="blogTitle149">mode</h3><div>每个文件针对每类访问者都定义了三种权限：</div><div><ul><li>r: Readable<br></li><li>w: Writable<br></li><li>x: eXecutable<br></li></ul></div><div>文件：（默认情况下，用户创建的文件没有执行权限）</div><div><ul><li>r：可使用文件查看类工具读取其内容<br></li><li>w：可修改其内容<br></li><li>x：可以把此文件提请内核启动为一个进程<br></li></ul></div><div>目录：（默认情况下，用户创建的目录有执行权限）</div><div><ul><li>r：可以使用 ls 查看此目录中文件列表<br></li><li>w：可在此目录中创建文件，也可删除此目录中的文件<br></li><li>x：可以使用 ls -l 查看此目录中的文件列表，且可以 cd 进入此目录</li></ul></div><div>权限的表示：</div><pre>--- 000 0<br>--x 001 1
-w- 010 2
-wx 011 3
r-- 100 4
r-x 101 5
rw- 110 6
rwx 111 7

</pre><div><br></div><h3 id="blogTitle150">相关操作</h3><h4 id="blogTitle151">更改权限：chmod</h4><h4 id="blogTitle152">更改文件的属主或属组：chown</h4><h4 id="blogTitle153">只更改文件的属组：chgrp</h4><h4 id="blogTitle154">文件或目录创建时的遮罩码：umask</h4><div>创建文件或目录时的最终权限码：</div><div><ul><li>FILE：666 - umask<br></li><ul><li>Note: 如果某类的用户的权限相减后的结果，存在 x 权限，则将其权限 +1</li></ul><li>DIR：777 - umask<br></li></ul><h3 id="blogTitle155">安全上下文</h3></div><div>前提：文件有属主和属组，进程也有属主和属组</div><div><ul><li>任何一个可执行程序文件能不能启动为进程，取决于发起者对程序文件是否拥有执行权限<br></li><li>启动为进程之后，其进程的属主为发起者；进程的属组为发起者所属的组</li><li>进程访问文件时的权限，取决于进程的发起者</li><ul><li>进程的发起者，同文件的属主，则应用文件的属主权限</li><li>进程的发起应用者，属于文件的属组，则应用文件属组权限</li><li>应用文件的“其它”权限</li></ul></ul></div><h3 id="blogTitle156">Linux 文件系统上的特殊权限</h3><pre>SUID SGID Sticky<br>0    0    0        0<br>.    .    .        .<br>1    1    1        7</pre><div><br></div><div>chmod 4777 /tmp/a.txt</div><div><br></div><div>几个权限位映射：</div><div><ul><li>SUID：映射在 user 上，占据属主的执行权限位<br></li><ul><li>s：user 拥有x 权限</li><li>S：user 没有 x 权限</li></ul><li>SGID：映射在 group 上，占据属组的执行权限位</li><ul><li>s：group 拥有x 权限</li><li>S：group 没有 x 权限</li></ul><li>Sticky：映射在 other 上，占据属其他的执行权限位</li><li><ul><li>t：other 拥有x 权限</li><li>T：other 没有 x 权限</li></ul></li></ul><ul></ul></div><div><br></div><h4 id="blogTitle157">SUID</h4><div><ul><li>任何一个可执行程序文件能不能启动为进程，取决于发起者对程序文件是否拥有执行权限<br></li><li>启动为进程之后，其进程的属主为源程序文件的属主</li><li>权限设定</li><ul><li>chmod u+s FILE...</li><li>chmod u-s FILE...</li></ul></ul></div><h4 id="blogTitle158">SGID</h4><div><ul><li>默认情况下，用户创建文件时，其属组为此用户所属的基本组<br></li><li>一旦某目录设定了 SGID，则对此目录有写权限的用户，在此目录中创建的文件所属的组为此目录的属组<br></li><li>权限设定</li><ul><li>chmod g+s DIR...</li><li>chmod g-s DIR...</li></ul></ul></div><h4 id="blogTitle159">Sticky</h4><div><ul><li>对于一个多人可写的目录，如果设置了sticky 权限，则每个用户仅能删除自己的文件<br></li><li>权限设定</li><ul><li>chmod o+t DIR...</li><li>chmod o-t DIR...</li></ul></ul></div><div><br></div></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div>
</article>
{% endblock point1 %}
